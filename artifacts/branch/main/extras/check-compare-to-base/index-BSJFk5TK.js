var Jy=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Zy=Jy((exports,module)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var assertNever$1={},hasRequiredAssertNever$1;function requireAssertNever$1(){if(hasRequiredAssertNever$1)return assertNever$1;hasRequiredAssertNever$1=1,Object.defineProperty(assertNever$1,"__esModule",{value:!0}),assertNever$1.assertNever=e;function e(t,r){if(typeof r=="string")throw new Error(r);if(typeof r=="function")throw new Error(r(t));if(r)return t;throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(t)))}return assertNever$1.default=e,assertNever$1}var assertNeverExports$1=requireAssertNever$1();const zr=getDefaultExportFromCjs$1(assertNeverExports$1);var ajv={exports:{}},core$1={},validate={},boolSchema={},errors={},codegen={},code$1={},hasRequiredCode$1;function requireCode$1(){return hasRequiredCode$1||(hasRequiredCode$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(j){if(super(),!e.IDENTIFIER.test(j))throw new Error("CodeGen: name must be a valid identifier");this.str=j}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(j){super(),this._items=typeof j=="string"?[j]:j}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const j=this._items[0];return j===""||j==='""'}get str(){var j;return(j=this._str)!==null&&j!==void 0?j:this._str=this._items.reduce((Z,X)=>`${Z}${X}`,"")}get names(){var j;return(j=this._names)!==null&&j!==void 0?j:this._names=this._items.reduce((Z,X)=>(X instanceof r&&(Z[X.str]=(Z[X.str]||0)+1),Z),{})}}e._Code=n,e.nil=new n("");function i(Y,...j){const Z=[Y[0]];let X=0;for(;X<j.length;)d(Z,j[X]),Z.push(Y[++X]);return new n(Z)}e._=i;const a=new n("+");function l(Y,...j){const Z=[P(Y[0])];let X=0;for(;X<j.length;)Z.push(a),d(Z,j[X]),Z.push(a,P(Y[++X]));return p(Z),new n(Z)}e.str=l;function d(Y,j){j instanceof n?Y.push(...j._items):j instanceof r?Y.push(j):Y.push(x(j))}e.addCodeArg=d;function p(Y){let j=1;for(;j<Y.length-1;){if(Y[j]===a){const Z=m(Y[j-1],Y[j+1]);if(Z!==void 0){Y.splice(j-1,3,Z);continue}Y[j++]="+"}j++}}function m(Y,j){if(j==='""')return Y;if(Y==='""')return j;if(typeof Y=="string")return j instanceof r||Y[Y.length-1]!=='"'?void 0:typeof j!="string"?`${Y.slice(0,-1)}${j}"`:j[0]==='"'?Y.slice(0,-1)+j.slice(1):void 0;if(typeof j=="string"&&j[0]==='"'&&!(Y instanceof r))return`"${Y}${j.slice(1)}`}function A(Y,j){return j.emptyStr()?Y:Y.emptyStr()?j:l`${Y}${j}`}e.strConcat=A;function x(Y){return typeof Y=="number"||typeof Y=="boolean"||Y===null?Y:P(Array.isArray(Y)?Y.join(","):Y)}function I(Y){return new n(P(Y))}e.stringify=I;function P(Y){return JSON.stringify(Y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=P;function q(Y){return typeof Y=="string"&&e.IDENTIFIER.test(Y)?new n(`.${Y}`):i`[${Y}]`}e.getProperty=q;function F(Y){if(typeof Y=="string"&&e.IDENTIFIER.test(Y))return new n(`${Y}`);throw new Error(`CodeGen: invalid export name: ${Y}, use explicit $id name mapping`)}e.getEsmExportName=F;function L(Y){return new n(Y.toString())}e.regexpCode=L})(code$1)),code$1}var scope={},hasRequiredScope;function requireScope(){return hasRequiredScope||(hasRequiredScope=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=requireCode$1();class r extends Error{constructor(m){super(`CodeGen: "code" for ${m} not defined`),this.value=m.value}}var n;(function(p){p[p.Started=0]="Started",p[p.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:m,parent:A}={}){this._names={},this._prefixes=m,this._parent=A}toName(m){return m instanceof t.Name?m:this.name(m)}name(m){return new t.Name(this._newName(m))}_newName(m){const A=this._names[m]||this._nameGroup(m);return`${m}${A.index++}`}_nameGroup(m){var A,x;if(!((x=(A=this._parent)===null||A===void 0?void 0:A._prefixes)===null||x===void 0)&&x.has(m)||this._prefixes&&!this._prefixes.has(m))throw new Error(`CodeGen: prefix "${m}" is not allowed in this scope`);return this._names[m]={prefix:m,index:0}}}e.Scope=i;class a extends t.Name{constructor(m,A){super(A),this.prefix=m}setValue(m,{property:A,itemIndex:x}){this.value=m,this.scopePath=(0,t._)`.${new t.Name(A)}[${x}]`}}e.ValueScopeName=a;const l=(0,t._)`\n`;class d extends i{constructor(m){super(m),this._values={},this._scope=m.scope,this.opts={...m,_n:m.lines?l:t.nil}}get(){return this._scope}name(m){return new a(m,this._newName(m))}value(m,A){var x;if(A.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const I=this.toName(m),{prefix:P}=I,q=(x=A.key)!==null&&x!==void 0?x:A.ref;let F=this._values[P];if(F){const j=F.get(q);if(j)return j}else F=this._values[P]=new Map;F.set(q,I);const L=this._scope[P]||(this._scope[P]=[]),Y=L.length;return L[Y]=A.ref,I.setValue(A,{property:P,itemIndex:Y}),I}getValue(m,A){const x=this._values[m];if(x)return x.get(A)}scopeRefs(m,A=this._values){return this._reduceValues(A,x=>{if(x.scopePath===void 0)throw new Error(`CodeGen: name "${x}" has no value`);return(0,t._)`${m}${x.scopePath}`})}scopeCode(m=this._values,A,x){return this._reduceValues(m,I=>{if(I.value===void 0)throw new Error(`CodeGen: name "${I}" has no value`);return I.value.code},A,x)}_reduceValues(m,A,x={},I){let P=t.nil;for(const q in m){const F=m[q];if(!F)continue;const L=x[q]=x[q]||new Map;F.forEach(Y=>{if(L.has(Y))return;L.set(Y,n.Started);let j=A(Y);if(j){const Z=this.opts.es5?e.varKinds.var:e.varKinds.const;P=(0,t._)`${P}${Z} ${Y} = ${j};${this.opts._n}`}else if(j=I?.(Y))P=(0,t._)`${P}${j}${this.opts._n}`;else throw new r(Y);L.set(Y,n.Completed)})}return P}}e.ValueScope=d})(scope)),scope}var hasRequiredCodegen;function requireCodegen(){return hasRequiredCodegen||(hasRequiredCodegen=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=requireCode$1(),r=requireScope();var n=requireCode$1();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var i=requireScope();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class a{optimizeNodes(){return this}optimizeNames(ne,ae){return this}}class l extends a{constructor(ne,ae,$e){super(),this.varKind=ne,this.name=ae,this.rhs=$e}render({es5:ne,_n:ae}){const $e=ne?r.varKinds.var:this.varKind,Je=this.rhs===void 0?"":` = ${this.rhs}`;return`${$e} ${this.name}${Je};`+ae}optimizeNames(ne,ae){if(ne[this.name.str])return this.rhs&&(this.rhs=Ar(this.rhs,ne,ae)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class d extends a{constructor(ne,ae,$e){super(),this.lhs=ne,this.rhs=ae,this.sideEffects=$e}render({_n:ne}){return`${this.lhs} = ${this.rhs};`+ne}optimizeNames(ne,ae){if(!(this.lhs instanceof t.Name&&!ne[this.lhs.str]&&!this.sideEffects))return this.rhs=Ar(this.rhs,ne,ae),this}get names(){const ne=this.lhs instanceof t.Name?{}:{...this.lhs.names};return Qe(ne,this.rhs)}}class p extends d{constructor(ne,ae,$e,Je){super(ne,$e,Je),this.op=ae}render({_n:ne}){return`${this.lhs} ${this.op}= ${this.rhs};`+ne}}class m extends a{constructor(ne){super(),this.label=ne,this.names={}}render({_n:ne}){return`${this.label}:`+ne}}class A extends a{constructor(ne){super(),this.label=ne,this.names={}}render({_n:ne}){return`break${this.label?` ${this.label}`:""};`+ne}}class x extends a{constructor(ne){super(),this.error=ne}render({_n:ne}){return`throw ${this.error};`+ne}get names(){return this.error.names}}class I extends a{constructor(ne){super(),this.code=ne}render({_n:ne}){return`${this.code};`+ne}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(ne,ae){return this.code=Ar(this.code,ne,ae),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class P extends a{constructor(ne=[]){super(),this.nodes=ne}render(ne){return this.nodes.reduce((ae,$e)=>ae+$e.render(ne),"")}optimizeNodes(){const{nodes:ne}=this;let ae=ne.length;for(;ae--;){const $e=ne[ae].optimizeNodes();Array.isArray($e)?ne.splice(ae,1,...$e):$e?ne[ae]=$e:ne.splice(ae,1)}return ne.length>0?this:void 0}optimizeNames(ne,ae){const{nodes:$e}=this;let Je=$e.length;for(;Je--;){const Ke=$e[Je];Ke.optimizeNames(ne,ae)||(Os(ne,Ke.names),$e.splice(Je,1))}return $e.length>0?this:void 0}get names(){return this.nodes.reduce((ne,ae)=>Re(ne,ae.names),{})}}class q extends P{render(ne){return"{"+ne._n+super.render(ne)+"}"+ne._n}}class F extends P{}class L extends q{}L.kind="else";class Y extends q{constructor(ne,ae){super(ae),this.condition=ne}render(ne){let ae=`if(${this.condition})`+super.render(ne);return this.else&&(ae+="else "+this.else.render(ne)),ae}optimizeNodes(){super.optimizeNodes();const ne=this.condition;if(ne===!0)return this.nodes;let ae=this.else;if(ae){const $e=ae.optimizeNodes();ae=this.else=Array.isArray($e)?new L($e):$e}if(ae)return ne===!1?ae instanceof Y?ae:ae.nodes:this.nodes.length?this:new Y(ji(ne),ae instanceof Y?[ae]:ae.nodes);if(!(ne===!1||!this.nodes.length))return this}optimizeNames(ne,ae){var $e;if(this.else=($e=this.else)===null||$e===void 0?void 0:$e.optimizeNames(ne,ae),!!(super.optimizeNames(ne,ae)||this.else))return this.condition=Ar(this.condition,ne,ae),this}get names(){const ne=super.names;return Qe(ne,this.condition),this.else&&Re(ne,this.else.names),ne}}Y.kind="if";class j extends q{}j.kind="for";class Z extends j{constructor(ne){super(),this.iteration=ne}render(ne){return`for(${this.iteration})`+super.render(ne)}optimizeNames(ne,ae){if(super.optimizeNames(ne,ae))return this.iteration=Ar(this.iteration,ne,ae),this}get names(){return Re(super.names,this.iteration.names)}}class X extends j{constructor(ne,ae,$e,Je){super(),this.varKind=ne,this.name=ae,this.from=$e,this.to=Je}render(ne){const ae=ne.es5?r.varKinds.var:this.varKind,{name:$e,from:Je,to:Ke}=this;return`for(${ae} ${$e}=${Je}; ${$e}<${Ke}; ${$e}++)`+super.render(ne)}get names(){const ne=Qe(super.names,this.from);return Qe(ne,this.to)}}class Q extends j{constructor(ne,ae,$e,Je){super(),this.loop=ne,this.varKind=ae,this.name=$e,this.iterable=Je}render(ne){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(ne)}optimizeNames(ne,ae){if(super.optimizeNames(ne,ae))return this.iterable=Ar(this.iterable,ne,ae),this}get names(){return Re(super.names,this.iterable.names)}}class J extends q{constructor(ne,ae,$e){super(),this.name=ne,this.args=ae,this.async=$e}render(ne){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(ne)}}J.kind="func";class ee extends P{render(ne){return"return "+super.render(ne)}}ee.kind="return";class ie extends q{render(ne){let ae="try"+super.render(ne);return this.catch&&(ae+=this.catch.render(ne)),this.finally&&(ae+=this.finally.render(ne)),ae}optimizeNodes(){var ne,ae;return super.optimizeNodes(),(ne=this.catch)===null||ne===void 0||ne.optimizeNodes(),(ae=this.finally)===null||ae===void 0||ae.optimizeNodes(),this}optimizeNames(ne,ae){var $e,Je;return super.optimizeNames(ne,ae),($e=this.catch)===null||$e===void 0||$e.optimizeNames(ne,ae),(Je=this.finally)===null||Je===void 0||Je.optimizeNames(ne,ae),this}get names(){const ne=super.names;return this.catch&&Re(ne,this.catch.names),this.finally&&Re(ne,this.finally.names),ne}}class de extends q{constructor(ne){super(),this.error=ne}render(ne){return`catch(${this.error})`+super.render(ne)}}de.kind="catch";class fe extends q{render(ne){return"finally"+super.render(ne)}}fe.kind="finally";class _e{constructor(ne,ae={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...ae,_n:ae.lines?`
`:""},this._extScope=ne,this._scope=new r.Scope({parent:ne}),this._nodes=[new F]}toString(){return this._root.render(this.opts)}name(ne){return this._scope.name(ne)}scopeName(ne){return this._extScope.name(ne)}scopeValue(ne,ae){const $e=this._extScope.value(ne,ae);return(this._values[$e.prefix]||(this._values[$e.prefix]=new Set)).add($e),$e}getScopeValue(ne,ae){return this._extScope.getValue(ne,ae)}scopeRefs(ne){return this._extScope.scopeRefs(ne,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(ne,ae,$e,Je){const Ke=this._scope.toName(ae);return $e!==void 0&&Je&&(this._constants[Ke.str]=$e),this._leafNode(new l(ne,Ke,$e)),Ke}const(ne,ae,$e){return this._def(r.varKinds.const,ne,ae,$e)}let(ne,ae,$e){return this._def(r.varKinds.let,ne,ae,$e)}var(ne,ae,$e){return this._def(r.varKinds.var,ne,ae,$e)}assign(ne,ae,$e){return this._leafNode(new d(ne,ae,$e))}add(ne,ae){return this._leafNode(new p(ne,e.operators.ADD,ae))}code(ne){return typeof ne=="function"?ne():ne!==t.nil&&this._leafNode(new I(ne)),this}object(...ne){const ae=["{"];for(const[$e,Je]of ne)ae.length>1&&ae.push(","),ae.push($e),($e!==Je||this.opts.es5)&&(ae.push(":"),(0,t.addCodeArg)(ae,Je));return ae.push("}"),new t._Code(ae)}if(ne,ae,$e){if(this._blockNode(new Y(ne)),ae&&$e)this.code(ae).else().code($e).endIf();else if(ae)this.code(ae).endIf();else if($e)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(ne){return this._elseNode(new Y(ne))}else(){return this._elseNode(new L)}endIf(){return this._endBlockNode(Y,L)}_for(ne,ae){return this._blockNode(ne),ae&&this.code(ae).endFor(),this}for(ne,ae){return this._for(new Z(ne),ae)}forRange(ne,ae,$e,Je,Ke=this.opts.es5?r.varKinds.var:r.varKinds.let){const bt=this._scope.toName(ne);return this._for(new X(Ke,bt,ae,$e),()=>Je(bt))}forOf(ne,ae,$e,Je=r.varKinds.const){const Ke=this._scope.toName(ne);if(this.opts.es5){const bt=ae instanceof t.Name?ae:this.var("_arr",ae);return this.forRange("_i",0,(0,t._)`${bt}.length`,bs=>{this.var(Ke,(0,t._)`${bt}[${bs}]`),$e(Ke)})}return this._for(new Q("of",Je,Ke,ae),()=>$e(Ke))}forIn(ne,ae,$e,Je=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(ne,(0,t._)`Object.keys(${ae})`,$e);const Ke=this._scope.toName(ne);return this._for(new Q("in",Je,Ke,ae),()=>$e(Ke))}endFor(){return this._endBlockNode(j)}label(ne){return this._leafNode(new m(ne))}break(ne){return this._leafNode(new A(ne))}return(ne){const ae=new ee;if(this._blockNode(ae),this.code(ne),ae.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(ee)}try(ne,ae,$e){if(!ae&&!$e)throw new Error('CodeGen: "try" without "catch" and "finally"');const Je=new ie;if(this._blockNode(Je),this.code(ne),ae){const Ke=this.name("e");this._currNode=Je.catch=new de(Ke),ae(Ke)}return $e&&(this._currNode=Je.finally=new fe,this.code($e)),this._endBlockNode(de,fe)}throw(ne){return this._leafNode(new x(ne))}block(ne,ae){return this._blockStarts.push(this._nodes.length),ne&&this.code(ne).endBlock(ae),this}endBlock(ne){const ae=this._blockStarts.pop();if(ae===void 0)throw new Error("CodeGen: not in self-balancing block");const $e=this._nodes.length-ae;if($e<0||ne!==void 0&&$e!==ne)throw new Error(`CodeGen: wrong number of nodes: ${$e} vs ${ne} expected`);return this._nodes.length=ae,this}func(ne,ae=t.nil,$e,Je){return this._blockNode(new J(ne,ae,$e)),Je&&this.code(Je).endFunc(),this}endFunc(){return this._endBlockNode(J)}optimize(ne=1){for(;ne-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(ne){return this._currNode.nodes.push(ne),this}_blockNode(ne){this._currNode.nodes.push(ne),this._nodes.push(ne)}_endBlockNode(ne,ae){const $e=this._currNode;if($e instanceof ne||ae&&$e instanceof ae)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${ae?`${ne.kind}/${ae.kind}`:ne.kind}"`)}_elseNode(ne){const ae=this._currNode;if(!(ae instanceof Y))throw new Error('CodeGen: "else" without "if"');return this._currNode=ae.else=ne,this}get _root(){return this._nodes[0]}get _currNode(){const ne=this._nodes;return ne[ne.length-1]}set _currNode(ne){const ae=this._nodes;ae[ae.length-1]=ne}}e.CodeGen=_e;function Re(Le,ne){for(const ae in ne)Le[ae]=(Le[ae]||0)+(ne[ae]||0);return Le}function Qe(Le,ne){return ne instanceof t._CodeOrName?Re(Le,ne.names):Le}function Ar(Le,ne,ae){if(Le instanceof t.Name)return $e(Le);if(!Je(Le))return Le;return new t._Code(Le._items.reduce((Ke,bt)=>(bt instanceof t.Name&&(bt=$e(bt)),bt instanceof t._Code?Ke.push(...bt._items):Ke.push(bt),Ke),[]));function $e(Ke){const bt=ae[Ke.str];return bt===void 0||ne[Ke.str]!==1?Ke:(delete ne[Ke.str],bt)}function Je(Ke){return Ke instanceof t._Code&&Ke._items.some(bt=>bt instanceof t.Name&&ne[bt.str]===1&&ae[bt.str]!==void 0)}}function Os(Le,ne){for(const ae in ne)Le[ae]=(Le[ae]||0)-(ne[ae]||0)}function ji(Le){return typeof Le=="boolean"||typeof Le=="number"||Le===null?!Le:(0,t._)`!${qe(Le)}`}e.not=ji;const Ui=ke(e.operators.AND);function hi(...Le){return Le.reduce(Ui)}e.and=hi;const ca=ke(e.operators.OR);function Ue(...Le){return Le.reduce(ca)}e.or=Ue;function ke(Le){return(ne,ae)=>ne===t.nil?ae:ae===t.nil?ne:(0,t._)`${qe(ne)} ${Le} ${qe(ae)}`}function qe(Le){return Le instanceof t.Name?Le:(0,t._)`(${Le})`}})(codegen)),codegen}var util={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1,Object.defineProperty(util,"__esModule",{value:!0}),util.checkStrictMode=util.getErrorPath=util.Type=util.useFunc=util.setEvaluated=util.evaluatedPropsToName=util.mergeEvaluated=util.eachItem=util.unescapeJsonPointer=util.escapeJsonPointer=util.escapeFragment=util.unescapeFragment=util.schemaRefOrVal=util.schemaHasRulesButRef=util.schemaHasRules=util.checkUnknownRules=util.alwaysValidSchema=util.toHash=void 0;const e=requireCodegen(),t=requireCode$1();function r(Q){const J={};for(const ee of Q)J[ee]=!0;return J}util.toHash=r;function n(Q,J){return typeof J=="boolean"?J:Object.keys(J).length===0?!0:(i(Q,J),!a(J,Q.self.RULES.all))}util.alwaysValidSchema=n;function i(Q,J=Q.schema){const{opts:ee,self:ie}=Q;if(!ee.strictSchema||typeof J=="boolean")return;const de=ie.RULES.keywords;for(const fe in J)de[fe]||X(Q,`unknown keyword: "${fe}"`)}util.checkUnknownRules=i;function a(Q,J){if(typeof Q=="boolean")return!Q;for(const ee in Q)if(J[ee])return!0;return!1}util.schemaHasRules=a;function l(Q,J){if(typeof Q=="boolean")return!Q;for(const ee in Q)if(ee!=="$ref"&&J.all[ee])return!0;return!1}util.schemaHasRulesButRef=l;function d({topSchemaRef:Q,schemaPath:J},ee,ie,de){if(!de){if(typeof ee=="number"||typeof ee=="boolean")return ee;if(typeof ee=="string")return(0,e._)`${ee}`}return(0,e._)`${Q}${J}${(0,e.getProperty)(ie)}`}util.schemaRefOrVal=d;function p(Q){return x(decodeURIComponent(Q))}util.unescapeFragment=p;function m(Q){return encodeURIComponent(A(Q))}util.escapeFragment=m;function A(Q){return typeof Q=="number"?`${Q}`:Q.replace(/~/g,"~0").replace(/\//g,"~1")}util.escapeJsonPointer=A;function x(Q){return Q.replace(/~1/g,"/").replace(/~0/g,"~")}util.unescapeJsonPointer=x;function I(Q,J){if(Array.isArray(Q))for(const ee of Q)J(ee);else J(Q)}util.eachItem=I;function P({mergeNames:Q,mergeToName:J,mergeValues:ee,resultToName:ie}){return(de,fe,_e,Re)=>{const Qe=_e===void 0?fe:_e instanceof e.Name?(fe instanceof e.Name?Q(de,fe,_e):J(de,fe,_e),_e):fe instanceof e.Name?(J(de,_e,fe),fe):ee(fe,_e);return Re===e.Name&&!(Qe instanceof e.Name)?ie(de,Qe):Qe}}util.mergeEvaluated={props:P({mergeNames:(Q,J,ee)=>Q.if((0,e._)`${ee} !== true && ${J} !== undefined`,()=>{Q.if((0,e._)`${J} === true`,()=>Q.assign(ee,!0),()=>Q.assign(ee,(0,e._)`${ee} || {}`).code((0,e._)`Object.assign(${ee}, ${J})`))}),mergeToName:(Q,J,ee)=>Q.if((0,e._)`${ee} !== true`,()=>{J===!0?Q.assign(ee,!0):(Q.assign(ee,(0,e._)`${ee} || {}`),F(Q,ee,J))}),mergeValues:(Q,J)=>Q===!0?!0:{...Q,...J},resultToName:q}),items:P({mergeNames:(Q,J,ee)=>Q.if((0,e._)`${ee} !== true && ${J} !== undefined`,()=>Q.assign(ee,(0,e._)`${J} === true ? true : ${ee} > ${J} ? ${ee} : ${J}`)),mergeToName:(Q,J,ee)=>Q.if((0,e._)`${ee} !== true`,()=>Q.assign(ee,J===!0?!0:(0,e._)`${ee} > ${J} ? ${ee} : ${J}`)),mergeValues:(Q,J)=>Q===!0?!0:Math.max(Q,J),resultToName:(Q,J)=>Q.var("items",J)})};function q(Q,J){if(J===!0)return Q.var("props",!0);const ee=Q.var("props",(0,e._)`{}`);return J!==void 0&&F(Q,ee,J),ee}util.evaluatedPropsToName=q;function F(Q,J,ee){Object.keys(ee).forEach(ie=>Q.assign((0,e._)`${J}${(0,e.getProperty)(ie)}`,!0))}util.setEvaluated=F;const L={};function Y(Q,J){return Q.scopeValue("func",{ref:J,code:L[J.code]||(L[J.code]=new t._Code(J.code))})}util.useFunc=Y;var j;(function(Q){Q[Q.Num=0]="Num",Q[Q.Str=1]="Str"})(j||(util.Type=j={}));function Z(Q,J,ee){if(Q instanceof e.Name){const ie=J===j.Num;return ee?ie?(0,e._)`"[" + ${Q} + "]"`:(0,e._)`"['" + ${Q} + "']"`:ie?(0,e._)`"/" + ${Q}`:(0,e._)`"/" + ${Q}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return ee?(0,e.getProperty)(Q).toString():"/"+A(Q)}util.getErrorPath=Z;function X(Q,J,ee=Q.opts.strictSchema){if(ee){if(J=`strict mode: ${J}`,ee===!0)throw new Error(J);Q.self.logger.warn(J)}}return util.checkStrictMode=X,util}var names={},hasRequiredNames;function requireNames(){if(hasRequiredNames)return names;hasRequiredNames=1,Object.defineProperty(names,"__esModule",{value:!0});const e=requireCodegen(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return names.default=t,names}var hasRequiredErrors;function requireErrors(){return hasRequiredErrors||(hasRequiredErrors=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=requireCodegen(),r=requireUtil(),n=requireNames();e.keywordError={message:({keyword:L})=>(0,t.str)`must pass "${L}" keyword validation`},e.keyword$DataError={message:({keyword:L,schemaType:Y})=>Y?(0,t.str)`"${L}" keyword must be ${Y} ($data)`:(0,t.str)`"${L}" keyword is invalid ($data)`};function i(L,Y=e.keywordError,j,Z){const{it:X}=L,{gen:Q,compositeRule:J,allErrors:ee}=X,ie=x(L,Y,j);Z??(J||ee)?p(Q,ie):m(X,(0,t._)`[${ie}]`)}e.reportError=i;function a(L,Y=e.keywordError,j){const{it:Z}=L,{gen:X,compositeRule:Q,allErrors:J}=Z,ee=x(L,Y,j);p(X,ee),Q||J||m(Z,n.default.vErrors)}e.reportExtraError=a;function l(L,Y){L.assign(n.default.errors,Y),L.if((0,t._)`${n.default.vErrors} !== null`,()=>L.if(Y,()=>L.assign((0,t._)`${n.default.vErrors}.length`,Y),()=>L.assign(n.default.vErrors,null)))}e.resetErrorsCount=l;function d({gen:L,keyword:Y,schemaValue:j,data:Z,errsCount:X,it:Q}){if(X===void 0)throw new Error("ajv implementation error");const J=L.name("err");L.forRange("i",X,n.default.errors,ee=>{L.const(J,(0,t._)`${n.default.vErrors}[${ee}]`),L.if((0,t._)`${J}.instancePath === undefined`,()=>L.assign((0,t._)`${J}.instancePath`,(0,t.strConcat)(n.default.instancePath,Q.errorPath))),L.assign((0,t._)`${J}.schemaPath`,(0,t.str)`${Q.errSchemaPath}/${Y}`),Q.opts.verbose&&(L.assign((0,t._)`${J}.schema`,j),L.assign((0,t._)`${J}.data`,Z))})}e.extendErrors=d;function p(L,Y){const j=L.const("err",Y);L.if((0,t._)`${n.default.vErrors} === null`,()=>L.assign(n.default.vErrors,(0,t._)`[${j}]`),(0,t._)`${n.default.vErrors}.push(${j})`),L.code((0,t._)`${n.default.errors}++`)}function m(L,Y){const{gen:j,validateName:Z,schemaEnv:X}=L;X.$async?j.throw((0,t._)`new ${L.ValidationError}(${Y})`):(j.assign((0,t._)`${Z}.errors`,Y),j.return(!1))}const A={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function x(L,Y,j){const{createErrors:Z}=L.it;return Z===!1?(0,t._)`{}`:I(L,Y,j)}function I(L,Y,j={}){const{gen:Z,it:X}=L,Q=[P(X,j),q(L,j)];return F(L,Y,Q),Z.object(...Q)}function P({errorPath:L},{instancePath:Y}){const j=Y?(0,t.str)`${L}${(0,r.getErrorPath)(Y,r.Type.Str)}`:L;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,j)]}function q({keyword:L,it:{errSchemaPath:Y}},{schemaPath:j,parentSchema:Z}){let X=Z?Y:(0,t.str)`${Y}/${L}`;return j&&(X=(0,t.str)`${X}${(0,r.getErrorPath)(j,r.Type.Str)}`),[A.schemaPath,X]}function F(L,{params:Y,message:j},Z){const{keyword:X,data:Q,schemaValue:J,it:ee}=L,{opts:ie,propertyName:de,topSchemaRef:fe,schemaPath:_e}=ee;Z.push([A.keyword,X],[A.params,typeof Y=="function"?Y(L):Y||(0,t._)`{}`]),ie.messages&&Z.push([A.message,typeof j=="function"?j(L):j]),ie.verbose&&Z.push([A.schema,J],[A.parentSchema,(0,t._)`${fe}${_e}`],[n.default.data,Q]),de&&Z.push([A.propertyName,de])}})(errors)),errors}var hasRequiredBoolSchema;function requireBoolSchema(){if(hasRequiredBoolSchema)return boolSchema;hasRequiredBoolSchema=1,Object.defineProperty(boolSchema,"__esModule",{value:!0}),boolSchema.boolOrEmptySchema=boolSchema.topBoolOrEmptySchema=void 0;const e=requireErrors(),t=requireCodegen(),r=requireNames(),n={message:"boolean schema is false"};function i(d){const{gen:p,schema:m,validateName:A}=d;m===!1?l(d,!1):typeof m=="object"&&m.$async===!0?p.return(r.default.data):(p.assign((0,t._)`${A}.errors`,null),p.return(!0))}boolSchema.topBoolOrEmptySchema=i;function a(d,p){const{gen:m,schema:A}=d;A===!1?(m.var(p,!1),l(d)):m.var(p,!0)}boolSchema.boolOrEmptySchema=a;function l(d,p){const{gen:m,data:A}=d,x={gen:m,keyword:"false schema",data:A,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:d};(0,e.reportError)(x,n,void 0,p)}return boolSchema}var dataType={},rules={},hasRequiredRules;function requireRules(){if(hasRequiredRules)return rules;hasRequiredRules=1,Object.defineProperty(rules,"__esModule",{value:!0}),rules.getRules=rules.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function r(i){return typeof i=="string"&&t.has(i)}rules.isJSONType=r;function n(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return rules.getRules=n,rules}var applicability={},hasRequiredApplicability;function requireApplicability(){if(hasRequiredApplicability)return applicability;hasRequiredApplicability=1,Object.defineProperty(applicability,"__esModule",{value:!0}),applicability.shouldUseRule=applicability.shouldUseGroup=applicability.schemaHasRulesForType=void 0;function e({schema:n,self:i},a){const l=i.RULES.types[a];return l&&l!==!0&&t(n,l)}applicability.schemaHasRulesForType=e;function t(n,i){return i.rules.some(a=>r(n,a))}applicability.shouldUseGroup=t;function r(n,i){var a;return n[i.keyword]!==void 0||((a=i.definition.implements)===null||a===void 0?void 0:a.some(l=>n[l]!==void 0))}return applicability.shouldUseRule=r,applicability}var hasRequiredDataType;function requireDataType(){if(hasRequiredDataType)return dataType;hasRequiredDataType=1,Object.defineProperty(dataType,"__esModule",{value:!0}),dataType.reportTypeError=dataType.checkDataTypes=dataType.checkDataType=dataType.coerceAndCheckDataType=dataType.getJSONTypes=dataType.getSchemaTypes=dataType.DataType=void 0;const e=requireRules(),t=requireApplicability(),r=requireErrors(),n=requireCodegen(),i=requireUtil();var a;(function(j){j[j.Correct=0]="Correct",j[j.Wrong=1]="Wrong"})(a||(dataType.DataType=a={}));function l(j){const Z=d(j.type);if(Z.includes("null")){if(j.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!Z.length&&j.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');j.nullable===!0&&Z.push("null")}return Z}dataType.getSchemaTypes=l;function d(j){const Z=Array.isArray(j)?j:j?[j]:[];if(Z.every(e.isJSONType))return Z;throw new Error("type must be JSONType or JSONType[]: "+Z.join(","))}dataType.getJSONTypes=d;function p(j,Z){const{gen:X,data:Q,opts:J}=j,ee=A(Z,J.coerceTypes),ie=Z.length>0&&!(ee.length===0&&Z.length===1&&(0,t.schemaHasRulesForType)(j,Z[0]));if(ie){const de=q(Z,Q,J.strictNumbers,a.Wrong);X.if(de,()=>{ee.length?x(j,Z,ee):L(j)})}return ie}dataType.coerceAndCheckDataType=p;const m=new Set(["string","number","integer","boolean","null"]);function A(j,Z){return Z?j.filter(X=>m.has(X)||Z==="array"&&X==="array"):[]}function x(j,Z,X){const{gen:Q,data:J,opts:ee}=j,ie=Q.let("dataType",(0,n._)`typeof ${J}`),de=Q.let("coerced",(0,n._)`undefined`);ee.coerceTypes==="array"&&Q.if((0,n._)`${ie} == 'object' && Array.isArray(${J}) && ${J}.length == 1`,()=>Q.assign(J,(0,n._)`${J}[0]`).assign(ie,(0,n._)`typeof ${J}`).if(q(Z,J,ee.strictNumbers),()=>Q.assign(de,J))),Q.if((0,n._)`${de} !== undefined`);for(const _e of X)(m.has(_e)||_e==="array"&&ee.coerceTypes==="array")&&fe(_e);Q.else(),L(j),Q.endIf(),Q.if((0,n._)`${de} !== undefined`,()=>{Q.assign(J,de),I(j,de)});function fe(_e){switch(_e){case"string":Q.elseIf((0,n._)`${ie} == "number" || ${ie} == "boolean"`).assign(de,(0,n._)`"" + ${J}`).elseIf((0,n._)`${J} === null`).assign(de,(0,n._)`""`);return;case"number":Q.elseIf((0,n._)`${ie} == "boolean" || ${J} === null
              || (${ie} == "string" && ${J} && ${J} == +${J})`).assign(de,(0,n._)`+${J}`);return;case"integer":Q.elseIf((0,n._)`${ie} === "boolean" || ${J} === null
              || (${ie} === "string" && ${J} && ${J} == +${J} && !(${J} % 1))`).assign(de,(0,n._)`+${J}`);return;case"boolean":Q.elseIf((0,n._)`${J} === "false" || ${J} === 0 || ${J} === null`).assign(de,!1).elseIf((0,n._)`${J} === "true" || ${J} === 1`).assign(de,!0);return;case"null":Q.elseIf((0,n._)`${J} === "" || ${J} === 0 || ${J} === false`),Q.assign(de,null);return;case"array":Q.elseIf((0,n._)`${ie} === "string" || ${ie} === "number"
              || ${ie} === "boolean" || ${J} === null`).assign(de,(0,n._)`[${J}]`)}}}function I({gen:j,parentData:Z,parentDataProperty:X},Q){j.if((0,n._)`${Z} !== undefined`,()=>j.assign((0,n._)`${Z}[${X}]`,Q))}function P(j,Z,X,Q=a.Correct){const J=Q===a.Correct?n.operators.EQ:n.operators.NEQ;let ee;switch(j){case"null":return(0,n._)`${Z} ${J} null`;case"array":ee=(0,n._)`Array.isArray(${Z})`;break;case"object":ee=(0,n._)`${Z} && typeof ${Z} == "object" && !Array.isArray(${Z})`;break;case"integer":ee=ie((0,n._)`!(${Z} % 1) && !isNaN(${Z})`);break;case"number":ee=ie();break;default:return(0,n._)`typeof ${Z} ${J} ${j}`}return Q===a.Correct?ee:(0,n.not)(ee);function ie(de=n.nil){return(0,n.and)((0,n._)`typeof ${Z} == "number"`,de,X?(0,n._)`isFinite(${Z})`:n.nil)}}dataType.checkDataType=P;function q(j,Z,X,Q){if(j.length===1)return P(j[0],Z,X,Q);let J;const ee=(0,i.toHash)(j);if(ee.array&&ee.object){const ie=(0,n._)`typeof ${Z} != "object"`;J=ee.null?ie:(0,n._)`!${Z} || ${ie}`,delete ee.null,delete ee.array,delete ee.object}else J=n.nil;ee.number&&delete ee.integer;for(const ie in ee)J=(0,n.and)(J,P(ie,Z,X,Q));return J}dataType.checkDataTypes=q;const F={message:({schema:j})=>`must be ${j}`,params:({schema:j,schemaValue:Z})=>typeof j=="string"?(0,n._)`{type: ${j}}`:(0,n._)`{type: ${Z}}`};function L(j){const Z=Y(j);(0,r.reportError)(Z,F)}dataType.reportTypeError=L;function Y(j){const{gen:Z,data:X,schema:Q}=j,J=(0,i.schemaRefOrVal)(j,Q,"type");return{gen:Z,keyword:"type",data:X,schema:Q.type,schemaCode:J,schemaValue:J,parentSchema:Q,params:{},it:j}}return dataType}var defaults$1={},hasRequiredDefaults;function requireDefaults(){if(hasRequiredDefaults)return defaults$1;hasRequiredDefaults=1,Object.defineProperty(defaults$1,"__esModule",{value:!0}),defaults$1.assignDefaults=void 0;const e=requireCodegen(),t=requireUtil();function r(i,a){const{properties:l,items:d}=i.schema;if(a==="object"&&l)for(const p in l)n(i,p,l[p].default);else a==="array"&&Array.isArray(d)&&d.forEach((p,m)=>n(i,m,p.default))}defaults$1.assignDefaults=r;function n(i,a,l){const{gen:d,compositeRule:p,data:m,opts:A}=i;if(l===void 0)return;const x=(0,e._)`${m}${(0,e.getProperty)(a)}`;if(p){(0,t.checkStrictMode)(i,`default is ignored for: ${x}`);return}let I=(0,e._)`${x} === undefined`;A.useDefaults==="empty"&&(I=(0,e._)`${I} || ${x} === null || ${x} === ""`),d.if(I,(0,e._)`${x} = ${(0,e.stringify)(l)}`)}return defaults$1}var keyword={},code={},hasRequiredCode;function requireCode(){if(hasRequiredCode)return code;hasRequiredCode=1,Object.defineProperty(code,"__esModule",{value:!0}),code.validateUnion=code.validateArray=code.usePattern=code.callValidateCode=code.schemaProperties=code.allSchemaProperties=code.noPropertyInData=code.propertyInData=code.isOwnProperty=code.hasPropFunc=code.reportMissingProp=code.checkMissingProp=code.checkReportMissingProp=void 0;const e=requireCodegen(),t=requireUtil(),r=requireNames(),n=requireUtil();function i(j,Z){const{gen:X,data:Q,it:J}=j;X.if(A(X,Q,Z,J.opts.ownProperties),()=>{j.setParams({missingProperty:(0,e._)`${Z}`},!0),j.error()})}code.checkReportMissingProp=i;function a({gen:j,data:Z,it:{opts:X}},Q,J){return(0,e.or)(...Q.map(ee=>(0,e.and)(A(j,Z,ee,X.ownProperties),(0,e._)`${J} = ${ee}`)))}code.checkMissingProp=a;function l(j,Z){j.setParams({missingProperty:Z},!0),j.error()}code.reportMissingProp=l;function d(j){return j.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}code.hasPropFunc=d;function p(j,Z,X){return(0,e._)`${d(j)}.call(${Z}, ${X})`}code.isOwnProperty=p;function m(j,Z,X,Q){const J=(0,e._)`${Z}${(0,e.getProperty)(X)} !== undefined`;return Q?(0,e._)`${J} && ${p(j,Z,X)}`:J}code.propertyInData=m;function A(j,Z,X,Q){const J=(0,e._)`${Z}${(0,e.getProperty)(X)} === undefined`;return Q?(0,e.or)(J,(0,e.not)(p(j,Z,X))):J}code.noPropertyInData=A;function x(j){return j?Object.keys(j).filter(Z=>Z!=="__proto__"):[]}code.allSchemaProperties=x;function I(j,Z){return x(Z).filter(X=>!(0,t.alwaysValidSchema)(j,Z[X]))}code.schemaProperties=I;function P({schemaCode:j,data:Z,it:{gen:X,topSchemaRef:Q,schemaPath:J,errorPath:ee},it:ie},de,fe,_e){const Re=_e?(0,e._)`${j}, ${Z}, ${Q}${J}`:Z,Qe=[[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,ee)],[r.default.parentData,ie.parentData],[r.default.parentDataProperty,ie.parentDataProperty],[r.default.rootData,r.default.rootData]];ie.opts.dynamicRef&&Qe.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const Ar=(0,e._)`${Re}, ${X.object(...Qe)}`;return fe!==e.nil?(0,e._)`${de}.call(${fe}, ${Ar})`:(0,e._)`${de}(${Ar})`}code.callValidateCode=P;const q=(0,e._)`new RegExp`;function F({gen:j,it:{opts:Z}},X){const Q=Z.unicodeRegExp?"u":"",{regExp:J}=Z.code,ee=J(X,Q);return j.scopeValue("pattern",{key:ee.toString(),ref:ee,code:(0,e._)`${J.code==="new RegExp"?q:(0,n.useFunc)(j,J)}(${X}, ${Q})`})}code.usePattern=F;function L(j){const{gen:Z,data:X,keyword:Q,it:J}=j,ee=Z.name("valid");if(J.allErrors){const de=Z.let("valid",!0);return ie(()=>Z.assign(de,!1)),de}return Z.var(ee,!0),ie(()=>Z.break()),ee;function ie(de){const fe=Z.const("len",(0,e._)`${X}.length`);Z.forRange("i",0,fe,_e=>{j.subschema({keyword:Q,dataProp:_e,dataPropType:t.Type.Num},ee),Z.if((0,e.not)(ee),de)})}}code.validateArray=L;function Y(j){const{gen:Z,schema:X,keyword:Q,it:J}=j;if(!Array.isArray(X))throw new Error("ajv implementation error");if(X.some(fe=>(0,t.alwaysValidSchema)(J,fe))&&!J.opts.unevaluated)return;const ie=Z.let("valid",!1),de=Z.name("_valid");Z.block(()=>X.forEach((fe,_e)=>{const Re=j.subschema({keyword:Q,schemaProp:_e,compositeRule:!0},de);Z.assign(ie,(0,e._)`${ie} || ${de}`),j.mergeValidEvaluated(Re,de)||Z.if((0,e.not)(ie))})),j.result(ie,()=>j.reset(),()=>j.error(!0))}return code.validateUnion=Y,code}var hasRequiredKeyword;function requireKeyword(){if(hasRequiredKeyword)return keyword;hasRequiredKeyword=1,Object.defineProperty(keyword,"__esModule",{value:!0}),keyword.validateKeywordUsage=keyword.validSchemaType=keyword.funcKeywordCode=keyword.macroKeywordCode=void 0;const e=requireCodegen(),t=requireNames(),r=requireCode(),n=requireErrors();function i(I,P){const{gen:q,keyword:F,schema:L,parentSchema:Y,it:j}=I,Z=P.macro.call(j.self,L,Y,j),X=m(q,F,Z);j.opts.validateSchema!==!1&&j.self.validateSchema(Z,!0);const Q=q.name("valid");I.subschema({schema:Z,schemaPath:e.nil,errSchemaPath:`${j.errSchemaPath}/${F}`,topSchemaRef:X,compositeRule:!0},Q),I.pass(Q,()=>I.error(!0))}keyword.macroKeywordCode=i;function a(I,P){var q;const{gen:F,keyword:L,schema:Y,parentSchema:j,$data:Z,it:X}=I;p(X,P);const Q=!Z&&P.compile?P.compile.call(X.self,Y,j,X):P.validate,J=m(F,L,Q),ee=F.let("valid");I.block$data(ee,ie),I.ok((q=P.valid)!==null&&q!==void 0?q:ee);function ie(){if(P.errors===!1)_e(),P.modifying&&l(I),Re(()=>I.error());else{const Qe=P.async?de():fe();P.modifying&&l(I),Re(()=>d(I,Qe))}}function de(){const Qe=F.let("ruleErrs",null);return F.try(()=>_e((0,e._)`await `),Ar=>F.assign(ee,!1).if((0,e._)`${Ar} instanceof ${X.ValidationError}`,()=>F.assign(Qe,(0,e._)`${Ar}.errors`),()=>F.throw(Ar))),Qe}function fe(){const Qe=(0,e._)`${J}.errors`;return F.assign(Qe,null),_e(e.nil),Qe}function _e(Qe=P.async?(0,e._)`await `:e.nil){const Ar=X.opts.passContext?t.default.this:t.default.self,Os=!("compile"in P&&!Z||P.schema===!1);F.assign(ee,(0,e._)`${Qe}${(0,r.callValidateCode)(I,J,Ar,Os)}`,P.modifying)}function Re(Qe){var Ar;F.if((0,e.not)((Ar=P.valid)!==null&&Ar!==void 0?Ar:ee),Qe)}}keyword.funcKeywordCode=a;function l(I){const{gen:P,data:q,it:F}=I;P.if(F.parentData,()=>P.assign(q,(0,e._)`${F.parentData}[${F.parentDataProperty}]`))}function d(I,P){const{gen:q}=I;q.if((0,e._)`Array.isArray(${P})`,()=>{q.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${P} : ${t.default.vErrors}.concat(${P})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,n.extendErrors)(I)},()=>I.error())}function p({schemaEnv:I},P){if(P.async&&!I.$async)throw new Error("async keyword in sync schema")}function m(I,P,q){if(q===void 0)throw new Error(`keyword "${P}" failed to compile`);return I.scopeValue("keyword",typeof q=="function"?{ref:q}:{ref:q,code:(0,e.stringify)(q)})}function A(I,P,q=!1){return!P.length||P.some(F=>F==="array"?Array.isArray(I):F==="object"?I&&typeof I=="object"&&!Array.isArray(I):typeof I==F||q&&typeof I>"u")}keyword.validSchemaType=A;function x({schema:I,opts:P,self:q,errSchemaPath:F},L,Y){if(Array.isArray(L.keyword)?!L.keyword.includes(Y):L.keyword!==Y)throw new Error("ajv implementation error");const j=L.dependencies;if(j?.some(Z=>!Object.prototype.hasOwnProperty.call(I,Z)))throw new Error(`parent schema must have dependencies of ${Y}: ${j.join(",")}`);if(L.validateSchema&&!L.validateSchema(I[Y])){const X=`keyword "${Y}" value is invalid at path "${F}": `+q.errorsText(L.validateSchema.errors);if(P.validateSchema==="log")q.logger.error(X);else throw new Error(X)}}return keyword.validateKeywordUsage=x,keyword}var subschema={},hasRequiredSubschema;function requireSubschema(){if(hasRequiredSubschema)return subschema;hasRequiredSubschema=1,Object.defineProperty(subschema,"__esModule",{value:!0}),subschema.extendSubschemaMode=subschema.extendSubschemaData=subschema.getSubschema=void 0;const e=requireCodegen(),t=requireUtil();function r(a,{keyword:l,schemaProp:d,schema:p,schemaPath:m,errSchemaPath:A,topSchemaRef:x}){if(l!==void 0&&p!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(l!==void 0){const I=a.schema[l];return d===void 0?{schema:I,schemaPath:(0,e._)`${a.schemaPath}${(0,e.getProperty)(l)}`,errSchemaPath:`${a.errSchemaPath}/${l}`}:{schema:I[d],schemaPath:(0,e._)`${a.schemaPath}${(0,e.getProperty)(l)}${(0,e.getProperty)(d)}`,errSchemaPath:`${a.errSchemaPath}/${l}/${(0,t.escapeFragment)(d)}`}}if(p!==void 0){if(m===void 0||A===void 0||x===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:p,schemaPath:m,topSchemaRef:x,errSchemaPath:A}}throw new Error('either "keyword" or "schema" must be passed')}subschema.getSubschema=r;function n(a,l,{dataProp:d,dataPropType:p,data:m,dataTypes:A,propertyName:x}){if(m!==void 0&&d!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:I}=l;if(d!==void 0){const{errorPath:q,dataPathArr:F,opts:L}=l,Y=I.let("data",(0,e._)`${l.data}${(0,e.getProperty)(d)}`,!0);P(Y),a.errorPath=(0,e.str)`${q}${(0,t.getErrorPath)(d,p,L.jsPropertySyntax)}`,a.parentDataProperty=(0,e._)`${d}`,a.dataPathArr=[...F,a.parentDataProperty]}if(m!==void 0){const q=m instanceof e.Name?m:I.let("data",m,!0);P(q),x!==void 0&&(a.propertyName=x)}A&&(a.dataTypes=A);function P(q){a.data=q,a.dataLevel=l.dataLevel+1,a.dataTypes=[],l.definedProperties=new Set,a.parentData=l.data,a.dataNames=[...l.dataNames,q]}}subschema.extendSubschemaData=n;function i(a,{jtdDiscriminator:l,jtdMetadata:d,compositeRule:p,createErrors:m,allErrors:A}){p!==void 0&&(a.compositeRule=p),m!==void 0&&(a.createErrors=m),A!==void 0&&(a.allErrors=A),a.jtdDiscriminator=l,a.jtdMetadata=d}return subschema.extendSubschemaMode=i,subschema}var resolve={},fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,a;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(a=Object.keys(t),n=a.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=n;i--!==0;){var l=a[i];if(!e(t[l],r[l]))return!1}return!0}return t!==t&&r!==r}),fastDeepEqual}var jsonSchemaTraverse={exports:{}},hasRequiredJsonSchemaTraverse;function requireJsonSchemaTraverse(){if(hasRequiredJsonSchemaTraverse)return jsonSchemaTraverse.exports;hasRequiredJsonSchemaTraverse=1;var e=jsonSchemaTraverse.exports=function(n,i,a){typeof i=="function"&&(a=i,i={}),a=i.cb||a;var l=typeof a=="function"?a:a.pre||function(){},d=a.post||function(){};t(i,l,d,n,"",n)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(n,i,a,l,d,p,m,A,x,I){if(l&&typeof l=="object"&&!Array.isArray(l)){i(l,d,p,m,A,x,I);for(var P in l){var q=l[P];if(Array.isArray(q)){if(P in e.arrayKeywords)for(var F=0;F<q.length;F++)t(n,i,a,q[F],d+"/"+P+"/"+F,p,d,P,l,F)}else if(P in e.propsKeywords){if(q&&typeof q=="object")for(var L in q)t(n,i,a,q[L],d+"/"+P+"/"+r(L),p,d,P,l,L)}else(P in e.keywords||n.allKeys&&!(P in e.skipKeywords))&&t(n,i,a,q,d+"/"+P,p,d,P,l)}a(l,d,p,m,A,x,I)}}function r(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return jsonSchemaTraverse.exports}var hasRequiredResolve;function requireResolve(){if(hasRequiredResolve)return resolve;hasRequiredResolve=1,Object.defineProperty(resolve,"__esModule",{value:!0}),resolve.getSchemaRefs=resolve.resolveUrl=resolve.normalizeId=resolve._getFullPath=resolve.getFullPath=resolve.inlineRef=void 0;const e=requireUtil(),t=requireFastDeepEqual(),r=requireJsonSchemaTraverse(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(F,L=!0){return typeof F=="boolean"?!0:L===!0?!l(F):L?d(F)<=L:!1}resolve.inlineRef=i;const a=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(F){for(const L in F){if(a.has(L))return!0;const Y=F[L];if(Array.isArray(Y)&&Y.some(l)||typeof Y=="object"&&l(Y))return!0}return!1}function d(F){let L=0;for(const Y in F){if(Y==="$ref")return 1/0;if(L++,!n.has(Y)&&(typeof F[Y]=="object"&&(0,e.eachItem)(F[Y],j=>L+=d(j)),L===1/0))return 1/0}return L}function p(F,L="",Y){Y!==!1&&(L=x(L));const j=F.parse(L);return m(F,j)}resolve.getFullPath=p;function m(F,L){return F.serialize(L).split("#")[0]+"#"}resolve._getFullPath=m;const A=/#\/?$/;function x(F){return F?F.replace(A,""):""}resolve.normalizeId=x;function I(F,L,Y){return Y=x(Y),F.resolve(L,Y)}resolve.resolveUrl=I;const P=/^[a-z_][-a-z0-9._]*$/i;function q(F,L){if(typeof F=="boolean")return{};const{schemaId:Y,uriResolver:j}=this.opts,Z=x(F[Y]||L),X={"":Z},Q=p(j,Z,!1),J={},ee=new Set;return r(F,{allKeys:!0},(fe,_e,Re,Qe)=>{if(Qe===void 0)return;const Ar=Q+_e;let Os=X[Qe];typeof fe[Y]=="string"&&(Os=ji.call(this,fe[Y])),Ui.call(this,fe.$anchor),Ui.call(this,fe.$dynamicAnchor),X[_e]=Os;function ji(hi){const ca=this.opts.uriResolver.resolve;if(hi=x(Os?ca(Os,hi):hi),ee.has(hi))throw de(hi);ee.add(hi);let Ue=this.refs[hi];return typeof Ue=="string"&&(Ue=this.refs[Ue]),typeof Ue=="object"?ie(fe,Ue.schema,hi):hi!==x(Ar)&&(hi[0]==="#"?(ie(fe,J[hi],hi),J[hi]=fe):this.refs[hi]=Ar),hi}function Ui(hi){if(typeof hi=="string"){if(!P.test(hi))throw new Error(`invalid anchor "${hi}"`);ji.call(this,`#${hi}`)}}}),J;function ie(fe,_e,Re){if(_e!==void 0&&!t(fe,_e))throw de(Re)}function de(fe){return new Error(`reference "${fe}" resolves to more than one schema`)}}return resolve.getSchemaRefs=q,resolve}var hasRequiredValidate;function requireValidate(){if(hasRequiredValidate)return validate;hasRequiredValidate=1,Object.defineProperty(validate,"__esModule",{value:!0}),validate.getData=validate.KeywordCxt=validate.validateFunctionCode=void 0;const e=requireBoolSchema(),t=requireDataType(),r=requireApplicability(),n=requireDataType(),i=requireDefaults(),a=requireKeyword(),l=requireSubschema(),d=requireCodegen(),p=requireNames(),m=requireResolve(),A=requireUtil(),x=requireErrors();function I(ge){if(Q(ge)&&(ee(ge),X(ge))){L(ge);return}P(ge,()=>(0,e.topBoolOrEmptySchema)(ge))}validate.validateFunctionCode=I;function P({gen:ge,validateName:ue,schema:De,schemaEnv:Ye,opts:mi},ws){mi.code.es5?ge.func(ue,(0,d._)`${p.default.data}, ${p.default.valCxt}`,Ye.$async,()=>{ge.code((0,d._)`"use strict"; ${j(De,mi)}`),F(ge,mi),ge.code(ws)}):ge.func(ue,(0,d._)`${p.default.data}, ${q(mi)}`,Ye.$async,()=>ge.code(j(De,mi)).code(ws))}function q(ge){return(0,d._)`{${p.default.instancePath}="", ${p.default.parentData}, ${p.default.parentDataProperty}, ${p.default.rootData}=${p.default.data}${ge.dynamicRef?(0,d._)`, ${p.default.dynamicAnchors}={}`:d.nil}}={}`}function F(ge,ue){ge.if(p.default.valCxt,()=>{ge.var(p.default.instancePath,(0,d._)`${p.default.valCxt}.${p.default.instancePath}`),ge.var(p.default.parentData,(0,d._)`${p.default.valCxt}.${p.default.parentData}`),ge.var(p.default.parentDataProperty,(0,d._)`${p.default.valCxt}.${p.default.parentDataProperty}`),ge.var(p.default.rootData,(0,d._)`${p.default.valCxt}.${p.default.rootData}`),ue.dynamicRef&&ge.var(p.default.dynamicAnchors,(0,d._)`${p.default.valCxt}.${p.default.dynamicAnchors}`)},()=>{ge.var(p.default.instancePath,(0,d._)`""`),ge.var(p.default.parentData,(0,d._)`undefined`),ge.var(p.default.parentDataProperty,(0,d._)`undefined`),ge.var(p.default.rootData,p.default.data),ue.dynamicRef&&ge.var(p.default.dynamicAnchors,(0,d._)`{}`)})}function L(ge){const{schema:ue,opts:De,gen:Ye}=ge;P(ge,()=>{De.$comment&&ue.$comment&&Qe(ge),fe(ge),Ye.let(p.default.vErrors,null),Ye.let(p.default.errors,0),De.unevaluated&&Y(ge),ie(ge),Ar(ge)})}function Y(ge){const{gen:ue,validateName:De}=ge;ge.evaluated=ue.const("evaluated",(0,d._)`${De}.evaluated`),ue.if((0,d._)`${ge.evaluated}.dynamicProps`,()=>ue.assign((0,d._)`${ge.evaluated}.props`,(0,d._)`undefined`)),ue.if((0,d._)`${ge.evaluated}.dynamicItems`,()=>ue.assign((0,d._)`${ge.evaluated}.items`,(0,d._)`undefined`))}function j(ge,ue){const De=typeof ge=="object"&&ge[ue.schemaId];return De&&(ue.code.source||ue.code.process)?(0,d._)`/*# sourceURL=${De} */`:d.nil}function Z(ge,ue){if(Q(ge)&&(ee(ge),X(ge))){J(ge,ue);return}(0,e.boolOrEmptySchema)(ge,ue)}function X({schema:ge,self:ue}){if(typeof ge=="boolean")return!ge;for(const De in ge)if(ue.RULES.all[De])return!0;return!1}function Q(ge){return typeof ge.schema!="boolean"}function J(ge,ue){const{schema:De,gen:Ye,opts:mi}=ge;mi.$comment&&De.$comment&&Qe(ge),_e(ge),Re(ge);const ws=Ye.const("_errs",p.default.errors);ie(ge,ws),Ye.var(ue,(0,d._)`${ws} === ${p.default.errors}`)}function ee(ge){(0,A.checkUnknownRules)(ge),de(ge)}function ie(ge,ue){if(ge.opts.jtd)return ji(ge,[],!1,ue);const De=(0,t.getSchemaTypes)(ge.schema),Ye=(0,t.coerceAndCheckDataType)(ge,De);ji(ge,De,!Ye,ue)}function de(ge){const{schema:ue,errSchemaPath:De,opts:Ye,self:mi}=ge;ue.$ref&&Ye.ignoreKeywordsWithRef&&(0,A.schemaHasRulesButRef)(ue,mi.RULES)&&mi.logger.warn(`$ref: keywords ignored in schema at path "${De}"`)}function fe(ge){const{schema:ue,opts:De}=ge;ue.default!==void 0&&De.useDefaults&&De.strictSchema&&(0,A.checkStrictMode)(ge,"default is ignored in the schema root")}function _e(ge){const ue=ge.schema[ge.opts.schemaId];ue&&(ge.baseId=(0,m.resolveUrl)(ge.opts.uriResolver,ge.baseId,ue))}function Re(ge){if(ge.schema.$async&&!ge.schemaEnv.$async)throw new Error("async schema in sync schema")}function Qe({gen:ge,schemaEnv:ue,schema:De,errSchemaPath:Ye,opts:mi}){const ws=De.$comment;if(mi.$comment===!0)ge.code((0,d._)`${p.default.self}.logger.log(${ws})`);else if(typeof mi.$comment=="function"){const pi=(0,d.str)`${Ye}/$comment`,vr=ge.scopeValue("root",{ref:ue.root});ge.code((0,d._)`${p.default.self}.opts.$comment(${ws}, ${pi}, ${vr}.schema)`)}}function Ar(ge){const{gen:ue,schemaEnv:De,validateName:Ye,ValidationError:mi,opts:ws}=ge;De.$async?ue.if((0,d._)`${p.default.errors} === 0`,()=>ue.return(p.default.data),()=>ue.throw((0,d._)`new ${mi}(${p.default.vErrors})`)):(ue.assign((0,d._)`${Ye}.errors`,p.default.vErrors),ws.unevaluated&&Os(ge),ue.return((0,d._)`${p.default.errors} === 0`))}function Os({gen:ge,evaluated:ue,props:De,items:Ye}){De instanceof d.Name&&ge.assign((0,d._)`${ue}.props`,De),Ye instanceof d.Name&&ge.assign((0,d._)`${ue}.items`,Ye)}function ji(ge,ue,De,Ye){const{gen:mi,schema:ws,data:pi,allErrors:vr,opts:Gi,self:ga}=ge,{RULES:fa}=ga;if(ws.$ref&&(Gi.ignoreKeywordsWithRef||!(0,A.schemaHasRulesButRef)(ws,fa))){mi.block(()=>Je(ge,"$ref",fa.all.$ref.definition));return}Gi.jtd||hi(ge,ue),mi.block(()=>{for(const ua of fa.rules)ya(ua);ya(fa.post)});function ya(ua){(0,r.shouldUseGroup)(ws,ua)&&(ua.type?(mi.if((0,n.checkDataType)(ua.type,pi,Gi.strictNumbers)),Ui(ge,ua),ue.length===1&&ue[0]===ua.type&&De&&(mi.else(),(0,n.reportTypeError)(ge)),mi.endIf()):Ui(ge,ua),vr||mi.if((0,d._)`${p.default.errors} === ${Ye||0}`))}}function Ui(ge,ue){const{gen:De,schema:Ye,opts:{useDefaults:mi}}=ge;mi&&(0,i.assignDefaults)(ge,ue.type),De.block(()=>{for(const ws of ue.rules)(0,r.shouldUseRule)(Ye,ws)&&Je(ge,ws.keyword,ws.definition,ue.type)})}function hi(ge,ue){ge.schemaEnv.meta||!ge.opts.strictTypes||(ca(ge,ue),ge.opts.allowUnionTypes||Ue(ge,ue),ke(ge,ge.dataTypes))}function ca(ge,ue){if(ue.length){if(!ge.dataTypes.length){ge.dataTypes=ue;return}ue.forEach(De=>{Le(ge.dataTypes,De)||ae(ge,`type "${De}" not allowed by context "${ge.dataTypes.join(",")}"`)}),ne(ge,ue)}}function Ue(ge,ue){ue.length>1&&!(ue.length===2&&ue.includes("null"))&&ae(ge,"use allowUnionTypes to allow union type keyword")}function ke(ge,ue){const De=ge.self.RULES.all;for(const Ye in De){const mi=De[Ye];if(typeof mi=="object"&&(0,r.shouldUseRule)(ge.schema,mi)){const{type:ws}=mi.definition;ws.length&&!ws.some(pi=>qe(ue,pi))&&ae(ge,`missing type "${ws.join(",")}" for keyword "${Ye}"`)}}}function qe(ge,ue){return ge.includes(ue)||ue==="number"&&ge.includes("integer")}function Le(ge,ue){return ge.includes(ue)||ue==="integer"&&ge.includes("number")}function ne(ge,ue){const De=[];for(const Ye of ge.dataTypes)Le(ue,Ye)?De.push(Ye):ue.includes("integer")&&Ye==="number"&&De.push("integer");ge.dataTypes=De}function ae(ge,ue){const De=ge.schemaEnv.baseId+ge.errSchemaPath;ue+=` at "${De}" (strictTypes)`,(0,A.checkStrictMode)(ge,ue,ge.opts.strictTypes)}class $e{constructor(ue,De,Ye){if((0,a.validateKeywordUsage)(ue,De,Ye),this.gen=ue.gen,this.allErrors=ue.allErrors,this.keyword=Ye,this.data=ue.data,this.schema=ue.schema[Ye],this.$data=De.$data&&ue.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,A.schemaRefOrVal)(ue,this.schema,Ye,this.$data),this.schemaType=De.schemaType,this.parentSchema=ue.schema,this.params={},this.it=ue,this.def=De,this.$data)this.schemaCode=ue.gen.const("vSchema",bs(this.$data,ue));else if(this.schemaCode=this.schemaValue,!(0,a.validSchemaType)(this.schema,De.schemaType,De.allowUndefined))throw new Error(`${Ye} value must be ${JSON.stringify(De.schemaType)}`);("code"in De?De.trackErrors:De.errors!==!1)&&(this.errsCount=ue.gen.const("_errs",p.default.errors))}result(ue,De,Ye){this.failResult((0,d.not)(ue),De,Ye)}failResult(ue,De,Ye){this.gen.if(ue),Ye?Ye():this.error(),De?(this.gen.else(),De(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(ue,De){this.failResult((0,d.not)(ue),void 0,De)}fail(ue){if(ue===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(ue),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(ue){if(!this.$data)return this.fail(ue);const{schemaCode:De}=this;this.fail((0,d._)`${De} !== undefined && (${(0,d.or)(this.invalid$data(),ue)})`)}error(ue,De,Ye){if(De){this.setParams(De),this._error(ue,Ye),this.setParams({});return}this._error(ue,Ye)}_error(ue,De){(ue?x.reportExtraError:x.reportError)(this,this.def.error,De)}$dataError(){(0,x.reportError)(this,this.def.$dataError||x.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,x.resetErrorsCount)(this.gen,this.errsCount)}ok(ue){this.allErrors||this.gen.if(ue)}setParams(ue,De){De?Object.assign(this.params,ue):this.params=ue}block$data(ue,De,Ye=d.nil){this.gen.block(()=>{this.check$data(ue,Ye),De()})}check$data(ue=d.nil,De=d.nil){if(!this.$data)return;const{gen:Ye,schemaCode:mi,schemaType:ws,def:pi}=this;Ye.if((0,d.or)((0,d._)`${mi} === undefined`,De)),ue!==d.nil&&Ye.assign(ue,!0),(ws.length||pi.validateSchema)&&(Ye.elseIf(this.invalid$data()),this.$dataError(),ue!==d.nil&&Ye.assign(ue,!1)),Ye.else()}invalid$data(){const{gen:ue,schemaCode:De,schemaType:Ye,def:mi,it:ws}=this;return(0,d.or)(pi(),vr());function pi(){if(Ye.length){if(!(De instanceof d.Name))throw new Error("ajv implementation error");const Gi=Array.isArray(Ye)?Ye:[Ye];return(0,d._)`${(0,n.checkDataTypes)(Gi,De,ws.opts.strictNumbers,n.DataType.Wrong)}`}return d.nil}function vr(){if(mi.validateSchema){const Gi=ue.scopeValue("validate$data",{ref:mi.validateSchema});return(0,d._)`!${Gi}(${De})`}return d.nil}}subschema(ue,De){const Ye=(0,l.getSubschema)(this.it,ue);(0,l.extendSubschemaData)(Ye,this.it,ue),(0,l.extendSubschemaMode)(Ye,ue);const mi={...this.it,...Ye,items:void 0,props:void 0};return Z(mi,De),mi}mergeEvaluated(ue,De){const{it:Ye,gen:mi}=this;Ye.opts.unevaluated&&(Ye.props!==!0&&ue.props!==void 0&&(Ye.props=A.mergeEvaluated.props(mi,ue.props,Ye.props,De)),Ye.items!==!0&&ue.items!==void 0&&(Ye.items=A.mergeEvaluated.items(mi,ue.items,Ye.items,De)))}mergeValidEvaluated(ue,De){const{it:Ye,gen:mi}=this;if(Ye.opts.unevaluated&&(Ye.props!==!0||Ye.items!==!0))return mi.if(De,()=>this.mergeEvaluated(ue,d.Name)),!0}}validate.KeywordCxt=$e;function Je(ge,ue,De,Ye){const mi=new $e(ge,De,ue);"code"in De?De.code(mi,Ye):mi.$data&&De.validate?(0,a.funcKeywordCode)(mi,De):"macro"in De?(0,a.macroKeywordCode)(mi,De):(De.compile||De.validate)&&(0,a.funcKeywordCode)(mi,De)}const Ke=/^\/(?:[^~]|~0|~1)*$/,bt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function bs(ge,{dataLevel:ue,dataNames:De,dataPathArr:Ye}){let mi,ws;if(ge==="")return p.default.rootData;if(ge[0]==="/"){if(!Ke.test(ge))throw new Error(`Invalid JSON-pointer: ${ge}`);mi=ge,ws=p.default.rootData}else{const ga=bt.exec(ge);if(!ga)throw new Error(`Invalid JSON-pointer: ${ge}`);const fa=+ga[1];if(mi=ga[2],mi==="#"){if(fa>=ue)throw new Error(Gi("property/index",fa));return Ye[ue-fa]}if(fa>ue)throw new Error(Gi("data",fa));if(ws=De[ue-fa],!mi)return ws}let pi=ws;const vr=mi.split("/");for(const ga of vr)ga&&(ws=(0,d._)`${ws}${(0,d.getProperty)((0,A.unescapeJsonPointer)(ga))}`,pi=(0,d._)`${pi} && ${ws}`);return pi;function Gi(ga,fa){return`Cannot access ${ga} ${fa} levels up, current level is ${ue}`}}return validate.getData=bs,validate}var validation_error={},hasRequiredValidation_error;function requireValidation_error(){if(hasRequiredValidation_error)return validation_error;hasRequiredValidation_error=1,Object.defineProperty(validation_error,"__esModule",{value:!0});class e extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return validation_error.default=e,validation_error}var ref_error={},hasRequiredRef_error;function requireRef_error(){if(hasRequiredRef_error)return ref_error;hasRequiredRef_error=1,Object.defineProperty(ref_error,"__esModule",{value:!0});const e=requireResolve();class t extends Error{constructor(n,i,a,l){super(l||`can't resolve reference ${a} from id ${i}`),this.missingRef=(0,e.resolveUrl)(n,i,a),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(n,this.missingRef))}}return ref_error.default=t,ref_error}var compile={},hasRequiredCompile;function requireCompile(){if(hasRequiredCompile)return compile;hasRequiredCompile=1,Object.defineProperty(compile,"__esModule",{value:!0}),compile.resolveSchema=compile.getCompilingSchema=compile.resolveRef=compile.compileSchema=compile.SchemaEnv=void 0;const e=requireCodegen(),t=requireValidation_error(),r=requireNames(),n=requireResolve(),i=requireUtil(),a=requireValidate();class l{constructor(Y){var j;this.refs={},this.dynamicAnchors={};let Z;typeof Y.schema=="object"&&(Z=Y.schema),this.schema=Y.schema,this.schemaId=Y.schemaId,this.root=Y.root||this,this.baseId=(j=Y.baseId)!==null&&j!==void 0?j:(0,n.normalizeId)(Z?.[Y.schemaId||"$id"]),this.schemaPath=Y.schemaPath,this.localRefs=Y.localRefs,this.meta=Y.meta,this.$async=Z?.$async,this.refs={}}}compile.SchemaEnv=l;function d(L){const Y=A.call(this,L);if(Y)return Y;const j=(0,n.getFullPath)(this.opts.uriResolver,L.root.baseId),{es5:Z,lines:X}=this.opts.code,{ownProperties:Q}=this.opts,J=new e.CodeGen(this.scope,{es5:Z,lines:X,ownProperties:Q});let ee;L.$async&&(ee=J.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const ie=J.scopeName("validate");L.validateName=ie;const de={gen:J,allErrors:this.opts.allErrors,data:r.default.data,parentData:r.default.parentData,parentDataProperty:r.default.parentDataProperty,dataNames:[r.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:J.scopeValue("schema",this.opts.code.source===!0?{ref:L.schema,code:(0,e.stringify)(L.schema)}:{ref:L.schema}),validateName:ie,ValidationError:ee,schema:L.schema,schemaEnv:L,rootId:j,baseId:L.baseId||j,schemaPath:e.nil,errSchemaPath:L.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let fe;try{this._compilations.add(L),(0,a.validateFunctionCode)(de),J.optimize(this.opts.code.optimize);const _e=J.toString();fe=`${J.scopeRefs(r.default.scope)}return ${_e}`,this.opts.code.process&&(fe=this.opts.code.process(fe,L));const Qe=new Function(`${r.default.self}`,`${r.default.scope}`,fe)(this,this.scope.get());if(this.scope.value(ie,{ref:Qe}),Qe.errors=null,Qe.schema=L.schema,Qe.schemaEnv=L,L.$async&&(Qe.$async=!0),this.opts.code.source===!0&&(Qe.source={validateName:ie,validateCode:_e,scopeValues:J._values}),this.opts.unevaluated){const{props:Ar,items:Os}=de;Qe.evaluated={props:Ar instanceof e.Name?void 0:Ar,items:Os instanceof e.Name?void 0:Os,dynamicProps:Ar instanceof e.Name,dynamicItems:Os instanceof e.Name},Qe.source&&(Qe.source.evaluated=(0,e.stringify)(Qe.evaluated))}return L.validate=Qe,L}catch(_e){throw delete L.validate,delete L.validateName,fe&&this.logger.error("Error compiling schema, function code:",fe),_e}finally{this._compilations.delete(L)}}compile.compileSchema=d;function p(L,Y,j){var Z;j=(0,n.resolveUrl)(this.opts.uriResolver,Y,j);const X=L.refs[j];if(X)return X;let Q=I.call(this,L,j);if(Q===void 0){const J=(Z=L.localRefs)===null||Z===void 0?void 0:Z[j],{schemaId:ee}=this.opts;J&&(Q=new l({schema:J,schemaId:ee,root:L,baseId:Y}))}if(Q!==void 0)return L.refs[j]=m.call(this,Q)}compile.resolveRef=p;function m(L){return(0,n.inlineRef)(L.schema,this.opts.inlineRefs)?L.schema:L.validate?L:d.call(this,L)}function A(L){for(const Y of this._compilations)if(x(Y,L))return Y}compile.getCompilingSchema=A;function x(L,Y){return L.schema===Y.schema&&L.root===Y.root&&L.baseId===Y.baseId}function I(L,Y){let j;for(;typeof(j=this.refs[Y])=="string";)Y=j;return j||this.schemas[Y]||P.call(this,L,Y)}function P(L,Y){const j=this.opts.uriResolver.parse(Y),Z=(0,n._getFullPath)(this.opts.uriResolver,j);let X=(0,n.getFullPath)(this.opts.uriResolver,L.baseId,void 0);if(Object.keys(L.schema).length>0&&Z===X)return F.call(this,j,L);const Q=(0,n.normalizeId)(Z),J=this.refs[Q]||this.schemas[Q];if(typeof J=="string"){const ee=P.call(this,L,J);return typeof ee?.schema!="object"?void 0:F.call(this,j,ee)}if(typeof J?.schema=="object"){if(J.validate||d.call(this,J),Q===(0,n.normalizeId)(Y)){const{schema:ee}=J,{schemaId:ie}=this.opts,de=ee[ie];return de&&(X=(0,n.resolveUrl)(this.opts.uriResolver,X,de)),new l({schema:ee,schemaId:ie,root:L,baseId:X})}return F.call(this,j,J)}}compile.resolveSchema=P;const q=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function F(L,{baseId:Y,schema:j,root:Z}){var X;if(((X=L.fragment)===null||X===void 0?void 0:X[0])!=="/")return;for(const ee of L.fragment.slice(1).split("/")){if(typeof j=="boolean")return;const ie=j[(0,i.unescapeFragment)(ee)];if(ie===void 0)return;j=ie;const de=typeof j=="object"&&j[this.opts.schemaId];!q.has(ee)&&de&&(Y=(0,n.resolveUrl)(this.opts.uriResolver,Y,de))}let Q;if(typeof j!="boolean"&&j.$ref&&!(0,i.schemaHasRulesButRef)(j,this.RULES)){const ee=(0,n.resolveUrl)(this.opts.uriResolver,Y,j.$ref);Q=P.call(this,Z,ee)}const{schemaId:J}=this.opts;if(Q=Q||new l({schema:j,schemaId:J,root:Z,baseId:Y}),Q.schema!==Q.root.schema)return Q}return compile}const $id$1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$1="object",required$1=["$data"],properties$2={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1=!1,require$$9={$id:$id$1,description,type:type$1,required:required$1,properties:properties$2,additionalProperties:additionalProperties$1};var uri={},fastUri={exports:{}},utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;const e=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),t=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function r(I){let P="",q=0,F=0;for(F=0;F<I.length;F++)if(q=I[F].charCodeAt(0),q!==48){if(!(q>=48&&q<=57||q>=65&&q<=70||q>=97&&q<=102))return"";P+=I[F];break}for(F+=1;F<I.length;F++){if(q=I[F].charCodeAt(0),!(q>=48&&q<=57||q>=65&&q<=70||q>=97&&q<=102))return"";P+=I[F]}return P}const n=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function i(I){return I.length=0,!0}function a(I,P,q){if(I.length){const F=r(I);if(F!=="")P.push(F);else return q.error=!0,!1;I.length=0}return!0}function l(I){let P=0;const q={error:!1,address:"",zone:""},F=[],L=[];let Y=!1,j=!1,Z=a;for(let X=0;X<I.length;X++){const Q=I[X];if(!(Q==="["||Q==="]"))if(Q===":"){if(Y===!0&&(j=!0),!Z(L,F,q))break;if(++P>7){q.error=!0;break}X>0&&I[X-1]===":"&&(Y=!0),F.push(":");continue}else if(Q==="%"){if(!Z(L,F,q))break;Z=i}else{L.push(Q);continue}}return L.length&&(Z===i?q.zone=L.join(""):j?F.push(L.join("")):F.push(r(L))),q.address=F.join(""),q}function d(I){if(p(I,":")<2)return{host:I,isIPV6:!1};const P=l(I);if(P.error)return{host:I,isIPV6:!1};{let q=P.address,F=P.address;return P.zone&&(q+="%"+P.zone,F+="%25"+P.zone),{host:q,isIPV6:!0,escapedHost:F}}}function p(I,P){let q=0;for(let F=0;F<I.length;F++)I[F]===P&&q++;return q}function m(I){let P=I;const q=[];let F=-1,L=0;for(;L=P.length;){if(L===1){if(P===".")break;if(P==="/"){q.push("/");break}else{q.push(P);break}}else if(L===2){if(P[0]==="."){if(P[1]===".")break;if(P[1]==="/"){P=P.slice(2);continue}}else if(P[0]==="/"&&(P[1]==="."||P[1]==="/")){q.push("/");break}}else if(L===3&&P==="/.."){q.length!==0&&q.pop(),q.push("/");break}if(P[0]==="."){if(P[1]==="."){if(P[2]==="/"){P=P.slice(3);continue}}else if(P[1]==="/"){P=P.slice(2);continue}}else if(P[0]==="/"&&P[1]==="."){if(P[2]==="/"){P=P.slice(2);continue}else if(P[2]==="."&&P[3]==="/"){P=P.slice(3),q.length!==0&&q.pop();continue}}if((F=P.indexOf("/",1))===-1){q.push(P);break}else q.push(P.slice(0,F)),P=P.slice(F)}return q.join("")}function A(I,P){const q=P!==!0?escape:unescape;return I.scheme!==void 0&&(I.scheme=q(I.scheme)),I.userinfo!==void 0&&(I.userinfo=q(I.userinfo)),I.host!==void 0&&(I.host=q(I.host)),I.path!==void 0&&(I.path=q(I.path)),I.query!==void 0&&(I.query=q(I.query)),I.fragment!==void 0&&(I.fragment=q(I.fragment)),I}function x(I){const P=[];if(I.userinfo!==void 0&&(P.push(I.userinfo),P.push("@")),I.host!==void 0){let q=unescape(I.host);if(!t(q)){const F=d(q);F.isIPV6===!0?q=`[${F.escapedHost}]`:q=I.host}P.push(q)}return(typeof I.port=="number"||typeof I.port=="string")&&(P.push(":"),P.push(String(I.port))),P.length?P.join(""):void 0}return utils={nonSimpleDomain:n,recomposeAuthority:x,normalizeComponentEncoding:A,removeDotSegments:m,isIPv4:t,isUUID:e,normalizeIPv6:d,stringArrayToHexStripped:r},utils}var schemes,hasRequiredSchemes;function requireSchemes(){if(hasRequiredSchemes)return schemes;hasRequiredSchemes=1;const{isUUID:e}=requireUtils(),t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,r=["http","https","ws","wss","urn","urn:uuid"];function n(Q){return r.indexOf(Q)!==-1}function i(Q){return Q.secure===!0?!0:Q.secure===!1?!1:Q.scheme?Q.scheme.length===3&&(Q.scheme[0]==="w"||Q.scheme[0]==="W")&&(Q.scheme[1]==="s"||Q.scheme[1]==="S")&&(Q.scheme[2]==="s"||Q.scheme[2]==="S"):!1}function a(Q){return Q.host||(Q.error=Q.error||"HTTP URIs must have a host."),Q}function l(Q){const J=String(Q.scheme).toLowerCase()==="https";return(Q.port===(J?443:80)||Q.port==="")&&(Q.port=void 0),Q.path||(Q.path="/"),Q}function d(Q){return Q.secure=i(Q),Q.resourceName=(Q.path||"/")+(Q.query?"?"+Q.query:""),Q.path=void 0,Q.query=void 0,Q}function p(Q){if((Q.port===(i(Q)?443:80)||Q.port==="")&&(Q.port=void 0),typeof Q.secure=="boolean"&&(Q.scheme=Q.secure?"wss":"ws",Q.secure=void 0),Q.resourceName){const[J,ee]=Q.resourceName.split("?");Q.path=J&&J!=="/"?J:void 0,Q.query=ee,Q.resourceName=void 0}return Q.fragment=void 0,Q}function m(Q,J){if(!Q.path)return Q.error="URN can not be parsed",Q;const ee=Q.path.match(t);if(ee){const ie=J.scheme||Q.scheme||"urn";Q.nid=ee[1].toLowerCase(),Q.nss=ee[2];const de=`${ie}:${J.nid||Q.nid}`,fe=X(de);Q.path=void 0,fe&&(Q=fe.parse(Q,J))}else Q.error=Q.error||"URN can not be parsed.";return Q}function A(Q,J){if(Q.nid===void 0)throw new Error("URN without nid cannot be serialized");const ee=J.scheme||Q.scheme||"urn",ie=Q.nid.toLowerCase(),de=`${ee}:${J.nid||ie}`,fe=X(de);fe&&(Q=fe.serialize(Q,J));const _e=Q,Re=Q.nss;return _e.path=`${ie||J.nid}:${Re}`,J.skipEscape=!0,_e}function x(Q,J){const ee=Q;return ee.uuid=ee.nss,ee.nss=void 0,!J.tolerant&&(!ee.uuid||!e(ee.uuid))&&(ee.error=ee.error||"UUID is not valid."),ee}function I(Q){const J=Q;return J.nss=(Q.uuid||"").toLowerCase(),J}const P={scheme:"http",domainHost:!0,parse:a,serialize:l},q={scheme:"https",domainHost:P.domainHost,parse:a,serialize:l},F={scheme:"ws",domainHost:!0,parse:d,serialize:p},L={scheme:"wss",domainHost:F.domainHost,parse:F.parse,serialize:F.serialize},Z={http:P,https:q,ws:F,wss:L,urn:{scheme:"urn",parse:m,serialize:A,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:x,serialize:I,skipNormalize:!0}};Object.setPrototypeOf(Z,null);function X(Q){return Q&&(Z[Q]||Z[Q.toLowerCase()])||void 0}return schemes={wsIsSecure:i,SCHEMES:Z,isValidSchemeName:n,getSchemeHandler:X},schemes}var hasRequiredFastUri;function requireFastUri(){if(hasRequiredFastUri)return fastUri.exports;hasRequiredFastUri=1;const{normalizeIPv6:e,removeDotSegments:t,recomposeAuthority:r,normalizeComponentEncoding:n,isIPv4:i,nonSimpleDomain:a}=requireUtils(),{SCHEMES:l,getSchemeHandler:d}=requireSchemes();function p(L,Y){return typeof L=="string"?L=I(q(L,Y),Y):typeof L=="object"&&(L=q(I(L,Y),Y)),L}function m(L,Y,j){const Z=j?Object.assign({scheme:"null"},j):{scheme:"null"},X=A(q(L,Z),q(Y,Z),Z,!0);return Z.skipEscape=!0,I(X,Z)}function A(L,Y,j,Z){const X={};return Z||(L=q(I(L,j),j),Y=q(I(Y,j),j)),j=j||{},!j.tolerant&&Y.scheme?(X.scheme=Y.scheme,X.userinfo=Y.userinfo,X.host=Y.host,X.port=Y.port,X.path=t(Y.path||""),X.query=Y.query):(Y.userinfo!==void 0||Y.host!==void 0||Y.port!==void 0?(X.userinfo=Y.userinfo,X.host=Y.host,X.port=Y.port,X.path=t(Y.path||""),X.query=Y.query):(Y.path?(Y.path[0]==="/"?X.path=t(Y.path):((L.userinfo!==void 0||L.host!==void 0||L.port!==void 0)&&!L.path?X.path="/"+Y.path:L.path?X.path=L.path.slice(0,L.path.lastIndexOf("/")+1)+Y.path:X.path=Y.path,X.path=t(X.path)),X.query=Y.query):(X.path=L.path,Y.query!==void 0?X.query=Y.query:X.query=L.query),X.userinfo=L.userinfo,X.host=L.host,X.port=L.port),X.scheme=L.scheme),X.fragment=Y.fragment,X}function x(L,Y,j){return typeof L=="string"?(L=unescape(L),L=I(n(q(L,j),!0),{...j,skipEscape:!0})):typeof L=="object"&&(L=I(n(L,!0),{...j,skipEscape:!0})),typeof Y=="string"?(Y=unescape(Y),Y=I(n(q(Y,j),!0),{...j,skipEscape:!0})):typeof Y=="object"&&(Y=I(n(Y,!0),{...j,skipEscape:!0})),L.toLowerCase()===Y.toLowerCase()}function I(L,Y){const j={host:L.host,scheme:L.scheme,userinfo:L.userinfo,port:L.port,path:L.path,query:L.query,nid:L.nid,nss:L.nss,uuid:L.uuid,fragment:L.fragment,reference:L.reference,resourceName:L.resourceName,secure:L.secure,error:""},Z=Object.assign({},Y),X=[],Q=d(Z.scheme||j.scheme);Q&&Q.serialize&&Q.serialize(j,Z),j.path!==void 0&&(Z.skipEscape?j.path=unescape(j.path):(j.path=escape(j.path),j.scheme!==void 0&&(j.path=j.path.split("%3A").join(":")))),Z.reference!=="suffix"&&j.scheme&&X.push(j.scheme,":");const J=r(j);if(J!==void 0&&(Z.reference!=="suffix"&&X.push("//"),X.push(J),j.path&&j.path[0]!=="/"&&X.push("/")),j.path!==void 0){let ee=j.path;!Z.absolutePath&&(!Q||!Q.absolutePath)&&(ee=t(ee)),J===void 0&&ee[0]==="/"&&ee[1]==="/"&&(ee="/%2F"+ee.slice(2)),X.push(ee)}return j.query!==void 0&&X.push("?",j.query),j.fragment!==void 0&&X.push("#",j.fragment),X.join("")}const P=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function q(L,Y){const j=Object.assign({},Y),Z={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let X=!1;j.reference==="suffix"&&(j.scheme?L=j.scheme+":"+L:L="//"+L);const Q=L.match(P);if(Q){if(Z.scheme=Q[1],Z.userinfo=Q[3],Z.host=Q[4],Z.port=parseInt(Q[5],10),Z.path=Q[6]||"",Z.query=Q[7],Z.fragment=Q[8],isNaN(Z.port)&&(Z.port=Q[5]),Z.host)if(i(Z.host)===!1){const ie=e(Z.host);Z.host=ie.host.toLowerCase(),X=ie.isIPV6}else X=!0;Z.scheme===void 0&&Z.userinfo===void 0&&Z.host===void 0&&Z.port===void 0&&Z.query===void 0&&!Z.path?Z.reference="same-document":Z.scheme===void 0?Z.reference="relative":Z.fragment===void 0?Z.reference="absolute":Z.reference="uri",j.reference&&j.reference!=="suffix"&&j.reference!==Z.reference&&(Z.error=Z.error||"URI is not a "+j.reference+" reference.");const J=d(j.scheme||Z.scheme);if(!j.unicodeSupport&&(!J||!J.unicodeSupport)&&Z.host&&(j.domainHost||J&&J.domainHost)&&X===!1&&a(Z.host))try{Z.host=URL.domainToASCII(Z.host.toLowerCase())}catch(ee){Z.error=Z.error||"Host's domain name can not be converted to ASCII: "+ee}(!J||J&&!J.skipNormalize)&&(L.indexOf("%")!==-1&&(Z.scheme!==void 0&&(Z.scheme=unescape(Z.scheme)),Z.host!==void 0&&(Z.host=unescape(Z.host))),Z.path&&(Z.path=escape(unescape(Z.path))),Z.fragment&&(Z.fragment=encodeURI(decodeURIComponent(Z.fragment)))),J&&J.parse&&J.parse(Z,j)}else Z.error=Z.error||"URI can not be parsed.";return Z}const F={SCHEMES:l,normalize:p,resolve:m,resolveComponent:A,equal:x,serialize:I,parse:q};return fastUri.exports=F,fastUri.exports.default=F,fastUri.exports.fastUri=F,fastUri.exports}var hasRequiredUri;function requireUri(){if(hasRequiredUri)return uri;hasRequiredUri=1,Object.defineProperty(uri,"__esModule",{value:!0});const e=requireFastUri();return e.code='require("ajv/dist/runtime/uri").default',uri.default=e,uri}var hasRequiredCore$1;function requireCore$1(){return hasRequiredCore$1||(hasRequiredCore$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=requireValidate();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=requireCodegen();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=requireValidation_error(),i=requireRef_error(),a=requireRules(),l=requireCompile(),d=requireCodegen(),p=requireResolve(),m=requireDataType(),A=requireUtil(),x=require$$9,I=requireUri(),P=(Ue,ke)=>new RegExp(Ue,ke);P.code="new RegExp";const q=["removeAdditional","useDefaults","coerceTypes"],F=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),L={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},j=200;function Z(Ue){var ke,qe,Le,ne,ae,$e,Je,Ke,bt,bs,ge,ue,De,Ye,mi,ws,pi,vr,Gi,ga,fa,ya,ua,va,_a;const gi=Ue.strict,ha=(ke=Ue.code)===null||ke===void 0?void 0:ke.optimize,pa=ha===!0||ha===void 0?1:ha||0,Ia=(Le=(qe=Ue.code)===null||qe===void 0?void 0:qe.regExp)!==null&&Le!==void 0?Le:P,se=(ne=Ue.uriResolver)!==null&&ne!==void 0?ne:I.default;return{strictSchema:($e=(ae=Ue.strictSchema)!==null&&ae!==void 0?ae:gi)!==null&&$e!==void 0?$e:!0,strictNumbers:(Ke=(Je=Ue.strictNumbers)!==null&&Je!==void 0?Je:gi)!==null&&Ke!==void 0?Ke:!0,strictTypes:(bs=(bt=Ue.strictTypes)!==null&&bt!==void 0?bt:gi)!==null&&bs!==void 0?bs:"log",strictTuples:(ue=(ge=Ue.strictTuples)!==null&&ge!==void 0?ge:gi)!==null&&ue!==void 0?ue:"log",strictRequired:(Ye=(De=Ue.strictRequired)!==null&&De!==void 0?De:gi)!==null&&Ye!==void 0?Ye:!1,code:Ue.code?{...Ue.code,optimize:pa,regExp:Ia}:{optimize:pa,regExp:Ia},loopRequired:(mi=Ue.loopRequired)!==null&&mi!==void 0?mi:j,loopEnum:(ws=Ue.loopEnum)!==null&&ws!==void 0?ws:j,meta:(pi=Ue.meta)!==null&&pi!==void 0?pi:!0,messages:(vr=Ue.messages)!==null&&vr!==void 0?vr:!0,inlineRefs:(Gi=Ue.inlineRefs)!==null&&Gi!==void 0?Gi:!0,schemaId:(ga=Ue.schemaId)!==null&&ga!==void 0?ga:"$id",addUsedSchema:(fa=Ue.addUsedSchema)!==null&&fa!==void 0?fa:!0,validateSchema:(ya=Ue.validateSchema)!==null&&ya!==void 0?ya:!0,validateFormats:(ua=Ue.validateFormats)!==null&&ua!==void 0?ua:!0,unicodeRegExp:(va=Ue.unicodeRegExp)!==null&&va!==void 0?va:!0,int32range:(_a=Ue.int32range)!==null&&_a!==void 0?_a:!0,uriResolver:se}}class X{constructor(ke={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,ke=this.opts={...ke,...Z(ke)};const{es5:qe,lines:Le}=this.opts.code;this.scope=new d.ValueScope({scope:{},prefixes:F,es5:qe,lines:Le}),this.logger=Re(ke.logger);const ne=ke.validateFormats;ke.validateFormats=!1,this.RULES=(0,a.getRules)(),Q.call(this,L,ke,"NOT SUPPORTED"),Q.call(this,Y,ke,"DEPRECATED","warn"),this._metaOpts=fe.call(this),ke.formats&&ie.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),ke.keywords&&de.call(this,ke.keywords),typeof ke.meta=="object"&&this.addMetaSchema(ke.meta),ee.call(this),ke.validateFormats=ne}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:ke,meta:qe,schemaId:Le}=this.opts;let ne=x;Le==="id"&&(ne={...x},ne.id=ne.$id,delete ne.$id),qe&&ke&&this.addMetaSchema(ne,ne[Le],!1)}defaultMeta(){const{meta:ke,schemaId:qe}=this.opts;return this.opts.defaultMeta=typeof ke=="object"?ke[qe]||ke:void 0}validate(ke,qe){let Le;if(typeof ke=="string"){if(Le=this.getSchema(ke),!Le)throw new Error(`no schema with key or ref "${ke}"`)}else Le=this.compile(ke);const ne=Le(qe);return"$async"in Le||(this.errors=Le.errors),ne}compile(ke,qe){const Le=this._addSchema(ke,qe);return Le.validate||this._compileSchemaEnv(Le)}compileAsync(ke,qe){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:Le}=this.opts;return ne.call(this,ke,qe);async function ne(bs,ge){await ae.call(this,bs.$schema);const ue=this._addSchema(bs,ge);return ue.validate||$e.call(this,ue)}async function ae(bs){bs&&!this.getSchema(bs)&&await ne.call(this,{$ref:bs},!0)}async function $e(bs){try{return this._compileSchemaEnv(bs)}catch(ge){if(!(ge instanceof i.default))throw ge;return Je.call(this,ge),await Ke.call(this,ge.missingSchema),$e.call(this,bs)}}function Je({missingSchema:bs,missingRef:ge}){if(this.refs[bs])throw new Error(`AnySchema ${bs} is loaded but ${ge} cannot be resolved`)}async function Ke(bs){const ge=await bt.call(this,bs);this.refs[bs]||await ae.call(this,ge.$schema),this.refs[bs]||this.addSchema(ge,bs,qe)}async function bt(bs){const ge=this._loading[bs];if(ge)return ge;try{return await(this._loading[bs]=Le(bs))}finally{delete this._loading[bs]}}}addSchema(ke,qe,Le,ne=this.opts.validateSchema){if(Array.isArray(ke)){for(const $e of ke)this.addSchema($e,void 0,Le,ne);return this}let ae;if(typeof ke=="object"){const{schemaId:$e}=this.opts;if(ae=ke[$e],ae!==void 0&&typeof ae!="string")throw new Error(`schema ${$e} must be string`)}return qe=(0,p.normalizeId)(qe||ae),this._checkUnique(qe),this.schemas[qe]=this._addSchema(ke,Le,qe,ne,!0),this}addMetaSchema(ke,qe,Le=this.opts.validateSchema){return this.addSchema(ke,qe,!0,Le),this}validateSchema(ke,qe){if(typeof ke=="boolean")return!0;let Le;if(Le=ke.$schema,Le!==void 0&&typeof Le!="string")throw new Error("$schema must be a string");if(Le=Le||this.opts.defaultMeta||this.defaultMeta(),!Le)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const ne=this.validate(Le,ke);if(!ne&&qe){const ae="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(ae);else throw new Error(ae)}return ne}getSchema(ke){let qe;for(;typeof(qe=J.call(this,ke))=="string";)ke=qe;if(qe===void 0){const{schemaId:Le}=this.opts,ne=new l.SchemaEnv({schema:{},schemaId:Le});if(qe=l.resolveSchema.call(this,ne,ke),!qe)return;this.refs[ke]=qe}return qe.validate||this._compileSchemaEnv(qe)}removeSchema(ke){if(ke instanceof RegExp)return this._removeAllSchemas(this.schemas,ke),this._removeAllSchemas(this.refs,ke),this;switch(typeof ke){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const qe=J.call(this,ke);return typeof qe=="object"&&this._cache.delete(qe.schema),delete this.schemas[ke],delete this.refs[ke],this}case"object":{const qe=ke;this._cache.delete(qe);let Le=ke[this.opts.schemaId];return Le&&(Le=(0,p.normalizeId)(Le),delete this.schemas[Le],delete this.refs[Le]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(ke){for(const qe of ke)this.addKeyword(qe);return this}addKeyword(ke,qe){let Le;if(typeof ke=="string")Le=ke,typeof qe=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),qe.keyword=Le);else if(typeof ke=="object"&&qe===void 0){if(qe=ke,Le=qe.keyword,Array.isArray(Le)&&!Le.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Ar.call(this,Le,qe),!qe)return(0,A.eachItem)(Le,ae=>Os.call(this,ae)),this;Ui.call(this,qe);const ne={...qe,type:(0,m.getJSONTypes)(qe.type),schemaType:(0,m.getJSONTypes)(qe.schemaType)};return(0,A.eachItem)(Le,ne.type.length===0?ae=>Os.call(this,ae,ne):ae=>ne.type.forEach($e=>Os.call(this,ae,ne,$e))),this}getKeyword(ke){const qe=this.RULES.all[ke];return typeof qe=="object"?qe.definition:!!qe}removeKeyword(ke){const{RULES:qe}=this;delete qe.keywords[ke],delete qe.all[ke];for(const Le of qe.rules){const ne=Le.rules.findIndex(ae=>ae.keyword===ke);ne>=0&&Le.rules.splice(ne,1)}return this}addFormat(ke,qe){return typeof qe=="string"&&(qe=new RegExp(qe)),this.formats[ke]=qe,this}errorsText(ke=this.errors,{separator:qe=", ",dataVar:Le="data"}={}){return!ke||ke.length===0?"No errors":ke.map(ne=>`${Le}${ne.instancePath} ${ne.message}`).reduce((ne,ae)=>ne+qe+ae)}$dataMetaSchema(ke,qe){const Le=this.RULES.all;ke=JSON.parse(JSON.stringify(ke));for(const ne of qe){const ae=ne.split("/").slice(1);let $e=ke;for(const Je of ae)$e=$e[Je];for(const Je in Le){const Ke=Le[Je];if(typeof Ke!="object")continue;const{$data:bt}=Ke.definition,bs=$e[Je];bt&&bs&&($e[Je]=ca(bs))}}return ke}_removeAllSchemas(ke,qe){for(const Le in ke){const ne=ke[Le];(!qe||qe.test(Le))&&(typeof ne=="string"?delete ke[Le]:ne&&!ne.meta&&(this._cache.delete(ne.schema),delete ke[Le]))}}_addSchema(ke,qe,Le,ne=this.opts.validateSchema,ae=this.opts.addUsedSchema){let $e;const{schemaId:Je}=this.opts;if(typeof ke=="object")$e=ke[Je];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof ke!="boolean")throw new Error("schema must be object or boolean")}let Ke=this._cache.get(ke);if(Ke!==void 0)return Ke;Le=(0,p.normalizeId)($e||Le);const bt=p.getSchemaRefs.call(this,ke,Le);return Ke=new l.SchemaEnv({schema:ke,schemaId:Je,meta:qe,baseId:Le,localRefs:bt}),this._cache.set(Ke.schema,Ke),ae&&!Le.startsWith("#")&&(Le&&this._checkUnique(Le),this.refs[Le]=Ke),ne&&this.validateSchema(ke,!0),Ke}_checkUnique(ke){if(this.schemas[ke]||this.refs[ke])throw new Error(`schema with key or id "${ke}" already exists`)}_compileSchemaEnv(ke){if(ke.meta?this._compileMetaSchema(ke):l.compileSchema.call(this,ke),!ke.validate)throw new Error("ajv implementation error");return ke.validate}_compileMetaSchema(ke){const qe=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,ke)}finally{this.opts=qe}}}X.ValidationError=n.default,X.MissingRefError=i.default,e.default=X;function Q(Ue,ke,qe,Le="error"){for(const ne in Ue){const ae=ne;ae in ke&&this.logger[Le](`${qe}: option ${ne}. ${Ue[ae]}`)}}function J(Ue){return Ue=(0,p.normalizeId)(Ue),this.schemas[Ue]||this.refs[Ue]}function ee(){const Ue=this.opts.schemas;if(Ue)if(Array.isArray(Ue))this.addSchema(Ue);else for(const ke in Ue)this.addSchema(Ue[ke],ke)}function ie(){for(const Ue in this.opts.formats){const ke=this.opts.formats[Ue];ke&&this.addFormat(Ue,ke)}}function de(Ue){if(Array.isArray(Ue)){this.addVocabulary(Ue);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const ke in Ue){const qe=Ue[ke];qe.keyword||(qe.keyword=ke),this.addKeyword(qe)}}function fe(){const Ue={...this.opts};for(const ke of q)delete Ue[ke];return Ue}const _e={log(){},warn(){},error(){}};function Re(Ue){if(Ue===!1)return _e;if(Ue===void 0)return console;if(Ue.log&&Ue.warn&&Ue.error)return Ue;throw new Error("logger must implement log, warn and error methods")}const Qe=/^[a-z_$][a-z0-9_$:-]*$/i;function Ar(Ue,ke){const{RULES:qe}=this;if((0,A.eachItem)(Ue,Le=>{if(qe.keywords[Le])throw new Error(`Keyword ${Le} is already defined`);if(!Qe.test(Le))throw new Error(`Keyword ${Le} has invalid name`)}),!!ke&&ke.$data&&!("code"in ke||"validate"in ke))throw new Error('$data keyword must have "code" or "validate" function')}function Os(Ue,ke,qe){var Le;const ne=ke?.post;if(qe&&ne)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:ae}=this;let $e=ne?ae.post:ae.rules.find(({type:Ke})=>Ke===qe);if($e||($e={type:qe,rules:[]},ae.rules.push($e)),ae.keywords[Ue]=!0,!ke)return;const Je={keyword:Ue,definition:{...ke,type:(0,m.getJSONTypes)(ke.type),schemaType:(0,m.getJSONTypes)(ke.schemaType)}};ke.before?ji.call(this,$e,Je,ke.before):$e.rules.push(Je),ae.all[Ue]=Je,(Le=ke.implements)===null||Le===void 0||Le.forEach(Ke=>this.addKeyword(Ke))}function ji(Ue,ke,qe){const Le=Ue.rules.findIndex(ne=>ne.keyword===qe);Le>=0?Ue.rules.splice(Le,0,ke):(Ue.rules.push(ke),this.logger.warn(`rule ${qe} is not defined`))}function Ui(Ue){let{metaSchema:ke}=Ue;ke!==void 0&&(Ue.$data&&this.opts.$data&&(ke=ca(ke)),Ue.validateSchema=this.compile(ke,!0))}const hi={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ca(Ue){return{anyOf:[Ue,hi]}}})(core$1)),core$1}var draft7={},core={},id$1={},hasRequiredId;function requireId(){if(hasRequiredId)return id$1;hasRequiredId=1,Object.defineProperty(id$1,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return id$1.default=e,id$1}var ref={},hasRequiredRef;function requireRef(){if(hasRequiredRef)return ref;hasRequiredRef=1,Object.defineProperty(ref,"__esModule",{value:!0}),ref.callRef=ref.getValidate=void 0;const e=requireRef_error(),t=requireCode(),r=requireCodegen(),n=requireNames(),i=requireCompile(),a=requireUtil(),l={keyword:"$ref",schemaType:"string",code(m){const{gen:A,schema:x,it:I}=m,{baseId:P,schemaEnv:q,validateName:F,opts:L,self:Y}=I,{root:j}=q;if((x==="#"||x==="#/")&&P===j.baseId)return X();const Z=i.resolveRef.call(Y,j,P,x);if(Z===void 0)throw new e.default(I.opts.uriResolver,P,x);if(Z instanceof i.SchemaEnv)return Q(Z);return J(Z);function X(){if(q===j)return p(m,F,q,q.$async);const ee=A.scopeValue("root",{ref:j});return p(m,(0,r._)`${ee}.validate`,j,j.$async)}function Q(ee){const ie=d(m,ee);p(m,ie,ee,ee.$async)}function J(ee){const ie=A.scopeValue("schema",L.code.source===!0?{ref:ee,code:(0,r.stringify)(ee)}:{ref:ee}),de=A.name("valid"),fe=m.subschema({schema:ee,dataTypes:[],schemaPath:r.nil,topSchemaRef:ie,errSchemaPath:x},de);m.mergeEvaluated(fe),m.ok(de)}}};function d(m,A){const{gen:x}=m;return A.validate?x.scopeValue("validate",{ref:A.validate}):(0,r._)`${x.scopeValue("wrapper",{ref:A})}.validate`}ref.getValidate=d;function p(m,A,x,I){const{gen:P,it:q}=m,{allErrors:F,schemaEnv:L,opts:Y}=q,j=Y.passContext?n.default.this:r.nil;I?Z():X();function Z(){if(!L.$async)throw new Error("async schema referenced by sync schema");const ee=P.let("valid");P.try(()=>{P.code((0,r._)`await ${(0,t.callValidateCode)(m,A,j)}`),J(A),F||P.assign(ee,!0)},ie=>{P.if((0,r._)`!(${ie} instanceof ${q.ValidationError})`,()=>P.throw(ie)),Q(ie),F||P.assign(ee,!1)}),m.ok(ee)}function X(){m.result((0,t.callValidateCode)(m,A,j),()=>J(A),()=>Q(A))}function Q(ee){const ie=(0,r._)`${ee}.errors`;P.assign(n.default.vErrors,(0,r._)`${n.default.vErrors} === null ? ${ie} : ${n.default.vErrors}.concat(${ie})`),P.assign(n.default.errors,(0,r._)`${n.default.vErrors}.length`)}function J(ee){var ie;if(!q.opts.unevaluated)return;const de=(ie=x?.validate)===null||ie===void 0?void 0:ie.evaluated;if(q.props!==!0)if(de&&!de.dynamicProps)de.props!==void 0&&(q.props=a.mergeEvaluated.props(P,de.props,q.props));else{const fe=P.var("props",(0,r._)`${ee}.evaluated.props`);q.props=a.mergeEvaluated.props(P,fe,q.props,r.Name)}if(q.items!==!0)if(de&&!de.dynamicItems)de.items!==void 0&&(q.items=a.mergeEvaluated.items(P,de.items,q.items));else{const fe=P.var("items",(0,r._)`${ee}.evaluated.items`);q.items=a.mergeEvaluated.items(P,fe,q.items,r.Name)}}}return ref.callRef=p,ref.default=l,ref}var hasRequiredCore;function requireCore(){if(hasRequiredCore)return core;hasRequiredCore=1,Object.defineProperty(core,"__esModule",{value:!0});const e=requireId(),t=requireRef(),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return core.default=r,core}var validation={},limitNumber={},hasRequiredLimitNumber;function requireLimitNumber(){if(hasRequiredLimitNumber)return limitNumber;hasRequiredLimitNumber=1,Object.defineProperty(limitNumber,"__esModule",{value:!0});const e=requireCodegen(),t=e.operators,r={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},n={message:({keyword:a,schemaCode:l})=>(0,e.str)`must be ${r[a].okStr} ${l}`,params:({keyword:a,schemaCode:l})=>(0,e._)`{comparison: ${r[a].okStr}, limit: ${l}}`},i={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:n,code(a){const{keyword:l,data:d,schemaCode:p}=a;a.fail$data((0,e._)`${d} ${r[l].fail} ${p} || isNaN(${d})`)}};return limitNumber.default=i,limitNumber}var multipleOf={},hasRequiredMultipleOf;function requireMultipleOf(){if(hasRequiredMultipleOf)return multipleOf;hasRequiredMultipleOf=1,Object.defineProperty(multipleOf,"__esModule",{value:!0});const e=requireCodegen(),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:n})=>(0,e.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,e._)`{multipleOf: ${n}}`},code(n){const{gen:i,data:a,schemaCode:l,it:d}=n,p=d.opts.multipleOfPrecision,m=i.let("res"),A=p?(0,e._)`Math.abs(Math.round(${m}) - ${m}) > 1e-${p}`:(0,e._)`${m} !== parseInt(${m})`;n.fail$data((0,e._)`(${l} === 0 || (${m} = ${a}/${l}, ${A}))`)}};return multipleOf.default=r,multipleOf}var limitLength={},ucs2length={},hasRequiredUcs2length;function requireUcs2length(){if(hasRequiredUcs2length)return ucs2length;hasRequiredUcs2length=1,Object.defineProperty(ucs2length,"__esModule",{value:!0});function e(t){const r=t.length;let n=0,i=0,a;for(;i<r;)n++,a=t.charCodeAt(i++),a>=55296&&a<=56319&&i<r&&(a=t.charCodeAt(i),(a&64512)===56320&&i++);return n}return ucs2length.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',ucs2length}var hasRequiredLimitLength;function requireLimitLength(){if(hasRequiredLimitLength)return limitLength;hasRequiredLimitLength=1,Object.defineProperty(limitLength,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r=requireUcs2length(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:a,schemaCode:l}){const d=a==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${d} than ${l} characters`},params:({schemaCode:a})=>(0,e._)`{limit: ${a}}`},code(a){const{keyword:l,data:d,schemaCode:p,it:m}=a,A=l==="maxLength"?e.operators.GT:e.operators.LT,x=m.opts.unicode===!1?(0,e._)`${d}.length`:(0,e._)`${(0,t.useFunc)(a.gen,r.default)}(${d})`;a.fail$data((0,e._)`${x} ${A} ${p}`)}};return limitLength.default=i,limitLength}var pattern={},hasRequiredPattern;function requirePattern(){if(hasRequiredPattern)return pattern;hasRequiredPattern=1,Object.defineProperty(pattern,"__esModule",{value:!0});const e=requireCode(),t=requireUtil(),r=requireCodegen(),i={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:a})=>(0,r.str)`must match pattern "${a}"`,params:({schemaCode:a})=>(0,r._)`{pattern: ${a}}`},code(a){const{gen:l,data:d,$data:p,schema:m,schemaCode:A,it:x}=a,I=x.opts.unicodeRegExp?"u":"";if(p){const{regExp:P}=x.opts.code,q=P.code==="new RegExp"?(0,r._)`new RegExp`:(0,t.useFunc)(l,P),F=l.let("valid");l.try(()=>l.assign(F,(0,r._)`${q}(${A}, ${I}).test(${d})`),()=>l.assign(F,!1)),a.fail$data((0,r._)`!${F}`)}else{const P=(0,e.usePattern)(a,m);a.fail$data((0,r._)`!${P}.test(${d})`)}}};return pattern.default=i,pattern}var limitProperties={},hasRequiredLimitProperties;function requireLimitProperties(){if(hasRequiredLimitProperties)return limitProperties;hasRequiredLimitProperties=1,Object.defineProperty(limitProperties,"__esModule",{value:!0});const e=requireCodegen(),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:i}){const a=n==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${i} properties`},params:({schemaCode:n})=>(0,e._)`{limit: ${n}}`},code(n){const{keyword:i,data:a,schemaCode:l}=n,d=i==="maxProperties"?e.operators.GT:e.operators.LT;n.fail$data((0,e._)`Object.keys(${a}).length ${d} ${l}`)}};return limitProperties.default=r,limitProperties}var required={},hasRequiredRequired;function requireRequired(){if(hasRequiredRequired)return required;hasRequiredRequired=1,Object.defineProperty(required,"__esModule",{value:!0});const e=requireCode(),t=requireCodegen(),r=requireUtil(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:a}})=>(0,t.str)`must have required property '${a}'`,params:({params:{missingProperty:a}})=>(0,t._)`{missingProperty: ${a}}`},code(a){const{gen:l,schema:d,schemaCode:p,data:m,$data:A,it:x}=a,{opts:I}=x;if(!A&&d.length===0)return;const P=d.length>=I.loopRequired;if(x.allErrors?q():F(),I.strictRequired){const j=a.parentSchema.properties,{definedProperties:Z}=a.it;for(const X of d)if(j?.[X]===void 0&&!Z.has(X)){const Q=x.schemaEnv.baseId+x.errSchemaPath,J=`required property "${X}" is not defined at "${Q}" (strictRequired)`;(0,r.checkStrictMode)(x,J,x.opts.strictRequired)}}function q(){if(P||A)a.block$data(t.nil,L);else for(const j of d)(0,e.checkReportMissingProp)(a,j)}function F(){const j=l.let("missing");if(P||A){const Z=l.let("valid",!0);a.block$data(Z,()=>Y(j,Z)),a.ok(Z)}else l.if((0,e.checkMissingProp)(a,d,j)),(0,e.reportMissingProp)(a,j),l.else()}function L(){l.forOf("prop",p,j=>{a.setParams({missingProperty:j}),l.if((0,e.noPropertyInData)(l,m,j,I.ownProperties),()=>a.error())})}function Y(j,Z){a.setParams({missingProperty:j}),l.forOf(j,p,()=>{l.assign(Z,(0,e.propertyInData)(l,m,j,I.ownProperties)),l.if((0,t.not)(Z),()=>{a.error(),l.break()})},t.nil)}}};return required.default=i,required}var limitItems={},hasRequiredLimitItems;function requireLimitItems(){if(hasRequiredLimitItems)return limitItems;hasRequiredLimitItems=1,Object.defineProperty(limitItems,"__esModule",{value:!0});const e=requireCodegen(),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:i}){const a=n==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${i} items`},params:({schemaCode:n})=>(0,e._)`{limit: ${n}}`},code(n){const{keyword:i,data:a,schemaCode:l}=n,d=i==="maxItems"?e.operators.GT:e.operators.LT;n.fail$data((0,e._)`${a}.length ${d} ${l}`)}};return limitItems.default=r,limitItems}var uniqueItems={},equal={},hasRequiredEqual;function requireEqual(){if(hasRequiredEqual)return equal;hasRequiredEqual=1,Object.defineProperty(equal,"__esModule",{value:!0});const e=requireFastDeepEqual();return e.code='require("ajv/dist/runtime/equal").default',equal.default=e,equal}var hasRequiredUniqueItems;function requireUniqueItems(){if(hasRequiredUniqueItems)return uniqueItems;hasRequiredUniqueItems=1,Object.defineProperty(uniqueItems,"__esModule",{value:!0});const e=requireDataType(),t=requireCodegen(),r=requireUtil(),n=requireEqual(),a={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:l,j:d}})=>(0,t.str)`must NOT have duplicate items (items ## ${d} and ${l} are identical)`,params:({params:{i:l,j:d}})=>(0,t._)`{i: ${l}, j: ${d}}`},code(l){const{gen:d,data:p,$data:m,schema:A,parentSchema:x,schemaCode:I,it:P}=l;if(!m&&!A)return;const q=d.let("valid"),F=x.items?(0,e.getSchemaTypes)(x.items):[];l.block$data(q,L,(0,t._)`${I} === false`),l.ok(q);function L(){const X=d.let("i",(0,t._)`${p}.length`),Q=d.let("j");l.setParams({i:X,j:Q}),d.assign(q,!0),d.if((0,t._)`${X} > 1`,()=>(Y()?j:Z)(X,Q))}function Y(){return F.length>0&&!F.some(X=>X==="object"||X==="array")}function j(X,Q){const J=d.name("item"),ee=(0,e.checkDataTypes)(F,J,P.opts.strictNumbers,e.DataType.Wrong),ie=d.const("indices",(0,t._)`{}`);d.for((0,t._)`;${X}--;`,()=>{d.let(J,(0,t._)`${p}[${X}]`),d.if(ee,(0,t._)`continue`),F.length>1&&d.if((0,t._)`typeof ${J} == "string"`,(0,t._)`${J} += "_"`),d.if((0,t._)`typeof ${ie}[${J}] == "number"`,()=>{d.assign(Q,(0,t._)`${ie}[${J}]`),l.error(),d.assign(q,!1).break()}).code((0,t._)`${ie}[${J}] = ${X}`)})}function Z(X,Q){const J=(0,r.useFunc)(d,n.default),ee=d.name("outer");d.label(ee).for((0,t._)`;${X}--;`,()=>d.for((0,t._)`${Q} = ${X}; ${Q}--;`,()=>d.if((0,t._)`${J}(${p}[${X}], ${p}[${Q}])`,()=>{l.error(),d.assign(q,!1).break(ee)})))}}};return uniqueItems.default=a,uniqueItems}var _const={},hasRequired_const;function require_const(){if(hasRequired_const)return _const;hasRequired_const=1,Object.defineProperty(_const,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r=requireEqual(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:a})=>(0,e._)`{allowedValue: ${a}}`},code(a){const{gen:l,data:d,$data:p,schemaCode:m,schema:A}=a;p||A&&typeof A=="object"?a.fail$data((0,e._)`!${(0,t.useFunc)(l,r.default)}(${d}, ${m})`):a.fail((0,e._)`${A} !== ${d}`)}};return _const.default=i,_const}var _enum={},hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,Object.defineProperty(_enum,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r=requireEqual(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:a})=>(0,e._)`{allowedValues: ${a}}`},code(a){const{gen:l,data:d,$data:p,schema:m,schemaCode:A,it:x}=a;if(!p&&m.length===0)throw new Error("enum must have non-empty array");const I=m.length>=x.opts.loopEnum;let P;const q=()=>P??(P=(0,t.useFunc)(l,r.default));let F;if(I||p)F=l.let("valid"),a.block$data(F,L);else{if(!Array.isArray(m))throw new Error("ajv implementation error");const j=l.const("vSchema",A);F=(0,e.or)(...m.map((Z,X)=>Y(j,X)))}a.pass(F);function L(){l.assign(F,!1),l.forOf("v",A,j=>l.if((0,e._)`${q()}(${d}, ${j})`,()=>l.assign(F,!0).break()))}function Y(j,Z){const X=m[Z];return typeof X=="object"&&X!==null?(0,e._)`${q()}(${d}, ${j}[${Z}])`:(0,e._)`${d} === ${X}`}}};return _enum.default=i,_enum}var hasRequiredValidation;function requireValidation(){if(hasRequiredValidation)return validation;hasRequiredValidation=1,Object.defineProperty(validation,"__esModule",{value:!0});const e=requireLimitNumber(),t=requireMultipleOf(),r=requireLimitLength(),n=requirePattern(),i=requireLimitProperties(),a=requireRequired(),l=requireLimitItems(),d=requireUniqueItems(),p=require_const(),m=require_enum(),A=[e.default,t.default,r.default,n.default,i.default,a.default,l.default,d.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},p.default,m.default];return validation.default=A,validation}var applicator={},additionalItems={},hasRequiredAdditionalItems;function requireAdditionalItems(){if(hasRequiredAdditionalItems)return additionalItems;hasRequiredAdditionalItems=1,Object.defineProperty(additionalItems,"__esModule",{value:!0}),additionalItems.validateAdditionalItems=void 0;const e=requireCodegen(),t=requireUtil(),n={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:a}})=>(0,e.str)`must NOT have more than ${a} items`,params:({params:{len:a}})=>(0,e._)`{limit: ${a}}`},code(a){const{parentSchema:l,it:d}=a,{items:p}=l;if(!Array.isArray(p)){(0,t.checkStrictMode)(d,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(a,p)}};function i(a,l){const{gen:d,schema:p,data:m,keyword:A,it:x}=a;x.items=!0;const I=d.const("len",(0,e._)`${m}.length`);if(p===!1)a.setParams({len:l.length}),a.pass((0,e._)`${I} <= ${l.length}`);else if(typeof p=="object"&&!(0,t.alwaysValidSchema)(x,p)){const q=d.var("valid",(0,e._)`${I} <= ${l.length}`);d.if((0,e.not)(q),()=>P(q)),a.ok(q)}function P(q){d.forRange("i",l.length,I,F=>{a.subschema({keyword:A,dataProp:F,dataPropType:t.Type.Num},q),x.allErrors||d.if((0,e.not)(q),()=>d.break())})}}return additionalItems.validateAdditionalItems=i,additionalItems.default=n,additionalItems}var prefixItems={},items={},hasRequiredItems;function requireItems(){if(hasRequiredItems)return items;hasRequiredItems=1,Object.defineProperty(items,"__esModule",{value:!0}),items.validateTuple=void 0;const e=requireCodegen(),t=requireUtil(),r=requireCode(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(a){const{schema:l,it:d}=a;if(Array.isArray(l))return i(a,"additionalItems",l);d.items=!0,!(0,t.alwaysValidSchema)(d,l)&&a.ok((0,r.validateArray)(a))}};function i(a,l,d=a.schema){const{gen:p,parentSchema:m,data:A,keyword:x,it:I}=a;F(m),I.opts.unevaluated&&d.length&&I.items!==!0&&(I.items=t.mergeEvaluated.items(p,d.length,I.items));const P=p.name("valid"),q=p.const("len",(0,e._)`${A}.length`);d.forEach((L,Y)=>{(0,t.alwaysValidSchema)(I,L)||(p.if((0,e._)`${q} > ${Y}`,()=>a.subschema({keyword:x,schemaProp:Y,dataProp:Y},P)),a.ok(P))});function F(L){const{opts:Y,errSchemaPath:j}=I,Z=d.length,X=Z===L.minItems&&(Z===L.maxItems||L[l]===!1);if(Y.strictTuples&&!X){const Q=`"${x}" is ${Z}-tuple, but minItems or maxItems/${l} are not specified or different at path "${j}"`;(0,t.checkStrictMode)(I,Q,Y.strictTuples)}}}return items.validateTuple=i,items.default=n,items}var hasRequiredPrefixItems;function requirePrefixItems(){if(hasRequiredPrefixItems)return prefixItems;hasRequiredPrefixItems=1,Object.defineProperty(prefixItems,"__esModule",{value:!0});const e=requireItems(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,e.validateTuple)(r,"items")};return prefixItems.default=t,prefixItems}var items2020={},hasRequiredItems2020;function requireItems2020(){if(hasRequiredItems2020)return items2020;hasRequiredItems2020=1,Object.defineProperty(items2020,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r=requireCode(),n=requireAdditionalItems(),a={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:l}})=>(0,e.str)`must NOT have more than ${l} items`,params:({params:{len:l}})=>(0,e._)`{limit: ${l}}`},code(l){const{schema:d,parentSchema:p,it:m}=l,{prefixItems:A}=p;m.items=!0,!(0,t.alwaysValidSchema)(m,d)&&(A?(0,n.validateAdditionalItems)(l,A):l.ok((0,r.validateArray)(l)))}};return items2020.default=a,items2020}var contains={},hasRequiredContains;function requireContains(){if(hasRequiredContains)return contains;hasRequiredContains=1,Object.defineProperty(contains,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),n={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:a}})=>a===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${a} valid item(s)`,params:({params:{min:i,max:a}})=>a===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${a}}`},code(i){const{gen:a,schema:l,parentSchema:d,data:p,it:m}=i;let A,x;const{minContains:I,maxContains:P}=d;m.opts.next?(A=I===void 0?1:I,x=P):A=1;const q=a.const("len",(0,e._)`${p}.length`);if(i.setParams({min:A,max:x}),x===void 0&&A===0){(0,t.checkStrictMode)(m,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(x!==void 0&&A>x){(0,t.checkStrictMode)(m,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(m,l)){let Z=(0,e._)`${q} >= ${A}`;x!==void 0&&(Z=(0,e._)`${Z} && ${q} <= ${x}`),i.pass(Z);return}m.items=!0;const F=a.name("valid");x===void 0&&A===1?Y(F,()=>a.if(F,()=>a.break())):A===0?(a.let(F,!0),x!==void 0&&a.if((0,e._)`${p}.length > 0`,L)):(a.let(F,!1),L()),i.result(F,()=>i.reset());function L(){const Z=a.name("_valid"),X=a.let("count",0);Y(Z,()=>a.if(Z,()=>j(X)))}function Y(Z,X){a.forRange("i",0,q,Q=>{i.subschema({keyword:"contains",dataProp:Q,dataPropType:t.Type.Num,compositeRule:!0},Z),X()})}function j(Z){a.code((0,e._)`${Z}++`),x===void 0?a.if((0,e._)`${Z} >= ${A}`,()=>a.assign(F,!0).break()):(a.if((0,e._)`${Z} > ${x}`,()=>a.assign(F,!1).break()),A===1?a.assign(F,!0):a.if((0,e._)`${Z} >= ${A}`,()=>a.assign(F,!0)))}}};return contains.default=n,contains}var dependencies={},hasRequiredDependencies;function requireDependencies(){return hasRequiredDependencies||(hasRequiredDependencies=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=requireCodegen(),r=requireUtil(),n=requireCode();e.error={message:({params:{property:p,depsCount:m,deps:A}})=>{const x=m===1?"property":"properties";return(0,t.str)`must have ${x} ${A} when property ${p} is present`},params:({params:{property:p,depsCount:m,deps:A,missingProperty:x}})=>(0,t._)`{property: ${p},
    missingProperty: ${x},
    depsCount: ${m},
    deps: ${A}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(p){const[m,A]=a(p);l(p,m),d(p,A)}};function a({schema:p}){const m={},A={};for(const x in p){if(x==="__proto__")continue;const I=Array.isArray(p[x])?m:A;I[x]=p[x]}return[m,A]}function l(p,m=p.schema){const{gen:A,data:x,it:I}=p;if(Object.keys(m).length===0)return;const P=A.let("missing");for(const q in m){const F=m[q];if(F.length===0)continue;const L=(0,n.propertyInData)(A,x,q,I.opts.ownProperties);p.setParams({property:q,depsCount:F.length,deps:F.join(", ")}),I.allErrors?A.if(L,()=>{for(const Y of F)(0,n.checkReportMissingProp)(p,Y)}):(A.if((0,t._)`${L} && (${(0,n.checkMissingProp)(p,F,P)})`),(0,n.reportMissingProp)(p,P),A.else())}}e.validatePropertyDeps=l;function d(p,m=p.schema){const{gen:A,data:x,keyword:I,it:P}=p,q=A.name("valid");for(const F in m)(0,r.alwaysValidSchema)(P,m[F])||(A.if((0,n.propertyInData)(A,x,F,P.opts.ownProperties),()=>{const L=p.subschema({keyword:I,schemaProp:F},q);p.mergeValidEvaluated(L,q)},()=>A.var(q,!0)),p.ok(q))}e.validateSchemaDeps=d,e.default=i})(dependencies)),dependencies}var propertyNames={},hasRequiredPropertyNames;function requirePropertyNames(){if(hasRequiredPropertyNames)return propertyNames;hasRequiredPropertyNames=1,Object.defineProperty(propertyNames,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),n={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:a,schema:l,data:d,it:p}=i;if((0,t.alwaysValidSchema)(p,l))return;const m=a.name("valid");a.forIn("key",d,A=>{i.setParams({propertyName:A}),i.subschema({keyword:"propertyNames",data:A,dataTypes:["string"],propertyName:A,compositeRule:!0},m),a.if((0,e.not)(m),()=>{i.error(!0),p.allErrors||a.break()})}),i.ok(m)}};return propertyNames.default=n,propertyNames}var additionalProperties={},hasRequiredAdditionalProperties;function requireAdditionalProperties(){if(hasRequiredAdditionalProperties)return additionalProperties;hasRequiredAdditionalProperties=1,Object.defineProperty(additionalProperties,"__esModule",{value:!0});const e=requireCode(),t=requireCodegen(),r=requireNames(),n=requireUtil(),a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:l})=>(0,t._)`{additionalProperty: ${l.additionalProperty}}`},code(l){const{gen:d,schema:p,parentSchema:m,data:A,errsCount:x,it:I}=l;if(!x)throw new Error("ajv implementation error");const{allErrors:P,opts:q}=I;if(I.props=!0,q.removeAdditional!=="all"&&(0,n.alwaysValidSchema)(I,p))return;const F=(0,e.allSchemaProperties)(m.properties),L=(0,e.allSchemaProperties)(m.patternProperties);Y(),l.ok((0,t._)`${x} === ${r.default.errors}`);function Y(){d.forIn("key",A,J=>{!F.length&&!L.length?X(J):d.if(j(J),()=>X(J))})}function j(J){let ee;if(F.length>8){const ie=(0,n.schemaRefOrVal)(I,m.properties,"properties");ee=(0,e.isOwnProperty)(d,ie,J)}else F.length?ee=(0,t.or)(...F.map(ie=>(0,t._)`${J} === ${ie}`)):ee=t.nil;return L.length&&(ee=(0,t.or)(ee,...L.map(ie=>(0,t._)`${(0,e.usePattern)(l,ie)}.test(${J})`))),(0,t.not)(ee)}function Z(J){d.code((0,t._)`delete ${A}[${J}]`)}function X(J){if(q.removeAdditional==="all"||q.removeAdditional&&p===!1){Z(J);return}if(p===!1){l.setParams({additionalProperty:J}),l.error(),P||d.break();return}if(typeof p=="object"&&!(0,n.alwaysValidSchema)(I,p)){const ee=d.name("valid");q.removeAdditional==="failing"?(Q(J,ee,!1),d.if((0,t.not)(ee),()=>{l.reset(),Z(J)})):(Q(J,ee),P||d.if((0,t.not)(ee),()=>d.break()))}}function Q(J,ee,ie){const de={keyword:"additionalProperties",dataProp:J,dataPropType:n.Type.Str};ie===!1&&Object.assign(de,{compositeRule:!0,createErrors:!1,allErrors:!1}),l.subschema(de,ee)}}};return additionalProperties.default=a,additionalProperties}var properties$1={},hasRequiredProperties;function requireProperties(){if(hasRequiredProperties)return properties$1;hasRequiredProperties=1,Object.defineProperty(properties$1,"__esModule",{value:!0});const e=requireValidate(),t=requireCode(),r=requireUtil(),n=requireAdditionalProperties(),i={keyword:"properties",type:"object",schemaType:"object",code(a){const{gen:l,schema:d,parentSchema:p,data:m,it:A}=a;A.opts.removeAdditional==="all"&&p.additionalProperties===void 0&&n.default.code(new e.KeywordCxt(A,n.default,"additionalProperties"));const x=(0,t.allSchemaProperties)(d);for(const L of x)A.definedProperties.add(L);A.opts.unevaluated&&x.length&&A.props!==!0&&(A.props=r.mergeEvaluated.props(l,(0,r.toHash)(x),A.props));const I=x.filter(L=>!(0,r.alwaysValidSchema)(A,d[L]));if(I.length===0)return;const P=l.name("valid");for(const L of I)q(L)?F(L):(l.if((0,t.propertyInData)(l,m,L,A.opts.ownProperties)),F(L),A.allErrors||l.else().var(P,!0),l.endIf()),a.it.definedProperties.add(L),a.ok(P);function q(L){return A.opts.useDefaults&&!A.compositeRule&&d[L].default!==void 0}function F(L){a.subschema({keyword:"properties",schemaProp:L,dataProp:L},P)}}};return properties$1.default=i,properties$1}var patternProperties={},hasRequiredPatternProperties;function requirePatternProperties(){if(hasRequiredPatternProperties)return patternProperties;hasRequiredPatternProperties=1,Object.defineProperty(patternProperties,"__esModule",{value:!0});const e=requireCode(),t=requireCodegen(),r=requireUtil(),n=requireUtil(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(a){const{gen:l,schema:d,data:p,parentSchema:m,it:A}=a,{opts:x}=A,I=(0,e.allSchemaProperties)(d),P=I.filter(X=>(0,r.alwaysValidSchema)(A,d[X]));if(I.length===0||P.length===I.length&&(!A.opts.unevaluated||A.props===!0))return;const q=x.strictSchema&&!x.allowMatchingProperties&&m.properties,F=l.name("valid");A.props!==!0&&!(A.props instanceof t.Name)&&(A.props=(0,n.evaluatedPropsToName)(l,A.props));const{props:L}=A;Y();function Y(){for(const X of I)q&&j(X),A.allErrors?Z(X):(l.var(F,!0),Z(X),l.if(F))}function j(X){for(const Q in q)new RegExp(X).test(Q)&&(0,r.checkStrictMode)(A,`property ${Q} matches pattern ${X} (use allowMatchingProperties)`)}function Z(X){l.forIn("key",p,Q=>{l.if((0,t._)`${(0,e.usePattern)(a,X)}.test(${Q})`,()=>{const J=P.includes(X);J||a.subschema({keyword:"patternProperties",schemaProp:X,dataProp:Q,dataPropType:n.Type.Str},F),A.opts.unevaluated&&L!==!0?l.assign((0,t._)`${L}[${Q}]`,!0):!J&&!A.allErrors&&l.if((0,t.not)(F),()=>l.break())})})}}};return patternProperties.default=i,patternProperties}var not={},hasRequiredNot;function requireNot(){if(hasRequiredNot)return not;hasRequiredNot=1,Object.defineProperty(not,"__esModule",{value:!0});const e=requireUtil(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(r){const{gen:n,schema:i,it:a}=r;if((0,e.alwaysValidSchema)(a,i)){r.fail();return}const l=n.name("valid");r.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},l),r.failResult(l,()=>r.reset(),()=>r.error())},error:{message:"must NOT be valid"}};return not.default=t,not}var anyOf={},hasRequiredAnyOf;function requireAnyOf(){if(hasRequiredAnyOf)return anyOf;hasRequiredAnyOf=1,Object.defineProperty(anyOf,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:requireCode().validateUnion,error:{message:"must match a schema in anyOf"}};return anyOf.default=t,anyOf}var oneOf={},hasRequiredOneOf;function requireOneOf(){if(hasRequiredOneOf)return oneOf;hasRequiredOneOf=1,Object.defineProperty(oneOf,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),n={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:a,schema:l,parentSchema:d,it:p}=i;if(!Array.isArray(l))throw new Error("ajv implementation error");if(p.opts.discriminator&&d.discriminator)return;const m=l,A=a.let("valid",!1),x=a.let("passing",null),I=a.name("_valid");i.setParams({passing:x}),a.block(P),i.result(A,()=>i.reset(),()=>i.error(!0));function P(){m.forEach((q,F)=>{let L;(0,t.alwaysValidSchema)(p,q)?a.var(I,!0):L=i.subschema({keyword:"oneOf",schemaProp:F,compositeRule:!0},I),F>0&&a.if((0,e._)`${I} && ${A}`).assign(A,!1).assign(x,(0,e._)`[${x}, ${F}]`).else(),a.if(I,()=>{a.assign(A,!0),a.assign(x,F),L&&i.mergeEvaluated(L,e.Name)})})}}};return oneOf.default=n,oneOf}var allOf={},hasRequiredAllOf;function requireAllOf(){if(hasRequiredAllOf)return allOf;hasRequiredAllOf=1,Object.defineProperty(allOf,"__esModule",{value:!0});const e=requireUtil(),t={keyword:"allOf",schemaType:"array",code(r){const{gen:n,schema:i,it:a}=r;if(!Array.isArray(i))throw new Error("ajv implementation error");const l=n.name("valid");i.forEach((d,p)=>{if((0,e.alwaysValidSchema)(a,d))return;const m=r.subschema({keyword:"allOf",schemaProp:p},l);r.ok(l),r.mergeEvaluated(m)})}};return allOf.default=t,allOf}var _if={},hasRequired_if;function require_if(){if(hasRequired_if)return _if;hasRequired_if=1,Object.defineProperty(_if,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:a})=>(0,e.str)`must match "${a.ifClause}" schema`,params:({params:a})=>(0,e._)`{failingKeyword: ${a.ifClause}}`},code(a){const{gen:l,parentSchema:d,it:p}=a;d.then===void 0&&d.else===void 0&&(0,t.checkStrictMode)(p,'"if" without "then" and "else" is ignored');const m=i(p,"then"),A=i(p,"else");if(!m&&!A)return;const x=l.let("valid",!0),I=l.name("_valid");if(P(),a.reset(),m&&A){const F=l.let("ifClause");a.setParams({ifClause:F}),l.if(I,q("then",F),q("else",F))}else m?l.if(I,q("then")):l.if((0,e.not)(I),q("else"));a.pass(x,()=>a.error(!0));function P(){const F=a.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},I);a.mergeEvaluated(F)}function q(F,L){return()=>{const Y=a.subschema({keyword:F},I);l.assign(x,I),a.mergeValidEvaluated(Y,x),L?l.assign(L,(0,e._)`${F}`):a.setParams({ifClause:F})}}}};function i(a,l){const d=a.schema[l];return d!==void 0&&!(0,t.alwaysValidSchema)(a,d)}return _if.default=n,_if}var thenElse={},hasRequiredThenElse;function requireThenElse(){if(hasRequiredThenElse)return thenElse;hasRequiredThenElse=1,Object.defineProperty(thenElse,"__esModule",{value:!0});const e=requireUtil(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:n,it:i}){n.if===void 0&&(0,e.checkStrictMode)(i,`"${r}" without "if" is ignored`)}};return thenElse.default=t,thenElse}var hasRequiredApplicator;function requireApplicator(){if(hasRequiredApplicator)return applicator;hasRequiredApplicator=1,Object.defineProperty(applicator,"__esModule",{value:!0});const e=requireAdditionalItems(),t=requirePrefixItems(),r=requireItems(),n=requireItems2020(),i=requireContains(),a=requireDependencies(),l=requirePropertyNames(),d=requireAdditionalProperties(),p=requireProperties(),m=requirePatternProperties(),A=requireNot(),x=requireAnyOf(),I=requireOneOf(),P=requireAllOf(),q=require_if(),F=requireThenElse();function L(Y=!1){const j=[A.default,x.default,I.default,P.default,q.default,F.default,l.default,d.default,a.default,p.default,m.default];return Y?j.push(t.default,n.default):j.push(e.default,r.default),j.push(i.default),j}return applicator.default=L,applicator}var format$2={},format$1={},hasRequiredFormat$1;function requireFormat$1(){if(hasRequiredFormat$1)return format$1;hasRequiredFormat$1=1,Object.defineProperty(format$1,"__esModule",{value:!0});const e=requireCodegen(),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,e.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,e._)`{format: ${n}}`},code(n,i){const{gen:a,data:l,$data:d,schema:p,schemaCode:m,it:A}=n,{opts:x,errSchemaPath:I,schemaEnv:P,self:q}=A;if(!x.validateFormats)return;d?F():L();function F(){const Y=a.scopeValue("formats",{ref:q.formats,code:x.code.formats}),j=a.const("fDef",(0,e._)`${Y}[${m}]`),Z=a.let("fType"),X=a.let("format");a.if((0,e._)`typeof ${j} == "object" && !(${j} instanceof RegExp)`,()=>a.assign(Z,(0,e._)`${j}.type || "string"`).assign(X,(0,e._)`${j}.validate`),()=>a.assign(Z,(0,e._)`"string"`).assign(X,j)),n.fail$data((0,e.or)(Q(),J()));function Q(){return x.strictSchema===!1?e.nil:(0,e._)`${m} && !${X}`}function J(){const ee=P.$async?(0,e._)`(${j}.async ? await ${X}(${l}) : ${X}(${l}))`:(0,e._)`${X}(${l})`,ie=(0,e._)`(typeof ${X} == "function" ? ${ee} : ${X}.test(${l}))`;return(0,e._)`${X} && ${X} !== true && ${Z} === ${i} && !${ie}`}}function L(){const Y=q.formats[p];if(!Y){Q();return}if(Y===!0)return;const[j,Z,X]=J(Y);j===i&&n.pass(ee());function Q(){if(x.strictSchema===!1){q.logger.warn(ie());return}throw new Error(ie());function ie(){return`unknown format "${p}" ignored in schema at path "${I}"`}}function J(ie){const de=ie instanceof RegExp?(0,e.regexpCode)(ie):x.code.formats?(0,e._)`${x.code.formats}${(0,e.getProperty)(p)}`:void 0,fe=a.scopeValue("formats",{key:p,ref:ie,code:de});return typeof ie=="object"&&!(ie instanceof RegExp)?[ie.type||"string",ie.validate,(0,e._)`${fe}.validate`]:["string",ie,fe]}function ee(){if(typeof Y=="object"&&!(Y instanceof RegExp)&&Y.async){if(!P.$async)throw new Error("async format in sync schema");return(0,e._)`await ${X}(${l})`}return typeof Z=="function"?(0,e._)`${X}(${l})`:(0,e._)`${X}.test(${l})`}}}};return format$1.default=r,format$1}var hasRequiredFormat;function requireFormat(){if(hasRequiredFormat)return format$2;hasRequiredFormat=1,Object.defineProperty(format$2,"__esModule",{value:!0});const t=[requireFormat$1().default];return format$2.default=t,format$2}var metadata={},hasRequiredMetadata;function requireMetadata(){return hasRequiredMetadata||(hasRequiredMetadata=1,Object.defineProperty(metadata,"__esModule",{value:!0}),metadata.contentVocabulary=metadata.metadataVocabulary=void 0,metadata.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],metadata.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),metadata}var hasRequiredDraft7;function requireDraft7(){if(hasRequiredDraft7)return draft7;hasRequiredDraft7=1,Object.defineProperty(draft7,"__esModule",{value:!0});const e=requireCore(),t=requireValidation(),r=requireApplicator(),n=requireFormat(),i=requireMetadata(),a=[e.default,t.default,(0,r.default)(),n.default,i.metadataVocabulary,i.contentVocabulary];return draft7.default=a,draft7}var discriminator={},types={},hasRequiredTypes;function requireTypes(){if(hasRequiredTypes)return types;hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0}),types.DiscrError=void 0;var e;return(function(t){t.Tag="tag",t.Mapping="mapping"})(e||(types.DiscrError=e={})),types}var hasRequiredDiscriminator;function requireDiscriminator(){if(hasRequiredDiscriminator)return discriminator;hasRequiredDiscriminator=1,Object.defineProperty(discriminator,"__esModule",{value:!0});const e=requireCodegen(),t=requireTypes(),r=requireCompile(),n=requireRef_error(),i=requireUtil(),l={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:d,tagName:p}})=>d===t.DiscrError.Tag?`tag "${p}" must be string`:`value of tag "${p}" must be in oneOf`,params:({params:{discrError:d,tag:p,tagName:m}})=>(0,e._)`{error: ${d}, tag: ${m}, tagValue: ${p}}`},code(d){const{gen:p,data:m,schema:A,parentSchema:x,it:I}=d,{oneOf:P}=x;if(!I.opts.discriminator)throw new Error("discriminator: requires discriminator option");const q=A.propertyName;if(typeof q!="string")throw new Error("discriminator: requires propertyName");if(A.mapping)throw new Error("discriminator: mapping is not supported");if(!P)throw new Error("discriminator: requires oneOf keyword");const F=p.let("valid",!1),L=p.const("tag",(0,e._)`${m}${(0,e.getProperty)(q)}`);p.if((0,e._)`typeof ${L} == "string"`,()=>Y(),()=>d.error(!1,{discrError:t.DiscrError.Tag,tag:L,tagName:q})),d.ok(F);function Y(){const X=Z();p.if(!1);for(const Q in X)p.elseIf((0,e._)`${L} === ${Q}`),p.assign(F,j(X[Q]));p.else(),d.error(!1,{discrError:t.DiscrError.Mapping,tag:L,tagName:q}),p.endIf()}function j(X){const Q=p.name("valid"),J=d.subschema({keyword:"oneOf",schemaProp:X},Q);return d.mergeEvaluated(J,e.Name),Q}function Z(){var X;const Q={},J=ie(x);let ee=!0;for(let _e=0;_e<P.length;_e++){let Re=P[_e];if(Re?.$ref&&!(0,i.schemaHasRulesButRef)(Re,I.self.RULES)){const Ar=Re.$ref;if(Re=r.resolveRef.call(I.self,I.schemaEnv.root,I.baseId,Ar),Re instanceof r.SchemaEnv&&(Re=Re.schema),Re===void 0)throw new n.default(I.opts.uriResolver,I.baseId,Ar)}const Qe=(X=Re?.properties)===null||X===void 0?void 0:X[q];if(typeof Qe!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${q}"`);ee=ee&&(J||ie(Re)),de(Qe,_e)}if(!ee)throw new Error(`discriminator: "${q}" must be required`);return Q;function ie({required:_e}){return Array.isArray(_e)&&_e.includes(q)}function de(_e,Re){if(_e.const)fe(_e.const,Re);else if(_e.enum)for(const Qe of _e.enum)fe(Qe,Re);else throw new Error(`discriminator: "properties/${q}" must have "const" or "enum"`)}function fe(_e,Re){if(typeof _e!="string"||_e in Q)throw new Error(`discriminator: "${q}" values must be unique strings`);Q[_e]=Re}}}};return discriminator.default=l,discriminator}const $schema="http://json-schema.org/draft-07/schema#",$id="http://json-schema.org/draft-07/schema#",title="Core schema meta-schema",definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type=["object","boolean"],properties={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3={$schema,$id,title,definitions,type,properties,default:!0};var hasRequiredAjv;function requireAjv(){return hasRequiredAjv||(hasRequiredAjv=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=requireCore$1(),n=requireDraft7(),i=requireDiscriminator(),a=require$$3,l=["/properties"],d="http://json-schema.org/draft-07/schema";class p extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(q=>this.addVocabulary(q)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const q=this.opts.$data?this.$dataMetaSchema(a,l):a;this.addMetaSchema(q,d,!1),this.refs["http://json-schema.org/schema"]=d}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(d)?d:void 0)}}t.Ajv=p,e.exports=t=p,e.exports.Ajv=p,Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var m=requireValidate();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return m.KeywordCxt}});var A=requireCodegen();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return A._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return A.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return A.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return A.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return A.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return A.CodeGen}});var x=requireValidation_error();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return x.default}});var I=requireRef_error();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return I.default}})})(ajv,ajv.exports)),ajv.exports}var ajvExports=requireAjv();const Ajv2=getDefaultExportFromCjs$1(ajvExports);function __awaiter$3(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function d(A){try{m(n.next(A))}catch(x){l(x)}}function p(A){try{m(n.throw(A))}catch(x){l(x)}}function m(A){A.done?a(A.value):i(A.value).then(d,p)}m((n=n.apply(e,[])).next())})}function __generator$2(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(m){return function(A){return p([m,A])}}function p(m){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=m[0]&2?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,i=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){r.label=m[1];break}if(m[0]===6&&r.label<a[1]){r.label=a[1],a=m;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(m);break}a[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(A){m=[6,A],i=0}finally{n=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function __read$1(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],l;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(d){l={error:d}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a}function __spreadArray$1(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var defaultErrorConfig$1={withStackTrace:!1},createNeverThrowError$1=function(e,t,r){r===void 0&&(r=defaultErrorConfig$1);var n=t.isOk()?{type:"Ok",value:t.value}:{type:"Err",value:t.error},i=r.withStackTrace?new Error().stack:void 0;return{data:n,message:e,stack:i}},Result$1;(function(e){function t(r,n){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];try{var l=r.apply(void 0,__spreadArray$1([],__read$1(i),!1));return ok$2(l)}catch(d){return err$2(n?n(d):d)}}}e.fromThrowable=t})(Result$1||(Result$1={}));var ok$2=function(e){return new Ok$2(e)},err$2=function(e){return new Err$2(e)},Ok$2=(function(){function e(t){this.value=t}return e.prototype.isOk=function(){return!0},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return ok$2(t(this.value))},e.prototype.mapErr=function(t){return ok$2(this.value)},e.prototype.andThen=function(t){return t(this.value)},e.prototype.orElse=function(t){return ok$2(this.value)},e.prototype.asyncAndThen=function(t){return t(this.value)},e.prototype.asyncMap=function(t){return ResultAsync$2.fromSafePromise(t(this.value))},e.prototype.unwrapOr=function(t){return this.value},e.prototype.match=function(t,r){return t(this.value)},e.prototype._unsafeUnwrap=function(t){return this.value},e.prototype._unsafeUnwrapErr=function(t){throw createNeverThrowError$1("Called `_unsafeUnwrapErr` on an Ok",this,t)},e})(),Err$2=(function(){function e(t){this.error=t}return e.prototype.isOk=function(){return!1},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return err$2(this.error)},e.prototype.mapErr=function(t){return err$2(t(this.error))},e.prototype.andThen=function(t){return err$2(this.error)},e.prototype.orElse=function(t){return t(this.error)},e.prototype.asyncAndThen=function(t){return errAsync$2(this.error)},e.prototype.asyncMap=function(t){return errAsync$2(this.error)},e.prototype.unwrapOr=function(t){return t},e.prototype.match=function(t,r){return r(this.error)},e.prototype._unsafeUnwrap=function(t){throw createNeverThrowError$1("Called `_unsafeUnwrap` on an Err",this,t)},e.prototype._unsafeUnwrapErr=function(t){return this.error},e})();Result$1.fromThrowable;var ResultAsync$2=(function(){function e(t){this._promise=t}return e.fromSafePromise=function(t){var r=t.then(function(n){return new Ok$2(n)});return new e(r)},e.fromPromise=function(t,r){var n=t.then(function(i){return new Ok$2(i)}).catch(function(i){return new Err$2(r(i))});return new e(n)},e.prototype.map=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$3(r,void 0,void 0,function(){var i;return __generator$2(this,function(a){switch(a.label){case 0:return n.isErr()?[2,new Err$2(n.error)]:(i=Ok$2.bind,[4,t(n.value)]);case 1:return[2,new(i.apply(Ok$2,[void 0,a.sent()]))]}})})}))},e.prototype.mapErr=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$3(r,void 0,void 0,function(){var i;return __generator$2(this,function(a){switch(a.label){case 0:return n.isOk()?[2,new Ok$2(n.value)]:(i=Err$2.bind,[4,t(n.error)]);case 1:return[2,new(i.apply(Err$2,[void 0,a.sent()]))]}})})}))},e.prototype.andThen=function(t){return new e(this._promise.then(function(r){if(r.isErr())return new Err$2(r.error);var n=t(r.value);return n instanceof e?n._promise:n}))},e.prototype.orElse=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$3(r,void 0,void 0,function(){return __generator$2(this,function(i){return n.isErr()?[2,t(n.error)]:[2,new Ok$2(n.value)]})})}))},e.prototype.match=function(t,r){return this._promise.then(function(n){return n.match(t,r)})},e.prototype.unwrapOr=function(t){return this._promise.then(function(r){return r.unwrapOr(t)})},e.prototype.then=function(t,r){return this._promise.then(t,r)},e})(),errAsync$2=function(e){return new ResultAsync$2(Promise.resolve(new Err$2(e)))};ResultAsync$2.fromPromise;ResultAsync$2.fromSafePromise;const ALIAS=Symbol.for("yaml.alias"),DOC=Symbol.for("yaml.document"),MAP=Symbol.for("yaml.map"),PAIR=Symbol.for("yaml.pair"),SCALAR$1=Symbol.for("yaml.scalar"),SEQ=Symbol.for("yaml.seq"),NODE_TYPE=Symbol.for("yaml.node.type"),isAlias=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===ALIAS,isDocument=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===DOC,isMap=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===MAP,isPair=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===PAIR,isScalar$1=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===SCALAR$1,isSeq=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===SEQ;function isCollection$1(e){if(e&&typeof e=="object")switch(e[NODE_TYPE]){case MAP:case SEQ:return!0}return!1}function isNode(e){if(e&&typeof e=="object")switch(e[NODE_TYPE]){case ALIAS:case MAP:case SCALAR$1:case SEQ:return!0}return!1}const hasAnchor=e=>(isScalar$1(e)||isCollection$1(e))&&!!e.anchor,BREAK$1=Symbol("break visit"),SKIP$1=Symbol("skip children"),REMOVE$1=Symbol("remove node");function visit$1(e,t){const r=initVisitor(t);isDocument(e)?visit_(null,e.contents,r,Object.freeze([e]))===REMOVE$1&&(e.contents=null):visit_(null,e,r,Object.freeze([]))}visit$1.BREAK=BREAK$1;visit$1.SKIP=SKIP$1;visit$1.REMOVE=REMOVE$1;function visit_(e,t,r,n){const i=callVisitor(e,t,r,n);if(isNode(i)||isPair(i))return replaceNode(e,n,i),visit_(e,i,r,n);if(typeof i!="symbol"){if(isCollection$1(t)){n=Object.freeze(n.concat(t));for(let a=0;a<t.items.length;++a){const l=visit_(a,t.items[a],r,n);if(typeof l=="number")a=l-1;else{if(l===BREAK$1)return BREAK$1;l===REMOVE$1&&(t.items.splice(a,1),a-=1)}}}else if(isPair(t)){n=Object.freeze(n.concat(t));const a=visit_("key",t.key,r,n);if(a===BREAK$1)return BREAK$1;a===REMOVE$1&&(t.key=null);const l=visit_("value",t.value,r,n);if(l===BREAK$1)return BREAK$1;l===REMOVE$1&&(t.value=null)}}return i}async function visitAsync(e,t){const r=initVisitor(t);isDocument(e)?await visitAsync_(null,e.contents,r,Object.freeze([e]))===REMOVE$1&&(e.contents=null):await visitAsync_(null,e,r,Object.freeze([]))}visitAsync.BREAK=BREAK$1;visitAsync.SKIP=SKIP$1;visitAsync.REMOVE=REMOVE$1;async function visitAsync_(e,t,r,n){const i=await callVisitor(e,t,r,n);if(isNode(i)||isPair(i))return replaceNode(e,n,i),visitAsync_(e,i,r,n);if(typeof i!="symbol"){if(isCollection$1(t)){n=Object.freeze(n.concat(t));for(let a=0;a<t.items.length;++a){const l=await visitAsync_(a,t.items[a],r,n);if(typeof l=="number")a=l-1;else{if(l===BREAK$1)return BREAK$1;l===REMOVE$1&&(t.items.splice(a,1),a-=1)}}}else if(isPair(t)){n=Object.freeze(n.concat(t));const a=await visitAsync_("key",t.key,r,n);if(a===BREAK$1)return BREAK$1;a===REMOVE$1&&(t.key=null);const l=await visitAsync_("value",t.value,r,n);if(l===BREAK$1)return BREAK$1;l===REMOVE$1&&(t.value=null)}}return i}function initVisitor(e){return typeof e=="object"&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function callVisitor(e,t,r,n){if(typeof r=="function")return r(e,t,n);if(isMap(t))return r.Map?.(e,t,n);if(isSeq(t))return r.Seq?.(e,t,n);if(isPair(t))return r.Pair?.(e,t,n);if(isScalar$1(t))return r.Scalar?.(e,t,n);if(isAlias(t))return r.Alias?.(e,t,n)}function replaceNode(e,t,r){const n=t[t.length-1];if(isCollection$1(n))n.items[e]=r;else if(isPair(n))e==="key"?n.key=r:n.value=r;else if(isDocument(n))n.contents=r;else{const i=isAlias(n)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const escapeChars={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},escapeTagName=e=>e.replace(/[!,[\]{}]/g,t=>escapeChars[t]);class Directives{constructor(t,r){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Directives.defaultYaml,t),this.tags=Object.assign({},Directives.defaultTags,r)}clone(){const t=new Directives(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){const t=new Directives(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Directives.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Directives.defaultTags);break}return t}add(t,r){this.atNextDocument&&(this.yaml={explicit:Directives.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Directives.defaultTags),this.atNextDocument=!1);const n=t.trim().split(/[ \t]+/),i=n.shift();switch(i){case"%TAG":{if(n.length!==2&&(r(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[a,l]=n;return this.tags[a]=l,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length!==1)return r(0,"%YAML directive should contain exactly one part"),!1;const[a]=n;if(a==="1.1"||a==="1.2")return this.yaml.version=a,!0;{const l=/^\d+\.\d+$/.test(a);return r(6,`Unsupported YAML version ${a}`,l),!1}}default:return r(0,`Unknown directive ${i}`,!0),!1}}tagName(t,r){if(t==="!")return"!";if(t[0]!=="!")return r(`Not a valid tag: ${t}`),null;if(t[1]==="<"){const l=t.slice(2,-1);return l==="!"||l==="!!"?(r(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(t[t.length-1]!==">"&&r("Verbatim tags must end with a >"),l)}const[,n,i]=t.match(/^(.*!)([^!]*)$/s);i||r(`The ${t} tag has no suffix`);const a=this.tags[n];if(a)try{return a+decodeURIComponent(i)}catch(l){return r(String(l)),null}return n==="!"?t:(r(`Could not resolve tag: ${t}`),null)}tagString(t){for(const[r,n]of Object.entries(this.tags))if(t.startsWith(n))return r+escapeTagName(t.substring(n.length));return t[0]==="!"?t:`!<${t}>`}toString(t){const r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let i;if(t&&n.length>0&&isNode(t.contents)){const a={};visit$1(t.contents,(l,d)=>{isNode(d)&&d.tag&&(a[d.tag]=!0)}),i=Object.keys(a)}else i=[];for(const[a,l]of n)a==="!!"&&l==="tag:yaml.org,2002:"||(!t||i.some(d=>d.startsWith(l)))&&r.push(`%TAG ${a} ${l}`);return r.join(`
`)}}Directives.defaultYaml={explicit:!1,version:"1.2"};Directives.defaultTags={"!!":"tag:yaml.org,2002:"};function anchorIsValid(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const r=`Anchor must not contain whitespace or control characters: ${JSON.stringify(e)}`;throw new Error(r)}return!0}function anchorNames(e){const t=new Set;return visit$1(e,{Value(r,n){n.anchor&&t.add(n.anchor)}}),t}function findNewAnchor(e,t){for(let r=1;;++r){const n=`${e}${r}`;if(!t.has(n))return n}}function createNodeAnchors(e,t){const r=[],n=new Map;let i=null;return{onAnchor:a=>{r.push(a),i??(i=anchorNames(e));const l=findNewAnchor(t,i);return i.add(l),l},setAnchors:()=>{for(const a of r){const l=n.get(a);if(typeof l=="object"&&l.anchor&&(isScalar$1(l.node)||isCollection$1(l.node)))l.node.anchor=l.anchor;else{const d=new Error("Failed to resolve repeated object (this should not happen)");throw d.source=a,d}}},sourceObjects:n}}function applyReviver(e,t,r,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let i=0,a=n.length;i<a;++i){const l=n[i],d=applyReviver(e,n,String(i),l);d===void 0?delete n[i]:d!==l&&(n[i]=d)}else if(n instanceof Map)for(const i of Array.from(n.keys())){const a=n.get(i),l=applyReviver(e,n,i,a);l===void 0?n.delete(i):l!==a&&n.set(i,l)}else if(n instanceof Set)for(const i of Array.from(n)){const a=applyReviver(e,n,i,i);a===void 0?n.delete(i):a!==i&&(n.delete(i),n.add(a))}else for(const[i,a]of Object.entries(n)){const l=applyReviver(e,n,i,a);l===void 0?delete n[i]:l!==a&&(n[i]=l)}return e.call(t,r,n)}function toJS(e,t,r){if(Array.isArray(e))return e.map((n,i)=>toJS(n,String(i),r));if(e&&typeof e.toJSON=="function"){if(!r||!hasAnchor(e))return e.toJSON(t,r);const n={aliasCount:0,count:1,res:void 0};r.anchors.set(e,n),r.onCreate=a=>{n.res=a,delete r.onCreate};const i=e.toJSON(t,r);return r.onCreate&&r.onCreate(i),i}return typeof e=="bigint"&&!r?.keep?Number(e):e}class NodeBase{constructor(t){Object.defineProperty(this,NODE_TYPE,{value:t})}clone(){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}toJS(t,{mapAsMap:r,maxAliasCount:n,onAnchor:i,reviver:a}={}){if(!isDocument(t))throw new TypeError("A document argument is required");const l={anchors:new Map,doc:t,keep:!0,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof n=="number"?n:100},d=toJS(this,"",l);if(typeof i=="function")for(const{count:p,res:m}of l.anchors.values())i(m,p);return typeof a=="function"?applyReviver(a,{"":d},"",d):d}}class Alias extends NodeBase{constructor(t){super(ALIAS),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t,r){let n;r?.aliasResolveCache?n=r.aliasResolveCache:(n=[],visit$1(t,{Node:(a,l)=>{(isAlias(l)||hasAnchor(l))&&n.push(l)}}),r&&(r.aliasResolveCache=n));let i;for(const a of n){if(a===this)break;a.anchor===this.source&&(i=a)}return i}toJSON(t,r){if(!r)return{source:this.source};const{anchors:n,doc:i,maxAliasCount:a}=r,l=this.resolve(i,r);if(!l){const p=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(p)}let d=n.get(l);if(d||(toJS(l,null,r),d=n.get(l)),d?.res===void 0){const p="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(p)}if(a>=0&&(d.count+=1,d.aliasCount===0&&(d.aliasCount=getAliasCount(i,l,n)),d.count*d.aliasCount>a)){const p="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(p)}return d.res}toString(t,r,n){const i=`*${this.source}`;if(t){if(anchorIsValid(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){const a=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(a)}if(t.implicitKey)return`${i} `}return i}}function getAliasCount(e,t,r){if(isAlias(t)){const n=t.resolve(e),i=r&&n&&r.get(n);return i?i.count*i.aliasCount:0}else if(isCollection$1(t)){let n=0;for(const i of t.items){const a=getAliasCount(e,i,r);a>n&&(n=a)}return n}else if(isPair(t)){const n=getAliasCount(e,t.key,r),i=getAliasCount(e,t.value,r);return Math.max(n,i)}return 1}const isScalarValue=e=>!e||typeof e!="function"&&typeof e!="object";class Scalar extends NodeBase{constructor(t){super(SCALAR$1),this.value=t}toJSON(t,r){return r?.keep?this.value:toJS(this.value,t,r)}toString(){return String(this.value)}}Scalar.BLOCK_FOLDED="BLOCK_FOLDED";Scalar.BLOCK_LITERAL="BLOCK_LITERAL";Scalar.PLAIN="PLAIN";Scalar.QUOTE_DOUBLE="QUOTE_DOUBLE";Scalar.QUOTE_SINGLE="QUOTE_SINGLE";const defaultTagPrefix="tag:yaml.org,2002:";function findTagObject(e,t,r){if(t){const n=r.filter(a=>a.tag===t),i=n.find(a=>!a.format)??n[0];if(!i)throw new Error(`Tag ${t} not found`);return i}return r.find(n=>n.identify?.(e)&&!n.format)}function createNode(e,t,r){if(isDocument(e)&&(e=e.contents),isNode(e))return e;if(isPair(e)){const x=r.schema[MAP].createNode?.(r.schema,null,r);return x.items.push(e),x}(e instanceof String||e instanceof Number||e instanceof Boolean||typeof BigInt<"u"&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:n,onAnchor:i,onTagObj:a,schema:l,sourceObjects:d}=r;let p;if(n&&e&&typeof e=="object"){if(p=d.get(e),p)return p.anchor??(p.anchor=i(e)),new Alias(p.anchor);p={anchor:null,node:null},d.set(e,p)}t?.startsWith("!!")&&(t=defaultTagPrefix+t.slice(2));let m=findTagObject(e,t,l.tags);if(!m){if(e&&typeof e.toJSON=="function"&&(e=e.toJSON()),!e||typeof e!="object"){const x=new Scalar(e);return p&&(p.node=x),x}m=e instanceof Map?l[MAP]:Symbol.iterator in Object(e)?l[SEQ]:l[MAP]}a&&(a(m),delete r.onTagObj);const A=m?.createNode?m.createNode(r.schema,e,r):typeof m?.nodeClass?.from=="function"?m.nodeClass.from(r.schema,e,r):new Scalar(e);return t?A.tag=t:m.default||(A.tag=m.tag),p&&(p.node=A),A}function collectionFromPath(e,t,r){let n=r;for(let i=t.length-1;i>=0;--i){const a=t[i];if(typeof a=="number"&&Number.isInteger(a)&&a>=0){const l=[];l[a]=n,n=l}else n=new Map([[a,n]])}return createNode(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}const isEmptyPath=e=>e==null||typeof e=="object"&&!!e[Symbol.iterator]().next().done;class Collection extends NodeBase{constructor(t,r){super(t),Object.defineProperty(this,"schema",{value:r,configurable:!0,enumerable:!1,writable:!0})}clone(t){const r=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(r.schema=t),r.items=r.items.map(n=>isNode(n)||isPair(n)?n.clone(t):n),this.range&&(r.range=this.range.slice()),r}addIn(t,r){if(isEmptyPath(t))this.add(r);else{const[n,...i]=t,a=this.get(n,!0);if(isCollection$1(a))a.addIn(i,r);else if(a===void 0&&this.schema)this.set(n,collectionFromPath(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}deleteIn(t){const[r,...n]=t;if(n.length===0)return this.delete(r);const i=this.get(r,!0);if(isCollection$1(i))return i.deleteIn(n);throw new Error(`Expected YAML collection at ${r}. Remaining path: ${n}`)}getIn(t,r){const[n,...i]=t,a=this.get(n,!0);return i.length===0?!r&&isScalar$1(a)?a.value:a:isCollection$1(a)?a.getIn(i,r):void 0}hasAllNullValues(t){return this.items.every(r=>{if(!isPair(r))return!1;const n=r.value;return n==null||t&&isScalar$1(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(t){const[r,...n]=t;if(n.length===0)return this.has(r);const i=this.get(r,!0);return isCollection$1(i)?i.hasIn(n):!1}setIn(t,r){const[n,...i]=t;if(i.length===0)this.set(n,r);else{const a=this.get(n,!0);if(isCollection$1(a))a.setIn(i,r);else if(a===void 0&&this.schema)this.set(n,collectionFromPath(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}}const stringifyComment=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function indentComment(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const lineComment=(e,t,r)=>e.endsWith(`
`)?indentComment(r,t):r.includes(`
`)?`
`+indentComment(r,t):(e.endsWith(" ")?"":" ")+r,FOLD_FLOW="flow",FOLD_BLOCK="block",FOLD_QUOTED="quoted";function foldFlowLines(e,t,r="flow",{indentAtStart:n,lineWidth:i=80,minContentWidth:a=20,onFold:l,onOverflow:d}={}){if(!i||i<0)return e;i<a&&(a=0);const p=Math.max(1+a,1+i-t.length);if(e.length<=p)return e;const m=[],A={};let x=i-t.length;typeof n=="number"&&(n>i-Math.max(2,a)?m.push(0):x=i-n);let I,P,q=!1,F=-1,L=-1,Y=-1;r===FOLD_BLOCK&&(F=consumeMoreIndentedLines(e,F,t.length),F!==-1&&(x=F+p));for(let Z;Z=e[F+=1];){if(r===FOLD_QUOTED&&Z==="\\"){switch(L=F,e[F+1]){case"x":F+=3;break;case"u":F+=5;break;case"U":F+=9;break;default:F+=1}Y=F}if(Z===`
`)r===FOLD_BLOCK&&(F=consumeMoreIndentedLines(e,F,t.length)),x=F+t.length+p,I=void 0;else{if(Z===" "&&P&&P!==" "&&P!==`
`&&P!=="	"){const X=e[F+1];X&&X!==" "&&X!==`
`&&X!=="	"&&(I=F)}if(F>=x)if(I)m.push(I),x=I+p,I=void 0;else if(r===FOLD_QUOTED){for(;P===" "||P==="	";)P=Z,Z=e[F+=1],q=!0;const X=F>Y+1?F-2:L-1;if(A[X])return e;m.push(X),A[X]=!0,x=X+p,I=void 0}else q=!0}P=Z}if(q&&d&&d(),m.length===0)return e;l&&l();let j=e.slice(0,m[0]);for(let Z=0;Z<m.length;++Z){const X=m[Z],Q=m[Z+1]||e.length;X===0?j=`
${t}${e.slice(0,Q)}`:(r===FOLD_QUOTED&&A[X]&&(j+=`${e[X]}\\`),j+=`
${t}${e.slice(X+1,Q)}`)}return j}function consumeMoreIndentedLines(e,t,r){let n=t,i=t+1,a=e[i];for(;a===" "||a==="	";)if(t<i+r)a=e[++t];else{do a=e[++t];while(a&&a!==`
`);n=t,i=t+1,a=e[i]}return n}const getFoldOptions=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),containsDocumentMarker=e=>/^(%|---|\.\.\.)/m.test(e);function lineLengthOverLimit(e,t,r){if(!t||t<0)return!1;const n=t-r,i=e.length;if(i<=n)return!1;for(let a=0,l=0;a<i;++a)if(e[a]===`
`){if(a-l>n)return!0;if(l=a+1,i-l<=n)return!1}return!0}function doubleQuotedString(e,t){const r=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return r;const{implicitKey:n}=t,i=t.options.doubleQuotedMinMultiLineLength,a=t.indent||(containsDocumentMarker(e)?"  ":"");let l="",d=0;for(let p=0,m=r[p];m;m=r[++p])if(m===" "&&r[p+1]==="\\"&&r[p+2]==="n"&&(l+=r.slice(d,p)+"\\ ",p+=1,d=p,m="\\"),m==="\\")switch(r[p+1]){case"u":{l+=r.slice(d,p);const A=r.substr(p+2,4);switch(A){case"0000":l+="\\0";break;case"0007":l+="\\a";break;case"000b":l+="\\v";break;case"001b":l+="\\e";break;case"0085":l+="\\N";break;case"00a0":l+="\\_";break;case"2028":l+="\\L";break;case"2029":l+="\\P";break;default:A.substr(0,2)==="00"?l+="\\x"+A.substr(2):l+=r.substr(p,6)}p+=5,d=p+1}break;case"n":if(n||r[p+2]==='"'||r.length<i)p+=1;else{for(l+=r.slice(d,p)+`

`;r[p+2]==="\\"&&r[p+3]==="n"&&r[p+4]!=='"';)l+=`
`,p+=2;l+=a,r[p+2]===" "&&(l+="\\"),p+=1,d=p+1}break;default:p+=1}return l=d?l+r.slice(d):r,n?l:foldFlowLines(l,a,FOLD_QUOTED,getFoldOptions(t,!1))}function singleQuotedString(e,t){if(t.options.singleQuote===!1||t.implicitKey&&e.includes(`
`)||/[ \t]\n|\n[ \t]/.test(e))return doubleQuotedString(e,t);const r=t.indent||(containsDocumentMarker(e)?"  ":""),n="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&
${r}`)+"'";return t.implicitKey?n:foldFlowLines(n,r,FOLD_FLOW,getFoldOptions(t,!1))}function quotedString(e,t){const{singleQuote:r}=t.options;let n;if(r===!1)n=doubleQuotedString;else{const i=e.includes('"'),a=e.includes("'");i&&!a?n=singleQuotedString:a&&!i?n=doubleQuotedString:n=r?singleQuotedString:doubleQuotedString}return n(e,t)}let blockEndNewlines$1;try{blockEndNewlines$1=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{blockEndNewlines$1=/\n+(?!\n|$)/g}function blockString({comment:e,type:t,value:r},n,i,a){const{blockQuote:l,commentString:d,lineWidth:p}=n.options;if(!l||/\n[\t ]+$/.test(r))return quotedString(r,n);const m=n.indent||(n.forceBlockIndent||containsDocumentMarker(r)?"  ":""),A=l==="literal"?!0:l==="folded"||t===Scalar.BLOCK_FOLDED?!1:t===Scalar.BLOCK_LITERAL?!0:!lineLengthOverLimit(r,p,m.length);if(!r)return A?`|
`:`>
`;let x,I;for(I=r.length;I>0;--I){const Q=r[I-1];if(Q!==`
`&&Q!=="	"&&Q!==" ")break}let P=r.substring(I);const q=P.indexOf(`
`);q===-1?x="-":r===P||q!==P.length-1?(x="+",a&&a()):x="",P&&(r=r.slice(0,-P.length),P[P.length-1]===`
`&&(P=P.slice(0,-1)),P=P.replace(blockEndNewlines$1,`$&${m}`));let F=!1,L,Y=-1;for(L=0;L<r.length;++L){const Q=r[L];if(Q===" ")F=!0;else if(Q===`
`)Y=L;else break}let j=r.substring(0,Y<L?Y+1:L);j&&(r=r.substring(j.length),j=j.replace(/\n+/g,`$&${m}`));let X=(F?m?"2":"1":"")+x;if(e&&(X+=" "+d(e.replace(/ ?[\r\n]+/g," ")),i&&i()),!A){const Q=r.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${m}`);let J=!1;const ee=getFoldOptions(n,!0);l!=="folded"&&t!==Scalar.BLOCK_FOLDED&&(ee.onOverflow=()=>{J=!0});const ie=foldFlowLines(`${j}${Q}${P}`,m,FOLD_BLOCK,ee);if(!J)return`>${X}
${m}${ie}`}return r=r.replace(/\n+/g,`$&${m}`),`|${X}
${m}${j}${r}${P}`}function plainString(e,t,r,n){const{type:i,value:a}=e,{actualString:l,implicitKey:d,indent:p,indentStep:m,inFlow:A}=t;if(d&&a.includes(`
`)||A&&/[[\]{},]/.test(a))return quotedString(a,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a))return d||A||!a.includes(`
`)?quotedString(a,t):blockString(e,t,r,n);if(!d&&!A&&i!==Scalar.PLAIN&&a.includes(`
`))return blockString(e,t,r,n);if(containsDocumentMarker(a)){if(p==="")return t.forceBlockIndent=!0,blockString(e,t,r,n);if(d&&p===m)return quotedString(a,t)}const x=a.replace(/\n+/g,`$&
${p}`);if(l){const I=F=>F.default&&F.tag!=="tag:yaml.org,2002:str"&&F.test?.test(x),{compat:P,tags:q}=t.doc.schema;if(q.some(I)||P?.some(I))return quotedString(a,t)}return d?x:foldFlowLines(x,p,FOLD_FLOW,getFoldOptions(t,!1))}function stringifyString(e,t,r,n){const{implicitKey:i,inFlow:a}=t,l=typeof e.value=="string"?e:Object.assign({},e,{value:String(e.value)});let{type:d}=e;d!==Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(l.value)&&(d=Scalar.QUOTE_DOUBLE);const p=A=>{switch(A){case Scalar.BLOCK_FOLDED:case Scalar.BLOCK_LITERAL:return i||a?quotedString(l.value,t):blockString(l,t,r,n);case Scalar.QUOTE_DOUBLE:return doubleQuotedString(l.value,t);case Scalar.QUOTE_SINGLE:return singleQuotedString(l.value,t);case Scalar.PLAIN:return plainString(l,t,r,n);default:return null}};let m=p(d);if(m===null){const{defaultKeyType:A,defaultStringType:x}=t.options,I=i&&A||x;if(m=p(I),m===null)throw new Error(`Unsupported default string type ${I}`)}return m}function createStringifyContext(e,t){const r=Object.assign({blockQuote:!0,commentString:stringifyComment,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);let n;switch(r.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:e,flowCollectionPadding:r.flowCollectionPadding?" ":"",indent:"",indentStep:typeof r.indent=="number"?" ".repeat(r.indent):"  ",inFlow:n,options:r}}function getTagObject(e,t){if(t.tag){const i=e.filter(a=>a.tag===t.tag);if(i.length>0)return i.find(a=>a.format===t.format)??i[0]}let r,n;if(isScalar$1(t)){n=t.value;let i=e.filter(a=>a.identify?.(n));if(i.length>1){const a=i.filter(l=>l.test);a.length>0&&(i=a)}r=i.find(a=>a.format===t.format)??i.find(a=>!a.format)}else n=t,r=e.find(i=>i.nodeClass&&n instanceof i.nodeClass);if(!r){const i=n?.constructor?.name??(n===null?"null":typeof n);throw new Error(`Tag not resolved for ${i} value`)}return r}function stringifyProps(e,t,{anchors:r,doc:n}){if(!n.directives)return"";const i=[],a=(isScalar$1(e)||isCollection$1(e))&&e.anchor;a&&anchorIsValid(a)&&(r.add(a),i.push(`&${a}`));const l=e.tag??(t.default?null:t.tag);return l&&i.push(n.directives.tagString(l)),i.join(" ")}function stringify$2(e,t,r,n){if(isPair(e))return e.toString(t,r,n);if(isAlias(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let i;const a=isNode(e)?e:t.doc.createNode(e,{onTagObj:p=>i=p});i??(i=getTagObject(t.doc.schema.tags,a));const l=stringifyProps(a,i,t);l.length>0&&(t.indentAtStart=(t.indentAtStart??0)+l.length+1);const d=typeof i.stringify=="function"?i.stringify(a,t,r,n):isScalar$1(a)?stringifyString(a,t,r,n):a.toString(t,r,n);return l?isScalar$1(a)||d[0]==="{"||d[0]==="["?`${l} ${d}`:`${l}
${t.indent}${d}`:d}function stringifyPair({key:e,value:t},r,n,i){const{allNullValues:a,doc:l,indent:d,indentStep:p,options:{commentString:m,indentSeq:A,simpleKeys:x}}=r;let I=isNode(e)&&e.comment||null;if(x){if(I)throw new Error("With simple keys, key nodes cannot have comments");if(isCollection$1(e)||!isNode(e)&&typeof e=="object"){const ee="With simple keys, collection cannot be used as a key value";throw new Error(ee)}}let P=!x&&(!e||I&&t==null&&!r.inFlow||isCollection$1(e)||(isScalar$1(e)?e.type===Scalar.BLOCK_FOLDED||e.type===Scalar.BLOCK_LITERAL:typeof e=="object"));r=Object.assign({},r,{allNullValues:!1,implicitKey:!P&&(x||!a),indent:d+p});let q=!1,F=!1,L=stringify$2(e,r,()=>q=!0,()=>F=!0);if(!P&&!r.inFlow&&L.length>1024){if(x)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");P=!0}if(r.inFlow){if(a||t==null)return q&&n&&n(),L===""?"?":P?`? ${L}`:L}else if(a&&!x||t==null&&P)return L=`? ${L}`,I&&!q?L+=lineComment(L,r.indent,m(I)):F&&i&&i(),L;q&&(I=null),P?(I&&(L+=lineComment(L,r.indent,m(I))),L=`? ${L}
${d}:`):(L=`${L}:`,I&&(L+=lineComment(L,r.indent,m(I))));let Y,j,Z;isNode(t)?(Y=!!t.spaceBefore,j=t.commentBefore,Z=t.comment):(Y=!1,j=null,Z=null,t&&typeof t=="object"&&(t=l.createNode(t))),r.implicitKey=!1,!P&&!I&&isScalar$1(t)&&(r.indentAtStart=L.length+1),F=!1,!A&&p.length>=2&&!r.inFlow&&!P&&isSeq(t)&&!t.flow&&!t.tag&&!t.anchor&&(r.indent=r.indent.substring(2));let X=!1;const Q=stringify$2(t,r,()=>X=!0,()=>F=!0);let J=" ";if(I||Y||j){if(J=Y?`
`:"",j){const ee=m(j);J+=`
${indentComment(ee,r.indent)}`}Q===""&&!r.inFlow?J===`
`&&Z&&(J=`

`):J+=`
${r.indent}`}else if(!P&&isCollection$1(t)){const ee=Q[0],ie=Q.indexOf(`
`),de=ie!==-1,fe=r.inFlow??t.flow??t.items.length===0;if(de||!fe){let _e=!1;if(de&&(ee==="&"||ee==="!")){let Re=Q.indexOf(" ");ee==="&"&&Re!==-1&&Re<ie&&Q[Re+1]==="!"&&(Re=Q.indexOf(" ",Re+1)),(Re===-1||ie<Re)&&(_e=!0)}_e||(J=`
${r.indent}`)}}else(Q===""||Q[0]===`
`)&&(J="");return L+=J+Q,r.inFlow?X&&n&&n():Z&&!X?L+=lineComment(L,r.indent,m(Z)):F&&i&&i(),L}function warn$1(e,t){(e==="debug"||e==="warn")&&console.warn(t)}const MERGE_KEY="<<",merge={identify:e=>e===MERGE_KEY||typeof e=="symbol"&&e.description===MERGE_KEY,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new Scalar(Symbol(MERGE_KEY)),{addToJSMap:addMergeToJSMap}),stringify:()=>MERGE_KEY},isMergeKey=(e,t)=>(merge.identify(t)||isScalar$1(t)&&(!t.type||t.type===Scalar.PLAIN)&&merge.identify(t.value))&&e?.doc.schema.tags.some(r=>r.tag===merge.tag&&r.default);function addMergeToJSMap(e,t,r){if(r=e&&isAlias(r)?r.resolve(e.doc):r,isSeq(r))for(const n of r.items)mergeValue(e,t,n);else if(Array.isArray(r))for(const n of r)mergeValue(e,t,n);else mergeValue(e,t,r)}function mergeValue(e,t,r){const n=e&&isAlias(r)?r.resolve(e.doc):r;if(!isMap(n))throw new Error("Merge sources must be maps or map aliases");const i=n.toJSON(null,e,Map);for(const[a,l]of i)t instanceof Map?t.has(a)||t.set(a,l):t instanceof Set?t.add(a):Object.prototype.hasOwnProperty.call(t,a)||Object.defineProperty(t,a,{value:l,writable:!0,enumerable:!0,configurable:!0});return t}function addPairToJSMap(e,t,{key:r,value:n}){if(isNode(r)&&r.addToJSMap)r.addToJSMap(e,t,n);else if(isMergeKey(e,r))addMergeToJSMap(e,t,n);else{const i=toJS(r,"",e);if(t instanceof Map)t.set(i,toJS(n,i,e));else if(t instanceof Set)t.add(i);else{const a=stringifyKey(r,i,e),l=toJS(n,a,e);a in t?Object.defineProperty(t,a,{value:l,writable:!0,enumerable:!0,configurable:!0}):t[a]=l}}return t}function stringifyKey(e,t,r){if(t===null)return"";if(typeof t!="object")return String(t);if(isNode(e)&&r?.doc){const n=createStringifyContext(r.doc,{});n.anchors=new Set;for(const a of r.anchors.keys())n.anchors.add(a.anchor);n.inFlow=!0,n.inStringifyKey=!0;const i=e.toString(n);if(!r.mapKeyWarned){let a=JSON.stringify(i);a.length>40&&(a=a.substring(0,36)+'..."'),warn$1(r.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${a}. Set mapAsMap: true to use object keys.`),r.mapKeyWarned=!0}return i}return JSON.stringify(t)}function createPair(e,t,r){const n=createNode(e,void 0,r),i=createNode(t,void 0,r);return new Pair(n,i)}class Pair{constructor(t,r=null){Object.defineProperty(this,NODE_TYPE,{value:PAIR}),this.key=t,this.value=r}clone(t){let{key:r,value:n}=this;return isNode(r)&&(r=r.clone(t)),isNode(n)&&(n=n.clone(t)),new Pair(r,n)}toJSON(t,r){const n=r?.mapAsMap?new Map:{};return addPairToJSMap(r,n,this)}toString(t,r,n){return t?.doc?stringifyPair(this,t,r,n):JSON.stringify(this)}}function stringifyCollection(e,t,r){return(t.inFlow??e.flow?stringifyFlowCollection:stringifyBlockCollection)(e,t,r)}function stringifyBlockCollection({comment:e,items:t},r,{blockItemPrefix:n,flowChars:i,itemIndent:a,onChompKeep:l,onComment:d}){const{indent:p,options:{commentString:m}}=r,A=Object.assign({},r,{indent:a,type:null});let x=!1;const I=[];for(let q=0;q<t.length;++q){const F=t[q];let L=null;if(isNode(F))!x&&F.spaceBefore&&I.push(""),addCommentBefore(r,I,F.commentBefore,x),F.comment&&(L=F.comment);else if(isPair(F)){const j=isNode(F.key)?F.key:null;j&&(!x&&j.spaceBefore&&I.push(""),addCommentBefore(r,I,j.commentBefore,x))}x=!1;let Y=stringify$2(F,A,()=>L=null,()=>x=!0);L&&(Y+=lineComment(Y,a,m(L))),x&&L&&(x=!1),I.push(n+Y)}let P;if(I.length===0)P=i.start+i.end;else{P=I[0];for(let q=1;q<I.length;++q){const F=I[q];P+=F?`
${p}${F}`:`
`}}return e?(P+=`
`+indentComment(m(e),p),d&&d()):x&&l&&l(),P}function stringifyFlowCollection({items:e},t,{flowChars:r,itemIndent:n}){const{indent:i,indentStep:a,flowCollectionPadding:l,options:{commentString:d}}=t;n+=a;const p=Object.assign({},t,{indent:n,inFlow:!0,type:null});let m=!1,A=0;const x=[];for(let q=0;q<e.length;++q){const F=e[q];let L=null;if(isNode(F))F.spaceBefore&&x.push(""),addCommentBefore(t,x,F.commentBefore,!1),F.comment&&(L=F.comment);else if(isPair(F)){const j=isNode(F.key)?F.key:null;j&&(j.spaceBefore&&x.push(""),addCommentBefore(t,x,j.commentBefore,!1),j.comment&&(m=!0));const Z=isNode(F.value)?F.value:null;Z?(Z.comment&&(L=Z.comment),Z.commentBefore&&(m=!0)):F.value==null&&j?.comment&&(L=j.comment)}L&&(m=!0);let Y=stringify$2(F,p,()=>L=null);q<e.length-1&&(Y+=","),L&&(Y+=lineComment(Y,n,d(L))),!m&&(x.length>A||Y.includes(`
`))&&(m=!0),x.push(Y),A=x.length}const{start:I,end:P}=r;if(x.length===0)return I+P;if(!m){const q=x.reduce((F,L)=>F+L.length+2,2);m=t.options.lineWidth>0&&q>t.options.lineWidth}if(m){let q=I;for(const F of x)q+=F?`
${a}${i}${F}`:`
`;return`${q}
${i}${P}`}else return`${I}${l}${x.join(" ")}${l}${P}`}function addCommentBefore({indent:e,options:{commentString:t}},r,n,i){if(n&&i&&(n=n.replace(/^\n+/,"")),n){const a=indentComment(t(n),e);r.push(a.trimStart())}}function findPair(e,t){const r=isScalar$1(t)?t.value:t;for(const n of e)if(isPair(n)&&(n.key===t||n.key===r||isScalar$1(n.key)&&n.key.value===r))return n}class YAMLMap extends Collection{static get tagName(){return"tag:yaml.org,2002:map"}constructor(t){super(MAP,t),this.items=[]}static from(t,r,n){const{keepUndefined:i,replacer:a}=n,l=new this(t),d=(p,m)=>{if(typeof a=="function")m=a.call(r,p,m);else if(Array.isArray(a)&&!a.includes(p))return;(m!==void 0||i)&&l.items.push(createPair(p,m,n))};if(r instanceof Map)for(const[p,m]of r)d(p,m);else if(r&&typeof r=="object")for(const p of Object.keys(r))d(p,r[p]);return typeof t.sortMapEntries=="function"&&l.items.sort(t.sortMapEntries),l}add(t,r){let n;isPair(t)?n=t:!t||typeof t!="object"||!("key"in t)?n=new Pair(t,t?.value):n=new Pair(t.key,t.value);const i=findPair(this.items,n.key),a=this.schema?.sortMapEntries;if(i){if(!r)throw new Error(`Key ${n.key} already set`);isScalar$1(i.value)&&isScalarValue(n.value)?i.value.value=n.value:i.value=n.value}else if(a){const l=this.items.findIndex(d=>a(n,d)<0);l===-1?this.items.push(n):this.items.splice(l,0,n)}else this.items.push(n)}delete(t){const r=findPair(this.items,t);return r?this.items.splice(this.items.indexOf(r),1).length>0:!1}get(t,r){const i=findPair(this.items,t)?.value;return(!r&&isScalar$1(i)?i.value:i)??void 0}has(t){return!!findPair(this.items,t)}set(t,r){this.add(new Pair(t,r),!0)}toJSON(t,r,n){const i=n?new n:r?.mapAsMap?new Map:{};r?.onCreate&&r.onCreate(i);for(const a of this.items)addPairToJSMap(r,i,a);return i}toString(t,r,n){if(!t)return JSON.stringify(this);for(const i of this.items)if(!isPair(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),stringifyCollection(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:n,onComment:r})}}const map$1={collection:"map",default:!0,nodeClass:YAMLMap,tag:"tag:yaml.org,2002:map",resolve(e,t){return isMap(e)||t("Expected a mapping for this tag"),e},createNode:(e,t,r)=>YAMLMap.from(e,t,r)};class YAMLSeq extends Collection{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(t){super(SEQ,t),this.items=[]}add(t){this.items.push(t)}delete(t){const r=asItemIndex(t);return typeof r!="number"?!1:this.items.splice(r,1).length>0}get(t,r){const n=asItemIndex(t);if(typeof n!="number")return;const i=this.items[n];return!r&&isScalar$1(i)?i.value:i}has(t){const r=asItemIndex(t);return typeof r=="number"&&r<this.items.length}set(t,r){const n=asItemIndex(t);if(typeof n!="number")throw new Error(`Expected a valid index, not ${t}.`);const i=this.items[n];isScalar$1(i)&&isScalarValue(r)?i.value=r:this.items[n]=r}toJSON(t,r){const n=[];r?.onCreate&&r.onCreate(n);let i=0;for(const a of this.items)n.push(toJS(a,String(i++),r));return n}toString(t,r,n){return t?stringifyCollection(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:n,onComment:r}):JSON.stringify(this)}static from(t,r,n){const{replacer:i}=n,a=new this(t);if(r&&Symbol.iterator in Object(r)){let l=0;for(let d of r){if(typeof i=="function"){const p=r instanceof Set?d:String(l++);d=i.call(r,p,d)}a.items.push(createNode(d,void 0,n))}}return a}}function asItemIndex(e){let t=isScalar$1(e)?e.value:e;return t&&typeof t=="string"&&(t=Number(t)),typeof t=="number"&&Number.isInteger(t)&&t>=0?t:null}const seq={collection:"seq",default:!0,nodeClass:YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(e,t){return isSeq(e)||t("Expected a sequence for this tag"),e},createNode:(e,t,r)=>YAMLSeq.from(e,t,r)},string={identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify(e,t,r,n){return t=Object.assign({actualString:!0},t),stringifyString(e,t,r,n)}},nullTag={identify:e=>e==null,createNode:()=>new Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Scalar(null),stringify:({source:e},t)=>typeof e=="string"&&nullTag.test.test(e)?e:t.options.nullStr},boolTag={identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new Scalar(e[0]==="t"||e[0]==="T"),stringify({source:e,value:t},r){if(e&&boolTag.test.test(e)){const n=e[0]==="t"||e[0]==="T";if(t===n)return e}return t?r.options.trueStr:r.options.falseStr}};function stringifyNumber({format:e,minFractionDigits:t,tag:r,value:n}){if(typeof n=="bigint")return String(n);const i=typeof n=="number"?n:Number(n);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let a=Object.is(n,-0)?"-0":JSON.stringify(n);if(!e&&t&&(!r||r==="tag:yaml.org,2002:float")&&/^\d/.test(a)){let l=a.indexOf(".");l<0&&(l=a.length,a+=".");let d=t-(a.length-l-1);for(;d-- >0;)a+="0"}return a}const floatNaN$1={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:stringifyNumber},floatExp$1={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():stringifyNumber(e)}},float$1={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new Scalar(parseFloat(e)),r=e.indexOf(".");return r!==-1&&e[e.length-1]==="0"&&(t.minFractionDigits=e.length-r-1),t},stringify:stringifyNumber},intIdentify$2=e=>typeof e=="bigint"||Number.isInteger(e),intResolve$1=(e,t,r,{intAsBigInt:n})=>n?BigInt(e):parseInt(e.substring(t),r);function intStringify$1(e,t,r){const{value:n}=e;return intIdentify$2(n)&&n>=0?r+n.toString(t):stringifyNumber(e)}const intOct$1={identify:e=>intIdentify$2(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,r)=>intResolve$1(e,2,8,r),stringify:e=>intStringify$1(e,8,"0o")},int$1={identify:intIdentify$2,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,r)=>intResolve$1(e,0,10,r),stringify:stringifyNumber},intHex$1={identify:e=>intIdentify$2(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,r)=>intResolve$1(e,2,16,r),stringify:e=>intStringify$1(e,16,"0x")},schema$2=[map$1,seq,string,nullTag,boolTag,intOct$1,int$1,intHex$1,floatNaN$1,floatExp$1,float$1];function intIdentify$1(e){return typeof e=="bigint"||Number.isInteger(e)}const stringifyJSON=({value:e})=>JSON.stringify(e),jsonScalars=[{identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:stringifyJSON},{identify:e=>e==null,createNode:()=>new Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:stringifyJSON},{identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>e==="true",stringify:stringifyJSON},{identify:intIdentify$1,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:r})=>r?BigInt(e):parseInt(e,10),stringify:({value:e})=>intIdentify$1(e)?e.toString():JSON.stringify(e)},{identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:stringifyJSON}],jsonError={default:!0,tag:"",test:/^/,resolve(e,t){return t(`Unresolved plain scalar ${JSON.stringify(e)}`),e}},schema$1=[map$1,seq].concat(jsonScalars,jsonError),binary={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if(typeof atob=="function"){const r=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(r.length);for(let i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n}else return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:r},n,i,a){if(!r)return"";const l=r;let d;if(typeof btoa=="function"){let p="";for(let m=0;m<l.length;++m)p+=String.fromCharCode(l[m]);d=btoa(p)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(t??(t=Scalar.BLOCK_LITERAL),t!==Scalar.QUOTE_DOUBLE){const p=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),m=Math.ceil(d.length/p),A=new Array(m);for(let x=0,I=0;x<m;++x,I+=p)A[x]=d.substr(I,p);d=A.join(t===Scalar.BLOCK_LITERAL?`
`:" ")}return stringifyString({comment:e,type:t,value:d},n,i,a)}};function resolvePairs(e,t){if(isSeq(e))for(let r=0;r<e.items.length;++r){let n=e.items[r];if(!isPair(n)){if(isMap(n)){n.items.length>1&&t("Each pair must have its own sequence indicator");const i=n.items[0]||new Pair(new Scalar(null));if(n.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${n.commentBefore}
${i.key.commentBefore}`:n.commentBefore),n.comment){const a=i.value??i.key;a.comment=a.comment?`${n.comment}
${a.comment}`:n.comment}n=i}e.items[r]=isPair(n)?n:new Pair(n)}}else t("Expected a sequence for this tag");return e}function createPairs(e,t,r){const{replacer:n}=r,i=new YAMLSeq(e);i.tag="tag:yaml.org,2002:pairs";let a=0;if(t&&Symbol.iterator in Object(t))for(let l of t){typeof n=="function"&&(l=n.call(t,String(a++),l));let d,p;if(Array.isArray(l))if(l.length===2)d=l[0],p=l[1];else throw new TypeError(`Expected [key, value] tuple: ${l}`);else if(l&&l instanceof Object){const m=Object.keys(l);if(m.length===1)d=m[0],p=l[d];else throw new TypeError(`Expected tuple with one key, not ${m.length} keys`)}else d=l;i.items.push(createPair(d,p,r))}return i}const pairs={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:resolvePairs,createNode:createPairs};class YAMLOMap extends YAMLSeq{constructor(){super(),this.add=YAMLMap.prototype.add.bind(this),this.delete=YAMLMap.prototype.delete.bind(this),this.get=YAMLMap.prototype.get.bind(this),this.has=YAMLMap.prototype.has.bind(this),this.set=YAMLMap.prototype.set.bind(this),this.tag=YAMLOMap.tag}toJSON(t,r){if(!r)return super.toJSON(t);const n=new Map;r?.onCreate&&r.onCreate(n);for(const i of this.items){let a,l;if(isPair(i)?(a=toJS(i.key,"",r),l=toJS(i.value,a,r)):a=toJS(i,"",r),n.has(a))throw new Error("Ordered maps must not include duplicate keys");n.set(a,l)}return n}static from(t,r,n){const i=createPairs(t,r,n),a=new this;return a.items=i.items,a}}YAMLOMap.tag="tag:yaml.org,2002:omap";const omap={collection:"seq",identify:e=>e instanceof Map,nodeClass:YAMLOMap,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const r=resolvePairs(e,t),n=[];for(const{key:i}of r.items)isScalar$1(i)&&(n.includes(i.value)?t(`Ordered maps must not include duplicate keys: ${i.value}`):n.push(i.value));return Object.assign(new YAMLOMap,r)},createNode:(e,t,r)=>YAMLOMap.from(e,t,r)};function boolStringify({value:e,source:t},r){return t&&(e?trueTag:falseTag).test.test(t)?t:e?r.options.trueStr:r.options.falseStr}const trueTag={identify:e=>e===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Scalar(!0),stringify:boolStringify},falseTag={identify:e=>e===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new Scalar(!1),stringify:boolStringify},floatNaN={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:stringifyNumber},floatExp={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():stringifyNumber(e)}},float={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new Scalar(parseFloat(e.replace(/_/g,""))),r=e.indexOf(".");if(r!==-1){const n=e.substring(r+1).replace(/_/g,"");n[n.length-1]==="0"&&(t.minFractionDigits=n.length)}return t},stringify:stringifyNumber},intIdentify=e=>typeof e=="bigint"||Number.isInteger(e);function intResolve(e,t,r,{intAsBigInt:n}){const i=e[0];if((i==="-"||i==="+")&&(t+=1),e=e.substring(t).replace(/_/g,""),n){switch(r){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`;break}const l=BigInt(e);return i==="-"?BigInt(-1)*l:l}const a=parseInt(e,r);return i==="-"?-1*a:a}function intStringify(e,t,r){const{value:n}=e;if(intIdentify(n)){const i=n.toString(t);return n<0?"-"+r+i.substr(1):r+i}return stringifyNumber(e)}const intBin={identify:intIdentify,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,r)=>intResolve(e,2,2,r),stringify:e=>intStringify(e,2,"0b")},intOct={identify:intIdentify,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,r)=>intResolve(e,1,8,r),stringify:e=>intStringify(e,8,"0")},int={identify:intIdentify,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,r)=>intResolve(e,0,10,r),stringify:stringifyNumber},intHex={identify:intIdentify,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,r)=>intResolve(e,2,16,r),stringify:e=>intStringify(e,16,"0x")};class YAMLSet extends YAMLMap{constructor(t){super(t),this.tag=YAMLSet.tag}add(t){let r;isPair(t)?r=t:t&&typeof t=="object"&&"key"in t&&"value"in t&&t.value===null?r=new Pair(t.key,null):r=new Pair(t,null),findPair(this.items,r.key)||this.items.push(r)}get(t,r){const n=findPair(this.items,t);return!r&&isPair(n)?isScalar$1(n.key)?n.key.value:n.key:n}set(t,r){if(typeof r!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof r}`);const n=findPair(this.items,t);n&&!r?this.items.splice(this.items.indexOf(n),1):!n&&r&&this.items.push(new Pair(t))}toJSON(t,r){return super.toJSON(t,r,Set)}toString(t,r,n){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),r,n);throw new Error("Set items must all have null values")}static from(t,r,n){const{replacer:i}=n,a=new this(t);if(r&&Symbol.iterator in Object(r))for(let l of r)typeof i=="function"&&(l=i.call(r,l,l)),a.items.push(createPair(l,null,n));return a}}YAMLSet.tag="tag:yaml.org,2002:set";const set$2={collection:"map",identify:e=>e instanceof Set,nodeClass:YAMLSet,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,r)=>YAMLSet.from(e,t,r),resolve(e,t){if(isMap(e)){if(e.hasAllNullValues(!0))return Object.assign(new YAMLSet,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};function parseSexagesimal(e,t){const r=e[0],n=r==="-"||r==="+"?e.substring(1):e,i=l=>t?BigInt(l):Number(l),a=n.replace(/_/g,"").split(":").reduce((l,d)=>l*i(60)+i(d),i(0));return r==="-"?i(-1)*a:a}function stringifySexagesimal(e){let{value:t}=e,r=l=>l;if(typeof t=="bigint")r=l=>BigInt(l);else if(isNaN(t)||!isFinite(t))return stringifyNumber(e);let n="";t<0&&(n="-",t*=r(-1));const i=r(60),a=[t%i];return t<60?a.unshift(0):(t=(t-a[0])/i,a.unshift(t%i),t>=60&&(t=(t-a[0])/i,a.unshift(t))),n+a.map(l=>String(l).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const intTime={identify:e=>typeof e=="bigint"||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:r})=>parseSexagesimal(e,r),stringify:stringifySexagesimal},floatTime={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>parseSexagesimal(e,!1),stringify:stringifySexagesimal},timestamp={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(timestamp.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,r,n,i,a,l,d]=t.map(Number),p=t[7]?Number((t[7]+"00").substr(1,3)):0;let m=Date.UTC(r,n-1,i,a||0,l||0,d||0,p);const A=t[8];if(A&&A!=="Z"){let x=parseSexagesimal(A,!1);Math.abs(x)<30&&(x*=60),m-=6e4*x}return new Date(m)},stringify:({value:e})=>e?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},schema=[map$1,seq,string,nullTag,trueTag,falseTag,intBin,intOct,int,intHex,floatNaN,floatExp,float,binary,merge,omap,pairs,set$2,intTime,floatTime,timestamp],schemas=new Map([["core",schema$2],["failsafe",[map$1,seq,string]],["json",schema$1],["yaml11",schema],["yaml-1.1",schema]]),tagsByName={binary,bool:boolTag,float:float$1,floatExp:floatExp$1,floatNaN:floatNaN$1,floatTime,int:int$1,intHex:intHex$1,intOct:intOct$1,intTime,map:map$1,merge,null:nullTag,omap,pairs,seq,set:set$2,timestamp},coreKnownTags={"tag:yaml.org,2002:binary":binary,"tag:yaml.org,2002:merge":merge,"tag:yaml.org,2002:omap":omap,"tag:yaml.org,2002:pairs":pairs,"tag:yaml.org,2002:set":set$2,"tag:yaml.org,2002:timestamp":timestamp};function getTags(e,t,r){const n=schemas.get(t);if(n&&!e)return r&&!n.includes(merge)?n.concat(merge):n.slice();let i=n;if(!i)if(Array.isArray(e))i=[];else{const a=Array.from(schemas.keys()).filter(l=>l!=="yaml11").map(l=>JSON.stringify(l)).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${a} or define customTags array`)}if(Array.isArray(e))for(const a of e)i=i.concat(a);else typeof e=="function"&&(i=e(i.slice()));return r&&(i=i.concat(merge)),i.reduce((a,l)=>{const d=typeof l=="string"?tagsByName[l]:l;if(!d){const p=JSON.stringify(l),m=Object.keys(tagsByName).map(A=>JSON.stringify(A)).join(", ");throw new Error(`Unknown custom tag ${p}; use one of ${m}`)}return a.includes(d)||a.push(d),a},[])}const sortMapEntriesByKey=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class Schema{constructor({compat:t,customTags:r,merge:n,resolveKnownTags:i,schema:a,sortMapEntries:l,toStringDefaults:d}){this.compat=Array.isArray(t)?getTags(t,"compat"):t?getTags(null,t):null,this.name=typeof a=="string"&&a||"core",this.knownTags=i?coreKnownTags:{},this.tags=getTags(r,this.name,n),this.toStringOptions=d??null,Object.defineProperty(this,MAP,{value:map$1}),Object.defineProperty(this,SCALAR$1,{value:string}),Object.defineProperty(this,SEQ,{value:seq}),this.sortMapEntries=typeof l=="function"?l:l===!0?sortMapEntriesByKey:null}clone(){const t=Object.create(Schema.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}}function stringifyDocument(e,t){const r=[];let n=t.directives===!0;if(t.directives!==!1&&e.directives){const p=e.directives.toString(e);p?(r.push(p),n=!0):e.directives.docStart&&(n=!0)}n&&r.push("---");const i=createStringifyContext(e,t),{commentString:a}=i.options;if(e.commentBefore){r.length!==1&&r.unshift("");const p=a(e.commentBefore);r.unshift(indentComment(p,""))}let l=!1,d=null;if(e.contents){if(isNode(e.contents)){if(e.contents.spaceBefore&&n&&r.push(""),e.contents.commentBefore){const A=a(e.contents.commentBefore);r.push(indentComment(A,""))}i.forceBlockIndent=!!e.comment,d=e.contents.comment}const p=d?void 0:()=>l=!0;let m=stringify$2(e.contents,i,()=>d=null,p);d&&(m+=lineComment(m,"",a(d))),(m[0]==="|"||m[0]===">")&&r[r.length-1]==="---"?r[r.length-1]=`--- ${m}`:r.push(m)}else r.push(stringify$2(e.contents,i));if(e.directives?.docEnd)if(e.comment){const p=a(e.comment);p.includes(`
`)?(r.push("..."),r.push(indentComment(p,""))):r.push(`... ${p}`)}else r.push("...");else{let p=e.comment;p&&l&&(p=p.replace(/^\n+/,"")),p&&((!l||d)&&r[r.length-1]!==""&&r.push(""),r.push(indentComment(a(p),"")))}return r.join(`
`)+`
`}class Document{constructor(t,r,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,NODE_TYPE,{value:DOC});let i=null;typeof r=="function"||Array.isArray(r)?i=r:n===void 0&&r&&(n=r,r=void 0);const a=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},n);this.options=a;let{version:l}=a;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(l=this.directives.yaml.version)):this.directives=new Directives({version:l}),this.setSchema(l,n),this.contents=t===void 0?null:this.createNode(t,i,n)}clone(){const t=Object.create(Document.prototype,{[NODE_TYPE]:{value:DOC}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=isNode(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){assertCollection(this.contents)&&this.contents.add(t)}addIn(t,r){assertCollection(this.contents)&&this.contents.addIn(t,r)}createAlias(t,r){if(!t.anchor){const n=anchorNames(this);t.anchor=!r||n.has(r)?findNewAnchor(r||"a",n):r}return new Alias(t.anchor)}createNode(t,r,n){let i;if(typeof r=="function")t=r.call({"":t},"",t),i=r;else if(Array.isArray(r)){const L=j=>typeof j=="number"||j instanceof String||j instanceof Number,Y=r.filter(L).map(String);Y.length>0&&(r=r.concat(Y)),i=r}else n===void 0&&r&&(n=r,r=void 0);const{aliasDuplicateObjects:a,anchorPrefix:l,flow:d,keepUndefined:p,onTagObj:m,tag:A}=n??{},{onAnchor:x,setAnchors:I,sourceObjects:P}=createNodeAnchors(this,l||"a"),q={aliasDuplicateObjects:a??!0,keepUndefined:p??!1,onAnchor:x,onTagObj:m,replacer:i,schema:this.schema,sourceObjects:P},F=createNode(t,A,q);return d&&isCollection$1(F)&&(F.flow=!0),I(),F}createPair(t,r,n={}){const i=this.createNode(t,null,n),a=this.createNode(r,null,n);return new Pair(i,a)}delete(t){return assertCollection(this.contents)?this.contents.delete(t):!1}deleteIn(t){return isEmptyPath(t)?this.contents==null?!1:(this.contents=null,!0):assertCollection(this.contents)?this.contents.deleteIn(t):!1}get(t,r){return isCollection$1(this.contents)?this.contents.get(t,r):void 0}getIn(t,r){return isEmptyPath(t)?!r&&isScalar$1(this.contents)?this.contents.value:this.contents:isCollection$1(this.contents)?this.contents.getIn(t,r):void 0}has(t){return isCollection$1(this.contents)?this.contents.has(t):!1}hasIn(t){return isEmptyPath(t)?this.contents!==void 0:isCollection$1(this.contents)?this.contents.hasIn(t):!1}set(t,r){this.contents==null?this.contents=collectionFromPath(this.schema,[t],r):assertCollection(this.contents)&&this.contents.set(t,r)}setIn(t,r){isEmptyPath(t)?this.contents=r:this.contents==null?this.contents=collectionFromPath(this.schema,Array.from(t),r):assertCollection(this.contents)&&this.contents.setIn(t,r)}setSchema(t,r={}){typeof t=="number"&&(t=String(t));let n;switch(t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Directives({version:"1.1"}),n={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new Directives({version:t}),n={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const i=JSON.stringify(t);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(r.schema instanceof Object)this.schema=r.schema;else if(n)this.schema=new Schema(Object.assign(n,r));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:t,jsonArg:r,mapAsMap:n,maxAliasCount:i,onAnchor:a,reviver:l}={}){const d={anchors:new Map,doc:this,keep:!t,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},p=toJS(this.contents,r??"",d);if(typeof a=="function")for(const{count:m,res:A}of d.anchors.values())a(A,m);return typeof l=="function"?applyReviver(l,{"":p},"",p):p}toJSON(t,r){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:r})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){const r=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${r}`)}return stringifyDocument(this,t)}}function assertCollection(e){if(isCollection$1(e))return!0;throw new Error("Expected a YAML collection as document contents")}class YAMLError extends Error{constructor(t,r,n,i){super(),this.name=t,this.code=n,this.message=i,this.pos=r}}class YAMLParseError extends YAMLError{constructor(t,r,n){super("YAMLParseError",t,r,n)}}class YAMLWarning extends YAMLError{constructor(t,r,n){super("YAMLWarning",t,r,n)}}const prettifyError=(e,t)=>r=>{if(r.pos[0]===-1)return;r.linePos=r.pos.map(d=>t.linePos(d));const{line:n,col:i}=r.linePos[0];r.message+=` at line ${n}, column ${i}`;let a=i-1,l=e.substring(t.lineStarts[n-1],t.lineStarts[n]).replace(/[\n\r]+$/,"");if(a>=60&&l.length>80){const d=Math.min(a-39,l.length-79);l=""+l.substring(d),a-=d-1}if(l.length>80&&(l=l.substring(0,79)+""),n>1&&/^ *$/.test(l.substring(0,a))){let d=e.substring(t.lineStarts[n-2],t.lineStarts[n-1]);d.length>80&&(d=d.substring(0,79)+`
`),l=d+l}if(/[^ ]/.test(l)){let d=1;const p=r.linePos[1];p?.line===n&&p.col>i&&(d=Math.max(1,Math.min(p.col-i,80-a)));const m=" ".repeat(a)+"^".repeat(d);r.message+=`:

${l}
${m}
`}};function resolveProps(e,{flow:t,indicator:r,next:n,offset:i,onError:a,parentIndent:l,startOnNewline:d}){let p=!1,m=d,A=d,x="",I="",P=!1,q=!1,F=null,L=null,Y=null,j=null,Z=null,X=null,Q=null;for(const ie of e)switch(q&&(ie.type!=="space"&&ie.type!=="newline"&&ie.type!=="comma"&&a(ie.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),q=!1),F&&(m&&ie.type!=="comment"&&ie.type!=="newline"&&a(F,"TAB_AS_INDENT","Tabs are not allowed as indentation"),F=null),ie.type){case"space":!t&&(r!=="doc-start"||n?.type!=="flow-collection")&&ie.source.includes("	")&&(F=ie),A=!0;break;case"comment":{A||a(ie,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const de=ie.source.substring(1)||" ";x?x+=I+de:x=de,I="",m=!1;break}case"newline":m?x?x+=ie.source:(!X||r!=="seq-item-ind")&&(p=!0):I+=ie.source,m=!0,P=!0,(L||Y)&&(j=ie),A=!0;break;case"anchor":L&&a(ie,"MULTIPLE_ANCHORS","A node can have at most one anchor"),ie.source.endsWith(":")&&a(ie.offset+ie.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),L=ie,Q??(Q=ie.offset),m=!1,A=!1,q=!0;break;case"tag":{Y&&a(ie,"MULTIPLE_TAGS","A node can have at most one tag"),Y=ie,Q??(Q=ie.offset),m=!1,A=!1,q=!0;break}case r:(L||Y)&&a(ie,"BAD_PROP_ORDER",`Anchors and tags must be after the ${ie.source} indicator`),X&&a(ie,"UNEXPECTED_TOKEN",`Unexpected ${ie.source} in ${t??"collection"}`),X=ie,m=r==="seq-item-ind"||r==="explicit-key-ind",A=!1;break;case"comma":if(t){Z&&a(ie,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),Z=ie,m=!1,A=!1;break}default:a(ie,"UNEXPECTED_TOKEN",`Unexpected ${ie.type} token`),m=!1,A=!1}const J=e[e.length-1],ee=J?J.offset+J.source.length:i;return q&&n&&n.type!=="space"&&n.type!=="newline"&&n.type!=="comma"&&(n.type!=="scalar"||n.source!=="")&&a(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),F&&(m&&F.indent<=l||n?.type==="block-map"||n?.type==="block-seq")&&a(F,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:Z,found:X,spaceBefore:p,comment:x,hasNewline:P,anchor:L,tag:Y,newlineAfterProp:j,end:ee,start:Q??ee}}function containsNewline(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes(`
`))return!0;if(e.end){for(const t of e.end)if(t.type==="newline")return!0}return!1;case"flow-collection":for(const t of e.items){for(const r of t.start)if(r.type==="newline")return!0;if(t.sep){for(const r of t.sep)if(r.type==="newline")return!0}if(containsNewline(t.key)||containsNewline(t.value))return!0}return!1;default:return!0}}function flowIndentCheck(e,t,r){if(t?.type==="flow-collection"){const n=t.end[0];n.indent===e&&(n.source==="]"||n.source==="}")&&containsNewline(t)&&r(n,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function mapIncludes(e,t,r){const{uniqueKeys:n}=e.options;if(n===!1)return!1;const i=typeof n=="function"?n:(a,l)=>a===l||isScalar$1(a)&&isScalar$1(l)&&a.value===l.value;return t.some(a=>i(a.key,r))}const startColMsg="All mapping items must start at the same column";function resolveBlockMap({composeNode:e,composeEmptyNode:t},r,n,i,a){const l=a?.nodeClass??YAMLMap,d=new l(r.schema);r.atRoot&&(r.atRoot=!1);let p=n.offset,m=null;for(const A of n.items){const{start:x,key:I,sep:P,value:q}=A,F=resolveProps(x,{indicator:"explicit-key-ind",next:I??P?.[0],offset:p,onError:i,parentIndent:n.indent,startOnNewline:!0}),L=!F.found;if(L){if(I&&(I.type==="block-seq"?i(p,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in I&&I.indent!==n.indent&&i(p,"BAD_INDENT",startColMsg)),!F.anchor&&!F.tag&&!P){m=F.end,F.comment&&(d.comment?d.comment+=`
`+F.comment:d.comment=F.comment);continue}(F.newlineAfterProp||containsNewline(I))&&i(I??x[x.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else F.found?.indent!==n.indent&&i(p,"BAD_INDENT",startColMsg);r.atKey=!0;const Y=F.end,j=I?e(r,I,F,i):t(r,Y,x,null,F,i);r.schema.compat&&flowIndentCheck(n.indent,I,i),r.atKey=!1,mapIncludes(r,d.items,j)&&i(Y,"DUPLICATE_KEY","Map keys must be unique");const Z=resolveProps(P??[],{indicator:"map-value-ind",next:q,offset:j.range[2],onError:i,parentIndent:n.indent,startOnNewline:!I||I.type==="block-scalar"});if(p=Z.end,Z.found){L&&(q?.type==="block-map"&&!Z.hasNewline&&i(p,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),r.options.strict&&F.start<Z.found.offset-1024&&i(j.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const X=q?e(r,q,Z,i):t(r,p,P,null,Z,i);r.schema.compat&&flowIndentCheck(n.indent,q,i),p=X.range[2];const Q=new Pair(j,X);r.options.keepSourceTokens&&(Q.srcToken=A),d.items.push(Q)}else{L&&i(j.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),Z.comment&&(j.comment?j.comment+=`
`+Z.comment:j.comment=Z.comment);const X=new Pair(j);r.options.keepSourceTokens&&(X.srcToken=A),d.items.push(X)}}return m&&m<p&&i(m,"IMPOSSIBLE","Map comment with trailing content"),d.range=[n.offset,p,m??p],d}function resolveBlockSeq({composeNode:e,composeEmptyNode:t},r,n,i,a){const l=a?.nodeClass??YAMLSeq,d=new l(r.schema);r.atRoot&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let p=n.offset,m=null;for(const{start:A,value:x}of n.items){const I=resolveProps(A,{indicator:"seq-item-ind",next:x,offset:p,onError:i,parentIndent:n.indent,startOnNewline:!0});if(!I.found)if(I.anchor||I.tag||x)x?.type==="block-seq"?i(I.end,"BAD_INDENT","All sequence items must start at the same column"):i(p,"MISSING_CHAR","Sequence item without - indicator");else{m=I.end,I.comment&&(d.comment=I.comment);continue}const P=x?e(r,x,I,i):t(r,I.end,A,null,I,i);r.schema.compat&&flowIndentCheck(n.indent,x,i),p=P.range[2],d.items.push(P)}return d.range=[n.offset,p,m??p],d}function resolveEnd(e,t,r,n){let i="";if(e){let a=!1,l="";for(const d of e){const{source:p,type:m}=d;switch(m){case"space":a=!0;break;case"comment":{r&&!a&&n(d,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const A=p.substring(1)||" ";i?i+=l+A:i=A,l="";break}case"newline":i&&(l+=p),a=!0;break;default:n(d,"UNEXPECTED_TOKEN",`Unexpected ${m} at node end`)}t+=p.length}}return{comment:i,offset:t}}const blockMsg="Block collections are not allowed within flow collections",isBlock=e=>e&&(e.type==="block-map"||e.type==="block-seq");function resolveFlowCollection({composeNode:e,composeEmptyNode:t},r,n,i,a){const l=n.start.source==="{",d=l?"flow map":"flow sequence",p=a?.nodeClass??(l?YAMLMap:YAMLSeq),m=new p(r.schema);m.flow=!0;const A=r.atRoot;A&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let x=n.offset+n.start.source.length;for(let L=0;L<n.items.length;++L){const Y=n.items[L],{start:j,key:Z,sep:X,value:Q}=Y,J=resolveProps(j,{flow:d,indicator:"explicit-key-ind",next:Z??X?.[0],offset:x,onError:i,parentIndent:n.indent,startOnNewline:!1});if(!J.found){if(!J.anchor&&!J.tag&&!X&&!Q){L===0&&J.comma?i(J.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${d}`):L<n.items.length-1&&i(J.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${d}`),J.comment&&(m.comment?m.comment+=`
`+J.comment:m.comment=J.comment),x=J.end;continue}!l&&r.options.strict&&containsNewline(Z)&&i(Z,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(L===0)J.comma&&i(J.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${d}`);else if(J.comma||i(J.start,"MISSING_CHAR",`Missing , between ${d} items`),J.comment){let ee="";e:for(const ie of j)switch(ie.type){case"comma":case"space":break;case"comment":ee=ie.source.substring(1);break e;default:break e}if(ee){let ie=m.items[m.items.length-1];isPair(ie)&&(ie=ie.value??ie.key),ie.comment?ie.comment+=`
`+ee:ie.comment=ee,J.comment=J.comment.substring(ee.length+1)}}if(!l&&!X&&!J.found){const ee=Q?e(r,Q,J,i):t(r,J.end,X,null,J,i);m.items.push(ee),x=ee.range[2],isBlock(Q)&&i(ee.range,"BLOCK_IN_FLOW",blockMsg)}else{r.atKey=!0;const ee=J.end,ie=Z?e(r,Z,J,i):t(r,ee,j,null,J,i);isBlock(Z)&&i(ie.range,"BLOCK_IN_FLOW",blockMsg),r.atKey=!1;const de=resolveProps(X??[],{flow:d,indicator:"map-value-ind",next:Q,offset:ie.range[2],onError:i,parentIndent:n.indent,startOnNewline:!1});if(de.found){if(!l&&!J.found&&r.options.strict){if(X)for(const Re of X){if(Re===de.found)break;if(Re.type==="newline"){i(Re,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}J.start<de.found.offset-1024&&i(de.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else Q&&("source"in Q&&Q.source?.[0]===":"?i(Q,"MISSING_CHAR",`Missing space after : in ${d}`):i(de.start,"MISSING_CHAR",`Missing , or : between ${d} items`));const fe=Q?e(r,Q,de,i):de.found?t(r,de.end,X,null,de,i):null;fe?isBlock(Q)&&i(fe.range,"BLOCK_IN_FLOW",blockMsg):de.comment&&(ie.comment?ie.comment+=`
`+de.comment:ie.comment=de.comment);const _e=new Pair(ie,fe);if(r.options.keepSourceTokens&&(_e.srcToken=Y),l){const Re=m;mapIncludes(r,Re.items,ie)&&i(ee,"DUPLICATE_KEY","Map keys must be unique"),Re.items.push(_e)}else{const Re=new YAMLMap(r.schema);Re.flow=!0,Re.items.push(_e);const Qe=(fe??ie).range;Re.range=[ie.range[0],Qe[1],Qe[2]],m.items.push(Re)}x=fe?fe.range[2]:de.end}}const I=l?"}":"]",[P,...q]=n.end;let F=x;if(P?.source===I)F=P.offset+P.source.length;else{const L=d[0].toUpperCase()+d.substring(1),Y=A?`${L} must end with a ${I}`:`${L} in block collection must be sufficiently indented and end with a ${I}`;i(x,A?"MISSING_CHAR":"BAD_INDENT",Y),P&&P.source.length!==1&&q.unshift(P)}if(q.length>0){const L=resolveEnd(q,F,r.options.strict,i);L.comment&&(m.comment?m.comment+=`
`+L.comment:m.comment=L.comment),m.range=[n.offset,F,L.offset]}else m.range=[n.offset,F,F];return m}function resolveCollection(e,t,r,n,i,a){const l=r.type==="block-map"?resolveBlockMap(e,t,r,n,a):r.type==="block-seq"?resolveBlockSeq(e,t,r,n,a):resolveFlowCollection(e,t,r,n,a),d=l.constructor;return i==="!"||i===d.tagName?(l.tag=d.tagName,l):(i&&(l.tag=i),l)}function composeCollection(e,t,r,n,i){const a=n.tag,l=a?t.directives.tagName(a.source,I=>i(a,"TAG_RESOLVE_FAILED",I)):null;if(r.type==="block-seq"){const{anchor:I,newlineAfterProp:P}=n,q=I&&a?I.offset>a.offset?I:a:I??a;q&&(!P||P.offset<q.offset)&&i(q,"MISSING_CHAR","Missing newline after block sequence props")}const d=r.type==="block-map"?"map":r.type==="block-seq"?"seq":r.start.source==="{"?"map":"seq";if(!a||!l||l==="!"||l===YAMLMap.tagName&&d==="map"||l===YAMLSeq.tagName&&d==="seq")return resolveCollection(e,t,r,i,l);let p=t.schema.tags.find(I=>I.tag===l&&I.collection===d);if(!p){const I=t.schema.knownTags[l];if(I?.collection===d)t.schema.tags.push(Object.assign({},I,{default:!1})),p=I;else return I?i(a,"BAD_COLLECTION_TYPE",`${I.tag} used for ${d} collection, but expects ${I.collection??"scalar"}`,!0):i(a,"TAG_RESOLVE_FAILED",`Unresolved tag: ${l}`,!0),resolveCollection(e,t,r,i,l)}const m=resolveCollection(e,t,r,i,l,p),A=p.resolve?.(m,I=>i(a,"TAG_RESOLVE_FAILED",I),t.options)??m,x=isNode(A)?A:new Scalar(A);return x.range=m.range,x.tag=l,p?.format&&(x.format=p.format),x}function resolveBlockScalar(e,t,r){const n=t.offset,i=parseBlockScalarHeader(t,e.options.strict,r);if(!i)return{value:"",type:null,comment:"",range:[n,n,n]};const a=i.mode===">"?Scalar.BLOCK_FOLDED:Scalar.BLOCK_LITERAL,l=t.source?splitLines(t.source):[];let d=l.length;for(let F=l.length-1;F>=0;--F){const L=l[F][1];if(L===""||L==="\r")d=F;else break}if(d===0){const F=i.chomp==="+"&&l.length>0?`
`.repeat(Math.max(1,l.length-1)):"";let L=n+i.length;return t.source&&(L+=t.source.length),{value:F,type:a,comment:i.comment,range:[n,L,L]}}let p=t.indent+i.indent,m=t.offset+i.length,A=0;for(let F=0;F<d;++F){const[L,Y]=l[F];if(Y===""||Y==="\r")i.indent===0&&L.length>p&&(p=L.length);else{L.length<p&&r(m+L.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),i.indent===0&&(p=L.length),A=F,p===0&&!e.atRoot&&r(m,"BAD_INDENT","Block scalar values in collections must be indented");break}m+=L.length+Y.length+1}for(let F=l.length-1;F>=d;--F)l[F][0].length>p&&(d=F+1);let x="",I="",P=!1;for(let F=0;F<A;++F)x+=l[F][0].slice(p)+`
`;for(let F=A;F<d;++F){let[L,Y]=l[F];m+=L.length+Y.length+1;const j=Y[Y.length-1]==="\r";if(j&&(Y=Y.slice(0,-1)),Y&&L.length<p){const X=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;r(m-Y.length-(j?2:1),"BAD_INDENT",X),L=""}a===Scalar.BLOCK_LITERAL?(x+=I+L.slice(p)+Y,I=`
`):L.length>p||Y[0]==="	"?(I===" "?I=`
`:!P&&I===`
`&&(I=`

`),x+=I+L.slice(p)+Y,I=`
`,P=!0):Y===""?I===`
`?x+=`
`:I=`
`:(x+=I+Y,I=" ",P=!1)}switch(i.chomp){case"-":break;case"+":for(let F=d;F<l.length;++F)x+=`
`+l[F][0].slice(p);x[x.length-1]!==`
`&&(x+=`
`);break;default:x+=`
`}const q=n+i.length+t.source.length;return{value:x,type:a,comment:i.comment,range:[n,q,q]}}function parseBlockScalarHeader({offset:e,props:t},r,n){if(t[0].type!=="block-scalar-header")return n(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=t[0],a=i[0];let l=0,d="",p=-1;for(let I=1;I<i.length;++I){const P=i[I];if(!d&&(P==="-"||P==="+"))d=P;else{const q=Number(P);!l&&q?l=q:p===-1&&(p=e+I)}}p!==-1&&n(p,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let m=!1,A="",x=i.length;for(let I=1;I<t.length;++I){const P=t[I];switch(P.type){case"space":m=!0;case"newline":x+=P.source.length;break;case"comment":r&&!m&&n(P,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),x+=P.source.length,A=P.source.substring(1);break;case"error":n(P,"UNEXPECTED_TOKEN",P.message),x+=P.source.length;break;default:{const q=`Unexpected token in block scalar header: ${P.type}`;n(P,"UNEXPECTED_TOKEN",q);const F=P.source;F&&typeof F=="string"&&(x+=F.length)}}}return{mode:a,indent:l,chomp:d,comment:A,length:x}}function splitLines(e){const t=e.split(/\n( *)/),r=t[0],n=r.match(/^( *)/),a=[n?.[1]?[n[1],r.slice(n[1].length)]:["",r]];for(let l=1;l<t.length;l+=2)a.push([t[l],t[l+1]]);return a}function resolveFlowScalar(e,t,r){const{offset:n,type:i,source:a,end:l}=e;let d,p;const m=(I,P,q)=>r(n+I,P,q);switch(i){case"scalar":d=Scalar.PLAIN,p=plainValue(a,m);break;case"single-quoted-scalar":d=Scalar.QUOTE_SINGLE,p=singleQuotedValue(a,m);break;case"double-quoted-scalar":d=Scalar.QUOTE_DOUBLE,p=doubleQuotedValue(a,m);break;default:return r(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[n,n+a.length,n+a.length]}}const A=n+a.length,x=resolveEnd(l,A,t,r);return{value:p,type:d,comment:x.comment,range:[n,A,x.offset]}}function plainValue(e,t){let r="";switch(e[0]){case"	":r="a tab character";break;case",":r="flow indicator character ,";break;case"%":r="directive indicator character %";break;case"|":case">":{r=`block scalar indicator ${e[0]}`;break}case"@":case"`":{r=`reserved character ${e[0]}`;break}}return r&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${r}`),foldLines(e)}function singleQuotedValue(e,t){return(e[e.length-1]!=="'"||e.length===1)&&t(e.length,"MISSING_CHAR","Missing closing 'quote"),foldLines(e.slice(1,-1)).replace(/''/g,"'")}function foldLines(e){let t,r;try{t=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),r=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{t=/(.*?)[ \t]*\r?\n/sy,r=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=t.exec(e);if(!n)return e;let i=n[1],a=" ",l=t.lastIndex;for(r.lastIndex=l;n=r.exec(e);)n[1]===""?a===`
`?i+=a:a=`
`:(i+=a+n[1],a=" "),l=r.lastIndex;const d=/[ \t]*(.*)/sy;return d.lastIndex=l,n=d.exec(e),i+a+(n?.[1]??"")}function doubleQuotedValue(e,t){let r="";for(let n=1;n<e.length-1;++n){const i=e[n];if(!(i==="\r"&&e[n+1]===`
`))if(i===`
`){const{fold:a,offset:l}=foldNewline(e,n);r+=a,n=l}else if(i==="\\"){let a=e[++n];const l=escapeCodes[a];if(l)r+=l;else if(a===`
`)for(a=e[n+1];a===" "||a==="	";)a=e[++n+1];else if(a==="\r"&&e[n+1]===`
`)for(a=e[++n+1];a===" "||a==="	";)a=e[++n+1];else if(a==="x"||a==="u"||a==="U"){const d={x:2,u:4,U:8}[a];r+=parseCharCode(e,n+1,d,t),n+=d}else{const d=e.substr(n-1,2);t(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${d}`),r+=d}}else if(i===" "||i==="	"){const a=n;let l=e[n+1];for(;l===" "||l==="	";)l=e[++n+1];l!==`
`&&!(l==="\r"&&e[n+2]===`
`)&&(r+=n>a?e.slice(a,n+1):i)}else r+=i}return(e[e.length-1]!=='"'||e.length===1)&&t(e.length,"MISSING_CHAR",'Missing closing "quote'),r}function foldNewline(e,t){let r="",n=e[t+1];for(;(n===" "||n==="	"||n===`
`||n==="\r")&&!(n==="\r"&&e[t+2]!==`
`);)n===`
`&&(r+=`
`),t+=1,n=e[t+1];return r||(r=" "),{fold:r,offset:t}}const escapeCodes={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function parseCharCode(e,t,r,n){const i=e.substr(t,r),l=i.length===r&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(l)){const d=e.substr(t-2,r+2);return n(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${d}`),d}return String.fromCodePoint(l)}function composeScalar(e,t,r,n){const{value:i,type:a,comment:l,range:d}=t.type==="block-scalar"?resolveBlockScalar(e,t,n):resolveFlowScalar(t,e.options.strict,n),p=r?e.directives.tagName(r.source,x=>n(r,"TAG_RESOLVE_FAILED",x)):null;let m;e.options.stringKeys&&e.atKey?m=e.schema[SCALAR$1]:p?m=findScalarTagByName(e.schema,i,p,r,n):t.type==="scalar"?m=findScalarTagByTest(e,i,t,n):m=e.schema[SCALAR$1];let A;try{const x=m.resolve(i,I=>n(r??t,"TAG_RESOLVE_FAILED",I),e.options);A=isScalar$1(x)?x:new Scalar(x)}catch(x){const I=x instanceof Error?x.message:String(x);n(r??t,"TAG_RESOLVE_FAILED",I),A=new Scalar(i)}return A.range=d,A.source=i,a&&(A.type=a),p&&(A.tag=p),m.format&&(A.format=m.format),l&&(A.comment=l),A}function findScalarTagByName(e,t,r,n,i){if(r==="!")return e[SCALAR$1];const a=[];for(const d of e.tags)if(!d.collection&&d.tag===r)if(d.default&&d.test)a.push(d);else return d;for(const d of a)if(d.test?.test(t))return d;const l=e.knownTags[r];return l&&!l.collection?(e.tags.push(Object.assign({},l,{default:!1,test:void 0})),l):(i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,r!=="tag:yaml.org,2002:str"),e[SCALAR$1])}function findScalarTagByTest({atKey:e,directives:t,schema:r},n,i,a){const l=r.tags.find(d=>(d.default===!0||e&&d.default==="key")&&d.test?.test(n))||r[SCALAR$1];if(r.compat){const d=r.compat.find(p=>p.default&&p.test?.test(n))??r[SCALAR$1];if(l.tag!==d.tag){const p=t.tagString(l.tag),m=t.tagString(d.tag),A=`Value may be parsed as either ${p} or ${m}`;a(i,"TAG_RESOLVE_FAILED",A,!0)}}return l}function emptyScalarPosition(e,t,r){if(t){r??(r=t.length);for(let n=r-1;n>=0;--n){let i=t[n];switch(i.type){case"space":case"comment":case"newline":e-=i.source.length;continue}for(i=t[++n];i?.type==="space";)e+=i.source.length,i=t[++n];break}}return e}const CN={composeNode,composeEmptyNode};function composeNode(e,t,r,n){const i=e.atKey,{spaceBefore:a,comment:l,anchor:d,tag:p}=r;let m,A=!0;switch(t.type){case"alias":m=composeAlias(e,t,n),(d||p)&&n(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":m=composeScalar(e,t,p,n),d&&(m.anchor=d.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":m=composeCollection(CN,e,t,r,n),d&&(m.anchor=d.source.substring(1));break;default:{const x=t.type==="error"?t.message:`Unsupported token (type: ${t.type})`;n(t,"UNEXPECTED_TOKEN",x),m=composeEmptyNode(e,t.offset,void 0,null,r,n),A=!1}}return d&&m.anchor===""&&n(d,"BAD_ALIAS","Anchor cannot be an empty string"),i&&e.options.stringKeys&&(!isScalar$1(m)||typeof m.value!="string"||m.tag&&m.tag!=="tag:yaml.org,2002:str")&&n(p??t,"NON_STRING_KEY","With stringKeys, all keys must be strings"),a&&(m.spaceBefore=!0),l&&(t.type==="scalar"&&t.source===""?m.comment=l:m.commentBefore=l),e.options.keepSourceTokens&&A&&(m.srcToken=t),m}function composeEmptyNode(e,t,r,n,{spaceBefore:i,comment:a,anchor:l,tag:d,end:p},m){const A={type:"scalar",offset:emptyScalarPosition(t,r,n),indent:-1,source:""},x=composeScalar(e,A,d,m);return l&&(x.anchor=l.source.substring(1),x.anchor===""&&m(l,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(x.spaceBefore=!0),a&&(x.comment=a,x.range[2]=p),x}function composeAlias({options:e},{offset:t,source:r,end:n},i){const a=new Alias(r.substring(1));a.source===""&&i(t,"BAD_ALIAS","Alias cannot be an empty string"),a.source.endsWith(":")&&i(t+r.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const l=t+r.length,d=resolveEnd(n,l,e.strict,i);return a.range=[t,l,d.offset],d.comment&&(a.comment=d.comment),a}function composeDoc(e,t,{offset:r,start:n,value:i,end:a},l){const d=Object.assign({_directives:t},e),p=new Document(void 0,d),m={atKey:!1,atRoot:!0,directives:p.directives,options:p.options,schema:p.schema},A=resolveProps(n,{indicator:"doc-start",next:i??a?.[0],offset:r,onError:l,parentIndent:0,startOnNewline:!0});A.found&&(p.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!A.hasNewline&&l(A.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),p.contents=i?composeNode(m,i,A,l):composeEmptyNode(m,A.end,n,null,A,l);const x=p.contents.range[2],I=resolveEnd(a,x,!1,l);return I.comment&&(p.comment=I.comment),p.range=[r,x,I.offset],p}function getErrorPos(e){if(typeof e=="number")return[e,e+1];if(Array.isArray(e))return e.length===2?e:[e[0],e[1]];const{offset:t,source:r}=e;return[t,t+(typeof r=="string"?r.length:1)]}function parsePrelude(e){let t="",r=!1,n=!1;for(let i=0;i<e.length;++i){const a=e[i];switch(a[0]){case"#":t+=(t===""?"":n?`

`:`
`)+(a.substring(1)||" "),r=!0,n=!1;break;case"%":e[i+1]?.[0]!=="#"&&(i+=1),r=!1;break;default:r||(n=!0),r=!1}}return{comment:t,afterEmptyLine:n}}class Composer{constructor(t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(r,n,i,a)=>{const l=getErrorPos(r);a?this.warnings.push(new YAMLWarning(l,n,i)):this.errors.push(new YAMLParseError(l,n,i))},this.directives=new Directives({version:t.version||"1.2"}),this.options=t}decorate(t,r){const{comment:n,afterEmptyLine:i}=parsePrelude(this.prelude);if(n){const a=t.contents;if(r)t.comment=t.comment?`${t.comment}
${n}`:n;else if(i||t.directives.docStart||!a)t.commentBefore=n;else if(isCollection$1(a)&&!a.flow&&a.items.length>0){let l=a.items[0];isPair(l)&&(l=l.key);const d=l.commentBefore;l.commentBefore=d?`${n}
${d}`:n}else{const l=a.commentBefore;a.commentBefore=l?`${n}
${l}`:n}}r?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:parsePrelude(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(t,r=!1,n=-1){for(const i of t)yield*this.next(i);yield*this.end(r,n)}*next(t){switch(t.type){case"directive":this.directives.add(t.source,(r,n,i)=>{const a=getErrorPos(t);a[0]+=r,this.onError(a,"BAD_DIRECTIVE",n,i)}),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{const r=composeDoc(this.options,this.directives,t,this.onError);this.atDirectives&&!r.directives.docStart&&this.onError(t,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(r,!1),this.doc&&(yield this.doc),this.doc=r,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{const r=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,n=new YAMLParseError(getErrorPos(t),"UNEXPECTED_TOKEN",r);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const n="Unexpected doc-end without preceding document";this.errors.push(new YAMLParseError(getErrorPos(t),"UNEXPECTED_TOKEN",n));break}this.doc.directives.docEnd=!0;const r=resolveEnd(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),r.comment){const n=this.doc.comment;this.doc.comment=n?`${n}
${r.comment}`:r.comment}this.doc.range[2]=r.offset;break}default:this.errors.push(new YAMLParseError(getErrorPos(t),"UNEXPECTED_TOKEN",`Unsupported token ${t.type}`))}}*end(t=!1,r=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(t){const n=Object.assign({_directives:this.directives},this.options),i=new Document(void 0,n);this.atDirectives&&this.onError(r,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,r,r],this.decorate(i,!1),yield i}}}function resolveAsScalar(e,t=!0,r){if(e){const n=(i,a,l)=>{const d=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(r)r(d,a,l);else throw new YAMLParseError([d,d+1],a,l)};switch(e.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return resolveFlowScalar(e,t,n);case"block-scalar":return resolveBlockScalar({options:{strict:t}},e,n)}}return null}function createScalarToken(e,t){const{implicitKey:r=!1,indent:n,inFlow:i=!1,offset:a=-1,type:l="PLAIN"}=t,d=stringifyString({type:l,value:e},{implicitKey:r,indent:n>0?" ".repeat(n):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),p=t.end??[{type:"newline",offset:-1,indent:n,source:`
`}];switch(d[0]){case"|":case">":{const m=d.indexOf(`
`),A=d.substring(0,m),x=d.substring(m+1)+`
`,I=[{type:"block-scalar-header",offset:a,indent:n,source:A}];return addEndtoBlockProps(I,p)||I.push({type:"newline",offset:-1,indent:n,source:`
`}),{type:"block-scalar",offset:a,indent:n,props:I,source:x}}case'"':return{type:"double-quoted-scalar",offset:a,indent:n,source:d,end:p};case"'":return{type:"single-quoted-scalar",offset:a,indent:n,source:d,end:p};default:return{type:"scalar",offset:a,indent:n,source:d,end:p}}}function setScalarValue(e,t,r={}){let{afterKey:n=!1,implicitKey:i=!1,inFlow:a=!1,type:l}=r,d="indent"in e?e.indent:null;if(n&&typeof d=="number"&&(d+=2),!l)switch(e.type){case"single-quoted-scalar":l="QUOTE_SINGLE";break;case"double-quoted-scalar":l="QUOTE_DOUBLE";break;case"block-scalar":{const m=e.props[0];if(m.type!=="block-scalar-header")throw new Error("Invalid block scalar header");l=m.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:l="PLAIN"}const p=stringifyString({type:l,value:t},{implicitKey:i||d===null,indent:d!==null&&d>0?" ".repeat(d):"",inFlow:a,options:{blockQuote:!0,lineWidth:-1}});switch(p[0]){case"|":case">":setBlockScalarValue(e,p);break;case'"':setFlowScalarValue(e,p,"double-quoted-scalar");break;case"'":setFlowScalarValue(e,p,"single-quoted-scalar");break;default:setFlowScalarValue(e,p,"scalar")}}function setBlockScalarValue(e,t){const r=t.indexOf(`
`),n=t.substring(0,r),i=t.substring(r+1)+`
`;if(e.type==="block-scalar"){const a=e.props[0];if(a.type!=="block-scalar-header")throw new Error("Invalid block scalar header");a.source=n,e.source=i}else{const{offset:a}=e,l="indent"in e?e.indent:-1,d=[{type:"block-scalar-header",offset:a,indent:l,source:n}];addEndtoBlockProps(d,"end"in e?e.end:void 0)||d.push({type:"newline",offset:-1,indent:l,source:`
`});for(const p of Object.keys(e))p!=="type"&&p!=="offset"&&delete e[p];Object.assign(e,{type:"block-scalar",indent:l,props:d,source:i})}}function addEndtoBlockProps(e,t){if(t)for(const r of t)switch(r.type){case"space":case"comment":e.push(r);break;case"newline":return e.push(r),!0}return!1}function setFlowScalarValue(e,t,r){switch(e.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":e.type=r,e.source=t;break;case"block-scalar":{const n=e.props.slice(1);let i=t.length;e.props[0].type==="block-scalar-header"&&(i-=e.props[0].source.length);for(const a of n)a.offset+=i;delete e.props,Object.assign(e,{type:r,source:t,end:n});break}case"block-map":case"block-seq":{const i={type:"newline",offset:e.offset+t.length,indent:e.indent,source:`
`};delete e.items,Object.assign(e,{type:r,source:t,end:[i]});break}default:{const n="indent"in e?e.indent:-1,i="end"in e&&Array.isArray(e.end)?e.end.filter(a=>a.type==="space"||a.type==="comment"||a.type==="newline"):[];for(const a of Object.keys(e))a!=="type"&&a!=="offset"&&delete e[a];Object.assign(e,{type:r,indent:n,source:t,end:i})}}}const stringify$1=e=>"type"in e?stringifyToken(e):stringifyItem(e);function stringifyToken(e){switch(e.type){case"block-scalar":{let t="";for(const r of e.props)t+=stringifyToken(r);return t+e.source}case"block-map":case"block-seq":{let t="";for(const r of e.items)t+=stringifyItem(r);return t}case"flow-collection":{let t=e.start.source;for(const r of e.items)t+=stringifyItem(r);for(const r of e.end)t+=r.source;return t}case"document":{let t=stringifyItem(e);if(e.end)for(const r of e.end)t+=r.source;return t}default:{let t=e.source;if("end"in e&&e.end)for(const r of e.end)t+=r.source;return t}}}function stringifyItem({start:e,key:t,sep:r,value:n}){let i="";for(const a of e)i+=a.source;if(t&&(i+=stringifyToken(t)),r)for(const a of r)i+=a.source;return n&&(i+=stringifyToken(n)),i}const BREAK=Symbol("break visit"),SKIP=Symbol("skip children"),REMOVE=Symbol("remove item");function visit(e,t){"type"in e&&e.type==="document"&&(e={start:e.start,value:e.value}),_visit(Object.freeze([]),e,t)}visit.BREAK=BREAK;visit.SKIP=SKIP;visit.REMOVE=REMOVE;visit.itemAtPath=(e,t)=>{let r=e;for(const[n,i]of t){const a=r?.[n];if(a&&"items"in a)r=a.items[i];else return}return r};visit.parentCollection=(e,t)=>{const r=visit.itemAtPath(e,t.slice(0,-1)),n=t[t.length-1][0],i=r?.[n];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function _visit(e,t,r){let n=r(t,e);if(typeof n=="symbol")return n;for(const i of["key","value"]){const a=t[i];if(a&&"items"in a){for(let l=0;l<a.items.length;++l){const d=_visit(Object.freeze(e.concat([[i,l]])),a.items[l],r);if(typeof d=="number")l=d-1;else{if(d===BREAK)return BREAK;d===REMOVE&&(a.items.splice(l,1),l-=1)}}typeof n=="function"&&i==="key"&&(n=n(t,e))}}return typeof n=="function"?n(t,e):n}const BOM="\uFEFF",DOCUMENT="",FLOW_END="",SCALAR="",isCollection=e=>!!e&&"items"in e,isScalar=e=>!!e&&(e.type==="scalar"||e.type==="single-quoted-scalar"||e.type==="double-quoted-scalar"||e.type==="block-scalar");function prettyToken(e){switch(e){case BOM:return"<BOM>";case DOCUMENT:return"<DOC>";case FLOW_END:return"<FLOW_END>";case SCALAR:return"<SCALAR>";default:return JSON.stringify(e)}}function tokenType(e){switch(e){case BOM:return"byte-order-mark";case DOCUMENT:return"doc-mode";case FLOW_END:return"flow-error-end";case SCALAR:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}const cst=Object.freeze(Object.defineProperty({__proto__:null,BOM,DOCUMENT,FLOW_END,SCALAR,createScalarToken,isCollection,isScalar,prettyToken,resolveAsScalar,setScalarValue,stringify:stringify$1,tokenType,visit},Symbol.toStringTag,{value:"Module"}));function isEmpty(e){switch(e){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const hexDigits=new Set("0123456789ABCDEFabcdef"),tagChars=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),flowIndicatorChars=new Set(",[]{}"),invalidAnchorChars=new Set(` ,[]{}
\r	`),isNotAnchorChar=e=>!e||invalidAnchorChars.has(e);class Lexer{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(t,r=!1){if(t){if(typeof t!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+t:t,this.lineEndPos=null}this.atEnd=!r;let n=this.next??"stream";for(;n&&(r||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let t=this.pos,r=this.buffer[t];for(;r===" "||r==="	";)r=this.buffer[++t];return!r||r==="#"||r===`
`?!0:r==="\r"?this.buffer[t+1]===`
`:!1}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let r=this.buffer[t];if(this.indentNext>0){let n=0;for(;r===" ";)r=this.buffer[++n+t];if(r==="\r"){const i=this.buffer[n+t+1];if(i===`
`||!i&&!this.atEnd)return t+n+1}return r===`
`||n>=this.indentNext||!r&&!this.atEnd?t+n:-1}if(r==="-"||r==="."){const n=this.buffer.substr(t,3);if((n==="---"||n==="...")&&isEmpty(this.buffer[t+3]))return-1}return t}getLine(){let t=this.lineEndPos;return(typeof t!="number"||t!==-1&&t<this.pos)&&(t=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=t),t===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[t-1]==="\r"&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}*parseNext(t){switch(t){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let t=this.getLine();if(t===null)return this.setNext("stream");if(t[0]===BOM&&(yield*this.pushCount(1),t=t.substring(1)),t[0]==="%"){let r=t.length,n=t.indexOf("#");for(;n!==-1;){const a=t[n-1];if(a===" "||a==="	"){r=n-1;break}else n=t.indexOf("#",n+1)}for(;;){const a=t[r-1];if(a===" "||a==="	")r-=1;else break}const i=(yield*this.pushCount(r))+(yield*this.pushSpaces(!0));return yield*this.pushCount(t.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const r=yield*this.pushSpaces(!0);return yield*this.pushCount(t.length-r),yield*this.pushNewline(),"stream"}return yield DOCUMENT,yield*this.parseLineStart()}*parseLineStart(){const t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if(t==="-"||t==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const r=this.peek(3);if((r==="---"||r==="...")&&isEmpty(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,r==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!isEmpty(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[t,r]=this.peek(2);if(!r&&!this.atEnd)return this.setNext("block-start");if((t==="-"||t==="?"||t===":")&&isEmpty(r)){const n=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=n,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const t=this.getLine();if(t===null)return this.setNext("doc");let r=yield*this.pushIndicators();switch(t[r]){case"#":yield*this.pushCount(t.length-r);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(isNotAnchorChar),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return r+=yield*this.parseBlockScalarHeader(),r+=yield*this.pushSpaces(!0),yield*this.pushCount(t.length-r),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let t,r,n=-1;do t=yield*this.pushNewline(),t>0?(r=yield*this.pushSpaces(!1),this.indentValue=n=r):r=0,r+=yield*this.pushSpaces(!0);while(t+r>0);const i=this.getLine();if(i===null)return this.setNext("flow");if((n!==-1&&n<this.indentNext&&i[0]!=="#"||n===0&&(i.startsWith("---")||i.startsWith("..."))&&isEmpty(i[3]))&&!(n===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield FLOW_END,yield*this.parseLineStart();let a=0;for(;i[a]===",";)a+=yield*this.pushCount(1),a+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(a+=yield*this.pushIndicators(),i[a]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-a),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(isNotAnchorChar),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const l=this.charAt(1);if(this.flowKey||isEmpty(l)||l===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const t=this.charAt(0);let r=this.buffer.indexOf(t,this.pos+1);if(t==="'")for(;r!==-1&&this.buffer[r+1]==="'";)r=this.buffer.indexOf("'",r+2);else for(;r!==-1;){let a=0;for(;this.buffer[r-1-a]==="\\";)a+=1;if(a%2===0)break;r=this.buffer.indexOf('"',r+1)}const n=this.buffer.substring(0,r);let i=n.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){const a=this.continueScalar(i+1);if(a===-1)break;i=n.indexOf(`
`,a)}i!==-1&&(r=i-(n[i-1]==="\r"?2:1))}if(r===-1){if(!this.atEnd)return this.setNext("quoted-scalar");r=this.buffer.length}return yield*this.pushToIndex(r+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){const r=this.buffer[++t];if(r==="+")this.blockScalarKeep=!0;else if(r>"0"&&r<="9")this.blockScalarIndent=Number(r)-1;else if(r!=="-")break}return yield*this.pushUntil(r=>isEmpty(r)||r==="#")}*parseBlockScalar(){let t=this.pos-1,r=0,n;e:for(let a=this.pos;n=this.buffer[a];++a)switch(n){case" ":r+=1;break;case`
`:t=a,r=0;break;case"\r":{const l=this.buffer[a+1];if(!l&&!this.atEnd)return this.setNext("block-scalar");if(l===`
`)break}default:break e}if(!n&&!this.atEnd)return this.setNext("block-scalar");if(r>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=r:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const a=this.continueScalar(t+1);if(a===-1)break;t=this.buffer.indexOf(`
`,a)}while(t!==-1);if(t===-1){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}let i=t+1;for(n=this.buffer[i];n===" ";)n=this.buffer[++i];if(n==="	"){for(;n==="	"||n===" "||n==="\r"||n===`
`;)n=this.buffer[++i];t=i-1}else if(!this.blockScalarKeep)do{let a=t-1,l=this.buffer[a];l==="\r"&&(l=this.buffer[--a]);const d=a;for(;l===" ";)l=this.buffer[--a];if(l===`
`&&a>=this.pos&&a+1+r>d)t=a;else break}while(!0);return yield SCALAR,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const t=this.flowLevel>0;let r=this.pos-1,n=this.pos-1,i;for(;i=this.buffer[++n];)if(i===":"){const a=this.buffer[n+1];if(isEmpty(a)||t&&flowIndicatorChars.has(a))break;r=n}else if(isEmpty(i)){let a=this.buffer[n+1];if(i==="\r"&&(a===`
`?(n+=1,i=`
`,a=this.buffer[n+1]):r=n),a==="#"||t&&flowIndicatorChars.has(a))break;if(i===`
`){const l=this.continueScalar(n+1);if(l===-1)break;n=Math.max(n,l-2)}}else{if(t&&flowIndicatorChars.has(i))break;r=n}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield SCALAR,yield*this.pushToIndex(r+1,!0),t?"flow":"doc")}*pushCount(t){return t>0?(yield this.buffer.substr(this.pos,t),this.pos+=t,t):0}*pushToIndex(t,r){const n=this.buffer.slice(this.pos,t);return n?(yield n,this.pos+=n.length,n.length):(r&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(isNotAnchorChar))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const t=this.flowLevel>0,r=this.charAt(1);if(isEmpty(r)||t&&flowIndicatorChars.has(r))return t?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let t=this.pos+2,r=this.buffer[t];for(;!isEmpty(r)&&r!==">";)r=this.buffer[++t];return yield*this.pushToIndex(r===">"?t+1:t,!1)}else{let t=this.pos+1,r=this.buffer[t];for(;r;)if(tagChars.has(r))r=this.buffer[++t];else if(r==="%"&&hexDigits.has(this.buffer[t+1])&&hexDigits.has(this.buffer[t+2]))r=this.buffer[t+=3];else break;return yield*this.pushToIndex(t,!1)}}*pushNewline(){const t=this.buffer[this.pos];return t===`
`?yield*this.pushCount(1):t==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(t){let r=this.pos-1,n;do n=this.buffer[++r];while(n===" "||t&&n==="	");const i=r-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=r),i}*pushUntil(t){let r=this.pos,n=this.buffer[r];for(;!t(n);)n=this.buffer[++r];return yield*this.pushToIndex(r,!1)}}class LineCounter{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let r=0,n=this.lineStarts.length;for(;r<n;){const a=r+n>>1;this.lineStarts[a]<t?r=a+1:n=a}if(this.lineStarts[r]===t)return{line:r+1,col:1};if(r===0)return{line:0,col:t};const i=this.lineStarts[r-1];return{line:r,col:t-i+1}}}}function includesToken(e,t){for(let r=0;r<e.length;++r)if(e[r].type===t)return!0;return!1}function findNonEmptyIndex(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function isFlowToken(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function getPrevProps(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function getFirstKeyStartProps(e){if(e.length===0)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;e[++t]?.type==="space";);return e.splice(t,e.length)}function fixFlowSeqItems(e){if(e.start.type==="flow-seq-start")for(const t of e.items)t.sep&&!t.value&&!includesToken(t.start,"explicit-key-ind")&&!includesToken(t.sep,"map-value-ind")&&(t.key&&(t.value=t.key),delete t.key,isFlowToken(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class Parser{constructor(t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Lexer,this.onNewLine=t}*parse(t,r=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const n of this.lexer.lex(t,r))yield*this.next(n);r||(yield*this.end())}*next(t){if(this.source=t,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=t.length;return}const r=tokenType(t);if(r)if(r==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=r,yield*this.step(),r){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&t[0]===" "&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=t.length}else{const n=`Not a YAML token: ${t}`;yield*this.pop({type:"error",offset:this.offset,message:n,source:t}),this.offset+=t.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const t=this.peek(1);if(this.type==="doc-end"&&t?.type!=="doc-end"){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!t)return yield*this.stream();switch(t.type){case"document":return yield*this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(t);case"block-scalar":return yield*this.blockScalar(t);case"block-map":return yield*this.blockMap(t);case"block-seq":return yield*this.blockSequence(t);case"flow-collection":return yield*this.flowCollection(t);case"doc-end":return yield*this.documentEnd(t)}yield*this.pop()}peek(t){return this.stack[this.stack.length-t]}*pop(t){const r=t??this.stack.pop();if(!r)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield r;else{const n=this.peek(1);switch(r.type==="block-scalar"?r.indent="indent"in n?n.indent:0:r.type==="flow-collection"&&n.type==="document"&&(r.indent=0),r.type==="flow-collection"&&fixFlowSeqItems(r),n.type){case"document":n.value=r;break;case"block-scalar":n.props.push(r);break;case"block-map":{const i=n.items[n.items.length-1];if(i.value){n.items.push({start:[],key:r,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=r;else{Object.assign(i,{key:r,sep:[]}),this.onKeyLine=!i.explicitKey;return}break}case"block-seq":{const i=n.items[n.items.length-1];i.value?n.items.push({start:[],value:r}):i.value=r;break}case"flow-collection":{const i=n.items[n.items.length-1];!i||i.value?n.items.push({start:[],key:r,sep:[]}):i.sep?i.value=r:Object.assign(i,{key:r,sep:[]});return}default:yield*this.pop(),yield*this.pop(r)}if((n.type==="document"||n.type==="block-map"||n.type==="block-seq")&&(r.type==="block-map"||r.type==="block-seq")){const i=r.items[r.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&findNonEmptyIndex(i.start)===-1&&(r.indent===0||i.start.every(a=>a.type!=="comment"||a.indent<r.indent))&&(n.type==="document"?n.end=i.start:n.items.push({start:i.start}),r.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const t={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&t.start.push(this.sourceToken),this.stack.push(t);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(t){if(t.value)return yield*this.lineEnd(t);switch(this.type){case"doc-start":{findNonEmptyIndex(t.start)!==-1?(yield*this.pop(),yield*this.step()):t.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":t.start.push(this.sourceToken);return}const r=this.startBlockValue(t);r?this.stack.push(r):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(t){if(this.type==="map-value-ind"){const r=getPrevProps(this.peek(2)),n=getFirstKeyStartProps(r);let i;t.end?(i=t.end,i.push(this.sourceToken),delete t.end):i=[this.sourceToken];const a={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:n,key:t,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(t)}*blockScalar(t){switch(this.type){case"space":case"comment":case"newline":t.props.push(this.sourceToken);return;case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(t){const r=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,r.value){const n="end"in r.value?r.value.end:void 0;(Array.isArray(n)?n[n.length-1]:void 0)?.type==="comment"?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"space":case"comment":if(r.value)t.items.push({start:[this.sourceToken]});else if(r.sep)r.sep.push(this.sourceToken);else{if(this.atIndentedComment(r.start,t.indent)){const i=t.items[t.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,r.start),i.push(this.sourceToken),t.items.pop();return}}r.start.push(this.sourceToken)}return}if(this.indent>=t.indent){const n=!this.onKeyLine&&this.indent===t.indent,i=n&&(r.sep||r.explicitKey)&&this.type!=="seq-item-ind";let a=[];if(i&&r.sep&&!r.value){const l=[];for(let d=0;d<r.sep.length;++d){const p=r.sep[d];switch(p.type){case"newline":l.push(d);break;case"space":break;case"comment":p.indent>t.indent&&(l.length=0);break;default:l.length=0}}l.length>=2&&(a=r.sep.splice(l[1]))}switch(this.type){case"anchor":case"tag":i||r.value?(a.push(this.sourceToken),t.items.push({start:a}),this.onKeyLine=!0):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"explicit-key-ind":!r.sep&&!r.explicitKey?(r.start.push(this.sourceToken),r.explicitKey=!0):i||r.value?(a.push(this.sourceToken),t.items.push({start:a,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(r.explicitKey)if(r.sep)if(r.value)t.items.push({start:[],key:null,sep:[this.sourceToken]});else if(includesToken(r.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]});else if(isFlowToken(r.key)&&!includesToken(r.sep,"newline")){const l=getFirstKeyStartProps(r.start),d=r.key,p=r.sep;p.push(this.sourceToken),delete r.key,delete r.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:l,key:d,sep:p}]})}else a.length>0?r.sep=r.sep.concat(a,this.sourceToken):r.sep.push(this.sourceToken);else if(includesToken(r.start,"newline"))Object.assign(r,{key:null,sep:[this.sourceToken]});else{const l=getFirstKeyStartProps(r.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:l,key:null,sep:[this.sourceToken]}]})}else r.sep?r.value||i?t.items.push({start:a,key:null,sep:[this.sourceToken]}):includesToken(r.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const l=this.flowScalar(this.type);i||r.value?(t.items.push({start:a,key:l,sep:[]}),this.onKeyLine=!0):r.sep?this.stack.push(l):(Object.assign(r,{key:l,sep:[]}),this.onKeyLine=!0);return}default:{const l=this.startBlockValue(t);if(l){if(l.type==="block-seq"){if(!r.explicitKey&&r.sep&&!includesToken(r.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else n&&t.items.push({start:a});this.stack.push(l);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(t){const r=t.items[t.items.length-1];switch(this.type){case"newline":if(r.value){const n="end"in r.value?r.value.end:void 0;(Array.isArray(n)?n[n.length-1]:void 0)?.type==="comment"?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else r.start.push(this.sourceToken);return;case"space":case"comment":if(r.value)t.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(r.start,t.indent)){const i=t.items[t.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,r.start),i.push(this.sourceToken),t.items.pop();return}}r.start.push(this.sourceToken)}return;case"anchor":case"tag":if(r.value||this.indent<=t.indent)break;r.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==t.indent)break;r.value||includesToken(r.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return}if(this.indent>t.indent){const n=this.startBlockValue(t);if(n){this.stack.push(n);return}}yield*this.pop(),yield*this.step()}*flowCollection(t){const r=t.items[t.items.length-1];if(this.type==="flow-error-end"){let n;do yield*this.pop(),n=this.peek(1);while(n?.type==="flow-collection")}else if(t.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!r||r.sep?t.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return;case"map-value-ind":!r||r.value?t.items.push({start:[],key:null,sep:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!r||r.value?t.items.push({start:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);!r||r.value?t.items.push({start:[],key:i,sep:[]}):r.sep?this.stack.push(i):Object.assign(r,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":t.end.push(this.sourceToken);return}const n=this.startBlockValue(t);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const n=this.peek(2);if(n.type==="block-map"&&(this.type==="map-value-ind"&&n.indent===t.indent||this.type==="newline"&&!n.items[n.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&n.type!=="flow-collection"){const i=getPrevProps(n),a=getFirstKeyStartProps(i);fixFlowSeqItems(t);const l=t.end.splice(1,t.end.length);l.push(this.sourceToken);const d={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:a,key:t,sep:l}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=d}else yield*this.lineEnd(t)}}flowScalar(t){if(this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const r=getPrevProps(t),n=getFirstKeyStartProps(r);return n.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const r=getPrevProps(t),n=getFirstKeyStartProps(r);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(t,r){return this.type!=="comment"||this.indent<=r?!1:t.every(n=>n.type==="newline"||n.type==="space")}*documentEnd(t){this.type!=="doc-mode"&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function parseOptions(e){const t=e.prettyErrors!==!1;return{lineCounter:e.lineCounter||t&&new LineCounter||null,prettyErrors:t}}function parseAllDocuments(e,t={}){const{lineCounter:r,prettyErrors:n}=parseOptions(t),i=new Parser(r?.addNewLine),a=new Composer(t),l=Array.from(a.compose(i.parse(e)));if(n&&r)for(const d of l)d.errors.forEach(prettifyError(e,r)),d.warnings.forEach(prettifyError(e,r));return l.length>0?l:Object.assign([],{empty:!0},a.streamInfo())}function parseDocument(e,t={}){const{lineCounter:r,prettyErrors:n}=parseOptions(t),i=new Parser(r?.addNewLine),a=new Composer(t);let l=null;for(const d of a.compose(i.parse(e),!0,e.length))if(!l)l=d;else if(l.options.logLevel!=="silent"){l.errors.push(new YAMLParseError(d.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return n&&r&&(l.errors.forEach(prettifyError(e,r)),l.warnings.forEach(prettifyError(e,r))),l}function parse(e,t,r){let n;typeof t=="function"?n=t:r===void 0&&t&&typeof t=="object"&&(r=t);const i=parseDocument(e,r);if(!i)return null;if(i.warnings.forEach(a=>warn$1(i.options.logLevel,a)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:n},r))}function stringify(e,t,r){let n=null;if(typeof t=="function"||Array.isArray(t)?n=t:r===void 0&&t&&(r=t),typeof r=="string"&&(r=r.length),typeof r=="number"){const i=Math.round(r);r=i<1?void 0:i>8?{indent:8}:{indent:i}}if(e===void 0){const{keepUndefined:i}=r??t??{};if(!i)return}return isDocument(e)&&!n?e.toString(r):new Document(e,n,r).toString(r)}const YAML=Object.freeze(Object.defineProperty({__proto__:null,Alias,CST:cst,Composer,Document,Lexer,LineCounter,Pair,Parser,Scalar,Schema,YAMLError,YAMLMap,YAMLParseError,YAMLSeq,YAMLWarning,isAlias,isCollection:isCollection$1,isDocument,isMap,isNode,isPair,isScalar:isScalar$1,isSeq,parse,parseAllDocuments,parseDocument,stringify,visit:visit$1,visitAsync},Symbol.toStringTag,{value:"Module"}));var __defProp$1=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$1=Object.getOwnPropertySymbols,__hasOwnProp$1=Object.prototype.hasOwnProperty,__propIsEnum$1=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(e,t,r)=>t in e?__defProp$1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues$1=(e,t)=>{for(var r in t||(t={}))__hasOwnProp$1.call(t,r)&&__defNormalProp$1(e,r,t[r]);if(__getOwnPropSymbols$1)for(var r of __getOwnPropSymbols$1(t))__propIsEnum$1.call(t,r)&&__defNormalProp$1(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__async=(e,t,r)=>new Promise((n,i)=>{var a=p=>{try{d(r.next(p))}catch(m){i(m)}},l=p=>{try{d(r.throw(p))}catch(m){i(m)}},d=p=>p.done?n(p.value):Promise.resolve(p.value).then(a,l);d((r=r.apply(e,t)).next())}),TaskQueue=class zm{constructor(t){this.executors=t,this.taskKeyQueue=[],this.taskMap=new Map,this.idleListeners=[],this.processing=!1,this.stopped=!1}static initialize(t){if(t.size===0)throw new Error("Must provide at least one executor");this.instance=new zm(t)}static getInstance(){if(!this.instance)throw new Error("TaskQueue not initialized; must call `initialize` first");return this.instance}addTask(t){if(!this.stopped){if(this.taskMap.has(t.key))throw new Error(`Task already added for key ${t.key}`);this.taskKeyQueue.push(t.key),this.taskMap.set(t.key,t),this.processTasksIfNeeded()}}cancelTask(t){const r=this.taskKeyQueue.indexOf(t);r>=0&&this.taskKeyQueue.splice(r,1),this.taskMap.delete(t)}onIdle(t){this.idleListeners.push(t)}removeIdleListener(t){this.idleListeners.splice(this.idleListeners.indexOf(t),1)}notifyIdle(t){for(const r of this.idleListeners)r(t)}shutdown(){this.stopped=!0,this.taskKeyQueue.length=0,this.taskMap.clear()}processTasksIfNeeded(){!this.stopped&&!this.processing&&(this.processing=!0,setTimeout(()=>{this.processNextTasks()}))}processNextTasks(){return __async(this,null,function*(){const t=this.taskKeyQueue.splice(0,this.executors.size);if(t.length===0){this.processing=!1,this.stopped||this.notifyIdle();return}const r=[],n=Array.from(this.executors.keys());for(const i of t){const a=this.taskMap.get(i);if(!a)continue;this.taskMap.delete(i);const l=n.shift(),d=this.executors.get(l);if(!d)throw new Error(`No executor found for key ${l}`);r.push(d.execute(a))}try{yield Promise.all(r)}catch(i){this.stopped||(this.shutdown(),this.notifyIdle(i));return}this.taskKeyQueue.length>0?setTimeout(()=>{this.processNextTasks()}):(this.processing=!1,this.stopped||this.notifyIdle())})}};function createExecutor(e,t){return{execute:r=>__async(null,null,function*(){return r.process({L:e,R:t})})}}var CheckDataCoordinator=class{constructor(e){this.taskQueue=e}requestDataset(e,t,r,n){const i={key:e,kind:"check-data-coordinator",process:a=>__async(null,null,function*(){const p=(yield a.R.getDatasetsForScenario(t,[r])).datasetMap.get(r);n(p)})};this.taskQueue.addTask(i)}cancelRequest(e){this.taskQueue.cancelTask(e)}};function createCheckDataCoordinator(){return new CheckDataCoordinator(TaskQueue.getInstance())}function symbolForPredicateOp(e){switch(e){case"gt":return">";case"gte":return">=";case"lt":return"<";case"lte":return"<=";case"eq":return"==";case"approx":return"";default:zr(e)}}function buildCheckReport(e,t){const r=[];for(const n of e.groups){const i=[];for(const a of n.tests){let l="passed";const d=[];for(const p of a.scenarios){let m="passed";p.checkScenario.spec===void 0&&(l="error",m="error");const A=[];for(const x of p.datasets){let I="passed";x.checkDataset.datasetKey===void 0&&(l="error",m="error",I="error");const P=[];for(const q of x.predicates){const F=q.checkKey,L=t.get(F);L?(L.status!=="passed"&&(L.status==="error"?(l="error",m="error",I="error"):L.status==="failed"&&l!=="error"?(l="failed",m="failed",I="failed"):L.status==="skipped"&&l==="passed"&&(l="skipped",m="skipped",I="skipped")),P.push(predicateReport(q,F,L))):P.push(predicateReport(q,F,{status:"passed"}))}A.push({checkDataset:x.checkDataset,status:I,predicates:P})}d.push({checkScenario:p.checkScenario,status:m,datasets:A})}i.push({name:a.name,status:l,scenarios:d})}r.push({name:n.name,tests:i})}return{groups:r}}function predicateReport(e,t,r){if(r.status==="error")return{checkKey:t,result:r,opRefs:new Map,opValues:[]};const n=e.action.predicateSpec,i=new Map,a=[];function l(d){var p,m;const A=symbolForPredicateOp(d),x=n[d];if(x!==void 0){let I,P;if(typeof x=="number")I={kind:"constant",value:x},P=`${A} ${x}`;else{const q=(p=e.dataRefs)==null?void 0:p.get(d);if(!q)return;I={kind:"data",dataRef:q},P=`${A} '${q.dataset.name}'`;const L=(m=q.scenario)==null?void 0:m.spec;if(!L)return;x.scenario==="inherit"?P+=" (w/ same scenario)":L.kind==="all-inputs"&&L.position==="at-default"?P+=" (w/ default scenario)":P+=" (w/ configured scenario)"}if(d==="approx"){const q=n.tolerance||.1;P+=` ${q}`}i.set(d,I),a.push(P)}}return l("gt"),l("gte"),l("lt"),l("lte"),l("eq"),l("approx"),a.length===0&&a.push("INVALID PREDICATE"),{checkKey:t,result:r,opRefs:i,opValues:a,time:n.time,tolerance:n.tolerance}}function scenarioMessage(e,t){const r=e.checkScenario;if(r.spec===void 0)if(r.error)switch(r.error.kind){case"unknown-input-group":return`error: input group ${t(r.error.name)} is unknown`;case"empty-input-group":return`error: input group ${t(r.error.name)} is empty`;default:zr(r.error.kind)}else{const a=r.inputDescs.filter(d=>d.inputVar===void 0).map(d=>t(d.name));return`error: unknown ${a.length===1?"input":"inputs"} ${a.join(", ")}`}function n(a){switch(a){case"at-default":return"default";case"at-minimum":return"minimum";case"at-maximum":return"maximum";default:zr(a)}}function i(a){let l=t(a.name);return a.position?(l+=` is at ${t(n(a.position))}`,a.value!==void 0&&(l+=` (${a.value})`)):a.value!==void 0&&(l+=` is ${t(a.value.toString())}`),l}if(r.spec.kind==="all-inputs"){const a=r.spec.position;return`when ${t("all inputs")} are at ${t(n(a))}...`}else if(r.inputGroupName){let a="at-default";r.spec.settings[0].kind==="position"&&(a=r.spec.settings[0].position);const l=r.inputGroupName;return`when all inputs in ${t(l)} are at ${t(n(a))}...`}else return`when ${r.inputDescs.map(i).join(" and ")}...`}function datasetMessage(e,t){const r=e.checkDataset;return r.datasetKey===void 0?`error: ${t(r.name)} did not match any datasets`:`then ${t(r.name)}...`}function predicateMessage(e,t){const r=e.result;if(r.status==="error"){if(r.message)return`error: ${e.result.message}`;if(r.errorInfo)switch(r.errorInfo.kind){case"unknown-dataset":return`error: referenced dataset ${t(r.errorInfo.name)} is unknown`;case"unknown-input":return`error: referenced input ${t(r.errorInfo.name)} is unknown`;case"unknown-input-group":return`error: referenced input group ${t(r.errorInfo.name)} is unknown`;case"empty-input-group":return`error: referenced input group ${t(r.errorInfo.name)} is empty`;default:zr(r.errorInfo.kind)}else return"unknown error"}let i=`should be ${e.opValues.map(t).join(" and ")}`;if(e.time!==void 0)if(typeof e.time=="number")i+=` in ${t(e.time.toString())}`;else{let a,l,d,p;if(Array.isArray(e.time)){const m=e.time;a=m[0],l=m[1],d=!0,p=!0}else{const m=e.time;m.after_excl!==void 0?(a=m.after_excl,d=!1):m.after_incl!==void 0&&(a=m.after_incl,d=!0),m.before_excl!==void 0?(l=m.before_excl,p=!1):m.before_incl!==void 0&&(l=m.before_incl,p=!0)}if(a!==void 0&&l!==void 0){const x=`${d?"[":"("}${a}, ${l}${p?"]":")"}`;i+=` in ${t(x)}`}else a!==void 0?i+=` ${d?"in/after":"after"} ${t(a.toString())}`:l!==void 0&&(i+=` ${p?"in/before":"before"} ${t(l.toString())}`)}if(e.result.status==="failed"){if(e.result.failValue!==void 0){if(i+=` but got ${t(e.result.failValue.toString())}`,e.result.failRefValue!==void 0){const l=`${symbolForPredicateOp(e.result.failOp)} ${e.result.failRefValue.toString()}`;i+=` (expected ${t(l)})`}}else e.result.message&&(i+=` but got ${t(e.result.message)}`);e.result.failTime!==void 0&&(i+=` in ${t(e.result.failTime.toString())}`)}else e.result.status==="error"&&e.result.message&&(i+=` but got error: ${t(e.result.message)}`);return i}var check_schema_default={$schema:"http://json-schema.org/draft-07/schema#",title:"Model Check Test",type:"array",description:"A group of tests.",items:{$ref:"#/$defs/group"},$defs:{group:{type:"object",additionalProperties:!1,properties:{describe:{type:"string"},tests:{type:"array",items:{$ref:"#/$defs/test"}}},required:["describe","tests"]},test:{type:"object",additionalProperties:!1,properties:{it:{type:"string"},scenarios:{type:"array",items:{$ref:"#/$defs/scenario"},minItems:1},datasets:{type:"array",items:{$ref:"#/$defs/dataset"},minItems:1},predicates:{type:"array",items:{$ref:"#/$defs/predicate"},minItems:1}},required:["it","datasets","predicates"]},scenario:{oneOf:[{$ref:"#/$defs/scenario_with_input_at_position"},{$ref:"#/$defs/scenario_with_input_at_value"},{$ref:"#/$defs/scenario_with_multiple_input_settings"},{$ref:"#/$defs/scenario_with_inputs_in_preset_at_position"},{$ref:"#/$defs/scenario_with_inputs_in_group_at_position"},{$ref:"#/$defs/scenario_preset"},{$ref:"#/$defs/scenario_expand_for_each_input_in_group"}]},scenario_position:{type:"string",enum:["min","max","default"]},scenario_with_input_at_position:{type:"object",additionalProperties:!1,properties:{with:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["with","at"]},scenario_with_input_at_value:{type:"object",additionalProperties:!1,properties:{with:{type:"string"},at:{type:"number"}},required:["with","at"]},scenario_input_at_position:{type:"object",additionalProperties:!1,properties:{input:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["input","at"]},scenario_input_at_value:{type:"object",additionalProperties:!1,properties:{input:{type:"string"},at:{type:"number"}},required:["input","at"]},scenario_input_setting:{oneOf:[{$ref:"#/$defs/scenario_input_at_position"},{$ref:"#/$defs/scenario_input_at_value"}]},scenario_input_setting_array:{type:"array",items:{$ref:"#/$defs/scenario_input_setting"},minItems:1},scenario_with_multiple_input_settings:{type:"object",additionalProperties:!1,properties:{with:{$ref:"#/$defs/scenario_input_setting_array"}},required:["with"]},scenario_with_inputs_in_preset_at_position:{type:"object",additionalProperties:!1,properties:{with_inputs:{type:"string",enum:["all"]},at:{$ref:"#/$defs/scenario_position"}},required:["with_inputs","at"]},scenario_with_inputs_in_group_at_position:{type:"object",additionalProperties:!1,properties:{with_inputs_in:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["with_inputs_in","at"]},scenario_preset:{type:"object",additionalProperties:!1,properties:{preset:{type:"string",enum:["matrix"]}},required:["preset"]},scenario_expand_for_each_input_in_group:{type:"object",additionalProperties:!1,properties:{scenarios_for_each_input_in:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["scenarios_for_each_input_in","at"]},dataset:{oneOf:[{$ref:"#/$defs/dataset_name"},{$ref:"#/$defs/dataset_group"},{$ref:"#/$defs/dataset_matching"}]},dataset_name:{type:"object",additionalProperties:!1,properties:{name:{type:"string"},source:{type:"string"}},required:["name"]},dataset_group:{type:"object",additionalProperties:!1,properties:{group:{type:"string"}},required:["group"]},dataset_matching:{type:"object",additionalProperties:!1,properties:{matching:{type:"object",additionalProperties:!1,properties:{type:{type:"string"}},required:["type"]}},required:["matching"]},predicate:{type:"object",oneOf:[{$ref:"#/$defs/predicate_gt"},{$ref:"#/$defs/predicate_gte"},{$ref:"#/$defs/predicate_lt"},{$ref:"#/$defs/predicate_lte"},{$ref:"#/$defs/predicate_gt_lt"},{$ref:"#/$defs/predicate_gt_lte"},{$ref:"#/$defs/predicate_gte_lt"},{$ref:"#/$defs/predicate_gte_lte"},{$ref:"#/$defs/predicate_eq"},{$ref:"#/$defs/predicate_approx"}]},predicate_gt:{type:"object",additionalProperties:!1,properties:{gt:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gt"]},predicate_gte:{type:"object",additionalProperties:!1,properties:{gte:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gte"]},predicate_lt:{type:"object",additionalProperties:!1,properties:{lt:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["lt"]},predicate_lte:{type:"object",additionalProperties:!1,properties:{lte:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["lte"]},predicate_gt_lt:{type:"object",additionalProperties:!1,properties:{gt:{$ref:"#/$defs/predicate_ref"},lt:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gt","lt"]},predicate_gt_lte:{type:"object",additionalProperties:!1,properties:{gt:{$ref:"#/$defs/predicate_ref"},lte:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gt","lte"]},predicate_gte_lt:{type:"object",additionalProperties:!1,properties:{gte:{$ref:"#/$defs/predicate_ref"},lt:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gte","lt"]},predicate_gte_lte:{type:"object",additionalProperties:!1,properties:{gte:{$ref:"#/$defs/predicate_ref"},lte:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gte","lte"]},predicate_eq:{type:"object",additionalProperties:!1,properties:{eq:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["eq"]},predicate_approx:{type:"object",additionalProperties:!1,properties:{approx:{$ref:"#/$defs/predicate_ref"},tolerance:{type:"number"},time:{$ref:"#/$defs/predicate_time"}},required:["approx"]},predicate_ref:{oneOf:[{$ref:"#/$defs/predicate_ref_constant"},{$ref:"#/$defs/predicate_ref_data"}]},predicate_ref_constant:{type:"number"},predicate_ref_data:{type:"object",additionalProperties:!1,properties:{dataset:{$ref:"#/$defs/predicate_ref_data_dataset"},scenario:{$ref:"#/$defs/predicate_ref_data_scenario"}},required:["dataset"]},predicate_ref_data_dataset:{oneOf:[{$ref:"#/$defs/dataset_name"},{$ref:"#/$defs/predicate_ref_data_dataset_special"}]},predicate_ref_data_dataset_special:{type:"string",enum:["inherit"]},predicate_ref_data_scenario:{oneOf:[{$ref:"#/$defs/scenario_with_input_at_position"},{$ref:"#/$defs/scenario_with_input_at_value"},{$ref:"#/$defs/scenario_with_multiple_input_settings"},{$ref:"#/$defs/scenario_with_inputs_in_preset_at_position"},{$ref:"#/$defs/scenario_with_inputs_in_group_at_position"},{$ref:"#/$defs/predicate_ref_data_scenario_special"}]},predicate_ref_data_scenario_special:{type:"string",enum:["inherit"]},predicate_time:{oneOf:[{$ref:"#/$defs/predicate_time_single"},{$ref:"#/$defs/predicate_time_pair"},{$ref:"#/$defs/predicate_time_gt"},{$ref:"#/$defs/predicate_time_gte"},{$ref:"#/$defs/predicate_time_lt"},{$ref:"#/$defs/predicate_time_lte"},{$ref:"#/$defs/predicate_time_gt_lt"},{$ref:"#/$defs/predicate_time_gt_lte"},{$ref:"#/$defs/predicate_time_gte_lt"},{$ref:"#/$defs/predicate_time_gte_lte"}]},predicate_time_single:{type:"number"},predicate_time_pair:{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},predicate_time_gt:{type:"object",additionalProperties:!1,properties:{after_excl:{type:"number"}},required:["after_excl"]},predicate_time_gte:{type:"object",additionalProperties:!1,properties:{after_incl:{type:"number"}},required:["after_incl"]},predicate_time_lt:{type:"object",additionalProperties:!1,properties:{before_excl:{type:"number"}},required:["before_excl"]},predicate_time_lte:{type:"object",additionalProperties:!1,properties:{before_incl:{type:"number"}},required:["before_incl"]},predicate_time_gt_lt:{type:"object",additionalProperties:!1,properties:{after_excl:{type:"number"},before_excl:{type:"number"}},required:["after_excl","before_excl"]},predicate_time_gt_lte:{type:"object",additionalProperties:!1,properties:{after_excl:{type:"number"},before_incl:{type:"number"}},required:["after_excl","before_incl"]},predicate_time_gte_lt:{type:"object",additionalProperties:!1,properties:{after_incl:{type:"number"},before_excl:{type:"number"}},required:["after_incl","before_excl"]},predicate_time_gte_lte:{type:"object",additionalProperties:!1,properties:{after_incl:{type:"number"},before_incl:{type:"number"}},required:["after_incl","before_incl"]}}};function parseTestYaml(e){const t=[],n=new Ajv2().compile(check_schema_default);for(const a of e){const l=YAML.parse(a);if(n(l))for(const d of l)t.push(d);else{let d="Failed to parse YAML check definitions";for(const p of n.errors||[])p.message&&(d+=`
${p.message}`);return err$2(new Error(d))}}return ok$2({groups:t})}var passed={status:"passed"},gt$1=(e,t)=>e>t,gte=(e,t)=>e>=t,lt$1=(e,t)=>e<t,lte=(e,t)=>e<=t,eq=(e,t)=>e===t,approx=e=>(r,n)=>r>=n-e&&r<=n+e;function checkFunc(e){function t(i,a){const l=e[i];l!==void 0&&(typeof l=="number"?r.push((d,p)=>a(d,l)?passed:{status:"failed",failValue:d,failTime:p}):r.push((d,p,m)=>{const A=m?.get(i);if(A===void 0)return{status:"error",message:"unhandled data reference"};const x=A.get(p);return x!==void 0?a(d,x)?passed:{status:"failed",failValue:d,failOp:i,failRefValue:x,failTime:p}:{status:"failed",message:"no reference value",failTime:p}}))}const r=[];if(t("gt",gt$1),t("gte",gte),t("lt",lt$1),t("lte",lte),t("eq",eq),e.approx!==void 0){const i=e.tolerance||.1;t("approx",approx(i))}const n=(i,a,l)=>{for(const d of r){const p=d(i,a,l);if(p.status!=="passed")return p}return passed};if(e.time!==void 0&&typeof e.time=="number"){const i=e.time;return(a,l)=>{const d=a.get(i);return d!==void 0?n(d,i,l):{status:"failed",message:"no value",failTime:i}}}else{let i;if(e.time!==void 0)if(Array.isArray(e.time)){const a=e.time;i=l=>l>=a[0]&&l<=a[1]}else{const a=[],l=e.time;l.after_excl!==void 0&&a.push(d=>d>l.after_excl),l.after_incl!==void 0&&a.push(d=>d>=l.after_incl),l.before_excl!==void 0&&a.push(d=>d<l.before_excl),l.before_incl!==void 0&&a.push(d=>d<=l.before_incl),i=d=>{for(const p of a)if(!p(d))return!1;return!0}}else i=()=>!0;return(a,l)=>{for(const[d,p]of a)if(i(d)){const m=n(p,d,l);if(m.status!=="passed")return m}return passed}}}function actionForPredicate(e){return{predicateSpec:e,run:checkFunc(e)}}function expandDatasets(e,t){var r;let n;if(t.name?n=matchByName(e,t.name,t.source):t.group?n=matchByGroup(e,t.group):(r=t.matching)!=null&&r.type&&(n=matchByType(e,t.matching.type)),n.error)return[{name:n.error.name,error:n.error.kind}];const i=n.matches,a=[];for(const l of i)l.outputVar?a.push({datasetKey:l.datasetKey,name:l.outputVar.varName}):l.implVar&&a.push({datasetKey:l.datasetKey,name:l.implVar.varName});return a}function matchByName(e,t,r){var n;const i=t.toLowerCase(),a=r?.toLowerCase();for(const[l,d]of e.outputVars)if(((n=d.sourceName)==null?void 0:n.toLowerCase())===a&&d.varName.toLowerCase()===i)return{matches:[{datasetKey:l,outputVar:d}]};for(const[l,d]of e.implVars)if(d.varName.toLowerCase()===i)return{matches:[{datasetKey:l,implVar:d}]};return{matches:[],error:{kind:"no-matches-for-dataset",name:t}}}function matchByGroup(e,t){let r,n;if(e.datasetGroups){const a=t.toLowerCase();for(const[l,d]of e.datasetGroups)if(l.toLowerCase()===a){r=l,n=d;break}}if(r===void 0)return{matches:[],error:{kind:"no-matches-for-group",name:t}};const i=[];for(const a of n){const l=e.outputVars.get(a);if(l){i.push({datasetKey:a,outputVar:l});continue}const d=e.implVars.get(a);if(d){i.push({datasetKey:a,implVar:d});continue}return{matches:[],error:{kind:"no-matches-for-dataset",name:a}}}return i.length===0?{matches:[],error:{kind:"no-matches-for-group",name:r}}:{matches:i}}function matchByType(e,t){const r=[];for(const[n,i]of e.implVars)i.varType===t&&r.push({datasetKey:n,implVar:i});return r.length===0?{matches:[],error:{kind:"no-matches-for-type",name:t}}:{matches:r}}function positionSetting(e,t){return{kind:"position",inputVarId:e,position:t}}function valueSetting(e,t){return{kind:"value",inputVarId:e,value:t}}function inputSettingsSpec(e){return{kind:"input-settings",uid:`inputs_${e.map(n=>{switch(n.kind){case"position":return`${n.inputVarId}_at_${keyForInputPosition(n.position)}`;case"value":return`${n.inputVarId}_at_${n.value}`;default:assertNeverExports$1.assertNever(n)}}).sort().join("_")}`,settings:e}}function inputAtPositionSpec(e,t){return inputSettingsSpec([positionSetting(e,t)])}function allInputsAtPositionSpec(e){return{kind:"all-inputs",uid:`all_inputs_at_${keyForInputPosition(e)}`,position:e}}function keyForInputPosition(e){switch(e){case"at-default":return"default";case"at-minimum":return"min";case"at-maximum":return"max";default:assertNeverExports$1.assertNever(e)}}function expandScenarios(e,t,r){if(t.length===0)return checkScenariosFromSpec(e,{with_inputs:"all",at:"default"},r);const n=[];for(const i of t)n.push(...checkScenariosFromSpec(e,i,r));return n}function inputPosition(e){switch(e){case"default":return"at-default";case"min":return"at-minimum";case"max":return"at-maximum";default:return}}function inputValueAtPosition(e,t){switch(t){case"at-default":return e.defaultValue;case"at-minimum":return e.minValue;case"at-maximum":return e.maxValue;default:zr(t)}}function inputDescAtPosition(e,t){return{name:e.varName,inputVar:e,position:t,value:inputValueAtPosition(e,t)}}function inputDescAtValue(e,t){return{name:e.varName,inputVar:e,value:t}}function inputDescForVar(e,t){if(typeof t=="number")return inputDescAtValue(e,t);{const r=inputPosition(t);return inputDescAtPosition(e,r)}}function inputDescForName(e,t,r){const n=t.toLowerCase(),i=[...e.inputVars.values()].find(a=>a.varName.toLowerCase()===n);return i?inputDescForVar(i,r):{name:t}}function groupForName(e,t){if(e.inputGroups){const r=t.toLowerCase();for(const[n,i]of e.inputGroups)if(n.toLowerCase()===r)return[n,i]}}function errorScenarioForInputGroup(e,t){return{inputDescs:[],error:{kind:e,name:t}}}function checkScenarioWithAllInputsAtPosition(e){return{spec:allInputsAtPositionSpec(e),inputDescs:[]}}function checkScenarioWithInputAtPosition(e,t){const r=e.varId;return{spec:inputAtPositionSpec(r,t),inputDescs:[inputDescAtPosition(e,t)]}}function checkScenarioForInputDescs(e,t){let r;if(t.every(n=>n.inputVar!==void 0)){const n=t.map(i=>{const a=i.inputVar.varId;return i.position?positionSetting(a,i.position):valueSetting(a,i.value)});r=inputSettingsSpec(n)}else r=void 0;return{spec:r,inputGroupName:e,inputDescs:t}}function checkScenarioForInputSpecs(e,t){const r=t.map(n=>inputDescForName(e,n.input,n.at));return checkScenarioForInputDescs(void 0,r)}function checkScenarioMatrix(e,t){const r=[];if(r.push(checkScenarioWithAllInputsAtPosition("at-default")),!t){r.push(checkScenarioWithAllInputsAtPosition("at-minimum")),r.push(checkScenarioWithAllInputsAtPosition("at-maximum"));for(const n of e.inputVars.values())r.push(checkScenarioWithInputAtPosition(n,"at-minimum")),r.push(checkScenarioWithInputAtPosition(n,"at-maximum"))}return r}function checkScenarioWithAllInputsInGroupAtPosition(e,t,r){const n=groupForName(e,t);if(n===void 0)return errorScenarioForInputGroup("unknown-input-group",t);const[i,a]=n;if(a.length===0)return errorScenarioForInputGroup("empty-input-group",i);const l=[];for(const d of a)l.push(inputDescForVar(d,r));return checkScenarioForInputDescs(i,l)}function checkScenariosForEachInputInGroup(e,t,r){const n=groupForName(e,t);if(n===void 0)return[errorScenarioForInputGroup("unknown-input-group",t)];const[i,a]=n;if(a.length===0)return[errorScenarioForInputGroup("empty-input-group",i)];const l=[];for(const d of a){const p=inputDescForVar(d,r);l.push(checkScenarioForInputDescs(void 0,[p]))}return l}function checkScenariosFromSpec(e,t,r){if(t.preset==="matrix")return checkScenarioMatrix(e,r);if(t.scenarios_for_each_input_in!==void 0){const n=t.scenarios_for_each_input_in,i=t.at;return checkScenariosForEachInputInGroup(e,n,i)}if(t.with!==void 0)if(Array.isArray(t.with)){const n=t.with;return[checkScenarioForInputSpecs(e,n)]}else{const n={input:t.with,at:t.at};return[checkScenarioForInputSpecs(e,[n])]}if(t.with_inputs==="all"){const n=inputPosition(t.at);return[checkScenarioWithAllInputsAtPosition(n)]}if(t.with_inputs_in!==void 0){const n=t.with_inputs_in,i=t.at;return[checkScenarioWithAllInputsInGroupAtPosition(e,n,i)]}throw new Error(`Unhandled scenario spec: ${JSON.stringify(t)}`)}var CheckPlanner=class{constructor(e){this.modelSpec=e,this.groups=[],this.tasks=new Map,this.dataRefs=new Map,this.checkKey=1}addAllChecks(e,t){function r(i,a){return`${i.toLowerCase()} :: ${a.toLowerCase()}`}const n=new Set(t.map(i=>r(i.groupName,i.testName)));for(const i of e.groups){const a=i.describe,l=[];for(const d of i.tests){const p=d.it,m=n.has(r(a,p)),x=expandScenarios(this.modelSpec,d.scenarios||[],!1),I=[];for(const F of d.datasets)I.push(...expandDatasets(this.modelSpec,F));const P=[];for(const F of d.predicates)P.push(actionForPredicate(F));const q=[];for(const F of x){if(F.spec===void 0){q.push({checkScenario:F,datasets:[]});continue}const L=[];for(const Y of I){if(Y.datasetKey===void 0){L.push({checkDataset:Y,predicates:[]});continue}const j=[];for(const Z of P){const X=this.addDataRefs(Z.predicateSpec,F,Y),Q=this.checkKey++;j.push({checkKey:Q,action:Z,dataRefs:X}),this.tasks.set(Q,{scenario:F,dataset:Y,action:Z,dataRefs:X,skip:m})}L.push({checkDataset:Y,predicates:j})}q.push({checkScenario:F,datasets:L})}l.push({name:p,scenarios:q})}this.groups.push({name:a,tests:l})}}buildPlan(){return{groups:this.groups,tasks:this.tasks,dataRefs:this.dataRefs}}addDataRefs(e,t,r){let n;const i=a=>{const l=e[a];if(l===void 0||typeof l=="number")return;let d;if(typeof l.dataset=="string")l.dataset==="inherit"?d=r:zr(l.dataset);else{const x={name:l.dataset.name},I=expandDatasets(this.modelSpec,x);I.length===1?d=I[0]:d={name:l.dataset.name}}let p;if(typeof l.scenario=="string")l.scenario==="inherit"?p=t:zr(l.scenario);else{const x=l.scenario?[l.scenario]:[],I=expandScenarios(this.modelSpec,x,!0);I.length===1&&(p=I[0]),p===void 0&&(p={inputDescs:[]})}let m;p.spec&&d.datasetKey&&(m=`${p.spec.uid}::${d.datasetKey}`);const A={key:m,dataset:d,scenario:p};m&&this.dataRefs.set(m,A),n===void 0&&(n=new Map),n.set(a,A)};return i("gt"),i("gte"),i("lt"),i("lte"),i("eq"),i("approx"),n}};function checkReportFromSummary(e,t,r=[]){const n=parseTestYaml(e.tests);if(n.isErr())return;const i=n.value,a=new CheckPlanner(e.bundle.modelSpec);a.addAllChecks(i,r);const l=a.buildPlan(),d=new Map;for(const p of t.predicateSummaries)d.set(p.checkKey,p.result);return buildCheckReport(l,d)}var ComparisonDataCoordinator=class{constructor(e){this.taskQueue=e}requestDatasetMaps(e,t,r,n,i,a,l){function d(m,A){return __async(this,null,function*(){if(A)return m.getDatasetsForScenario(A,a)})}const p={key:e,kind:"comparison-data-coordinator",process:m=>__async(null,null,function*(){const A=t==="left"?m.L:m.R,x=n==="left"?m.L:m.R;let I,P;if(A===x)I=yield d(A,r),P=yield d(x,i);else{const q=yield Promise.all([d(A,r),d(x,i)]);I=q[0],P=q[1]}l(I?.datasetMap,P?.datasetMap)})};this.taskQueue.addTask(p)}requestGraphData(e,t,r,n,i,a,l){function d(m,A){return __async(this,null,function*(){var x;if(A)return(x=m.getGraphDataForScenario)==null?void 0:x.call(m,A,a)})}const p={key:e,kind:"comparison-data-coordinator",process:m=>__async(null,null,function*(){const A=t==="left"?m.L:m.R,x=n==="left"?m.L:m.R;let I,P;if(A===x)I=yield d(A,r),P=yield d(x,i);else{const q=yield Promise.all([d(A,r),d(x,i)]);I=q[0],P=q[1]}l(I,P)})};this.taskQueue.addTask(p)}cancelRequest(e){this.taskQueue.cancelTask(e)}};function createComparisonDataCoordinator(){return new ComparisonDataCoordinator(TaskQueue.getInstance())}function diffDatasets(e,t){let r=Number.MAX_VALUE,n=Number.MIN_VALUE,i=Number.MAX_VALUE,a=Number.MIN_VALUE,l=Number.MAX_VALUE,d=Number.MIN_VALUE,p=Number.MAX_VALUE,m=-1,A,x=0,I=0;if(e&&t){const j=new Set([...e.keys(),...t.keys()]);for(const Z of j){const X=e.get(Z);X!==void 0&&(X<r&&(r=X),X>n&&(n=X),X<l&&(l=X),X>d&&(d=X));const Q=t.get(Z);if(Q!==void 0&&(Q<i&&(i=Q),Q>a&&(a=Q),Q<l&&(l=Q),Q>d&&(d=Q)),X===void 0||Q===void 0)continue;const J=Math.abs(Q-X);J<p&&(p=J),J>m&&(m=J,A={time:Z,valueL:X,valueR:Q}),x++,I+=J}}function P(j){return j*100}let q,F,L;if(r===n&&i===a){const j=P(n!==0?Math.abs((a-n)/n):1);q=j,F=j,L=j}else{const j=d-l;q=P(j>0?p/j:0),F=P(j>0?m/j:0);const Z=I/x;L=P(j>0?Z/j:0)}let Y;return e&&t?Y="both":e?Y="left-only":t?Y="right-only":Y="neither",{validity:Y,minValue:l,maxValue:d,avgDiff:L,minDiff:q,maxDiff:F,maxDiffPoint:A}}function diffGraphs(e,t,r,n){let i;e&&t?i="both":e?i="left-only":t?i="right-only":i="neither";const a=[];if(e?.metadata&&t?.metadata){const d=new Set;for(const p of e.metadata.keys())d.add(p);for(const p of t.metadata.keys())d.add(p);for(const p of d){const m=e.metadata.get(p),A=t.metadata.get(p);m!==A&&a.push({key:p,valueL:m,valueR:A})}}const l=[];if(e&&t){const d=new Set;for(const p of e.datasets)d.add(p.datasetKey);for(const p of t.datasets)d.add(p.datasetKey);for(const p of d){const m=n.find(x=>x.d===p&&x.s===r),A=m?.md;l.push({datasetKey:p,maxDiff:A})}}return{inclusion:i,metadataReports:a,datasetReports:l}}function comparisonSummaryFromReport(e){var t,r;const n=[];for(const i of e.testReports){const a=(t=i.baselineDiffReport)==null?void 0:t.maxDiff,l=(r=i.baselineDiffReport)==null?void 0:r.avgDiff,d=testSummaryFromReport(i,a,l);d&&n.push(d)}return{testSummaries:n,perfReportL:e.perfReportL,perfReportR:e.perfReportR}}function testSummaryFromReport(e,t,r){var n;function i(a,l){return l!==void 0?(l===0&&(l=1e-6),a/l):a===0?0:1}if(e.diffReport===void 0)return{s:e.scenarioKey,d:e.datasetKey};if(((n=e.diffReport)==null?void 0:n.validity)==="both"&&e.diffReport.maxDiff>0){const a=i(e.diffReport.maxDiff,t),l=i(e.diffReport.avgDiff,r);return{s:e.scenarioKey,d:e.datasetKey,md:e.diffReport.maxDiff,ad:e.diffReport.avgDiff,mdb:a,adb:l}}else return}function restoreFromTerseSummaries(e,t){const r=new Map;for(const i of t){const a=`${i.s}::${i.d}`;r.set(a,i)}const n=[];for(const i of e.scenarios.getAllScenarios()){const a=e.datasets.getDatasetKeysForScenario(i);for(const l of a){const d=`${i.key}::${l}`,p=r.get(d);p?n.push(p):n.push({s:i.key,d:l,md:0,ad:0,mdb:0,adb:0})}}return n}function getBucketIndex(e,t){if(e===void 0)return t.length+2;if(e===0)return 0;for(let r=0;r<t.length;r++)if(e<t[r])return r+1;return t.length+1}function getScoresForTestSummaries(e,t,r){const n=Array(t.length+3).fill(0),i=Array(t.length+3).fill(0);let a=0,l;switch(r){case"max-diff":l="md";break;case"avg-diff":l="ad";break;case"max-diff-relative":l="mdb";break;case"avg-diff-relative":l="adb";break}for(const p of e){const m=p[l],A=getBucketIndex(m,t);n[A]++,m!==void 0&&(i[A]+=m),a++}let d;return a>0?d=n.map(p=>p/a*100):d=[],{totalDiffCount:a,totalDiffByBucket:i,diffCountByBucket:n,diffPercentByBucket:d}}function categorizeComparisonTestSummaries(e,t,r){const n=restoreFromTerseSummaries(e,t),i=groupComparisonTestSummaries(n,"by-scenario"),a=categorizeComparisonGroups(e,[...i.values()],r),l=groupComparisonTestSummaries(n,"by-dataset"),d=categorizeComparisonGroups(e,[...l.values()],r);return{allTestSummaries:n,byScenario:a,byDataset:d}}function groupComparisonTestSummaries(e,t){const r=new Map;for(const n of e){let i;switch(t){case"by-dataset":i=n.d;break;case"by-scenario":i=n.s;break;default:assertNeverExports$1.assertNever(t)}const a=r.get(i);a?a.testSummaries.push(n):r.set(i,{kind:t,key:i,testSummaries:[n]})}return r}function categorizeComparisonGroups(e,t,r){const n=new Map,i=[],a=[],l=[];let d=[];const p=[];function m(A,x,I,P){let q;if(I&&P){const Y=r==="max-diff-relative"||r==="avg-diff-relative"?e.ratioThresholds:e.thresholds;q=getScoresForTestSummaries(A.testSummaries,Y,r)}const F={root:x,group:A,scores:q};if(n.set(A.key,F),I&&P){const L=q.diffCountByBucket[0],Y=q.diffCountByBucket[5];q.totalDiffCount!==L+Y?d.push(F):p.push(F)}else I?a.push(F):P?l.push(F):i.push(F)}for(const A of t.values())switch(A.kind){case"by-dataset":{const x=e.datasets.getDataset(A.key),I=x?.outputVarL!==void 0,P=x?.outputVarR!==void 0;m(A,x,I,P);break}case"by-scenario":{const x=e.scenarios.getScenario(A.key),I=x?.specL!==void 0,P=x?.specR!==void 0;m(A,x,I,P);break}default:assertNeverExports$1.assertNever(A.kind)}return d.length>1&&(d[0].group.kind==="by-dataset"?d=sortDatasetGroupSummaries(d):d[0].group.kind==="by-scenario"&&(d=sortScenarioGroupSummaries(d))),{allGroupSummaries:n,withErrors:i,onlyInLeft:a,onlyInRight:l,withDiffs:d,withoutDiffs:p}}function sortDatasetGroupSummaries(e){return e.sort((t,r)=>{var n,i;const a=compareScores(t.scores,r.scores);if(a!==0)return-a;{const l=t.root.outputVarL,d=r.root.outputVarR,p=((n=l.sourceName)==null?void 0:n.toLowerCase())||"",m=((i=d.sourceName)==null?void 0:i.toLowerCase())||"";if(p!==m)return p.localeCompare(m);{const A=l.varName.toLowerCase(),x=d.varName.toLowerCase();return A.localeCompare(x)}}})}function sortScenarioGroupSummaries(e){return e.sort((t,r)=>{var n,i;const a=compareScores(t.scores,r.scores);if(a!==0)return-a;{const l=t.root,d=r.root,p=l.title.toLowerCase(),m=d.title.toLowerCase();if(p!==m)return p.localeCompare(m);{const A=((n=l.subtitle)==null?void 0:n.toLowerCase())||"",x=((i=d.subtitle)==null?void 0:i.toLowerCase())||"";return A.localeCompare(x)}}})}function compareScores(e,t){if(e.totalDiffByBucket.length!==t.totalDiffByBucket.length)return 0;const r=e.totalDiffByBucket.length;for(let n=r-1;n>=0;n--){const i=e.totalDiffByBucket[n],a=t.totalDiffByBucket[n];if(i>a)return 1;if(i<a)return-1}return 0}var comparison_schema_default={$schema:"http://json-schema.org/draft-07/schema#",title:"Model Comparison Test",type:"array",description:"A group of model comparison scenarios and views.",items:{$ref:"#/$defs/top_level_array_item"},$defs:{top_level_array_item:{oneOf:[{$ref:"#/$defs/scenario_array_item"},{$ref:"#/$defs/scenario_group_array_item"},{$ref:"#/$defs/graph_group_array_item"},{$ref:"#/$defs/view_group_array_item"}]},dataset:{type:"object",additionalProperties:!1,properties:{name:{type:"string"},source:{type:"string"}},required:["name"]},scenario_array_item:{type:"object",additionalProperties:!1,properties:{scenario:{$ref:"#/$defs/scenario"}},required:["scenario"]},scenario:{oneOf:[{$ref:"#/$defs/scenario_with_input_at_position"},{$ref:"#/$defs/scenario_with_input_at_value"},{$ref:"#/$defs/scenario_with_multiple_input_settings"},{$ref:"#/$defs/scenario_with_inputs_in_preset_at_position"},{$ref:"#/$defs/scenario_preset"}]},scenario_position:{type:"string",enum:["min","max","default"]},scenario_with_input_at_position:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},subtitle:{type:"string"},with:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["with","at"]},scenario_with_input_at_value:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},subtitle:{type:"string"},with:{type:"string"},at:{type:"number"}},required:["with","at"]},scenario_input_at_position:{type:"object",additionalProperties:!1,properties:{input:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["input","at"]},scenario_input_at_value:{type:"object",additionalProperties:!1,properties:{input:{type:"string"},at:{type:"number"}},required:["input","at"]},scenario_input_setting:{oneOf:[{$ref:"#/$defs/scenario_input_at_position"},{$ref:"#/$defs/scenario_input_at_value"}]},scenario_input_setting_array:{type:"array",items:{$ref:"#/$defs/scenario_input_setting"},minItems:1},scenario_with_multiple_input_settings:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},subtitle:{type:"string"},with:{$ref:"#/$defs/scenario_input_setting_array"}},required:["with"]},scenario_with_inputs_in_preset_at_position:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},subtitle:{type:"string"},with_inputs:{type:"string",enum:["all"]},at:{$ref:"#/$defs/scenario_position"}},required:["with_inputs","at"]},scenario_preset:{type:"object",additionalProperties:!1,properties:{preset:{type:"string",enum:["matrix"]}},required:["preset"]},scenario_group_array_item:{type:"object",additionalProperties:!1,properties:{scenario_group:{$ref:"#/$defs/scenario_group"}},required:["scenario_group"]},scenario_group:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},scenarios:{type:"array",items:{$ref:"#/$defs/scenario_group_scenarios_array_item"},minItems:1}},required:["title","scenarios"]},scenario_group_scenarios_array_item:{oneOf:[{$ref:"#/$defs/scenario_array_item"},{$ref:"#/$defs/scenario_ref_array_item"}]},scenario_ref_id:{type:"string"},scenario_ref_object:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},subtitle:{type:"string"}},required:["id"]},scenario_ref:{oneOf:[{$ref:"#/$defs/scenario_ref_id"},{$ref:"#/$defs/scenario_ref_object"}]},scenario_ref_array_item:{type:"object",additionalProperties:!1,properties:{scenario_ref:{$ref:"#/$defs/scenario_ref"}},required:["scenario_ref"]},scenario_group_ref:{type:"object",additionalProperties:!1,properties:{scenario_group_ref:{type:"string"}},required:["scenario_group_ref"]},graphs_preset:{type:"string",enum:["all"]},graphs_array:{type:"array",items:{type:"string"},minItems:1},graph_group_ref:{type:"object",additionalProperties:!1,properties:{graph_group_ref:{type:"string"}},required:["graph_group_ref"]},graph_group_array_item:{type:"object",additionalProperties:!1,properties:{graph_group:{$ref:"#/$defs/graph_group"}},required:["graph_group"]},graph_group:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},graphs:{$ref:"#/$defs/graphs_array"}},required:["id","graphs"]},view:{oneOf:[{$ref:"#/$defs/view_with_scenario"},{$ref:"#/$defs/view_with_rows"}]},view_with_scenario:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},subtitle:{type:"string"},scenario_ref:{type:"string"},graphs:{$ref:"#/$defs/view_graphs"},graph_order:{$ref:"#/$defs/view_graph_order"}},required:["scenario_ref"]},view_with_rows:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},subtitle:{type:"string"},rows:{$ref:"#/$defs/view_rows_array"}},required:["title","rows"]},view_rows_array:{type:"array",items:{$ref:"#/$defs/view_rows_array_item"},minItems:1},view_rows_array_item:{type:"object",additionalProperties:!1,properties:{row:{$ref:"#/$defs/view_row"}}},view_row:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},subtitle:{type:"string"},boxes:{$ref:"#/$defs/view_boxes_array"}},required:["title","boxes"]},view_boxes_array:{type:"array",items:{$ref:"#/$defs/view_boxes_array_item"},minItems:1},view_boxes_array_item:{type:"object",additionalProperties:!1,properties:{box:{$ref:"#/$defs/view_box"}}},view_box:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},subtitle:{type:"string"},dataset:{$ref:"#/$defs/dataset"},scenario_ref:{$ref:"#/$defs/scenario_ref_id"}},required:["title","dataset","scenario_ref"]},view_graphs:{oneOf:[{$ref:"#/$defs/graphs_preset"},{$ref:"#/$defs/graphs_array"},{$ref:"#/$defs/graph_group_ref"}]},view_graph_order:{type:"string",enum:["default","grouped-by-diffs"]},view_group_array_item:{type:"object",additionalProperties:!1,properties:{view_group:{$ref:"#/$defs/view_group"}},required:["view_group"]},view_group:{oneOf:[{$ref:"#/$defs/view_group_with_views_array"},{$ref:"#/$defs/view_group_shorthand_with_scenarios_array"}]},view_group_with_views_array:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},views:{type:"array",items:{$ref:"#/$defs/view_group_views_array_item"},minItems:1}},required:["title","views"]},view_group_views_array_item:{type:"object",additionalProperties:!1,properties:{view:{$ref:"#/$defs/view"}}},view_group_shorthand_with_scenarios_array:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},scenarios:{type:"array",items:{$ref:"#/$defs/view_group_scenarios_array_item"},minItems:1},graphs:{$ref:"#/$defs/view_graphs"}},required:["title","scenarios","graphs"]},view_group_scenarios_array_item:{oneOf:[{$ref:"#/$defs/scenario_ref_array_item"},{$ref:"#/$defs/scenario_group_ref"}]}}};function parseComparisonSpecs(e){const t=[],r=[],n=[],i=[],l=new Ajv2().compile(comparison_schema_default);let d;switch(e.kind){case"json":d=JSON.parse(e.content);break;case"yaml":d=YAML.parse(e.content);break;default:zr(e.kind)}if(l(d))for(const p of d)"scenario"in p?t.push(scenarioSpecFromParsed(p.scenario)):"scenario_group"in p?r.push(scenarioGroupSpecFromParsed(p.scenario_group)):"graph_group"in p?n.push(graphGroupSpecFromParsed(p.graph_group)):"view_group"in p&&i.push(viewGroupSpecFromParsed(p.view_group));else{let p="Failed to parse YAML comparison definitions";for(const m of l.errors||[])m.message&&(p+=`
${m.message}`);return err$2(new Error(p))}return ok$2({scenarios:t,scenarioGroups:r,graphGroups:n,viewGroups:i})}function datasetSpecFromParsed(e){return{kind:"dataset",name:e.name,source:e.source}}function scenarioSpecFromParsed(e){if(e.preset==="matrix")return{kind:"scenario-matrix"};if(e.with!==void 0){let t;return Array.isArray(e.with)?t=e.with.map(inputSpecFromParsed):t=[inputSpecFromParsed({input:e.with,at:e.at})],{kind:"scenario-with-inputs",id:e.id,title:e.title,subtitle:e.subtitle,inputs:t}}if(e.with_inputs==="all")return{kind:"scenario-with-all-inputs",id:e.id,title:e.title,subtitle:e.subtitle,position:e.at};throw new Error(`Unable to convert parsed scenario: ${JSON.stringify(e)}`)}function inputSpecFromParsed(e){if(typeof e.at=="number"){const t=e.at;return{kind:"input-at-value",inputName:e.input,value:t}}else return{kind:"input-at-position",inputName:e.input,position:e.at}}function scenarioGroupSpecFromParsed(e){const t=e.scenarios.map(r=>"scenario_ref"in r?scenarioRefSpecFromParsed(r):scenarioSpecFromParsed(r.scenario));return{kind:"scenario-group",id:e.id,title:e.title,scenarios:t}}function scenarioRefSpecFromParsed(e){return typeof e.scenario_ref=="string"?{kind:"scenario-ref",scenarioId:e.scenario_ref}:{kind:"scenario-ref",scenarioId:e.scenario_ref.id,title:e.scenario_ref.title,subtitle:e.scenario_ref.subtitle}}function scenarioGroupRefSpecFromParsed(e){return{kind:"scenario-group-ref",groupId:e.scenario_group_ref}}function graphGroupSpecFromParsed(e){return{kind:"graph-group",id:e.id,graphIds:e.graphs}}function viewSpecFromParsed(e){let t,r;e.scenario_ref!==void 0?t=e.scenario_ref:e.rows!==void 0&&(r=e.rows.map(i=>viewRowSpecFromParsed(i.row)));let n;return e.graphs!==void 0&&(n=viewGraphsSpecFromParsed(e.graphs)),{kind:"view",title:e.title,subtitle:e.subtitle,scenarioId:t,rows:r,graphs:n,graphOrder:e.graph_order}}function viewRowSpecFromParsed(e){return{kind:"view-row",title:e.title,subtitle:e.subtitle,boxes:e.boxes.map(t=>viewBoxSpecFromParsed(t.box))}}function viewBoxSpecFromParsed(e){return{kind:"view-box",title:e.title,subtitle:e.subtitle,dataset:datasetSpecFromParsed(e.dataset),scenarioId:e.scenario_ref}}function viewGraphsSpecFromParsed(e){if(e==="all")return{kind:"graphs-preset",preset:"all"};if(Array.isArray(e))return{kind:"graphs-array",graphIds:e};if("graph_group_ref"in e)return{kind:"graph-group-ref",groupId:e.graph_group_ref};throw new Error("Invalid graphs spec in comparison view")}function viewGroupSpecFromParsed(e){if(e.views!==void 0)return{kind:"view-group-with-views",title:e.title,views:e.views.map(t=>viewSpecFromParsed(t.view))};if(e.scenarios!==void 0){const t=e.scenarios.map(r=>{if("scenario_ref"in r)return scenarioRefSpecFromParsed(r);if("scenario_group_ref"in r)return scenarioGroupRefSpecFromParsed(r);throw new Error("Invalid view group")});return{kind:"view-group-with-scenarios",title:e.title,scenarios:t,graphs:viewGraphsSpecFromParsed(e.graphs)}}else throw new Error("Invalid view group")}var ModelInputs=class{constructor(e){this.modelSpec=e,this.inputsByLookupName=new Map,this.inputIdAliases=new Set;for(const t of e.inputVars.values()){const r=t.varName.toLowerCase();if(this.inputsByLookupName.set(r,t),t.inputId){const n=`id ${t.inputId}`;this.inputIdAliases.add(n);const i=n.toLowerCase();this.inputsByLookupName.set(i,t)}}if(e.inputAliases)for(const[t,r]of e.inputAliases.entries()){const n=t.toLowerCase();if(this.inputsByLookupName.has(n)){console.warn(`WARNING: Input variable already defined with a name that collides with alias '${t}', skipping`);continue}const i=e.inputVars.get(r);if(i===void 0){console.warn(`WARNING: No input variable found for '${r}' associated with alias '${t}', skipping`);continue}this.inputsByLookupName.set(n,i)}}getAllInputIdAliases(){return[...this.inputIdAliases]}getInputVarForName(e){return this.inputsByLookupName.get(e.toLowerCase())}getInputVarForVarId(e){return this.modelSpec.inputVars.get(e)}};function scenarioSpecsFromSettings(e){switch(e.kind){case"all-inputs-settings":{const t=allInputsAtPositionSpec(e.position);return[t,t]}case"input-settings":{const t=scenarioSpecFromInputs(e.inputs,"left"),r=scenarioSpecFromInputs(e.inputs,"right");return[t,r]}default:assertNeverExports$1.assertNever(e)}}function scenarioSpecFromInputs(e,t){const r=[];for(const n of e){const i=t==="left"?n.stateL:n.stateR;if(i.inputVar===void 0)return;r.push(inputSettingFromResolvedInputState(i))}return inputSettingsSpec(r)}function inputSettingFromResolvedInputState(e){const t=e.inputVar.varId;return e.position?positionSetting(t,e.position):valueSetting(t,e.value)}function resolveComparisonSpecs(e,t,r){let n=1;const i=()=>`${n++}`,a=new ModelInputs(e),l=new ModelInputs(t),d=new ModelOutputs(e,t),p=new ResolvedScenarios;for(const P of r.scenarios||[])p.add(resolveScenariosFromSpec(a,l,P,i));const m=[];for(const P of r.scenarioGroups||[]){const q=[];for(const F of P.scenarios)if(F.kind==="scenario-ref")q.push(F);else{const L=resolveScenariosFromSpec(a,l,F,i);p.add(L),q.push(...L)}m.push({spec:P,scenarios:q})}const A=new ResolvedScenarioGroups;for(const P of m){const q=[];for(const F of P.scenarios)if(F.kind==="scenario-ref"){const L=p.getScenarioForId(F.scenarioId);if(L){const Y=__spreadValues$1({},L);F.title&&(Y.title=F.title),F.subtitle&&(Y.subtitle=F.subtitle),q.push(Y)}else q.push({kind:"unresolved-scenario-ref",scenarioId:F.scenarioId})}else q.push(F);A.add({kind:"scenario-group",id:P.spec.id,title:P.spec.title,scenarios:q})}const x=new ResolvedGraphGroups;for(const P of r.graphGroups||[])x.add(P);const I=[];for(const P of r.viewGroups||[]){const q=resolveViewGroupFromSpec(e,t,d,p,A,x,P);I.push(q)}return{scenarios:p.getAll(),scenarioGroups:A.getAll(),viewGroups:I}}var ModelOutputs=class{constructor(e,t){this.modelSpecL=e,this.modelSpecR=t}getDatasetForName(e,t){function r(i){for(const a of i.outputVars.values())if(a.varName===e&&a.sourceName===t)return a}const n=r(this.modelSpecR);if(n){const i=n.datasetKey,a=this.modelSpecL.outputVars.get(i);return{kind:"dataset",key:i,outputVarL:a,outputVarR:n}}else return}},ResolvedScenarios=class{constructor(){this.resolvedScenarios=[],this.resolvedScenariosById=new Map}add(e){for(const t of e)if(this.resolvedScenarios.push(t),t.id!==void 0){if(this.resolvedScenariosById.has(t.id))throw new Error(`Multiple scenarios defined with the same id (${t.id})`);this.resolvedScenariosById.set(t.id,t)}}getAll(){return this.resolvedScenarios}getScenarioForId(e){return this.resolvedScenariosById.get(e)}};function resolveScenariosFromSpec(e,t,r,n){switch(r.kind){case"scenario-matrix":return resolveScenarioMatrix(e,t,n);case"scenario-with-all-inputs":{const i=inputPosition2(r.position);return[resolveScenarioWithAllInputsAtPosition(n(),r.id,r.title,r.subtitle,i)]}case"scenario-with-inputs":return[resolveScenarioForInputSpecs(e,t,n(),r.id,r.title,r.subtitle,r.inputs)];case"scenario-with-distinct-inputs":return[resolveScenarioForDistinctInputSpecs(e,t,n(),r.id,r.title,r.subtitle,r.inputsL,r.inputsR)];case"scenario-with-setting-group":return[resolveScenarioForSettingGroup(e,t,n(),r.id,r.title,r.subtitle,r.settingGroupId)];default:assertNeverExports$1.assertNever(r)}}function resolveScenarioMatrix(e,t,r){const n=[];n.push(resolveScenarioWithAllInputsAtPosition(r(),void 0,void 0,void 0,"at-default"));const i=new Set;e.getAllInputIdAliases().forEach(a=>i.add(a)),t.getAllInputIdAliases().forEach(a=>i.add(a));for(const a of i){const l={kind:"input-at-position",inputName:a,position:"min"},d={kind:"input-at-position",inputName:a,position:"max"};n.push(resolveScenarioForInputSpecs(e,t,r(),void 0,void 0,void 0,[l])),n.push(resolveScenarioForInputSpecs(e,t,r(),void 0,void 0,void 0,[d]))}return n}function resolveScenarioWithAllInputsAtPosition(e,t,r,n,i){const a={kind:"all-inputs-settings",position:i},[l,d]=scenarioSpecsFromSettings(a);return{kind:"scenario",key:e,id:t,title:r,subtitle:n,settings:a,specL:l,specR:d}}function resolveScenarioForInputSpecs(e,t,r,n,i,a,l){const p={kind:"input-settings",inputs:l.map(x=>{switch(x.kind){case"input-at-position":return resolveInputForName(e,t,x.inputName,x.position);case"input-at-value":return resolveInputForName(e,t,x.inputName,x.value);default:assertNeverExports$1.assertNever(x)}})},[m,A]=scenarioSpecsFromSettings(p);return{kind:"scenario",key:r,id:n,title:i,subtitle:a,settings:p,specL:m,specR:A}}function resolveScenarioForDistinctInputSpecs(e,t,r,n,i,a,l,d){const p=[],m=[],A=[];function x(q,F,L){let Y;switch(L.kind){case"input-at-position":Y=resolveInputForNameInModel(F,L.inputName,L.position);break;case"input-at-value":Y=resolveInputForNameInModel(F,L.inputName,L.value);break;default:assertNeverExports$1.assertNever(L)}if(Y.error!==void 0)p.push({requestedName:L.inputName,stateL:q==="left"?Y:{},stateR:q==="right"?Y:{}});else{const j=inputSettingFromResolvedInputState(Y);q==="left"?m.push(j):A.push(j)}}l.forEach(q=>x("left",e,q)),d.forEach(q=>x("right",t,q));let I,P;return p.length===0&&(I=inputSettingsSpec(m),P=inputSettingsSpec(A)),{kind:"scenario",key:r,id:n,title:i,subtitle:a,settings:{kind:"input-settings",inputs:p},specL:I,specR:P}}function resolveScenarioForSettingGroup(e,t,r,n,i,a,l){var d,p;function m(Q,J){const ee=Q.getInputVarForVarId(J);return ee!==void 0?ee.varName:J}function A(Q){switch(Q){case"at-minimum":return"min";case"at-maximum":return"max";case"at-default":return"default";default:throw new Error(`Unknown input position: ${Q}`)}}function x(Q,J){switch(J.kind){case"position":return{kind:"input-at-position",inputName:m(Q,J.inputVarId),position:A(J.position)};case"value":return{kind:"input-at-value",inputName:m(Q,J.inputVarId),value:J.value};default:throw new Error(`Unknown input setting kind: ${J}`)}}function I(Q,J){return J.map(ee=>x(Q,ee))}const P=((d=e.modelSpec.inputSettingGroups)==null?void 0:d.get(l))||[],q=((p=t.modelSpec.inputSettingGroups)==null?void 0:p.get(l))||[],F=I(e,P),L=I(t,q),Y=resolveScenarioForDistinctInputSpecs(e,t,r,n,i,a,F,L);function j(Q){if(Q.kind==="input-settings")return Q.settings.map(ee=>{switch(ee.kind){case"position":return`${ee.inputVarId}=${ee.position}`;case"value":return`${ee.inputVarId}=${ee.value}`;default:throw new Error(`Unexpected input setting kind: ${ee}`)}}).sort().join("__");throw new Error(`Unexpected scenario spec kind: ${Q.kind}`)}function Z(Q,J){return j(Q)===j(J)}function X(Q){return Q.length===0?{error:{kind:"unknown-input-setting-group"}}:{}}if(P.length===0||q.length===0){if(Y.settings.kind==="input-settings"){const Q={requestedName:l,stateL:X(P),stateR:X(q)};Y.settings.inputs.unshift(Q)}P.length===0&&(Y.specL=void 0),q.length===0&&(Y.specR=void 0)}return Y.settings.kind==="input-settings"&&Y.specL&&Y.specR&&!Z(Y.specL,Y.specR)&&(Y.settings.settingsDiffer=!0),Y}function resolveInputForName(e,t,r,n){return{requestedName:r,stateL:resolveInputForNameInModel(e,r,n),stateR:resolveInputForNameInModel(t,r,n)}}function resolveInputForNameInModel(e,t,r){const n=e.getInputVarForName(t);return n?resolveInputVar(n,r):{error:{kind:"unknown-input"}}}function resolveInputVar(e,t){if(typeof t=="number")return resolveInputVarAtValue(e,t);{const r=inputPosition2(t);return resolveInputVarAtPosition(e,r)}}function resolveInputVarAtPosition(e,t){return{inputVar:e,position:t,value:inputValueAtPosition2(e,t)}}function resolveInputVarAtValue(e,t){return t>=e.minValue&&t<=e.maxValue?{inputVar:e,value:t}:{error:{kind:"invalid-value"}}}function inputPosition2(e){switch(e){case"default":return"at-default";case"min":return"at-minimum";case"max":return"at-maximum";default:return}}function inputValueAtPosition2(e,t){switch(t){case"at-default":return e.defaultValue;case"at-minimum":return e.minValue;case"at-maximum":return e.maxValue;default:assertNeverExports$1.assertNever(t)}}var ResolvedScenarioGroups=class{constructor(){this.resolvedGroups=[],this.resolvedGroupsById=new Map}add(e){if(this.resolvedGroups.push(e),e.id!==void 0){if(this.resolvedGroupsById.has(e.id))throw new Error(`Multiple scenario groups defined with the same id (${e.id})`);this.resolvedGroupsById.set(e.id,e)}}getAll(){return this.resolvedGroups}getGroupForId(e){return this.resolvedGroupsById.get(e)}},ResolvedGraphGroups=class{constructor(){this.resolvedGroupsById=new Map}add(e){if(this.resolvedGroupsById.has(e.id))throw new Error(`Multiple graph groups defined with the same id (${e.id})`);this.resolvedGroupsById.set(e.id,e)}getGroupForId(e){return this.resolvedGroupsById.get(e)}};function resolveGraphsFromSpec(e,t,r,n){switch(n.kind){case"graphs-preset":if(n.preset==="all"){const i=new Set,a=l=>{if(l.graphSpecs)for(const d of l.graphSpecs)i.add(d.id)};return a(e),a(t),[...i]}else assertNeverExports$1.assertNever(n.preset);case"graphs-array":return n.graphIds;case"graph-group-ref":{const i=r.getGroupForId(n.groupId);if(i===void 0)throw new Error(`No graph group found for id ${n.groupId}`);return i.graphIds}default:assertNeverExports$1.assertNever(n)}}function resolveViewForScenarioId(e,t,r,n,i,a){const l=e.getScenarioForId(n);return l?resolveViewForScenario(t,r,l,i,a):unresolvedViewForScenarioId(t,r,n)}function resolveViewForScenarioRefSpec(e,t,r,n){const i=e.getScenarioForId(t.scenarioId);return i?resolveViewForScenario(t.title,t.subtitle,i,r,n):unresolvedViewForScenarioId(void 0,void 0,t.scenarioId)}function resolveViewForScenario(e,t,r,n,i){return e===void 0&&(e=r.title,e===void 0&&(e="Untitled view"),t===void 0&&(t=r.subtitle)),{kind:"view",title:e,subtitle:t,scenario:r,graphIds:n,graphOrder:i}}function resolveViewBoxForSpec(e,t,r){const n=e.getDatasetForName(r.dataset.name,r.dataset.source);if(n===void 0)return{kind:"unresolved-view-box",datasetName:r.dataset.name,datasetSource:r.dataset.source};const i=t.getScenarioForId(r.scenarioId);return i===void 0?{kind:"unresolved-view-box",scenarioId:r.scenarioId}:{kind:"view-box",title:r.title,subtitle:r.subtitle,dataset:n,scenario:i}}function resolveViewRowForSpec(e,t,r){const n=[];for(const i of r.boxes){const a=resolveViewBoxForSpec(e,t,i);if(a.kind==="view-box")n.push(a);else return a}return{kind:"view-row",title:r.title,subtitle:r.subtitle,boxes:n}}function resolveViewWithRowSpecs(e,t,r,n,i){const a=[];for(const l of i){const d=resolveViewRowForSpec(e,t,l);if(d.kind==="view-row")a.push(d);else return unresolvedViewForScenarioId(r,n,d.scenarioId,d.datasetName,d.datasetSource)}return r===void 0&&(r="Untitled view"),{kind:"view",title:r,subtitle:n,rows:a,graphIds:[],graphOrder:"default"}}function unresolvedViewForScenarioId(e,t,r,n,i){return{kind:"unresolved-view",title:e,subtitle:t,scenarioId:r,datasetName:n,datasetSource:i}}function unresolvedViewForScenarioGroupId(e,t,r){return{kind:"unresolved-view",title:e,subtitle:t,scenarioGroupId:r}}function resolveViewGroupFromSpec(e,t,r,n,i,a,l){let d;switch(l.kind){case"view-group-with-views":{d=l.views.map(p=>{if(p.scenarioId){let m;return p.graphs?m=resolveGraphsFromSpec(e,t,a,p.graphs):m=[],resolveViewForScenarioId(n,p.title,p.subtitle,p.scenarioId,m,p.graphOrder||"default")}else return resolveViewWithRowSpecs(r,n,p.title,p.subtitle,p.rows)});break}case"view-group-with-scenarios":{const p=resolveGraphsFromSpec(e,t,a,l.graphs),m=l.graphOrder||"default";d=[];for(const A of l.scenarios)switch(A.kind){case"scenario-ref":d.push(resolveViewForScenarioRefSpec(n,A,p,m));break;case"scenario-group-ref":{const x=i.getGroupForId(A.groupId);if(x)for(const I of x.scenarios)switch(I.kind){case"unresolved-scenario-ref":d.push(unresolvedViewForScenarioId(void 0,void 0,I.scenarioId));break;case"scenario":d.push(resolveViewForScenario(void 0,void 0,I,p,m));break;default:assertNeverExports$1.assertNever(I)}else d.push(unresolvedViewForScenarioGroupId(void 0,void 0,A.groupId));break}default:assertNeverExports$1.assertNever(A)}break}default:assertNeverExports$1.assertNever(l)}return{kind:"view-group",title:l.title,views:d}}function resolveComparisonSpecsFromSources(e,t,r){const n={scenarios:[],scenarioGroups:[],graphGroups:[],viewGroups:[]};for(const i of r){let a;if("kind"in i){const l=parseComparisonSpecs(i);if(l.isOk())a=l.value;else{const d=i.filename?` in ${i.filename}`:"";console.error(`ERROR: Failed to parse comparison spec${d}, skipping`);continue}}else a=i;n.scenarios.push(...a.scenarios||[]),n.scenarioGroups.push(...a.scenarioGroups||[]),n.graphGroups.push(...a.graphGroups||[]),n.viewGroups.push(...a.viewGroups||[])}return resolveComparisonSpecs(e,t,n)}function getComparisonDatasets(e,t,r){return new ComparisonDatasetsImpl(e,t,r)}var ComparisonDatasetsImpl=class{constructor(e,t,r){this.modelSpecL=e,this.modelSpecR=t,this.datasetOptions=r;const n=r?.renamedDatasetKeys,i=new Map;n?.forEach((m,A)=>{i.set(m,A)});function a(m){return i.get(m)||m}const l=new Set,d=new Set;function p(m,A){m.forEach((x,I)=>{const P=A?a(I):I;l.add(P),x.sourceName===void 0&&d.add(P)})}p(e.outputVars,!1),p(t.outputVars,!0),this.allOutputVarKeys=Array.from(l),this.modelOutputVarKeys=Array.from(d),this.allDatasets=new Map;for(const m of this.allOutputVarKeys){const A=n?.get(m)||m,x=e.outputVars.get(m),I=t.outputVars.get(A);this.allDatasets.set(m,{kind:"dataset",key:m,outputVarL:x,outputVarR:I})}}getAllDatasets(){return this.allDatasets.values()}getDataset(e){return this.allDatasets.get(e)}getDatasetKeysForScenario(e){var t;return((t=this.datasetOptions)==null?void 0:t.datasetKeysForScenario)!==void 0?this.datasetOptions.datasetKeysForScenario(this.allOutputVarKeys,e):e.settings.kind==="all-inputs-settings"&&e.settings.position==="at-default"?this.allOutputVarKeys:this.modelOutputVarKeys}getReferencePlotsForDataset(e,t){var r;if(((r=this.datasetOptions)==null?void 0:r.referencePlotsForDataset)!==void 0){const n=this.getDataset(e);if(n!==void 0)return this.datasetOptions.referencePlotsForDataset(n,t)}return[]}getContextGraphIdsForDataset(e,t){var r;const n=this.getDataset(e);return n===void 0?[]:((r=this.datasetOptions)==null?void 0:r.contextGraphIdsForDataset)!==void 0?this.datasetOptions.contextGraphIdsForDataset(n,t):getContextGraphIdsForDataset(this.modelSpecL,this.modelSpecR,n)}};function getContextGraphIdsForDataset(e,t,r){const n=new Set;function i(a,l){for(const d of a.graphSpecs||[])for(const p of d.datasets)if(p.datasetKey===l?.datasetKey){n.add(d.id);break}}return i(e,r.outputVarL),i(t,r.outputVarR),[...n]}function getComparisonScenarios(e){return new ComparisonScenariosImpl(e)}var ComparisonScenariosImpl=class{constructor(e){this.scenarioDefs=new Map;for(const t of e)this.scenarioDefs.set(t.key,t)}getAllScenarios(){return this.scenarioDefs.values()}getScenario(e){return this.scenarioDefs.get(e)}};function createConfig(e){return __async(this,null,function*(){var t,r,n,i,a;let l;if(e.concurrency===void 0)l=1;else if(e.concurrency===0){let I;typeof navigator<"u"&&(I=navigator.hardwareConcurrency),(I===void 0||I<1)&&(I=1),l=Math.max(1,Math.floor(I/2))}else l=Math.max(1,e.concurrency);const d=yield loadBundle(e.current,l);let p,m;if(e.comparison===void 0)p=d;else{const I=yield loadBundle(e.comparison.baseline,l);p=handleRenames(d,(t=e.comparison.datasets)==null?void 0:t.renamedDatasetKeys);const P=I.modelSpec,q=p.modelSpec,F=resolveComparisonSpecsFromSources(P,q,e.comparison.specs);m={bundleL:I,bundleR:p,thresholds:(r=e.comparison.thresholds)!=null?r:[1,5,10],ratioThresholds:(n=e.comparison.ratioThresholds)!=null?n:[1,2,3],scenarios:getComparisonScenarios(F.scenarios),datasets:getComparisonDatasets(P,q,e.comparison.datasets),viewGroups:F.viewGroups,reportOptions:e.comparison.report}}const A={bundle:p,tests:e.check.tests},x=new Map;for(let I=0;I<A.bundle.models.length;I++){const P=(i=m?.bundleL.models)==null?void 0:i[I],q=((a=m?.bundleR.models)==null?void 0:a[I])||A.bundle.models[I],F=createExecutor(P,q);x.set(`executor-${I}`,F)}return TaskQueue.initialize(x),{check:A,comparison:m}})}function loadBundle(e,t){return __async(this,null,function*(){const r=Array.from({length:t},()=>e.bundle.initModel()),n=yield Promise.all(r);return{name:e.name,version:e.bundle.version,modelSpec:e.bundle.modelSpec,models:n}})}function handleRenames(e,t){if(t===void 0||t.size===0)return e;const r=new Map;t.forEach((d,p)=>{r.set(d,p)});const n=d=>t?.get(d)||d,i=d=>r.get(d)||d;function a(d){var p,m,A;return{modelSpec:d.modelSpec,getDatasetsForScenario:(x,I)=>__async(null,null,function*(){const P=I.map(n),q=yield d.getDatasetsForScenario(x,P),F=q.datasetMap,L=new Map;for(const[Y,j]of F.entries()){const Z=i(Y);L.set(Z,j)}return{datasetMap:L,modelRunTime:q.modelRunTime}}),getGraphDataForScenario:(p=d.getGraphDataForScenario)==null?void 0:p.bind(d),getGraphLinksForScenario:(m=d.getGraphLinksForScenario)==null?void 0:m.bind(d),createGraphView:(A=d.createGraphView)==null?void 0:A.bind(d)}}const l=e.models.map(a);return __spreadProps(__spreadValues$1({},e),{models:l})}var PerfStats=class{constructor(){this.times=[]}addRun(e){this.times.push(e)}toReport(){if(this.times.length===0)return{minTime:0,maxTime:0,avgTime:0,allTimes:[]};const e=Math.min(...this.times),t=Math.max(...this.times),r=this.times.sort(),n=Math.floor(r.length/4),i=n+Math.ceil(r.length/2),a=r.slice(n,i),d=a.reduce((p,m)=>p+m,0)/a.length;return{minTime:e,maxTime:t,avgTime:d,allTimes:r}}};function runPerfWithTaskQueue(e,t,r){const n=new PerfRunner(e,t,r);return n.start(),()=>{n.cancel()}}function runPerf(e,t){const r=TaskQueue.getInstance();return runPerfWithTaskQueue(r,e,t)}var PerfRunner=class{constructor(e,t,r){this.taskQueue=e,this.callbacks=t,this.options=r,this.pendingTaskKeys=new Set,this.stopped=!1}cancel(){if(!this.stopped){for(const e of this.pendingTaskKeys)this.taskQueue.cancelTask(e);this.stopped=!0}}start(){var e,t,r,n,i,a;const l=new PerfStats,d=new PerfStats,p=allInputsAtPositionSpec("at-default"),m=(t=(e=this.options)==null?void 0:e.warmupCount)!=null?t:5,A=(n=(r=this.options)==null?void 0:r.runCount)!=null?n:100;let x=0;((i=this.options)==null?void 0:i.mode)==="parallel"?x=m+A:x=(m+A)*2;let I=0,P=1;const q=(L,Y)=>{const j={key:`perf-runner-${P++}`,kind:"perf-runner",process:Z=>__async(this,null,function*(){var X,Q,J,ee;this.pendingTaskKeys.delete(j.key);try{let ie,de;switch(Y){case"left":{ie=(yield Z.L.getDatasetsForScenario(p,[])).modelRunTime;break}case"right":{de=(yield Z.R.getDatasetsForScenario(p,[])).modelRunTime;break}case"both":{const[fe,_e]=yield Promise.all([Z.L.getDatasetsForScenario(p,[]),Z.R.getDatasetsForScenario(p,[])]);ie=fe.modelRunTime,de=_e.modelRunTime;break}default:assertNeverExports$1.assertNever(Y)}L||(ie!==void 0&&l.addRun(ie),de!==void 0&&d.addRun(de)),I++,I===x&&((Q=(X=this.callbacks).onComplete)==null||Q.call(X,l.toReport(),d.toReport()))}catch(ie){(ee=(J=this.callbacks).onError)==null||ee.call(J,ie)}})};this.taskQueue.addTask(j),this.pendingTaskKeys.add(j.key)};function F(L){for(let Y=0;Y<m;Y++)q(!0,L);for(let Y=0;Y<A;Y++)q(!1,L)}((a=this.options)==null?void 0:a.mode)==="parallel"?F("both"):(F("left"),F("right"))}};function runTraceWithTaskQueue(e,t,r,n){const i=new TraceRunner(t,r);return i.start(e,n),()=>{i.cancel()}}function runTrace(e,t,r){const n=TaskQueue.getInstance();return runTraceWithTaskQueue(e,n,t,r)}var TraceRunner=class{constructor(e,t){this.taskQueue=e,this.callbacks=t,this.pendingTaskKeys=new Set,this.stopped=!1}cancel(){if(!this.stopped){for(const e of this.pendingTaskKeys)this.taskQueue.cancelTask(e);this.stopped=!0}}start(e,t){const r=[...e.implVars.keys()],n=[],i=2e3;for(let m=0;m<r.length;m+=i){const A=r.slice(m,m+i);switch(t.kind){case"compare-to-bundle":n.push({kind:"compare-to-bundle",datasetKeys:A,bundleSide0:t.bundleSide0,scenarioSpec0:t.scenarioSpec0,bundleSide1:t.bundleSide1,scenarioSpec1:t.scenarioSpec1});break;case"compare-to-ext-data":n.push({kind:"compare-to-ext-data",datasetKeys:A,extData:t.extData,bundleSide:t.bundleSide,scenarioSpec:t.scenarioSpec});break;default:assertNeverExports$1.assertNever(t)}}const a=new Map,l=n.length;let d=0,p=1;for(const m of n){const A={key:`trace-runner-${p++}`,kind:"trace-runner",process:x=>__async(this,null,function*(){var I,P;this.pendingTaskKeys.delete(A.key);let q;switch(m.kind){case"compare-to-bundle":q=yield processCompareToBundleRequest(m,x);break;case"compare-to-ext-data":q=yield processCompareToExtDataRequest(m,x);break;default:assertNeverExports$1.assertNever(m)}for(const F of q)a.set(F.datasetKey,F);if(d++,d===l){const F={datasetReports:a};(P=(I=this.callbacks).onComplete)==null||P.call(I,F)}})};this.taskQueue.addTask(A),this.pendingTaskKeys.add(A.key)}}};function processCompareToBundleRequest(e,t){return __async(this,null,function*(){const r=e.bundleSide0==="left"?t.L:t.R,n=e.bundleSide1==="left"?t.L:t.R;let i,a;n===r?(i=yield r.getDatasetsForScenario(e.scenarioSpec0,e.datasetKeys),a=yield n.getDatasetsForScenario(e.scenarioSpec1,e.datasetKeys)):[i,a]=yield Promise.all([r.getDatasetsForScenario(e.scenarioSpec0,e.datasetKeys),n.getDatasetsForScenario(e.scenarioSpec1,e.datasetKeys)]);const l=[];for(const d of e.datasetKeys){const p=i.datasetMap.get(d),m=a.datasetMap.get(d),A=diffDatasets2(d,p,m,!1);l.push(A)}return l})}function processCompareToExtDataRequest(e,t){return __async(this,null,function*(){const n=yield(e.bundleSide==="left"?t.L:t.R).getDatasetsForScenario(e.scenarioSpec,e.datasetKeys),i=[];for(const a of e.datasetKeys){let l=e.extData.get(a);if(l===void 0){const m=a.split("[");if(m.length===2){const A=m[0],I=m[1].replace("]","").split(","),P=permutationsOf(I);for(const q of P){const F=`${A}[${q.join(",")}]`;if(l=e.extData.get(F),l!==void 0)break}}l===void 0&&console.warn(`WARNING: Failed to find data in dat file for key=${a}`)}const d=n.datasetMap.get(a),p=diffDatasets2(a,l,d,!0);i.push(p)}return i})}function diffDatasets2(e,t,r,n){const i=new Map;let a=Number.MAX_VALUE,l=Number.MIN_VALUE,d=Number.MAX_VALUE,p=Number.MIN_VALUE,m=Number.MAX_VALUE,A=Number.MIN_VALUE,x=Number.MAX_VALUE,I=-1,P,q=0,F=0;if(t&&r){const Q=new Set([...t.keys(),...r.keys()]);for(const J of Q){const ee=t.get(J);ee!==void 0&&(ee<a&&(a=ee),ee>l&&(l=ee),ee<m&&(m=ee),ee>A&&(A=ee));let ie;const de=r.get(J);if(de!==void 0&&(n&&ee!==void 0?ie=matchPrecision(de,ee):ie=de,ie<d&&(d=ie),ie>p&&(p=ie),ie<m&&(m=ie),ie>A&&(A=ie)),ee===void 0||ie===void 0)continue;const fe={time:J,valueL:ee,valueR:ie};i.set(J,fe);const _e=Math.abs(ie-ee);_e<x&&(x=_e),_e>I&&(I=_e,P=fe),q++,F+=_e}}function L(Q){return Q*100}let Y,j,Z;if(a===l&&d===p){const Q=L(l!==0?Math.abs((p-l)/l):1);Y=Q,j=Q,Z=Q}else{const Q=A-m;Y=L(Q>0?x/Q:0),j=L(Q>0?I/Q:0);const J=F/q;Z=L(Q>0?J/Q:0)}let X;return t&&r?X="both":t?X="left-only":r?X="right-only":X="neither",{datasetKey:e,validity:X,points:i,minValue:m,maxValue:A,avgDiff:Z,minDiff:Y,maxDiff:j,maxDiffPoint:P}}function matchPrecision(e,t){const r=t.toString();if(r.includes("e"))return e;const n=r.split(".");if(n.length<2)return e;const i=n[1].replace(/0+$/,"").length;return i>21?e:parseFloat(e.toFixed(i))}function permutationsOf(e){const t=[],r=(n,i=[])=>{if(n.length===0)t.push(i);else for(let a=0;a<n.length;a++){const l=n.slice(),d=l.splice(a,1);r(l.slice(),i.concat(d))}};return r(e),t}var DataPlanner=class{constructor(e){this.batchSize=e,this.taskSetsLR=new Map,this.taskSetsL=new Map,this.taskSetsR=new Map,this.complete=!1}addRequest(e,t,r,n){if(e===void 0&&t===void 0){console.warn("WARNING: Both scenario specs are undefined for DataPlanner request, skipping");return}let i,a;e&&t?(i=this.taskSetsLR,a=scenarioPairUid(e,t)):t?(i=this.taskSetsR,a=t.uid):(i=this.taskSetsL,a=e.uid);let l=i.get(a);l||(l=new DataTaskSet(e,t),i.set(a,l)),l.addTask({datasetKey:r,dataAction:n})}buildPlan(){if(this.complete)throw new Error("DataPlanner.buildPlan() can only be called once");this.complete=!0;const e=new Map,t=new Map;for(const l of this.taskSetsLR.keys()){const[d,p]=l.split("::");e.has(d)||e.set(d,l),t.has(p)||t.set(p,l)}function r(l,d,p){for(const[m,A]of d.entries()){const x=p.get(m);x&&(l.get(x).merge(A),d.delete(m))}}r(this.taskSetsLR,this.taskSetsL,e),r(this.taskSetsLR,this.taskSetsR,t);const n=[],i=this.batchSize;function a(l){for(const d of l)n.push(...d.buildRequests(i))}return a(this.taskSetsLR.values()),a(this.taskSetsL.values()),a(this.taskSetsR.values()),{requests:n}}},DataTaskSet=class{constructor(e,t){this.scenarioSpecL=e,this.scenarioSpecR=t,this.modelTasks=new Map,this.modelImplTasks=new Map}addTask(e){let t;e.datasetKey.startsWith("ModelImpl")?t=this.modelImplTasks:t=this.modelTasks;let r=t.get(e.datasetKey);r||(r=[],t.set(e.datasetKey,r)),r.push(e)}merge(e){for(const t of e.modelTasks.values())for(const r of t)this.addTask(r);for(const t of e.modelImplTasks.values())for(const r of t)this.addTask(r)}buildRequests(e){const t=[];if(this.modelTasks.size>0){const r=[];this.modelTasks.forEach(n=>r.push(...n)),t.push({scenarioSpecL:this.scenarioSpecL,scenarioSpecR:this.scenarioSpecR,dataTasks:r})}if(this.modelImplTasks.size>0){const r=[...this.modelImplTasks.keys()];for(let n=0;n<r.length;n+=e){const i=r.slice(n,n+e),a=[];for(const l of i)a.push(...this.modelImplTasks.get(l));t.push({scenarioSpecL:this.scenarioSpecL,scenarioSpecR:this.scenarioSpecR,dataTasks:a})}}return t}};function scenarioPairUid(e,t){const r=e?.uid||"",n=t?.uid||"";return`${r}::${n}`}function runChecks(e,t,r,n,i){const a=e.bundle.modelSpec,l=new CheckPlanner(a);l.addAllChecks(t,i);const d=l.buildPlan(),p=new Map;for(const[A,x]of d.dataRefs.entries())n.addRequest(void 0,x.scenario.spec,x.dataset.datasetKey,I=>{const P=I.datasetR;P&&p.set(A,P)});const m=new Map;for(const[A,x]of d.tasks.entries())x.skip===!0?m.set(A,{status:"skipped"}):r.addRequest(void 0,x.scenario.spec,x.dataset.datasetKey,I=>{const P=I.datasetR,q=runCheck(x,P,p);m.set(A,q)});return()=>buildCheckReport(d,m)}function runCheck(e,t,r){if(t===void 0)return{status:"error",message:"no data available"};let n;if(e.dataRefs){n=new Map;for(const[i,a]of e.dataRefs.entries()){const l=r?.get(a.key);if(l===void 0){if(a.dataset.datasetKey===void 0)return{status:"error",errorInfo:{kind:"unknown-dataset",name:a.dataset.name}};if(a.scenario.spec===void 0){if(a.scenario.error)return{status:"error",errorInfo:{kind:a.scenario.error.kind,name:a.scenario.error.name}};{let d;return a.scenario.inputDescs.length>0?d=a.scenario.inputDescs[0].name:d="unknown",{status:"error",errorInfo:{kind:"unknown-input",name:d}}}}else return{status:"error",message:"unresolved data reference"}}n.set(i,l)}}return e.action.run(t,n)}function runComparisons(e,t,r){function n(x,I){let P=x.toLowerCase();return I&&(P+=` :: ${I.toLowerCase()}`),P}const i=new Set(r.map(x=>n(x.title,x.subtitle))),a=[...e.scenarios.getAllScenarios()];let l;const d=a.findIndex(x=>{const I=x.settings;return I.kind==="all-inputs-settings"&&I.position==="at-default"});d!==-1&&(l=a.splice(d,1)[0]);const p=[],m=new Map;function A(x,I){const P=e.datasets.getDatasetKeysForScenario(x);if(i.has(n(x.title,x.subtitle))){for(const F of P)p.push({scenarioKey:x.key,datasetKey:F,diffReport:void 0});return}for(const F of P)t.addRequest(x.specL,x.specR,F,L=>{const Y=diffDatasets(L.datasetL,L.datasetR);if(I)m.set(F,Y),p.push({scenarioKey:x.key,datasetKey:F,diffReport:Y});else{const j=m.get(F);p.push({scenarioKey:x.key,datasetKey:F,diffReport:Y,baselineDiffReport:j})}})}A(l,!0);for(const x of a)A(x,!1);return()=>p}var SuiteRunner=class{constructor(e,t,r){this.config=e,this.taskQueue=t,this.callbacks=r,this.perfStatsL=new PerfStats,this.perfStatsR=new PerfStats,this.pendingTaskKeys=new Set,this.stopped=!1}cancel(){if(!this.stopped){for(const e of this.pendingTaskKeys)this.taskQueue.cancelTask(e);this.stopped=!0}}start(e){var t,r,n,i,a,l,d,p;(r=(t=this.callbacks).onProgress)==null||r.call(t,0);const m=this.config.check.bundle.modelSpec,A=new DataPlanner(m.outputVars.size),x=new DataPlanner(m.outputVars.size),I=parseTestYaml(this.config.check.tests);if(I.isErr()){(i=(n=this.callbacks).onError)==null||i.call(n,I.error);return}const P=I.value,q=e?.skipChecks||[],F=runChecks(this.config.check,P,A,x,q);let L;if(this.config.comparison){const ie=e?.skipComparisonScenarios||[];L=runComparisons(this.config.comparison,A,ie)}const Y=x.buildPlan(),j=A.buildPlan(),Z=[...Y.requests,...j.requests],X=Z.length;if(X===0){const ie=F();let de;this.config.comparison&&(de={testReports:L(),perfReportL:this.perfStatsL.toReport(),perfReportR:this.perfStatsR.toReport()}),this.cancel(),(l=(a=this.callbacks).onProgress)==null||l.call(a,1),(p=(d=this.callbacks).onComplete)==null||p.call(d,{checkReport:ie,comparisonReport:de});return}const Q=ie=>{var de,fe;{const _e=F();let Re;this.config.comparison&&(Re={testReports:L(),perfReportL:this.perfStatsL.toReport(),perfReportR:this.perfStatsR.toReport()}),(fe=(de=this.callbacks).onComplete)==null||fe.call(de,{checkReport:_e,comparisonReport:Re})}};let J=0,ee=1;for(const ie of Z){const de={key:`suite-runner-${ee++}`,kind:"suite-runner",process:fe=>__async(this,null,function*(){var _e,Re;this.pendingTaskKeys.delete(de.key),yield this.processRequest(ie,fe),J++,(Re=(_e=this.callbacks).onProgress)==null||Re.call(_e,J/X),J===X&&Q()})};this.taskQueue.addTask(de),this.pendingTaskKeys.add(de.key)}}processRequest(e,t){return __async(this,null,function*(){const r=new Set;for(const x of e.dataTasks)r.add(x.datasetKey);const n=[...r];function i(x,I){return __async(this,null,function*(){if(x&&I)return x.getDatasetsForScenario(I,n)})}const a=t.L,l=t.R,[d,p]=yield Promise.all([i(a,e.scenarioSpecL),i(l,e.scenarioSpecR)]);d?.modelRunTime&&this.perfStatsL.addRun(d?.modelRunTime),p?.modelRunTime&&this.perfStatsR.addRun(p?.modelRunTime);const m=d?.datasetMap,A=p?.datasetMap;for(const x of e.dataTasks){const I=m?.get(x.datasetKey),P=A?.get(x.datasetKey);x.dataAction({datasetL:I,datasetR:P})}})}};function runSuiteWithTaskQueue(e,t,r,n){const i=new SuiteRunner(e,t,r);return i.start(n),()=>{i.cancel()}}function runSuite(e,t,r){const n=TaskQueue.getInstance();return runSuiteWithTaskQueue(e,n,t,r)}var fontfaceobserver_standalone={exports:{}},hasRequiredFontfaceobserver_standalone;function requireFontfaceobserver_standalone(){return hasRequiredFontfaceobserver_standalone||(hasRequiredFontfaceobserver_standalone=1,(function(e){(function(){function t(F,L){document.addEventListener?F.addEventListener("scroll",L,!1):F.attachEvent("scroll",L)}function r(F){document.body?F():document.addEventListener?document.addEventListener("DOMContentLoaded",function L(){document.removeEventListener("DOMContentLoaded",L),F()}):document.attachEvent("onreadystatechange",function L(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",L),F())})}function n(F){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(F)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function i(F,L){F.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+L+";"}function a(F){var L=F.g.offsetWidth,Y=L+100;return F.j.style.width=Y+"px",F.i.scrollLeft=Y,F.h.scrollLeft=F.h.scrollWidth+100,F.l!==L?(F.l=L,!0):!1}function l(F,L){function Y(){var Z=j;a(Z)&&Z.g.parentNode!==null&&L(Z.l)}var j=F;t(F.h,Y),t(F.i,Y),a(F)}function d(F,L,Y){L=L||{},Y=Y||window,this.family=F,this.style=L.style||"normal",this.weight=L.weight||"normal",this.stretch=L.stretch||"normal",this.context=Y}var p=null,m=null,A=null,x=null;function I(F){return m===null&&(P(F)&&/Apple/.test(window.navigator.vendor)?(F=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),m=!!F&&603>parseInt(F[1],10)):m=!1),m}function P(F){return x===null&&(x=!!F.document.fonts),x}function q(F,L){var Y=F.style,j=F.weight;if(A===null){var Z=document.createElement("div");try{Z.style.font="condensed 100px sans-serif"}catch{}A=Z.style.font!==""}return[Y,j,A?F.stretch:"","100px",L].join(" ")}d.prototype.load=function(F,L){var Y=this,j=F||"BESbswy",Z=0,X=L||3e3,Q=new Date().getTime();return new Promise(function(J,ee){if(P(Y.context)&&!I(Y.context)){var ie=new Promise(function(fe,_e){function Re(){new Date().getTime()-Q>=X?_e(Error(""+X+"ms timeout exceeded")):Y.context.document.fonts.load(q(Y,'"'+Y.family+'"'),j).then(function(Qe){1<=Qe.length?fe():setTimeout(Re,25)},_e)}Re()}),de=new Promise(function(fe,_e){Z=setTimeout(function(){_e(Error(""+X+"ms timeout exceeded"))},X)});Promise.race([de,ie]).then(function(){clearTimeout(Z),J(Y)},ee)}else r(function(){function fe(){var qe;(qe=Os!=-1&&ji!=-1||Os!=-1&&Ui!=-1||ji!=-1&&Ui!=-1)&&((qe=Os!=ji&&Os!=Ui&&ji!=Ui)||(p===null&&(qe=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),p=!!qe&&(536>parseInt(qe[1],10)||parseInt(qe[1],10)===536&&11>=parseInt(qe[2],10))),qe=p&&(Os==hi&&ji==hi&&Ui==hi||Os==ca&&ji==ca&&Ui==ca||Os==Ue&&ji==Ue&&Ui==Ue)),qe=!qe),qe&&(ke.parentNode!==null&&ke.parentNode.removeChild(ke),clearTimeout(Z),J(Y))}function _e(){if(new Date().getTime()-Q>=X)ke.parentNode!==null&&ke.parentNode.removeChild(ke),ee(Error(""+X+"ms timeout exceeded"));else{var qe=Y.context.document.hidden;(qe===!0||qe===void 0)&&(Os=Re.g.offsetWidth,ji=Qe.g.offsetWidth,Ui=Ar.g.offsetWidth,fe()),Z=setTimeout(_e,50)}}var Re=new n(j),Qe=new n(j),Ar=new n(j),Os=-1,ji=-1,Ui=-1,hi=-1,ca=-1,Ue=-1,ke=document.createElement("div");ke.dir="ltr",i(Re,q(Y,"sans-serif")),i(Qe,q(Y,"serif")),i(Ar,q(Y,"monospace")),ke.appendChild(Re.g),ke.appendChild(Qe.g),ke.appendChild(Ar.g),Y.context.document.body.appendChild(ke),hi=Re.g.offsetWidth,ca=Qe.g.offsetWidth,Ue=Ar.g.offsetWidth,_e(),l(Re,function(qe){Os=qe,fe()}),i(Re,q(Y,'"'+Y.family+'",sans-serif')),l(Qe,function(qe){ji=qe,fe()}),i(Qe,q(Y,'"'+Y.family+'",serif')),l(Ar,function(qe){Ui=qe,fe()}),i(Ar,q(Y,'"'+Y.family+'",monospace'))})})},e.exports=d})()})(fontfaceobserver_standalone)),fontfaceobserver_standalone.exports}var fontfaceobserver_standaloneExports=requireFontfaceobserver_standalone();const $a=getDefaultExportFromCjs$1(fontfaceobserver_standaloneExports);var faFilter={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M32 64C19.1 64 7.4 71.8 2.4 83.8S.2 109.5 9.4 118.6L192 301.3 192 416c0 8.5 3.4 16.6 9.4 22.6l64 64c9.2 9.2 22.9 11.9 34.9 6.9S320 492.9 320 480l0-178.7 182.6-182.6c9.2-9.2 11.9-22.9 6.9-34.9S492.9 64 480 64L32 64z"]},faLaptop={prefix:"fas",iconName:"laptop",icon:[640,512,[128187],"f109","M128 32C92.7 32 64 60.7 64 96l0 240 64 0 0-240 384 0 0 240 64 0 0-240c0-35.3-28.7-64-64-64L128 32zM19.2 384C8.6 384 0 392.6 0 403.2 0 445.6 34.4 480 76.8 480l486.4 0c42.4 0 76.8-34.4 76.8-76.8 0-10.6-8.6-19.2-19.2-19.2L19.2 384z"]},faGear={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M195.1 9.5C198.1-5.3 211.2-16 226.4-16l59.8 0c15.2 0 28.3 10.7 31.3 25.5L332 79.5c14.1 6 27.3 13.7 39.3 22.8l67.8-22.5c14.4-4.8 30.2 1.2 37.8 14.4l29.9 51.8c7.6 13.2 4.9 29.8-6.5 39.9L447 233.3c.9 7.4 1.3 15 1.3 22.7s-.5 15.3-1.3 22.7l53.4 47.5c11.4 10.1 14 26.8 6.5 39.9l-29.9 51.8c-7.6 13.1-23.4 19.2-37.8 14.4l-67.8-22.5c-12.1 9.1-25.3 16.7-39.3 22.8l-14.4 69.9c-3.1 14.9-16.2 25.5-31.3 25.5l-59.8 0c-15.2 0-28.3-10.7-31.3-25.5l-14.4-69.9c-14.1-6-27.2-13.7-39.3-22.8L73.5 432.3c-14.4 4.8-30.2-1.2-37.8-14.4L5.8 366.1c-7.6-13.2-4.9-29.8 6.5-39.9l53.4-47.5c-.9-7.4-1.3-15-1.3-22.7s.5-15.3 1.3-22.7L12.3 185.8c-11.4-10.1-14-26.8-6.5-39.9L35.7 94.1c7.6-13.2 23.4-19.2 37.8-14.4l67.8 22.5c12.1-9.1 25.3-16.7 39.3-22.8L195.1 9.5zM256.3 336a80 80 0 1 0 -.6-160 80 80 0 1 0 .6 160z"]},faCog=faGear,faHouse={prefix:"fas",iconName:"house",icon:[512,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M277.8 8.6c-12.3-11.4-31.3-11.4-43.5 0l-224 208c-9.6 9-12.8 22.9-8 35.1S18.8 272 32 272l16 0 0 176c0 35.3 28.7 64 64 64l288 0c35.3 0 64-28.7 64-64l0-176 16 0c13.2 0 25-8.1 29.8-20.3s1.6-26.2-8-35.1l-224-208zM240 320l32 0c26.5 0 48 21.5 48 48l0 96-128 0 0-96c0-26.5 21.5-48 48-48z"]},faHome=faHouse,faXmark={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M55.1 73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L147.2 256 9.9 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192.5 301.3 329.9 438.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.8 256 375.1 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192.5 210.7 55.1 73.4z"]},faRotateRight={prefix:"fas",iconName:"rotate-right",icon:[512,512,["redo-alt","rotate-forward"],"f2f9","M488 192l-144 0c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l46.7-46.7c-75.3-58.6-184.3-53.3-253.5 15.9-75 75-75 196.5 0 271.5s196.5 75 271.5 0c8.2-8.2 15.5-16.9 21.9-26.1 10.1-14.5 30.1-18 44.6-7.9s18 30.1 7.9 44.6c-8.5 12.2-18.2 23.8-29.1 34.7-100 100-262.1 100-362 0S-25 175 75 75c94.3-94.3 243.7-99.6 344.3-16.2L471 7c6.9-6.9 17.2-8.9 26.2-5.2S512 14.3 512 24l0 144c0 13.3-10.7 24-24 24z"]},fuzzysort$1={exports:{}},fuzzysort=fuzzysort$1.exports,hasRequiredFuzzysort;function requireFuzzysort(){return hasRequiredFuzzysort||(hasRequiredFuzzysort=1,(function(e){((t,r)=>{e.exports?e.exports=r():t.fuzzysort=r()})(fuzzysort,t=>{var r=(ne,ae)=>{if(!ne||!ae)return Ue;var $e=q(ne);ji(ae)||(ae=P(ae));var Je=$e.bitflags;return(Je&ae._bitflags)!==Je?Ue:L($e,ae)},n=(ne,ae,$e)=>{if(!ne)return $e?.all?F(ae,$e):ca;var Je=q(ne),Ke=Je.bitflags,bt=Je.containsSpace,bs=x($e?.threshold||0),ge=$e?.limit||Ui,ue=0,De=0,Ye=ae.length;function mi(se){ue<ge?(Le.add(se),++ue):(++De,se._score>Le.peek()._score&&Le.replaceTop(se))}if($e?.key)for(var ws=$e.key,pi=0;pi<Ye;++pi){var vr=ae[pi],Gi=Os(vr,ws);if(Gi&&(ji(Gi)||(Gi=P(Gi)),(Ke&Gi._bitflags)===Ke)){var ga=L(Je,Gi);ga!==Ue&&(ga._score<bs||(ga.obj=vr,mi(ga)))}}else if($e?.keys){var fa=$e.keys,ya=fa.length;e:for(var pi=0;pi<Ye;++pi){var vr=ae[pi];{for(var ua=0,va=0;va<ya;++va){var ws=fa[va],Gi=Os(vr,ws);if(!Gi){Qe[va]=ke;continue}ji(Gi)||(Gi=P(Gi)),Qe[va]=Gi,ua|=Gi._bitflags}if((Ke&ua)!==Ke)continue}if(bt)for(let Sa=0;Sa<Je.spaceSearches.length;Sa++)_e[Sa]=hi;for(var va=0;va<ya;++va){if(Gi=Qe[va],Gi===ke){Ar[va]=ke;continue}if(Ar[va]=L(Je,Gi,!1,bt),Ar[va]===Ue){Ar[va]=ke;continue}if(bt)for(let Ma=0;Ma<Je.spaceSearches.length;Ma++){if(Re[Ma]>-1e3&&_e[Ma]>hi){var _a=(_e[Ma]+Re[Ma])/4;_a>_e[Ma]&&(_e[Ma]=_a)}Re[Ma]>_e[Ma]&&(_e[Ma]=Re[Ma])}}if(bt){for(let Sa=0;Sa<Je.spaceSearches.length;Sa++)if(_e[Sa]===hi)continue e}else{var gi=!1;for(let Sa=0;Sa<ya;Sa++)if(Ar[Sa]._score!==hi){gi=!0;break}if(!gi)continue}var ha=new p(ya);for(let Sa=0;Sa<ya;Sa++)ha[Sa]=Ar[Sa];if(bt){var pa=0;for(let Sa=0;Sa<Je.spaceSearches.length;Sa++)pa+=_e[Sa]}else{var pa=hi;for(let Ma=0;Ma<ya;Ma++){var ga=ha[Ma];if(ga._score>-1e3&&pa>hi){var _a=(pa+ga._score)/4;_a>pa&&(pa=_a)}ga._score>pa&&(pa=ga._score)}}if(ha.obj=vr,ha._score=pa,$e?.scoreFn){if(pa=$e.scoreFn(ha),!pa)continue;pa=x(pa),ha._score=pa}pa<bs||mi(ha)}}else for(var pi=0;pi<Ye;++pi){var Gi=ae[pi];if(Gi&&(ji(Gi)||(Gi=P(Gi)),(Ke&Gi._bitflags)===Ke)){var ga=L(Je,Gi);ga!==Ue&&(ga._score<bs||mi(ga))}}if(ue===0)return ca;for(var Ia=new Array(ue),pi=ue-1;pi>=0;--pi)Ia[pi]=Le.poll();return Ia.total=ue+De,Ia},i=(ne,ae="<b>",$e="</b>")=>{for(var Je=typeof ae=="function"?ae:void 0,Ke=ne.target,bt=Ke.length,bs=ne.indexes,ge="",ue=0,De=0,Ye=!1,mi=[],ws=0;ws<bt;++ws){var pi=Ke[ws];if(bs[De]===ws){if(++De,Ye||(Ye=!0,Je?(mi.push(ge),ge=""):ge+=ae),De===bs.length){Je?(ge+=pi,mi.push(Je(ge,ue++)),ge="",mi.push(Ke.substr(ws+1))):ge+=pi+$e+Ke.substr(ws+1);break}}else Ye&&(Ye=!1,Je?(mi.push(Je(ge,ue++)),ge=""):ge+=$e);ge+=pi}return Je?mi:ge},a=ne=>{typeof ne=="number"?ne=""+ne:typeof ne!="string"&&(ne="");var ae=Z(ne);return m(ne,{_targetLower:ae._lower,_targetLowerCodes:ae.lowerCodes,_bitflags:ae.bitflags})},l=()=>{J.clear(),ee.clear()};class d{get indexes(){return this._indexes.slice(0,this._indexes.len).sort((ae,$e)=>ae-$e)}set indexes(ae){return this._indexes=ae}highlight(ae,$e){return i(this,ae,$e)}get score(){return A(this._score)}set score(ae){this._score=x(ae)}}class p extends Array{get score(){return A(this._score)}set score(ae){this._score=x(ae)}}var m=(ne,ae)=>{const $e=new d;return $e.target=ne,$e.obj=ae.obj??Ue,$e._score=ae._score??hi,$e._indexes=ae._indexes??[],$e._targetLower=ae._targetLower??"",$e._targetLowerCodes=ae._targetLowerCodes??Ue,$e._nextBeginningIndexes=ae._nextBeginningIndexes??Ue,$e._bitflags=ae._bitflags??0,$e},A=ne=>ne===hi?0:ne>1?ne:Math.E**(((-ne+1)**.04307-1)*-2),x=ne=>ne===0?hi:ne>1?ne:1-Math.pow(Math.log(ne)/-2+1,1/.04307),I=ne=>{typeof ne=="number"?ne=""+ne:typeof ne!="string"&&(ne=""),ne=ne.trim();var ae=Z(ne),$e=[];if(ae.containsSpace){var Je=ne.split(/\s+/);Je=[...new Set(Je)];for(var Ke=0;Ke<Je.length;Ke++)if(Je[Ke]!==""){var bt=Z(Je[Ke]);$e.push({lowerCodes:bt.lowerCodes,_lower:Je[Ke].toLowerCase(),containsSpace:!1})}}return{lowerCodes:ae.lowerCodes,_lower:ae._lower,containsSpace:ae.containsSpace,bitflags:ae.bitflags,spaceSearches:$e}},P=ne=>{if(ne.length>999)return a(ne);var ae=J.get(ne);return ae!==void 0||(ae=a(ne),J.set(ne,ae)),ae},q=ne=>{if(ne.length>999)return I(ne);var ae=ee.get(ne);return ae!==void 0||(ae=I(ne),ee.set(ne,ae)),ae},F=(ne,ae)=>{var $e=[];$e.total=ne.length;var Je=ae?.limit||Ui;if(ae?.key)for(var Ke=0;Ke<ne.length;Ke++){var bt=ne[Ke],bs=Os(bt,ae.key);if(bs!=Ue){ji(bs)||(bs=P(bs));var ge=m(bs.target,{_score:bs._score,obj:bt});if($e.push(ge),$e.length>=Je)return $e}}else if(ae?.keys)for(var Ke=0;Ke<ne.length;Ke++){for(var bt=ne[Ke],ue=new p(ae.keys.length),De=ae.keys.length-1;De>=0;--De){var bs=Os(bt,ae.keys[De]);if(!bs){ue[De]=ke;continue}ji(bs)||(bs=P(bs)),bs._score=hi,bs._indexes.len=0,ue[De]=bs}if(ue.obj=bt,ue._score=hi,$e.push(ue),$e.length>=Je)return $e}else for(var Ke=0;Ke<ne.length;Ke++){var bs=ne[Ke];if(bs!=Ue&&(ji(bs)||(bs=P(bs)),bs._score=hi,bs._indexes.len=0,$e.push(bs),$e.length>=Je))return $e}return $e},L=(ne,ae,$e=!1,Je=!1)=>{if($e===!1&&ne.containsSpace)return Y(ne,ae,Je);for(var Ke=ne._lower,bt=ne.lowerCodes,bs=bt[0],ge=ae._targetLowerCodes,ue=bt.length,De=ge.length,pi=0,Ye=0,mi=0;;){var ws=bs===ge[Ye];if(ws){if(ie[mi++]=Ye,++pi,pi===ue)break;bs=bt[pi]}if(++Ye,Ye>=De)return Ue}var pi=0,vr=!1,Gi=0,ga=ae._nextBeginningIndexes;ga===Ue&&(ga=ae._nextBeginningIndexes=Q(ae.target)),Ye=ie[0]===0?0:ga[ie[0]-1];var fa=0;if(Ye!==De)for(;;)if(Ye>=De){if(pi<=0||(++fa,fa>200))break;--pi;var ya=de[--Gi];Ye=ga[ya]}else{var ws=bt[pi]===ge[Ye];if(ws){if(de[Gi++]=Ye,++pi,pi===ue){vr=!0;break}++Ye}else Ye=ga[Ye]}var ua=ue<=1?-1:ae._targetLower.indexOf(Ke,ie[0]),va=!!~ua,_a=va?ua===0||ae._nextBeginningIndexes[ua-1]===ua:!1;if(va&&!_a){for(var gi=0;gi<ga.length;gi=ga[gi])if(!(gi<=ua)){for(var ha=0;ha<ue&&bt[ha]===ae._targetLowerCodes[gi+ha];ha++);if(ha===ue){ua=gi,_a=!0;break}}}var pa=Sa=>{for(var Ma=0,Th=0,th=1;th<ue;++th)Sa[th]-Sa[th-1]!==1&&(Ma-=Sa[th],++Th);var Ph=Sa[ue-1]-Sa[0]-(ue-1);if(Ma-=(12+Ph)*Th,Sa[0]!==0&&(Ma-=Sa[0]*Sa[0]*.2),!vr)Ma*=1e3;else{for(var uh=1,th=ga[0];th<De;th=ga[th])++uh;uh>24&&(Ma*=(uh-24)*10)}return Ma-=(De-ue)/2,va&&(Ma/=1+ue*ue*1),_a&&(Ma/=1+ue*ue*1),Ma-=(De-ue)/2,Ma};if(vr)if(_a){for(var gi=0;gi<ue;++gi)ie[gi]=ua+gi;var Ia=ie,se=pa(ie)}else var Ia=de,se=pa(de);else{if(va)for(var gi=0;gi<ue;++gi)ie[gi]=ua+gi;var Ia=ie,se=pa(Ia)}ae._score=se;for(var gi=0;gi<ue;++gi)ae._indexes[gi]=Ia[gi];ae._indexes.len=ue;const Da=new d;return Da.target=ae.target,Da._score=ae._score,Da._indexes=ae._indexes,Da},Y=(ne,ae,$e)=>{for(var Je=new Set,Ke=0,bt=Ue,bs=0,ge=ne.spaceSearches,ue=ge.length,De=0,Ye=()=>{for(let _a=De-1;_a>=0;_a--)ae._nextBeginningIndexes[fe[_a*2+0]]=fe[_a*2+1]},mi=!1,va=0;va<ue;++va){Re[va]=hi;var ws=ge[va];if(bt=L(ws,ae),$e){if(bt===Ue)continue;mi=!0}else if(bt===Ue)return Ye(),Ue;var pi=va===ue-1;if(!pi){var vr=bt._indexes,Gi=!0;for(let gi=0;gi<vr.len-1;gi++)if(vr[gi+1]-vr[gi]!==1){Gi=!1;break}if(Gi){var ga=vr[vr.len-1]+1,fa=ae._nextBeginningIndexes[ga-1];for(let gi=ga-1;gi>=0&&fa===ae._nextBeginningIndexes[gi];gi--)ae._nextBeginningIndexes[gi]=ga,fe[De*2+0]=gi,fe[De*2+1]=fa,De++}}Ke+=bt._score/ue,Re[va]=bt._score/ue,bt._indexes[0]<bs&&(Ke-=(bs-bt._indexes[0])*2),bs=bt._indexes[0];for(var ya=0;ya<bt._indexes.len;++ya)Je.add(bt._indexes[ya])}if($e&&!mi)return Ue;Ye();var ua=L(ne,ae,!0);if(ua!==Ue&&ua._score>Ke){if($e)for(var va=0;va<ue;++va)Re[va]=ua._score/ue;return ua}$e&&(bt=ae),bt._score=Ke;var va=0;for(let _a of Je)bt._indexes[va++]=_a;return bt._indexes.len=va,bt},j=ne=>ne.replace(new RegExp("\\p{Script=Latin}+","gu"),ae=>ae.normalize("NFD")).replace(/[\u0300-\u036f]/g,""),Z=ne=>{ne=j(ne);for(var ae=ne.length,$e=ne.toLowerCase(),Je=[],Ke=0,bt=!1,bs=0;bs<ae;++bs){var ge=Je[bs]=$e.charCodeAt(bs);if(ge===32){bt=!0;continue}var ue=ge>=97&&ge<=122?ge-97:ge>=48&&ge<=57?26:ge<=127?30:31;Ke|=1<<ue}return{lowerCodes:Je,bitflags:Ke,containsSpace:bt,_lower:$e}},X=ne=>{for(var ae=ne.length,$e=[],Je=0,Ke=!1,bt=!1,bs=0;bs<ae;++bs){var ge=ne.charCodeAt(bs),ue=ge>=65&&ge<=90,De=ue||ge>=97&&ge<=122||ge>=48&&ge<=57,Ye=ue&&!Ke||!bt||!De;Ke=ue,bt=De,Ye&&($e[Je++]=bs)}return $e},Q=ne=>{ne=j(ne);for(var ae=ne.length,$e=X(ne),Je=[],Ke=$e[0],bt=0,bs=0;bs<ae;++bs)Ke>bs?Je[bs]=Ke:(Ke=$e[++bt],Je[bs]=Ke===void 0?ae:Ke);return Je},J=new Map,ee=new Map,ie=[],de=[],fe=[],_e=[],Re=[],Qe=[],Ar=[],Os=(ne,ae)=>{var $e=ne[ae];if($e!==void 0)return $e;if(typeof ae=="function")return ae(ne);var Je=ae;Array.isArray(ae)||(Je=ae.split("."));for(var Ke=Je.length,bt=-1;ne&&++bt<Ke;)ne=ne[Je[bt]];return ne},ji=ne=>typeof ne=="object"&&typeof ne._bitflags=="number",Ui=1/0,hi=-Ui,ca=[];ca.total=0;var Ue=null,ke=a(""),qe=ne=>{var ae=[],$e=0,Je={},Ke=bt=>{for(var bs=0,ge=ae[bs],ue=1;ue<$e;){var De=ue+1;bs=ue,De<$e&&ae[De]._score<ae[ue]._score&&(bs=De),ae[bs-1>>1]=ae[bs],ue=1+(bs<<1)}for(var Ye=bs-1>>1;bs>0&&ge._score<ae[Ye]._score;Ye=(bs=Ye)-1>>1)ae[bs]=ae[Ye];ae[bs]=ge};return Je.add=(bt=>{var bs=$e;ae[$e++]=bt;for(var ge=bs-1>>1;bs>0&&bt._score<ae[ge]._score;ge=(bs=ge)-1>>1)ae[bs]=ae[ge];ae[bs]=bt}),Je.poll=(bt=>{if($e!==0){var bs=ae[0];return ae[0]=ae[--$e],Ke(),bs}}),Je.peek=(bt=>{if($e!==0)return ae[0]}),Je.replaceTop=(bt=>{ae[0]=bt,Ke()}),Je},Le=qe();return{single:r,go:n,prepare:a,cleanup:l}})})(fuzzysort$1)),fuzzysort$1.exports}var fuzzysortExports=requireFuzzysort();const Ea=getDefaultExportFromCjs$1(fuzzysortExports);var faCloud={prefix:"far",iconName:"cloud",icon:[576,512,[9729],"f0c2","M80 192c0-88.4 71.6-160 160-160 47.1 0 89.4 20.4 118.7 52.7 10.6-3.1 21.8-4.7 33.3-4.7 66.3 0 120 53.7 120 120 0 13.2-2.1 25.9-6.1 37.8 41.6 21.1 70.1 64.3 70.1 114.2 0 70.7-57.3 128-128 128l-304 0c-79.5 0-144-64.5-144-144 0-56.8 32.9-105.9 80.7-129.4-.4-4.8-.7-9.7-.7-14.6zM240 80c-61.9 0-112 50.1-112 112 0 8.4 .9 16.6 2.7 24.5 2.7 12.1-4.3 24.3-16.1 28.1-38.7 12.4-66.6 48.7-66.6 91.4 0 53 43 96 96 96l304 0c44.2 0 80-35.8 80-80 0-37.4-25.7-68.9-60.5-77.6-7.5-1.9-13.6-7.2-16.5-14.3s-2.1-15.2 2-21.7c7-11.1 11-24.2 11-38.3 0-39.8-32.2-72-72-72-11.1 0-21.5 2.5-30.8 6.9-10.5 5-23.1 1.7-29.8-7.8-20.3-28.6-53.7-47.1-91.3-47.1z"]};function copyTextToClipboard(e,{target:t=document.body}={}){if(typeof e!="string")throw new TypeError(`Expected parameter \`text\` to be a \`string\`, got \`${typeof e}\`.`);const r=document.createElement("textarea"),n=document.activeElement;r.value=e,r.setAttribute("readonly",""),r.style.all="unset",r.style.contain="strict",r.style.position="absolute",r.style.left="-9999px",r.style.width="2em",r.style.height="2em",r.style.padding="0",r.style.border="none",r.style.outline="none",r.style.boxShadow="none",r.style.background="transparent",r.style.fontSize="12pt",r.style.whiteSpace="pre";const i=document.getSelection(),a=i.rangeCount>0&&i.getRangeAt(0);t.append(r),r.select(),r.selectionStart=0,r.selectionEnd=e.length;let l=!1;try{l=document.execCommand("copy")}catch{}return r.remove(),a&&(i.removeAllRanges(),i.addRange(a)),n&&n.focus(),l}var Chart$1={exports:{}};var hookCallback;function hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(e){hookCallback=e}function isArray(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function isObject(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function hasOwnProp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function isObjectEmpty(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(hasOwnProp(e,t))return!1;return!0}function isUndefined(e){return e===void 0}function isNumber(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function isDate(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function map(e,t){var r=[],n,i=e.length;for(n=0;n<i;++n)r.push(t(e[n],n));return r}function extend(e,t){for(var r in t)hasOwnProp(t,r)&&(e[r]=t[r]);return hasOwnProp(t,"toString")&&(e.toString=t.toString),hasOwnProp(t,"valueOf")&&(e.valueOf=t.valueOf),e}function createUTC(e,t,r,n){return createLocalOrUTC(e,t,r,n,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function getParsingFlags(e){return e._pf==null&&(e._pf=defaultParsingFlags()),e._pf}var some;Array.prototype.some?some=Array.prototype.some:some=function(e){var t=Object(this),r=t.length>>>0,n;for(n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};function isValid(e){var t=null,r=!1,n=e._d&&!isNaN(e._d.getTime());if(n&&(t=getParsingFlags(e),r=some.call(t.parsedDateParts,function(i){return i!=null}),n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=n;else return n;return e._isValid}function createInvalid(e){var t=createUTC(NaN);return e!=null?extend(getParsingFlags(t),e):getParsingFlags(t).userInvalidated=!0,t}var momentProperties=hooks.momentProperties=[],updateInProgress=!1;function copyConfig(e,t){var r,n,i,a=momentProperties.length;if(isUndefined(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),isUndefined(t._i)||(e._i=t._i),isUndefined(t._f)||(e._f=t._f),isUndefined(t._l)||(e._l=t._l),isUndefined(t._strict)||(e._strict=t._strict),isUndefined(t._tzm)||(e._tzm=t._tzm),isUndefined(t._isUTC)||(e._isUTC=t._isUTC),isUndefined(t._offset)||(e._offset=t._offset),isUndefined(t._pf)||(e._pf=getParsingFlags(t)),isUndefined(t._locale)||(e._locale=t._locale),a>0)for(r=0;r<a;r++)n=momentProperties[r],i=t[n],isUndefined(i)||(e[n]=i);return e}function Moment(e){copyConfig(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),updateInProgress===!1&&(updateInProgress=!0,hooks.updateOffset(this),updateInProgress=!1)}function isMoment(e){return e instanceof Moment||e!=null&&e._isAMomentObject!=null}function warn(e){hooks.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function deprecate(e,t){var r=!0;return extend(function(){if(hooks.deprecationHandler!=null&&hooks.deprecationHandler(null,e),r){var n=[],i,a,l,d=arguments.length;for(a=0;a<d;a++){if(i="",typeof arguments[a]=="object"){i+=`
[`+a+"] ";for(l in arguments[0])hasOwnProp(arguments[0],l)&&(i+=l+": "+arguments[0][l]+", ");i=i.slice(0,-2)}else i=arguments[a];n.push(i)}warn(e+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var deprecations={};function deprecateSimple(e,t){hooks.deprecationHandler!=null&&hooks.deprecationHandler(e,t),deprecations[e]||(warn(t),deprecations[e]=!0)}hooks.suppressDeprecationWarnings=!1;hooks.deprecationHandler=null;function isFunction(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function set(e){var t,r;for(r in e)hasOwnProp(e,r)&&(t=e[r],isFunction(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function mergeConfigs(e,t){var r=extend({},e),n;for(n in t)hasOwnProp(t,n)&&(isObject(e[n])&&isObject(t[n])?(r[n]={},extend(r[n],e[n]),extend(r[n],t[n])):t[n]!=null?r[n]=t[n]:delete r[n]);for(n in e)hasOwnProp(e,n)&&!hasOwnProp(t,n)&&isObject(e[n])&&(r[n]=extend({},r[n]));return r}function Locale(e){e!=null&&this.set(e)}var keys;Object.keys?keys=Object.keys:keys=function(e){var t,r=[];for(t in e)hasOwnProp(e,t)&&r.push(t);return r};var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function calendar(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return isFunction(n)?n.call(t,r):n}function zeroFill(e,t,r){var n=""+Math.abs(e),i=t-n.length,a=e>=0;return(a?r?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+n}var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={};function addFormatToken(e,t,r,n){var i=n;typeof n=="string"&&(i=function(){return this[n]()}),e&&(formatTokenFunctions[e]=i),t&&(formatTokenFunctions[t[0]]=function(){return zeroFill(i.apply(this,arguments),t[1],t[2])}),r&&(formatTokenFunctions[r]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function removeFormattingTokens(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function makeFormatFunction(e){var t=e.match(formattingTokens),r,n;for(r=0,n=t.length;r<n;r++)formatTokenFunctions[t[r]]?t[r]=formatTokenFunctions[t[r]]:t[r]=removeFormattingTokens(t[r]);return function(i){var a="",l;for(l=0;l<n;l++)a+=isFunction(t[l])?t[l].call(i,e):t[l];return a}}function formatMoment(e,t){return e.isValid()?(t=expandFormat(t,e.localeData()),formatFunctions[t]=formatFunctions[t]||makeFormatFunction(t),formatFunctions[t](e)):e.localeData().invalidDate()}function expandFormat(e,t){var r=5;function n(i){return t.longDateFormat(i)||i}for(localFormattingTokens.lastIndex=0;r>=0&&localFormattingTokens.test(e);)e=e.replace(localFormattingTokens,n),localFormattingTokens.lastIndex=0,r-=1;return e}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(formattingTokens).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[e])}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d",defaultDayOfMonthOrdinalParse=/\d{1,2}/;function ordinal(e){return this._ordinal.replace("%d",e)}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relativeTime(e,t,r,n){var i=this._relativeTime[r];return isFunction(i)?i(e,t,r,n):i.replace(/%d/i,e)}function pastFuture(e,t){var r=this._relativeTime[e>0?"future":"past"];return isFunction(r)?r(t):r.replace(/%s/i,t)}var aliases={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function normalizeUnits(e){return typeof e=="string"?aliases[e]||aliases[e.toLowerCase()]:void 0}function normalizeObjectUnits(e){var t={},r,n;for(n in e)hasOwnProp(e,n)&&(r=normalizeUnits(n),r&&(t[r]=e[n]));return t}var priorities={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function getPrioritizedUnits(e){var t=[],r;for(r in e)hasOwnProp(e,r)&&t.push({unit:r,priority:priorities[r]});return t.sort(function(n,i){return n.priority-i.priority}),t}var match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match3to4=/\d\d\d\d?/,match5to6=/\d\d\d\d\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,match1to2NoLeadingZero=/^[1-9]\d?/,match1to2HasZero=/^([1-9]\d|\d)/,regexes;regexes={};function addRegexToken(e,t,r){regexes[e]=isFunction(t)?t:function(n,i){return n&&r?r:t}}function getParseRegexForToken(e,t){return hasOwnProp(regexes,e)?regexes[e](t._strict,t._locale):new RegExp(unescapeFormat(e))}function unescapeFormat(e){return regexEscape(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,n,i,a){return r||n||i||a}))}function regexEscape(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function absFloor(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function toInt(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=absFloor(t)),r}var tokens={};function addParseToken(e,t){var r,n=t,i;for(typeof e=="string"&&(e=[e]),isNumber(t)&&(n=function(a,l){l[t]=toInt(a)}),i=e.length,r=0;r<i;r++)tokens[e[r]]=n}function addWeekParseToken(e,t){addParseToken(e,function(r,n,i,a){i._w=i._w||{},t(r,i._w,i,a)})}function addTimeToArrayFromToken(e,t,r){t!=null&&hasOwnProp(tokens,e)&&tokens[e](t,r._a,r,e)}function isLeapYear(e){return e%4===0&&e%100!==0||e%400===0}var YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,WEEK=7,WEEKDAY=8;addFormatToken("Y",0,0,function(){var e=this.year();return e<=9999?zeroFill(e,4):"+"+e});addFormatToken(0,["YY",2],0,function(){return this.year()%100});addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,!0],0,"year");addRegexToken("Y",matchSigned);addRegexToken("YY",match1to2,match2);addRegexToken("YYYY",match1to4,match4);addRegexToken("YYYYY",match1to6,match6);addRegexToken("YYYYYY",match1to6,match6);addParseToken(["YYYYY","YYYYYY"],YEAR);addParseToken("YYYY",function(e,t){t[YEAR]=e.length===2?hooks.parseTwoDigitYear(e):toInt(e)});addParseToken("YY",function(e,t){t[YEAR]=hooks.parseTwoDigitYear(e)});addParseToken("Y",function(e,t){t[YEAR]=parseInt(e,10)});function daysInYear(e){return isLeapYear(e)?366:365}hooks.parseTwoDigitYear=function(e){return toInt(e)+(toInt(e)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!0);function getIsLeapYear(){return isLeapYear(this.year())}function makeGetSet(e,t){return function(r){return r!=null?(set$1(this,e,r),hooks.updateOffset(this,t),this):get(this,e)}}function get(e,t){if(!e.isValid())return NaN;var r=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return n?r.getUTCSeconds():r.getSeconds();case"Minutes":return n?r.getUTCMinutes():r.getMinutes();case"Hours":return n?r.getUTCHours():r.getHours();case"Date":return n?r.getUTCDate():r.getDate();case"Day":return n?r.getUTCDay():r.getDay();case"Month":return n?r.getUTCMonth():r.getMonth();case"FullYear":return n?r.getUTCFullYear():r.getFullYear();default:return NaN}}function set$1(e,t,r){var n,i,a,l,d;if(!(!e.isValid()||isNaN(r))){switch(n=e._d,i=e._isUTC,t){case"Milliseconds":return void(i?n.setUTCMilliseconds(r):n.setMilliseconds(r));case"Seconds":return void(i?n.setUTCSeconds(r):n.setSeconds(r));case"Minutes":return void(i?n.setUTCMinutes(r):n.setMinutes(r));case"Hours":return void(i?n.setUTCHours(r):n.setHours(r));case"Date":return void(i?n.setUTCDate(r):n.setDate(r));case"FullYear":break;default:return}a=r,l=e.month(),d=e.date(),d=d===29&&l===1&&!isLeapYear(a)?28:d,i?n.setUTCFullYear(a,l,d):n.setFullYear(a,l,d)}}function stringGet(e){return e=normalizeUnits(e),isFunction(this[e])?this[e]():this}function stringSet(e,t){if(typeof e=="object"){e=normalizeObjectUnits(e);var r=getPrioritizedUnits(e),n,i=r.length;for(n=0;n<i;n++)this[r[n].unit](e[r[n].unit])}else if(e=normalizeUnits(e),isFunction(this[e]))return this[e](t);return this}function mod(e,t){return(e%t+t)%t}var indexOf;Array.prototype.indexOf?indexOf=Array.prototype.indexOf:indexOf=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function daysInMonth(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=mod(t,12);return e+=(t-r)/12,r===1?isLeapYear(e)?29:28:31-r%7%2}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1});addFormatToken("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});addFormatToken("MMMM",0,0,function(e){return this.localeData().months(this,e)});addRegexToken("M",match1to2,match1to2NoLeadingZero);addRegexToken("MM",match1to2,match2);addRegexToken("MMM",function(e,t){return t.monthsShortRegex(e)});addRegexToken("MMMM",function(e,t){return t.monthsRegex(e)});addParseToken(["M","MM"],function(e,t){t[MONTH]=toInt(e)-1});addParseToken(["MMM","MMMM"],function(e,t,r,n){var i=r._locale.monthsParse(e,n,r._strict);i!=null?t[MONTH]=i:getParsingFlags(r).invalidMonth=e});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,defaultMonthsShortRegex=matchWord,defaultMonthsRegex=matchWord;function localeMonths(e,t){return e?isArray(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(t)?"format":"standalone"][e.month()]:isArray(this._months)?this._months:this._months.standalone}function localeMonthsShort(e,t){return e?isArray(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(t)?"format":"standalone"][e.month()]:isArray(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function handleStrictParse(e,t,r){var n,i,a,l=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)a=createUTC([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(a,"").toLocaleLowerCase();return r?t==="MMM"?(i=indexOf.call(this._shortMonthsParse,l),i!==-1?i:null):(i=indexOf.call(this._longMonthsParse,l),i!==-1?i:null):t==="MMM"?(i=indexOf.call(this._shortMonthsParse,l),i!==-1?i:(i=indexOf.call(this._longMonthsParse,l),i!==-1?i:null)):(i=indexOf.call(this._longMonthsParse,l),i!==-1?i:(i=indexOf.call(this._shortMonthsParse,l),i!==-1?i:null))}function localeMonthsParse(e,t,r){var n,i,a;if(this._monthsParseExact)return handleStrictParse.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(i=createUTC([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!r&&!this._monthsParse[n]&&(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[n]=new RegExp(a.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[n].test(e))return n;if(r&&t==="MMM"&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}}function setMonth(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=toInt(t);else if(t=e.localeData().monthsParse(t),!isNumber(t))return e}var r=t,n=e.date();return n=n<29?n:Math.min(n,daysInMonth(e.year(),r)),e._isUTC?e._d.setUTCMonth(r,n):e._d.setMonth(r,n),e}function getSetMonth(e){return e!=null?(setMonth(this,e),hooks.updateOffset(this,!0),this):get(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function monthsShortRegex(e){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=defaultMonthsShortRegex),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function monthsRegex(e){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),e?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=defaultMonthsRegex),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function computeMonthsParse(){function e(p,m){return m.length-p.length}var t=[],r=[],n=[],i,a,l,d;for(i=0;i<12;i++)a=createUTC([2e3,i]),l=regexEscape(this.monthsShort(a,"")),d=regexEscape(this.months(a,"")),t.push(l),r.push(d),n.push(d),n.push(l);t.sort(e),r.sort(e),n.sort(e),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function createDate(e,t,r,n,i,a,l){var d;return e<100&&e>=0?(d=new Date(e+400,t,r,n,i,a,l),isFinite(d.getFullYear())&&d.setFullYear(e)):d=new Date(e,t,r,n,i,a,l),d}function createUTCDate(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function firstWeekOffset(e,t,r){var n=7+t-r,i=(7+createUTCDate(e,0,n).getUTCDay()-t)%7;return-i+n-1}function dayOfYearFromWeeks(e,t,r,n,i){var a=(7+r-n)%7,l=firstWeekOffset(e,n,i),d=1+7*(t-1)+a+l,p,m;return d<=0?(p=e-1,m=daysInYear(p)+d):d>daysInYear(e)?(p=e+1,m=d-daysInYear(e)):(p=e,m=d),{year:p,dayOfYear:m}}function weekOfYear(e,t,r){var n=firstWeekOffset(e.year(),t,r),i=Math.floor((e.dayOfYear()-n-1)/7)+1,a,l;return i<1?(l=e.year()-1,a=i+weeksInYear(l,t,r)):i>weeksInYear(e.year(),t,r)?(a=i-weeksInYear(e.year(),t,r),l=e.year()+1):(l=e.year(),a=i),{week:a,year:l}}function weeksInYear(e,t,r){var n=firstWeekOffset(e,t,r),i=firstWeekOffset(e+1,t,r);return(daysInYear(e)-n+i)/7}addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addRegexToken("w",match1to2,match1to2NoLeadingZero);addRegexToken("ww",match1to2,match2);addRegexToken("W",match1to2,match1to2NoLeadingZero);addRegexToken("WW",match1to2,match2);addWeekParseToken(["w","ww","W","WW"],function(e,t,r,n){t[n.substr(0,1)]=toInt(e)});function localeWeek(e){return weekOfYear(e,this._week.dow,this._week.doy).week}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function getSetISOWeek(e){var t=weekOfYear(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});addFormatToken("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});addFormatToken("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addRegexToken("d",match1to2);addRegexToken("e",match1to2);addRegexToken("E",match1to2);addRegexToken("dd",function(e,t){return t.weekdaysMinRegex(e)});addRegexToken("ddd",function(e,t){return t.weekdaysShortRegex(e)});addRegexToken("dddd",function(e,t){return t.weekdaysRegex(e)});addWeekParseToken(["dd","ddd","dddd"],function(e,t,r,n){var i=r._locale.weekdaysParse(e,n,r._strict);i!=null?t.d=i:getParsingFlags(r).invalidWeekday=e});addWeekParseToken(["d","e","E"],function(e,t,r,n){t[n]=toInt(e)});function parseWeekday(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function parseIsoWeekday(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function shiftWeekdays(e,t){return e.slice(t,7).concat(e.slice(0,t))}var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),defaultWeekdaysRegex=matchWord,defaultWeekdaysShortRegex=matchWord,defaultWeekdaysMinRegex=matchWord;function localeWeekdays(e,t){var r=isArray(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?shiftWeekdays(r,this._week.dow):e?r[e.day()]:r}function localeWeekdaysShort(e){return e===!0?shiftWeekdays(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function localeWeekdaysMin(e){return e===!0?shiftWeekdays(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function handleStrictParse$1(e,t,r){var n,i,a,l=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)a=createUTC([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(a,"").toLocaleLowerCase();return r?t==="dddd"?(i=indexOf.call(this._weekdaysParse,l),i!==-1?i:null):t==="ddd"?(i=indexOf.call(this._shortWeekdaysParse,l),i!==-1?i:null):(i=indexOf.call(this._minWeekdaysParse,l),i!==-1?i:null):t==="dddd"?(i=indexOf.call(this._weekdaysParse,l),i!==-1||(i=indexOf.call(this._shortWeekdaysParse,l),i!==-1)?i:(i=indexOf.call(this._minWeekdaysParse,l),i!==-1?i:null)):t==="ddd"?(i=indexOf.call(this._shortWeekdaysParse,l),i!==-1||(i=indexOf.call(this._weekdaysParse,l),i!==-1)?i:(i=indexOf.call(this._minWeekdaysParse,l),i!==-1?i:null)):(i=indexOf.call(this._minWeekdaysParse,l),i!==-1||(i=indexOf.call(this._weekdaysParse,l),i!==-1)?i:(i=indexOf.call(this._shortWeekdaysParse,l),i!==-1?i:null))}function localeWeekdaysParse(e,t,r){var n,i,a;if(this._weekdaysParseExact)return handleStrictParse$1.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(i=createUTC([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[n]=new RegExp(a.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[n].test(e))return n;if(r&&t==="ddd"&&this._shortWeekdaysParse[n].test(e))return n;if(r&&t==="dd"&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}}function getSetDayOfWeek(e){if(!this.isValid())return e!=null?this:NaN;var t=get(this,"Day");return e!=null?(e=parseWeekday(e,this.localeData()),this.add(e-t,"d")):t}function getSetLocaleDayOfWeek(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function getSetISODayOfWeek(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=parseIsoWeekday(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function weekdaysRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=defaultWeekdaysRegex),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function weekdaysShortRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=defaultWeekdaysShortRegex),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function weekdaysMinRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=defaultWeekdaysMinRegex),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function computeWeekdaysParse(){function e(A,x){return x.length-A.length}var t=[],r=[],n=[],i=[],a,l,d,p,m;for(a=0;a<7;a++)l=createUTC([2e3,1]).day(a),d=regexEscape(this.weekdaysMin(l,"")),p=regexEscape(this.weekdaysShort(l,"")),m=regexEscape(this.weekdays(l,"")),t.push(d),r.push(p),n.push(m),i.push(d),i.push(p),i.push(m);t.sort(e),r.sort(e),n.sort(e),i.sort(e),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,hFormat);addFormatToken("k",["kk",2],0,kFormat);addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)});addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)});addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});function meridiem(e,t){addFormatToken(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}meridiem("a",!0);meridiem("A",!1);function matchMeridiem(e,t){return t._meridiemParse}addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",match1to2,match1to2HasZero);addRegexToken("h",match1to2,match1to2NoLeadingZero);addRegexToken("k",match1to2,match1to2NoLeadingZero);addRegexToken("HH",match1to2,match2);addRegexToken("hh",match1to2,match2);addRegexToken("kk",match1to2,match2);addRegexToken("hmm",match3to4);addRegexToken("hmmss",match5to6);addRegexToken("Hmm",match3to4);addRegexToken("Hmmss",match5to6);addParseToken(["H","HH"],HOUR);addParseToken(["k","kk"],function(e,t,r){var n=toInt(e);t[HOUR]=n===24?0:n});addParseToken(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e});addParseToken(["h","hh"],function(e,t,r){t[HOUR]=toInt(e),getParsingFlags(r).bigHour=!0});addParseToken("hmm",function(e,t,r){var n=e.length-2;t[HOUR]=toInt(e.substr(0,n)),t[MINUTE]=toInt(e.substr(n)),getParsingFlags(r).bigHour=!0});addParseToken("hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[HOUR]=toInt(e.substr(0,n)),t[MINUTE]=toInt(e.substr(n,2)),t[SECOND]=toInt(e.substr(i)),getParsingFlags(r).bigHour=!0});addParseToken("Hmm",function(e,t,r){var n=e.length-2;t[HOUR]=toInt(e.substr(0,n)),t[MINUTE]=toInt(e.substr(n))});addParseToken("Hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[HOUR]=toInt(e.substr(0,n)),t[MINUTE]=toInt(e.substr(n,2)),t[SECOND]=toInt(e.substr(i))});function localeIsPM(e){return(e+"").toLowerCase().charAt(0)==="p"}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",!0);function localeMeridiem(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse},locales={},localeFamilies={},globalLocale;function commonPrefix(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r+=1)if(e[r]!==t[r])return r;return n}function normalizeLocale(e){return e&&e.toLowerCase().replace("_","-")}function chooseLocale(e){for(var t=0,r,n,i,a;t<e.length;){for(a=normalizeLocale(e[t]).split("-"),r=a.length,n=normalizeLocale(e[t+1]),n=n?n.split("-"):null;r>0;){if(i=loadLocale(a.slice(0,r).join("-")),i)return i;if(n&&n.length>=r&&commonPrefix(a,n)>=r-1)break;r--}t++}return globalLocale}function isLocaleNameSane(e){return!!(e&&e.match("^[^/\\\\]*$"))}function loadLocale(e){var t=null,r;if(locales[e]===void 0&&typeof module<"u"&&module&&module.exports&&isLocaleNameSane(e))try{t=globalLocale._abbr,r=require,r("./locale/"+e),getSetGlobalLocale(t)}catch{locales[e]=null}return locales[e]}function getSetGlobalLocale(e,t){var r;return e&&(isUndefined(t)?r=getLocale(e):r=defineLocale(e,t),r?globalLocale=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),globalLocale._abbr}function defineLocale(e,t){if(t!==null){var r,n=baseConfig;if(t.abbr=e,locales[e]!=null)deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=locales[e]._config;else if(t.parentLocale!=null)if(locales[t.parentLocale]!=null)n=locales[t.parentLocale]._config;else if(r=loadLocale(t.parentLocale),r!=null)n=r._config;else return localeFamilies[t.parentLocale]||(localeFamilies[t.parentLocale]=[]),localeFamilies[t.parentLocale].push({name:e,config:t}),null;return locales[e]=new Locale(mergeConfigs(n,t)),localeFamilies[e]&&localeFamilies[e].forEach(function(i){defineLocale(i.name,i.config)}),getSetGlobalLocale(e),locales[e]}else return delete locales[e],null}function updateLocale(e,t){if(t!=null){var r,n,i=baseConfig;locales[e]!=null&&locales[e].parentLocale!=null?locales[e].set(mergeConfigs(locales[e]._config,t)):(n=loadLocale(e),n!=null&&(i=n._config),t=mergeConfigs(i,t),n==null&&(t.abbr=e),r=new Locale(t),r.parentLocale=locales[e],locales[e]=r),getSetGlobalLocale(e)}else locales[e]!=null&&(locales[e].parentLocale!=null?(locales[e]=locales[e].parentLocale,e===getSetGlobalLocale()&&getSetGlobalLocale(e)):locales[e]!=null&&delete locales[e]);return locales[e]}function getLocale(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return globalLocale;if(!isArray(e)){if(t=loadLocale(e),t)return t;e=[e]}return chooseLocale(e)}function listLocales(){return keys(locales)}function checkOverflow(e){var t,r=e._a;return r&&getParsingFlags(e).overflow===-2&&(t=r[MONTH]<0||r[MONTH]>11?MONTH:r[DATE]<1||r[DATE]>daysInMonth(r[YEAR],r[MONTH])?DATE:r[HOUR]<0||r[HOUR]>24||r[HOUR]===24&&(r[MINUTE]!==0||r[SECOND]!==0||r[MILLISECOND]!==0)?HOUR:r[MINUTE]<0||r[MINUTE]>59?MINUTE:r[SECOND]<0||r[SECOND]>59?SECOND:r[MILLISECOND]<0||r[MILLISECOND]>999?MILLISECOND:-1,getParsingFlags(e)._overflowDayOfYear&&(t<YEAR||t>DATE)&&(t=DATE),getParsingFlags(e)._overflowWeeks&&t===-1&&(t=WEEK),getParsingFlags(e)._overflowWeekday&&t===-1&&(t=WEEKDAY),getParsingFlags(e).overflow=t),e}var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((-?\d+)/i,rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,obsOffsets={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function configFromISO(e){var t,r,n=e._i,i=extendedIsoRegex.exec(n)||basicIsoRegex.exec(n),a,l,d,p,m=isoDates.length,A=isoTimes.length;if(i){for(getParsingFlags(e).iso=!0,t=0,r=m;t<r;t++)if(isoDates[t][1].exec(i[1])){l=isoDates[t][0],a=isoDates[t][2]!==!1;break}if(l==null){e._isValid=!1;return}if(i[3]){for(t=0,r=A;t<r;t++)if(isoTimes[t][1].exec(i[3])){d=(i[2]||" ")+isoTimes[t][0];break}if(d==null){e._isValid=!1;return}}if(!a&&d!=null){e._isValid=!1;return}if(i[4])if(tzRegex.exec(i[4]))p="Z";else{e._isValid=!1;return}e._f=l+(d||"")+(p||""),configFromStringAndFormat(e)}else e._isValid=!1}function extractFromRFC2822Strings(e,t,r,n,i,a){var l=[untruncateYear(e),defaultLocaleMonthsShort.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(i,10)];return a&&l.push(parseInt(a,10)),l}function untruncateYear(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function preprocessRFC2822(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function checkWeekday(e,t,r){if(e){var n=defaultLocaleWeekdaysShort.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(n!==i)return getParsingFlags(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function calculateOffset(e,t,r){if(e)return obsOffsets[e];if(t)return 0;var n=parseInt(r,10),i=n%100,a=(n-i)/100;return a*60+i}function configFromRFC2822(e){var t=rfc2822.exec(preprocessRFC2822(e._i)),r;if(t){if(r=extractFromRFC2822Strings(t[4],t[3],t[2],t[5],t[6],t[7]),!checkWeekday(t[1],r,e))return;e._a=r,e._tzm=calculateOffset(t[8],t[9],t[10]),e._d=createUTCDate.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),getParsingFlags(e).rfc2822=!0}else e._isValid=!1}function configFromString(e){var t=aspNetJsonRegex.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(configFromISO(e),e._isValid===!1)delete e._isValid;else return;if(configFromRFC2822(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:hooks.createFromInputFallback(e)}hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function defaults(e,t,r){return e??t??r}function currentDateArray(e){var t=new Date(hooks.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function configFromArray(e){var t,r,n=[],i,a,l;if(!e._d){for(i=currentDateArray(e),e._w&&e._a[DATE]==null&&e._a[MONTH]==null&&dayOfYearFromWeekInfo(e),e._dayOfYear!=null&&(l=defaults(e._a[YEAR],i[YEAR]),(e._dayOfYear>daysInYear(l)||e._dayOfYear===0)&&(getParsingFlags(e)._overflowDayOfYear=!0),r=createUTCDate(l,0,e._dayOfYear),e._a[MONTH]=r.getUTCMonth(),e._a[DATE]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=n[t]=i[t];for(;t<7;t++)e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[HOUR]===24&&e._a[MINUTE]===0&&e._a[SECOND]===0&&e._a[MILLISECOND]===0&&(e._nextDay=!0,e._a[HOUR]=0),e._d=(e._useUTC?createUTCDate:createDate).apply(null,n),a=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[HOUR]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==a&&(getParsingFlags(e).weekdayMismatch=!0)}}function dayOfYearFromWeekInfo(e){var t,r,n,i,a,l,d,p,m;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(a=1,l=4,r=defaults(t.GG,e._a[YEAR],weekOfYear(createLocal(),1,4).year),n=defaults(t.W,1),i=defaults(t.E,1),(i<1||i>7)&&(p=!0)):(a=e._locale._week.dow,l=e._locale._week.doy,m=weekOfYear(createLocal(),a,l),r=defaults(t.gg,e._a[YEAR],m.year),n=defaults(t.w,m.week),t.d!=null?(i=t.d,(i<0||i>6)&&(p=!0)):t.e!=null?(i=t.e+a,(t.e<0||t.e>6)&&(p=!0)):i=a),n<1||n>weeksInYear(r,a,l)?getParsingFlags(e)._overflowWeeks=!0:p!=null?getParsingFlags(e)._overflowWeekday=!0:(d=dayOfYearFromWeeks(r,n,i,a,l),e._a[YEAR]=d.year,e._dayOfYear=d.dayOfYear)}hooks.ISO_8601=function(){};hooks.RFC_2822=function(){};function configFromStringAndFormat(e){if(e._f===hooks.ISO_8601){configFromISO(e);return}if(e._f===hooks.RFC_2822){configFromRFC2822(e);return}e._a=[],getParsingFlags(e).empty=!0;var t=""+e._i,r,n,i,a,l,d=t.length,p=0,m,A;for(i=expandFormat(e._f,e._locale).match(formattingTokens)||[],A=i.length,r=0;r<A;r++)a=i[r],n=(t.match(getParseRegexForToken(a,e))||[])[0],n&&(l=t.substr(0,t.indexOf(n)),l.length>0&&getParsingFlags(e).unusedInput.push(l),t=t.slice(t.indexOf(n)+n.length),p+=n.length),formatTokenFunctions[a]?(n?getParsingFlags(e).empty=!1:getParsingFlags(e).unusedTokens.push(a),addTimeToArrayFromToken(a,n,e)):e._strict&&!n&&getParsingFlags(e).unusedTokens.push(a);getParsingFlags(e).charsLeftOver=d-p,t.length>0&&getParsingFlags(e).unusedInput.push(t),e._a[HOUR]<=12&&getParsingFlags(e).bigHour===!0&&e._a[HOUR]>0&&(getParsingFlags(e).bigHour=void 0),getParsingFlags(e).parsedDateParts=e._a.slice(0),getParsingFlags(e).meridiem=e._meridiem,e._a[HOUR]=meridiemFixWrap(e._locale,e._a[HOUR],e._meridiem),m=getParsingFlags(e).era,m!==null&&(e._a[YEAR]=e._locale.erasConvertYear(m,e._a[YEAR])),configFromArray(e),checkOverflow(e)}function meridiemFixWrap(e,t,r){var n;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(n=e.isPM(r),n&&t<12&&(t+=12),!n&&t===12&&(t=0)),t)}function configFromStringAndArray(e){var t,r,n,i,a,l,d=!1,p=e._f.length;if(p===0){getParsingFlags(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<p;i++)a=0,l=!1,t=copyConfig({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],configFromStringAndFormat(t),isValid(t)&&(l=!0),a+=getParsingFlags(t).charsLeftOver,a+=getParsingFlags(t).unusedTokens.length*10,getParsingFlags(t).score=a,d?a<n&&(n=a,r=t):(n==null||a<n||l)&&(n=a,r=t,l&&(d=!0));extend(e,r||t)}function configFromObject(e){if(!e._d){var t=normalizeObjectUnits(e._i),r=t.day===void 0?t.date:t.day;e._a=map([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(n){return n&&parseInt(n,10)}),configFromArray(e)}}function createFromConfig(e){var t=new Moment(checkOverflow(prepareConfig(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function prepareConfig(e){var t=e._i,r=e._f;return e._locale=e._locale||getLocale(e._l),t===null||r===void 0&&t===""?createInvalid({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),isMoment(t)?new Moment(checkOverflow(t)):(isDate(t)?e._d=t:isArray(r)?configFromStringAndArray(e):r?configFromStringAndFormat(e):configFromInput(e),isValid(e)||(e._d=null),e))}function configFromInput(e){var t=e._i;isUndefined(t)?e._d=new Date(hooks.now()):isDate(t)?e._d=new Date(t.valueOf()):typeof t=="string"?configFromString(e):isArray(t)?(e._a=map(t.slice(0),function(r){return parseInt(r,10)}),configFromArray(e)):isObject(t)?configFromObject(e):isNumber(t)?e._d=new Date(t):hooks.createFromInputFallback(e)}function createLocalOrUTC(e,t,r,n,i){var a={};return(t===!0||t===!1)&&(n=t,t=void 0),(r===!0||r===!1)&&(n=r,r=void 0),(isObject(e)&&isObjectEmpty(e)||isArray(e)&&e.length===0)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=r,a._i=e,a._f=t,a._strict=n,createFromConfig(a)}function createLocal(e,t,r,n){return createLocalOrUTC(e,t,r,n,!1)}var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=createLocal.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:createInvalid()}),prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=createLocal.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:createInvalid()});function pickBy(e,t){var r,n;if(t.length===1&&isArray(t[0])&&(t=t[0]),!t.length)return createLocal();for(r=t[0],n=1;n<t.length;++n)(!t[n].isValid()||t[n][e](r))&&(r=t[n]);return r}function min(){var e=[].slice.call(arguments,0);return pickBy("isBefore",e)}function max(){var e=[].slice.call(arguments,0);return pickBy("isAfter",e)}var now=function(){return Date.now?Date.now():+new Date},ordering=["year","quarter","month","week","day","hour","minute","second","millisecond"];function isDurationValid(e){var t,r=!1,n,i=ordering.length;for(t in e)if(hasOwnProp(e,t)&&!(indexOf.call(ordering,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(n=0;n<i;++n)if(e[ordering[n]]){if(r)return!1;parseFloat(e[ordering[n]])!==toInt(e[ordering[n]])&&(r=!0)}return!0}function isValid$1(){return this._isValid}function createInvalid$1(){return createDuration(NaN)}function Duration(e){var t=normalizeObjectUnits(e),r=t.year||0,n=t.quarter||0,i=t.month||0,a=t.week||t.isoWeek||0,l=t.day||0,d=t.hour||0,p=t.minute||0,m=t.second||0,A=t.millisecond||0;this._isValid=isDurationValid(t),this._milliseconds=+A+m*1e3+p*6e4+d*1e3*60*60,this._days=+l+a*7,this._months=+i+n*3+r*12,this._data={},this._locale=getLocale(),this._bubble()}function isDuration(e){return e instanceof Duration}function absRound(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function compareArrays(e,t,r){var n=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),a=0,l;for(l=0;l<n;l++)toInt(e[l])!==toInt(t[l])&&a++;return a+i}function offset(e,t){addFormatToken(e,0,0,function(){var r=this.utcOffset(),n="+";return r<0&&(r=-r,n="-"),n+zeroFill(~~(r/60),2)+t+zeroFill(~~r%60,2)})}offset("Z",":");offset("ZZ","");addRegexToken("Z",matchShortOffset);addRegexToken("ZZ",matchShortOffset);addParseToken(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=offsetFromString(matchShortOffset,e)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(e,t){var r=(t||"").match(e),n,i,a;return r===null?null:(n=r[r.length-1]||[],i=(n+"").match(chunkOffset)||["-",0,0],a=+(i[1]*60)+toInt(i[2]),a===0?0:i[0]==="+"?a:-a)}function cloneWithOffset(e,t){var r,n;return t._isUTC?(r=t.clone(),n=(isMoment(e)||isDate(e)?e.valueOf():createLocal(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+n),hooks.updateOffset(r,!1),r):createLocal(e).local()}function getDateOffset(e){return-Math.round(e._d.getTimezoneOffset())}hooks.updateOffset=function(){};function getSetOffset(e,t,r){var n=this._offset||0,i;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=offsetFromString(matchShortOffset,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(i=getDateOffset(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),n!==e&&(!t||this._changeInProgress?addSubtract(this,createDuration(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,hooks.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:getDateOffset(this)}function getSetZone(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function setOffsetToUTC(e){return this.utcOffset(0,e)}function setOffsetToLocal(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=offsetFromString(matchOffset,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function hasAlignedHourOffset(e){return this.isValid()?(e=e?createLocal(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var e={},t;return copyConfig(e,this),e=prepareConfig(e),e._a?(t=e._isUTC?createUTC(e._a):createLocal(e._a),this._isDSTShifted=this.isValid()&&compareArrays(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function isLocal(){return this.isValid()?!this._isUTC:!1}function isUtcOffset(){return this.isValid()?this._isUTC:!1}function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:!1}var aspNetRegex=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,isoRegex=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(e,t){var r=e,n=null,i,a,l;return isDuration(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:isNumber(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(n=aspNetRegex.exec(e))?(i=n[1]==="-"?-1:1,r={y:0,d:toInt(n[DATE])*i,h:toInt(n[HOUR])*i,m:toInt(n[MINUTE])*i,s:toInt(n[SECOND])*i,ms:toInt(absRound(n[MILLISECOND]*1e3))*i}):(n=isoRegex.exec(e))?(i=n[1]==="-"?-1:1,r={y:parseIso(n[2],i),M:parseIso(n[3],i),w:parseIso(n[4],i),d:parseIso(n[5],i),h:parseIso(n[6],i),m:parseIso(n[7],i),s:parseIso(n[8],i)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(l=momentsDifference(createLocal(r.from),createLocal(r.to)),r={},r.ms=l.milliseconds,r.M=l.months),a=new Duration(r),isDuration(e)&&hasOwnProp(e,"_locale")&&(a._locale=e._locale),isDuration(e)&&hasOwnProp(e,"_isValid")&&(a._isValid=e._isValid),a}createDuration.fn=Duration.prototype;createDuration.invalid=createInvalid$1;function parseIso(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function positiveMomentsDifference(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function momentsDifference(e,t){var r;return e.isValid()&&t.isValid()?(t=cloneWithOffset(t,e),e.isBefore(t)?r=positiveMomentsDifference(e,t):(r=positiveMomentsDifference(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function createAdder(e,t){return function(r,n){var i,a;return n!==null&&!isNaN(+n)&&(deprecateSimple(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=r,r=n,n=a),i=createDuration(r,n),addSubtract(this,i,e),this}}function addSubtract(e,t,r,n){var i=t._milliseconds,a=absRound(t._days),l=absRound(t._months);e.isValid()&&(n=n??!0,l&&setMonth(e,get(e,"Month")+l*r),a&&set$1(e,"Date",get(e,"Date")+a*r),i&&e._d.setTime(e._d.valueOf()+i*r),n&&hooks.updateOffset(e,a||l))}var add=createAdder(1,"add"),subtract=createAdder(-1,"subtract");function isString(e){return typeof e=="string"||e instanceof String}function isMomentInput(e){return isMoment(e)||isDate(e)||isString(e)||isNumber(e)||isNumberOrStringArray(e)||isMomentInputObject(e)||e===null||e===void 0}function isMomentInputObject(e){var t=isObject(e)&&!isObjectEmpty(e),r=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,a,l=n.length;for(i=0;i<l;i+=1)a=n[i],r=r||hasOwnProp(e,a);return t&&r}function isNumberOrStringArray(e){var t=isArray(e),r=!1;return t&&(r=e.filter(function(n){return!isNumber(n)&&isString(e)}).length===0),t&&r}function isCalendarSpec(e){var t=isObject(e)&&!isObjectEmpty(e),r=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,a;for(i=0;i<n.length;i+=1)a=n[i],r=r||hasOwnProp(e,a);return t&&r}function getCalendarFormat(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function calendar$1(e,t){arguments.length===1&&(arguments[0]?isMomentInput(arguments[0])?(e=arguments[0],t=void 0):isCalendarSpec(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||createLocal(),n=cloneWithOffset(r,this).startOf("day"),i=hooks.calendarFormat(this,n)||"sameElse",a=t&&(isFunction(t[i])?t[i].call(this,r):t[i]);return this.format(a||this.localeData().calendar(i,this,createLocal(r)))}function clone(){return new Moment(this)}function isAfter(e,t){var r=isMoment(e)?e:createLocal(e);return this.isValid()&&r.isValid()?(t=normalizeUnits(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function isBefore(e,t){var r=isMoment(e)?e:createLocal(e);return this.isValid()&&r.isValid()?(t=normalizeUnits(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function isBetween(e,t,r,n){var i=isMoment(e)?e:createLocal(e),a=isMoment(t)?t:createLocal(t);return this.isValid()&&i.isValid()&&a.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(i,r):!this.isBefore(i,r))&&(n[1]===")"?this.isBefore(a,r):!this.isAfter(a,r))):!1}function isSame(e,t){var r=isMoment(e)?e:createLocal(e),n;return this.isValid()&&r.isValid()?(t=normalizeUnits(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf())):!1}function isSameOrAfter(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function isSameOrBefore(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function diff(e,t,r){var n,i,a;if(!this.isValid())return NaN;if(n=cloneWithOffset(e,this),!n.isValid())return NaN;switch(i=(n.utcOffset()-this.utcOffset())*6e4,t=normalizeUnits(t),t){case"year":a=monthDiff(this,n)/12;break;case"month":a=monthDiff(this,n);break;case"quarter":a=monthDiff(this,n)/3;break;case"second":a=(this-n)/1e3;break;case"minute":a=(this-n)/6e4;break;case"hour":a=(this-n)/36e5;break;case"day":a=(this-n-i)/864e5;break;case"week":a=(this-n-i)/6048e5;break;default:a=this-n}return r?a:absFloor(a)}function monthDiff(e,t){if(e.date()<t.date())return-monthDiff(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(r,"months"),i,a;return t-n<0?(i=e.clone().add(r-1,"months"),a=(t-n)/(n-i)):(i=e.clone().add(r+1,"months"),a=(t-n)/(i-n)),-(r+a)||0}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?formatMoment(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):isFunction(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",formatMoment(r,"Z")):formatMoment(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function inspect(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,n,i,a;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",a=t+'[")]',this.format(r+n+i+a)}function format(e){e||(e=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat);var t=formatMoment(this,e);return this.localeData().postformat(t)}function from(e,t){return this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())?createDuration({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function fromNow(e){return this.from(createLocal(),e)}function to$1(e,t){return this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())?createDuration({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function toNow(e){return this.to(createLocal(),e)}function locale(e){var t;return e===void 0?this._locale._abbr:(t=getLocale(e),t!=null&&(this._locale=t),this)}var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function localeData(){return this._locale}var MS_PER_SECOND=1e3,MS_PER_MINUTE=60*MS_PER_SECOND,MS_PER_HOUR=60*MS_PER_MINUTE,MS_PER_400_YEARS=(365*400+97)*24*MS_PER_HOUR;function mod$1(e,t){return(e%t+t)%t}function localStartOfDate(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-MS_PER_400_YEARS:new Date(e,t,r).valueOf()}function utcStartOfDate(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-MS_PER_400_YEARS:Date.UTC(e,t,r)}function startOf(e){var t,r;if(e=normalizeUnits(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?utcStartOfDate:localStartOfDate,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=mod$1(t+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR);break;case"minute":t=this._d.valueOf(),t-=mod$1(t,MS_PER_MINUTE);break;case"second":t=this._d.valueOf(),t-=mod$1(t,MS_PER_SECOND);break}return this._d.setTime(t),hooks.updateOffset(this,!0),this}function endOf(e){var t,r;if(e=normalizeUnits(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?utcStartOfDate:localStartOfDate,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=MS_PER_HOUR-mod$1(t+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR)-1;break;case"minute":t=this._d.valueOf(),t+=MS_PER_MINUTE-mod$1(t,MS_PER_MINUTE)-1;break;case"second":t=this._d.valueOf(),t+=MS_PER_SECOND-mod$1(t,MS_PER_SECOND)-1;break}return this._d.setTime(t),hooks.updateOffset(this,!0),this}function valueOf(){return this._d.valueOf()-(this._offset||0)*6e4}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function toObject(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$2(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}addFormatToken("N",0,0,"eraAbbr");addFormatToken("NN",0,0,"eraAbbr");addFormatToken("NNN",0,0,"eraAbbr");addFormatToken("NNNN",0,0,"eraName");addFormatToken("NNNNN",0,0,"eraNarrow");addFormatToken("y",["y",1],"yo","eraYear");addFormatToken("y",["yy",2],0,"eraYear");addFormatToken("y",["yyy",3],0,"eraYear");addFormatToken("y",["yyyy",4],0,"eraYear");addRegexToken("N",matchEraAbbr);addRegexToken("NN",matchEraAbbr);addRegexToken("NNN",matchEraAbbr);addRegexToken("NNNN",matchEraName);addRegexToken("NNNNN",matchEraNarrow);addParseToken(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,n){var i=r._locale.erasParse(e,n,r._strict);i?getParsingFlags(r).era=i:getParsingFlags(r).invalidEra=e});addRegexToken("y",matchUnsigned);addRegexToken("yy",matchUnsigned);addRegexToken("yyy",matchUnsigned);addRegexToken("yyyy",matchUnsigned);addRegexToken("yo",matchEraYearOrdinal);addParseToken(["y","yy","yyy","yyyy"],YEAR);addParseToken(["yo"],function(e,t,r,n){var i;r._locale._eraYearOrdinalRegex&&(i=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[YEAR]=r._locale.eraYearOrdinalParse(e,i):t[YEAR]=parseInt(e,10)});function localeEras(e,t){var r,n,i,a=this._eras||getLocale("en")._eras;for(r=0,n=a.length;r<n;++r)switch(typeof a[r].since==="string"&&(i=hooks(a[r].since).startOf("day"),a[r].since=i.valueOf()),typeof a[r].until){case"undefined":a[r].until=1/0;break;case"string":i=hooks(a[r].until).startOf("day").valueOf(),a[r].until=i.valueOf();break}return a}function localeErasParse(e,t,r){var n,i,a=this.eras(),l,d,p;for(e=e.toUpperCase(),n=0,i=a.length;n<i;++n)if(l=a[n].name.toUpperCase(),d=a[n].abbr.toUpperCase(),p=a[n].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(d===e)return a[n];break;case"NNNN":if(l===e)return a[n];break;case"NNNNN":if(p===e)return a[n];break}else if([l,d,p].indexOf(e)>=0)return a[n]}function localeErasConvertYear(e,t){var r=e.since<=e.until?1:-1;return t===void 0?hooks(e.since).year():hooks(e.since).year()+(t-e.offset)*r}function getEraName(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].name;return""}function getEraNarrow(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].narrow;return""}function getEraAbbr(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].abbr;return""}function getEraYear(){var e,t,r,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(r=i[e].since<=i[e].until?1:-1,n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until||i[e].until<=n&&n<=i[e].since)return(this.year()-hooks(i[e].since).year())*r+i[e].offset;return this.year()}function erasNameRegex(e){return hasOwnProp(this,"_erasNameRegex")||computeErasParse.call(this),e?this._erasNameRegex:this._erasRegex}function erasAbbrRegex(e){return hasOwnProp(this,"_erasAbbrRegex")||computeErasParse.call(this),e?this._erasAbbrRegex:this._erasRegex}function erasNarrowRegex(e){return hasOwnProp(this,"_erasNarrowRegex")||computeErasParse.call(this),e?this._erasNarrowRegex:this._erasRegex}function matchEraAbbr(e,t){return t.erasAbbrRegex(e)}function matchEraName(e,t){return t.erasNameRegex(e)}function matchEraNarrow(e,t){return t.erasNarrowRegex(e)}function matchEraYearOrdinal(e,t){return t._eraYearOrdinalRegex||matchUnsigned}function computeErasParse(){var e=[],t=[],r=[],n=[],i,a,l,d,p,m=this.eras();for(i=0,a=m.length;i<a;++i)l=regexEscape(m[i].name),d=regexEscape(m[i].abbr),p=regexEscape(m[i].narrow),t.push(l),e.push(d),r.push(p),n.push(l),n.push(d),n.push(p);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100});addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100});function addWeekYearFormatToken(e,t){addFormatToken(0,[e,e.length],0,t)}addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addRegexToken("G",matchSigned);addRegexToken("g",matchSigned);addRegexToken("GG",match1to2,match2);addRegexToken("gg",match1to2,match2);addRegexToken("GGGG",match1to4,match4);addRegexToken("gggg",match1to4,match4);addRegexToken("GGGGG",match1to6,match6);addRegexToken("ggggg",match1to6,match6);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,n){t[n.substr(0,2)]=toInt(e)});addWeekParseToken(["gg","GG"],function(e,t,r,n){t[n]=hooks.parseTwoDigitYear(e)});function getSetWeekYear(e){return getSetWeekYearHelper.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(e){return getSetWeekYearHelper.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getISOWeeksInISOWeekYear(){return weeksInYear(this.isoWeekYear(),1,4)}function getWeeksInYear(){var e=this.localeData()._week;return weeksInYear(this.year(),e.dow,e.doy)}function getWeeksInWeekYear(){var e=this.localeData()._week;return weeksInYear(this.weekYear(),e.dow,e.doy)}function getSetWeekYearHelper(e,t,r,n,i){var a;return e==null?weekOfYear(this,n,i).year:(a=weeksInYear(e,n,i),t>a&&(t=a),setWeekAll.call(this,e,t,r,n,i))}function setWeekAll(e,t,r,n,i){var a=dayOfYearFromWeeks(e,t,r,n,i),l=createUTCDate(a.year,0,a.dayOfYear);return this.year(l.getUTCFullYear()),this.month(l.getUTCMonth()),this.date(l.getUTCDate()),this}addFormatToken("Q",0,"Qo","quarter");addRegexToken("Q",match1);addParseToken("Q",function(e,t){t[MONTH]=(toInt(e)-1)*3});function getSetQuarter(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}addFormatToken("D",["DD",2],"Do","date");addRegexToken("D",match1to2,match1to2NoLeadingZero);addRegexToken("DD",match1to2,match2);addRegexToken("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});addParseToken(["D","DD"],DATE);addParseToken("Do",function(e,t){t[DATE]=toInt(e.match(match1to2)[0])});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addRegexToken("DDD",match1to3);addRegexToken("DDDD",match3);addParseToken(["DDD","DDDD"],function(e,t,r){r._dayOfYear=toInt(e)});function getSetDayOfYear(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}addFormatToken("m",["mm",2],0,"minute");addRegexToken("m",match1to2,match1to2HasZero);addRegexToken("mm",match1to2,match2);addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second");addRegexToken("s",match1to2,match1to2HasZero);addRegexToken("ss",match1to2,match2);addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",!1);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)});addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)});addFormatToken(0,["SSS",3],0,"millisecond");addFormatToken(0,["SSSS",4],0,function(){return this.millisecond()*10});addFormatToken(0,["SSSSS",5],0,function(){return this.millisecond()*100});addFormatToken(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});addFormatToken(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});addFormatToken(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});addFormatToken(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});addRegexToken("S",match1to3,match1);addRegexToken("SS",match1to3,match2);addRegexToken("SSS",match1to3,match3);var token,getSetMillisecond;for(token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);function parseMs(e,t){t[MILLISECOND]=toInt(("0."+e)*1e3)}for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);getSetMillisecond=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}var proto=Moment.prototype;proto.add=add;proto.calendar=calendar$1;proto.clone=clone;proto.diff=diff;proto.endOf=endOf;proto.format=format;proto.from=from;proto.fromNow=fromNow;proto.to=to$1;proto.toNow=toNow;proto.get=stringGet;proto.invalidAt=invalidAt;proto.isAfter=isAfter;proto.isBefore=isBefore;proto.isBetween=isBetween;proto.isSame=isSame;proto.isSameOrAfter=isSameOrAfter;proto.isSameOrBefore=isSameOrBefore;proto.isValid=isValid$2;proto.lang=lang;proto.locale=locale;proto.localeData=localeData;proto.max=prototypeMax;proto.min=prototypeMin;proto.parsingFlags=parsingFlags;proto.set=stringSet;proto.startOf=startOf;proto.subtract=subtract;proto.toArray=toArray;proto.toObject=toObject;proto.toDate=toDate;proto.toISOString=toISOString;proto.inspect=inspect;typeof Symbol<"u"&&Symbol.for!=null&&(proto[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});proto.toJSON=toJSON;proto.toString=toString;proto.unix=unix;proto.valueOf=valueOf;proto.creationData=creationData;proto.eraName=getEraName;proto.eraNarrow=getEraNarrow;proto.eraAbbr=getEraAbbr;proto.eraYear=getEraYear;proto.year=getSetYear;proto.isLeapYear=getIsLeapYear;proto.weekYear=getSetWeekYear;proto.isoWeekYear=getSetISOWeekYear;proto.quarter=proto.quarters=getSetQuarter;proto.month=getSetMonth;proto.daysInMonth=getDaysInMonth;proto.week=proto.weeks=getSetWeek;proto.isoWeek=proto.isoWeeks=getSetISOWeek;proto.weeksInYear=getWeeksInYear;proto.weeksInWeekYear=getWeeksInWeekYear;proto.isoWeeksInYear=getISOWeeksInYear;proto.isoWeeksInISOWeekYear=getISOWeeksInISOWeekYear;proto.date=getSetDayOfMonth;proto.day=proto.days=getSetDayOfWeek;proto.weekday=getSetLocaleDayOfWeek;proto.isoWeekday=getSetISODayOfWeek;proto.dayOfYear=getSetDayOfYear;proto.hour=proto.hours=getSetHour;proto.minute=proto.minutes=getSetMinute;proto.second=proto.seconds=getSetSecond;proto.millisecond=proto.milliseconds=getSetMillisecond;proto.utcOffset=getSetOffset;proto.utc=setOffsetToUTC;proto.local=setOffsetToLocal;proto.parseZone=setOffsetToParsedOffset;proto.hasAlignedHourOffset=hasAlignedHourOffset;proto.isDST=isDaylightSavingTime;proto.isLocal=isLocal;proto.isUtcOffset=isUtcOffset;proto.isUtc=isUtc;proto.isUTC=isUtc;proto.zoneAbbr=getZoneAbbr;proto.zoneName=getZoneName;proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth);proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth);proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear);proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone);proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);function createUnix(e){return createLocal(e*1e3)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(e){return e}var proto$1=Locale.prototype;proto$1.calendar=calendar;proto$1.longDateFormat=longDateFormat;proto$1.invalidDate=invalidDate;proto$1.ordinal=ordinal;proto$1.preparse=preParsePostFormat;proto$1.postformat=preParsePostFormat;proto$1.relativeTime=relativeTime;proto$1.pastFuture=pastFuture;proto$1.set=set;proto$1.eras=localeEras;proto$1.erasParse=localeErasParse;proto$1.erasConvertYear=localeErasConvertYear;proto$1.erasAbbrRegex=erasAbbrRegex;proto$1.erasNameRegex=erasNameRegex;proto$1.erasNarrowRegex=erasNarrowRegex;proto$1.months=localeMonths;proto$1.monthsShort=localeMonthsShort;proto$1.monthsParse=localeMonthsParse;proto$1.monthsRegex=monthsRegex;proto$1.monthsShortRegex=monthsShortRegex;proto$1.week=localeWeek;proto$1.firstDayOfYear=localeFirstDayOfYear;proto$1.firstDayOfWeek=localeFirstDayOfWeek;proto$1.weekdays=localeWeekdays;proto$1.weekdaysMin=localeWeekdaysMin;proto$1.weekdaysShort=localeWeekdaysShort;proto$1.weekdaysParse=localeWeekdaysParse;proto$1.weekdaysRegex=weekdaysRegex;proto$1.weekdaysShortRegex=weekdaysShortRegex;proto$1.weekdaysMinRegex=weekdaysMinRegex;proto$1.isPM=localeIsPM;proto$1.meridiem=localeMeridiem;function get$1(e,t,r,n){var i=getLocale(),a=createUTC().set(n,t);return i[r](a,e)}function listMonthsImpl(e,t,r){if(isNumber(e)&&(t=e,e=void 0),e=e||"",t!=null)return get$1(e,t,r,"month");var n,i=[];for(n=0;n<12;n++)i[n]=get$1(e,n,r,"month");return i}function listWeekdaysImpl(e,t,r,n){typeof e=="boolean"?(isNumber(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,isNumber(t)&&(r=t,t=void 0),t=t||"");var i=getLocale(),a=e?i._week.dow:0,l,d=[];if(r!=null)return get$1(t,(r+a)%7,n,"day");for(l=0;l<7;l++)d[l]=get$1(t,(l+a)%7,n,"day");return d}function listMonths(e,t){return listMonthsImpl(e,t,"months")}function listMonthsShort(e,t){return listMonthsImpl(e,t,"monthsShort")}function listWeekdays(e,t,r){return listWeekdaysImpl(e,t,r,"weekdays")}function listWeekdaysShort(e,t,r){return listWeekdaysImpl(e,t,r,"weekdaysShort")}function listWeekdaysMin(e,t,r){return listWeekdaysImpl(e,t,r,"weekdaysMin")}getSetGlobalLocale("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=toInt(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale);hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var mathAbs=Math.abs;function abs(){var e=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),e.milliseconds=mathAbs(e.milliseconds),e.seconds=mathAbs(e.seconds),e.minutes=mathAbs(e.minutes),e.hours=mathAbs(e.hours),e.months=mathAbs(e.months),e.years=mathAbs(e.years),this}function addSubtract$1(e,t,r,n){var i=createDuration(t,r);return e._milliseconds+=n*i._milliseconds,e._days+=n*i._days,e._months+=n*i._months,e._bubble()}function add$1(e,t){return addSubtract$1(this,e,t,1)}function subtract$1(e,t){return addSubtract$1(this,e,t,-1)}function absCeil(e){return e<0?Math.floor(e):Math.ceil(e)}function bubble(){var e=this._milliseconds,t=this._days,r=this._months,n=this._data,i,a,l,d,p;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=absCeil(monthsToDays(r)+t)*864e5,t=0,r=0),n.milliseconds=e%1e3,i=absFloor(e/1e3),n.seconds=i%60,a=absFloor(i/60),n.minutes=a%60,l=absFloor(a/60),n.hours=l%24,t+=absFloor(l/24),p=absFloor(daysToMonths(t)),r+=p,t-=absCeil(monthsToDays(p)),d=absFloor(r/12),r%=12,n.days=t,n.months=r,n.years=d,this}function daysToMonths(e){return e*4800/146097}function monthsToDays(e){return e*146097/4800}function as$1(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if(e=normalizeUnits(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+n/864e5,r=this._months+daysToMonths(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(monthsToDays(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}function makeAs(e){return function(){return this.as(e)}}var asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asQuarters=makeAs("Q"),asYears=makeAs("y"),valueOf$1=asMilliseconds;function clone$1(){return createDuration(this)}function get$2(e){return e=normalizeUnits(e),this.isValid()?this[e+"s"]():NaN}function makeGetter(e){return function(){return this.isValid()?this._data[e]:NaN}}var milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round=Math.round,thresholds={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function substituteTimeAgo(e,t,r,n,i){return i.relativeTime(t||1,!!r,e,n)}function relativeTime$1(e,t,r,n){var i=createDuration(e).abs(),a=round(i.as("s")),l=round(i.as("m")),d=round(i.as("h")),p=round(i.as("d")),m=round(i.as("M")),A=round(i.as("w")),x=round(i.as("y")),I=a<=r.ss&&["s",a]||a<r.s&&["ss",a]||l<=1&&["m"]||l<r.m&&["mm",l]||d<=1&&["h"]||d<r.h&&["hh",d]||p<=1&&["d"]||p<r.d&&["dd",p];return r.w!=null&&(I=I||A<=1&&["w"]||A<r.w&&["ww",A]),I=I||m<=1&&["M"]||m<r.M&&["MM",m]||x<=1&&["y"]||["yy",x],I[2]=t,I[3]=+e>0,I[4]=n,substituteTimeAgo.apply(null,I)}function getSetRelativeTimeRounding(e){return e===void 0?round:typeof e=="function"?(round=e,!0):!1}function getSetRelativeTimeThreshold(e,t){return thresholds[e]===void 0?!1:t===void 0?thresholds[e]:(thresholds[e]=t,e==="s"&&(thresholds.ss=t-1),!0)}function humanize(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,n=thresholds,i,a;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(n=Object.assign({},thresholds,t),t.s!=null&&t.ss==null&&(n.ss=t.s-1)),i=this.localeData(),a=relativeTime$1(this,!r,n,i),r&&(a=i.pastFuture(+this,a)),i.postformat(a)}var abs$1=Math.abs;function sign(e){return(e>0)-(e<0)||+e}function toISOString$1(){if(!this.isValid())return this.localeData().invalidDate();var e=abs$1(this._milliseconds)/1e3,t=abs$1(this._days),r=abs$1(this._months),n,i,a,l,d=this.asSeconds(),p,m,A,x;return d?(n=absFloor(e/60),i=absFloor(n/60),e%=60,n%=60,a=absFloor(r/12),r%=12,l=e?e.toFixed(3).replace(/\.?0+$/,""):"",p=d<0?"-":"",m=sign(this._months)!==sign(d)?"-":"",A=sign(this._days)!==sign(d)?"-":"",x=sign(this._milliseconds)!==sign(d)?"-":"",p+"P"+(a?m+a+"Y":"")+(r?m+r+"M":"")+(t?A+t+"D":"")+(i||n||e?"T":"")+(i?x+i+"H":"")+(n?x+n+"M":"")+(e?x+l+"S":"")):"P0D"}var proto$2=Duration.prototype;proto$2.isValid=isValid$1;proto$2.abs=abs;proto$2.add=add$1;proto$2.subtract=subtract$1;proto$2.as=as$1;proto$2.asMilliseconds=asMilliseconds;proto$2.asSeconds=asSeconds;proto$2.asMinutes=asMinutes;proto$2.asHours=asHours;proto$2.asDays=asDays;proto$2.asWeeks=asWeeks;proto$2.asMonths=asMonths;proto$2.asQuarters=asQuarters;proto$2.asYears=asYears;proto$2.valueOf=valueOf$1;proto$2._bubble=bubble;proto$2.clone=clone$1;proto$2.get=get$2;proto$2.milliseconds=milliseconds;proto$2.seconds=seconds;proto$2.minutes=minutes;proto$2.hours=hours;proto$2.days=days;proto$2.weeks=weeks;proto$2.months=months;proto$2.years=years;proto$2.humanize=humanize;proto$2.toISOString=toISOString$1;proto$2.toString=toISOString$1;proto$2.toJSON=toISOString$1;proto$2.locale=locale;proto$2.localeData=localeData;proto$2.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1);proto$2.lang=lang;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",matchSigned);addRegexToken("X",matchTimestamp);addParseToken("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)});addParseToken("x",function(e,t,r){r._d=new Date(toInt(e))});hooks.version="2.30.1";setHookCallback(createLocal);hooks.fn=proto;hooks.min=min;hooks.max=max;hooks.now=now;hooks.utc=createUTC;hooks.unix=createUnix;hooks.months=listMonths;hooks.isDate=isDate;hooks.locale=getSetGlobalLocale;hooks.invalid=createInvalid;hooks.duration=createDuration;hooks.isMoment=isMoment;hooks.weekdays=listWeekdays;hooks.parseZone=createInZone;hooks.localeData=getLocale;hooks.isDuration=isDuration;hooks.monthsShort=listMonthsShort;hooks.weekdaysMin=listWeekdaysMin;hooks.defineLocale=defineLocale;hooks.updateLocale=updateLocale;hooks.locales=listLocales;hooks.weekdaysShort=listWeekdaysShort;hooks.normalizeUnits=normalizeUnits;hooks.relativeTimeRounding=getSetRelativeTimeRounding;hooks.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks.calendarFormat=getCalendarFormat;hooks.prototype=proto;hooks.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const moment=Object.freeze(Object.defineProperty({__proto__:null,default:hooks},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(moment);var Chart=Chart$1.exports,hasRequiredChart;function requireChart(){return hasRequiredChart||(hasRequiredChart=1,(function(e,t){(function(r,n){e.exports=n((function(){try{return require$$0}catch{}})())})(Chart,(function(r){r=r&&r.hasOwnProperty("default")?r.default:r;function n(s,o){return o={exports:{}},s(o,o.exports),o.exports}function i(s){return s&&s.default||s}var a={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},l=n(function(s){var o={};for(var c in a)a.hasOwnProperty(c)&&(o[a[c]]=c);var u=s.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var y in u)if(u.hasOwnProperty(y)){if(!("channels"in u[y]))throw new Error("missing channels property: "+y);if(!("labels"in u[y]))throw new Error("missing channel labels property: "+y);if(u[y].labels.length!==u[y].channels)throw new Error("channel and label counts mismatch: "+y);var $=u[y].channels,T=u[y].labels;delete u[y].channels,delete u[y].labels,Object.defineProperty(u[y],"channels",{value:$}),Object.defineProperty(u[y],"labels",{value:T})}u.rgb.hsl=function(D){var G=D[0]/255,te=D[1]/255,re=D[2]/255,oe=Math.min(G,te,re),me=Math.max(G,te,re),Me=me-oe,Pe,We,vi;return me===oe?Pe=0:G===me?Pe=(te-re)/Me:te===me?Pe=2+(re-G)/Me:re===me&&(Pe=4+(G-te)/Me),Pe=Math.min(Pe*60,360),Pe<0&&(Pe+=360),vi=(oe+me)/2,me===oe?We=0:vi<=.5?We=Me/(me+oe):We=Me/(2-me-oe),[Pe,We*100,vi*100]},u.rgb.hsv=function(D){var G,te,re,oe,me,Me=D[0]/255,Pe=D[1]/255,We=D[2]/255,vi=Math.max(Me,Pe,We),da=vi-Math.min(Me,Pe,We),ma=function(wa){return(vi-wa)/6/da+1/2};return da===0?oe=me=0:(me=da/vi,G=ma(Me),te=ma(Pe),re=ma(We),Me===vi?oe=re-te:Pe===vi?oe=1/3+G-re:We===vi&&(oe=2/3+te-G),oe<0?oe+=1:oe>1&&(oe-=1)),[oe*360,me*100,vi*100]},u.rgb.hwb=function(D){var G=D[0],te=D[1],re=D[2],oe=u.rgb.hsl(D)[0],me=1/255*Math.min(G,Math.min(te,re));return re=1-1/255*Math.max(G,Math.max(te,re)),[oe,me*100,re*100]},u.rgb.cmyk=function(D){var G=D[0]/255,te=D[1]/255,re=D[2]/255,oe,me,Me,Pe;return Pe=Math.min(1-G,1-te,1-re),oe=(1-G-Pe)/(1-Pe)||0,me=(1-te-Pe)/(1-Pe)||0,Me=(1-re-Pe)/(1-Pe)||0,[oe*100,me*100,Me*100,Pe*100]};function K(D,G){return Math.pow(D[0]-G[0],2)+Math.pow(D[1]-G[1],2)+Math.pow(D[2]-G[2],2)}u.rgb.keyword=function(D){var G=o[D];if(G)return G;var te=1/0,re;for(var oe in a)if(a.hasOwnProperty(oe)){var me=a[oe],Me=K(D,me);Me<te&&(te=Me,re=oe)}return re},u.keyword.rgb=function(D){return a[D]},u.rgb.xyz=function(D){var G=D[0]/255,te=D[1]/255,re=D[2]/255;G=G>.04045?Math.pow((G+.055)/1.055,2.4):G/12.92,te=te>.04045?Math.pow((te+.055)/1.055,2.4):te/12.92,re=re>.04045?Math.pow((re+.055)/1.055,2.4):re/12.92;var oe=G*.4124+te*.3576+re*.1805,me=G*.2126+te*.7152+re*.0722,Me=G*.0193+te*.1192+re*.9505;return[oe*100,me*100,Me*100]},u.rgb.lab=function(D){var G=u.rgb.xyz(D),te=G[0],re=G[1],oe=G[2],me,Me,Pe;return te/=95.047,re/=100,oe/=108.883,te=te>.008856?Math.pow(te,1/3):7.787*te+16/116,re=re>.008856?Math.pow(re,1/3):7.787*re+16/116,oe=oe>.008856?Math.pow(oe,1/3):7.787*oe+16/116,me=116*re-16,Me=500*(te-re),Pe=200*(re-oe),[me,Me,Pe]},u.hsl.rgb=function(D){var G=D[0]/360,te=D[1]/100,re=D[2]/100,oe,me,Me,Pe,We;if(te===0)return We=re*255,[We,We,We];re<.5?me=re*(1+te):me=re+te-re*te,oe=2*re-me,Pe=[0,0,0];for(var vi=0;vi<3;vi++)Me=G+1/3*-(vi-1),Me<0&&Me++,Me>1&&Me--,6*Me<1?We=oe+(me-oe)*6*Me:2*Me<1?We=me:3*Me<2?We=oe+(me-oe)*(2/3-Me)*6:We=oe,Pe[vi]=We*255;return Pe},u.hsl.hsv=function(D){var G=D[0],te=D[1]/100,re=D[2]/100,oe=te,me=Math.max(re,.01),Me,Pe;return re*=2,te*=re<=1?re:2-re,oe*=me<=1?me:2-me,Pe=(re+te)/2,Me=re===0?2*oe/(me+oe):2*te/(re+te),[G,Me*100,Pe*100]},u.hsv.rgb=function(D){var G=D[0]/60,te=D[1]/100,re=D[2]/100,oe=Math.floor(G)%6,me=G-Math.floor(G),Me=255*re*(1-te),Pe=255*re*(1-te*me),We=255*re*(1-te*(1-me));switch(re*=255,oe){case 0:return[re,We,Me];case 1:return[Pe,re,Me];case 2:return[Me,re,We];case 3:return[Me,Pe,re];case 4:return[We,Me,re];case 5:return[re,Me,Pe]}},u.hsv.hsl=function(D){var G=D[0],te=D[1]/100,re=D[2]/100,oe=Math.max(re,.01),me,Me,Pe;return Pe=(2-te)*re,me=(2-te)*oe,Me=te*oe,Me/=me<=1?me:2-me,Me=Me||0,Pe/=2,[G,Me*100,Pe*100]},u.hwb.rgb=function(D){var G=D[0]/360,te=D[1]/100,re=D[2]/100,oe=te+re,me,Me,Pe,We;oe>1&&(te/=oe,re/=oe),me=Math.floor(6*G),Me=1-re,Pe=6*G-me,(me&1)!==0&&(Pe=1-Pe),We=te+Pe*(Me-te);var vi,da,ma;switch(me){default:case 6:case 0:vi=Me,da=We,ma=te;break;case 1:vi=We,da=Me,ma=te;break;case 2:vi=te,da=Me,ma=We;break;case 3:vi=te,da=We,ma=Me;break;case 4:vi=We,da=te,ma=Me;break;case 5:vi=Me,da=te,ma=We;break}return[vi*255,da*255,ma*255]},u.cmyk.rgb=function(D){var G=D[0]/100,te=D[1]/100,re=D[2]/100,oe=D[3]/100,me,Me,Pe;return me=1-Math.min(1,G*(1-oe)+oe),Me=1-Math.min(1,te*(1-oe)+oe),Pe=1-Math.min(1,re*(1-oe)+oe),[me*255,Me*255,Pe*255]},u.xyz.rgb=function(D){var G=D[0]/100,te=D[1]/100,re=D[2]/100,oe,me,Me;return oe=G*3.2406+te*-1.5372+re*-.4986,me=G*-.9689+te*1.8758+re*.0415,Me=G*.0557+te*-.204+re*1.057,oe=oe>.0031308?1.055*Math.pow(oe,1/2.4)-.055:oe*12.92,me=me>.0031308?1.055*Math.pow(me,1/2.4)-.055:me*12.92,Me=Me>.0031308?1.055*Math.pow(Me,1/2.4)-.055:Me*12.92,oe=Math.min(Math.max(0,oe),1),me=Math.min(Math.max(0,me),1),Me=Math.min(Math.max(0,Me),1),[oe*255,me*255,Me*255]},u.xyz.lab=function(D){var G=D[0],te=D[1],re=D[2],oe,me,Me;return G/=95.047,te/=100,re/=108.883,G=G>.008856?Math.pow(G,1/3):7.787*G+16/116,te=te>.008856?Math.pow(te,1/3):7.787*te+16/116,re=re>.008856?Math.pow(re,1/3):7.787*re+16/116,oe=116*te-16,me=500*(G-te),Me=200*(te-re),[oe,me,Me]},u.lab.xyz=function(D){var G=D[0],te=D[1],re=D[2],oe,me,Me;me=(G+16)/116,oe=te/500+me,Me=me-re/200;var Pe=Math.pow(me,3),We=Math.pow(oe,3),vi=Math.pow(Me,3);return me=Pe>.008856?Pe:(me-16/116)/7.787,oe=We>.008856?We:(oe-16/116)/7.787,Me=vi>.008856?vi:(Me-16/116)/7.787,oe*=95.047,me*=100,Me*=108.883,[oe,me,Me]},u.lab.lch=function(D){var G=D[0],te=D[1],re=D[2],oe,me,Me;return oe=Math.atan2(re,te),me=oe*360/2/Math.PI,me<0&&(me+=360),Me=Math.sqrt(te*te+re*re),[G,Me,me]},u.lch.lab=function(D){var G=D[0],te=D[1],re=D[2],oe,me,Me;return Me=re/360*2*Math.PI,oe=te*Math.cos(Me),me=te*Math.sin(Me),[G,oe,me]},u.rgb.ansi16=function(D){var G=D[0],te=D[1],re=D[2],oe=1 in arguments?arguments[1]:u.rgb.hsv(D)[2];if(oe=Math.round(oe/50),oe===0)return 30;var me=30+(Math.round(re/255)<<2|Math.round(te/255)<<1|Math.round(G/255));return oe===2&&(me+=60),me},u.hsv.ansi16=function(D){return u.rgb.ansi16(u.hsv.rgb(D),D[2])},u.rgb.ansi256=function(D){var G=D[0],te=D[1],re=D[2];if(G===te&&te===re)return G<8?16:G>248?231:Math.round((G-8)/247*24)+232;var oe=16+36*Math.round(G/255*5)+6*Math.round(te/255*5)+Math.round(re/255*5);return oe},u.ansi16.rgb=function(D){var G=D%10;if(G===0||G===7)return D>50&&(G+=3.5),G=G/10.5*255,[G,G,G];var te=(~~(D>50)+1)*.5,re=(G&1)*te*255,oe=(G>>1&1)*te*255,me=(G>>2&1)*te*255;return[re,oe,me]},u.ansi256.rgb=function(D){if(D>=232){var G=(D-232)*10+8;return[G,G,G]}D-=16;var te,re=Math.floor(D/36)/5*255,oe=Math.floor((te=D%36)/6)/5*255,me=te%6/5*255;return[re,oe,me]},u.rgb.hex=function(D){var G=((Math.round(D[0])&255)<<16)+((Math.round(D[1])&255)<<8)+(Math.round(D[2])&255),te=G.toString(16).toUpperCase();return"000000".substring(te.length)+te},u.hex.rgb=function(D){var G=D.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!G)return[0,0,0];var te=G[0];G[0].length===3&&(te=te.split("").map(function(Pe){return Pe+Pe}).join(""));var re=parseInt(te,16),oe=re>>16&255,me=re>>8&255,Me=re&255;return[oe,me,Me]},u.rgb.hcg=function(D){var G=D[0]/255,te=D[1]/255,re=D[2]/255,oe=Math.max(Math.max(G,te),re),me=Math.min(Math.min(G,te),re),Me=oe-me,Pe,We;return Me<1?Pe=me/(1-Me):Pe=0,Me<=0?We=0:oe===G?We=(te-re)/Me%6:oe===te?We=2+(re-G)/Me:We=4+(G-te)/Me+4,We/=6,We%=1,[We*360,Me*100,Pe*100]},u.hsl.hcg=function(D){var G=D[1]/100,te=D[2]/100,re=1,oe=0;return te<.5?re=2*G*te:re=2*G*(1-te),re<1&&(oe=(te-.5*re)/(1-re)),[D[0],re*100,oe*100]},u.hsv.hcg=function(D){var G=D[1]/100,te=D[2]/100,re=G*te,oe=0;return re<1&&(oe=(te-re)/(1-re)),[D[0],re*100,oe*100]},u.hcg.rgb=function(D){var G=D[0]/360,te=D[1]/100,re=D[2]/100;if(te===0)return[re*255,re*255,re*255];var oe=[0,0,0],me=G%1*6,Me=me%1,Pe=1-Me,We=0;switch(Math.floor(me)){case 0:oe[0]=1,oe[1]=Me,oe[2]=0;break;case 1:oe[0]=Pe,oe[1]=1,oe[2]=0;break;case 2:oe[0]=0,oe[1]=1,oe[2]=Me;break;case 3:oe[0]=0,oe[1]=Pe,oe[2]=1;break;case 4:oe[0]=Me,oe[1]=0,oe[2]=1;break;default:oe[0]=1,oe[1]=0,oe[2]=Pe}return We=(1-te)*re,[(te*oe[0]+We)*255,(te*oe[1]+We)*255,(te*oe[2]+We)*255]},u.hcg.hsv=function(D){var G=D[1]/100,te=D[2]/100,re=G+te*(1-G),oe=0;return re>0&&(oe=G/re),[D[0],oe*100,re*100]},u.hcg.hsl=function(D){var G=D[1]/100,te=D[2]/100,re=te*(1-G)+.5*G,oe=0;return re>0&&re<.5?oe=G/(2*re):re>=.5&&re<1&&(oe=G/(2*(1-re))),[D[0],oe*100,re*100]},u.hcg.hwb=function(D){var G=D[1]/100,te=D[2]/100,re=G+te*(1-G);return[D[0],(re-G)*100,(1-re)*100]},u.hwb.hcg=function(D){var G=D[1]/100,te=D[2]/100,re=1-te,oe=re-G,me=0;return oe<1&&(me=(re-oe)/(1-oe)),[D[0],oe*100,me*100]},u.apple.rgb=function(D){return[D[0]/65535*255,D[1]/65535*255,D[2]/65535*255]},u.rgb.apple=function(D){return[D[0]/255*65535,D[1]/255*65535,D[2]/255*65535]},u.gray.rgb=function(D){return[D[0]/100*255,D[0]/100*255,D[0]/100*255]},u.gray.hsl=u.gray.hsv=function(D){return[0,0,D[0]]},u.gray.hwb=function(D){return[0,100,D[0]]},u.gray.cmyk=function(D){return[0,0,0,D[0]]},u.gray.lab=function(D){return[D[0],0,0]},u.gray.hex=function(D){var G=Math.round(D[0]/100*255)&255,te=(G<<16)+(G<<8)+G,re=te.toString(16).toUpperCase();return"000000".substring(re.length)+re},u.rgb.gray=function(D){var G=(D[0]+D[1]+D[2])/3;return[G/255*100]}});l.rgb,l.hsl,l.hsv,l.hwb,l.cmyk,l.xyz,l.lab,l.lch,l.hex,l.keyword,l.ansi16,l.ansi256,l.hcg,l.apple,l.gray;function d(){for(var s={},o=Object.keys(l),c=o.length,u=0;u<c;u++)s[o[u]]={distance:-1,parent:null};return s}function p(s){var o=d(),c=[s];for(o[s].distance=0;c.length;)for(var u=c.pop(),y=Object.keys(l[u]),$=y.length,T=0;T<$;T++){var K=y[T],D=o[K];D.distance===-1&&(D.distance=o[u].distance+1,D.parent=u,c.unshift(K))}return o}function m(s,o){return function(c){return o(s(c))}}function A(s,o){for(var c=[o[s].parent,s],u=l[o[s].parent][s],y=o[s].parent;o[y].parent;)c.unshift(o[y].parent),u=m(l[o[y].parent][y],u),y=o[y].parent;return u.conversion=c,u}var x=function(s){for(var o=p(s),c={},u=Object.keys(o),y=u.length,$=0;$<y;$++){var T=u[$],K=o[T];K.parent!==null&&(c[T]=A(T,o))}return c},I={},P=Object.keys(l);function q(s){var o=function(c){return c==null?c:(arguments.length>1&&(c=Array.prototype.slice.call(arguments)),s(c))};return"conversion"in s&&(o.conversion=s.conversion),o}function F(s){var o=function(c){if(c==null)return c;arguments.length>1&&(c=Array.prototype.slice.call(arguments));var u=s(c);if(typeof u=="object")for(var y=u.length,$=0;$<y;$++)u[$]=Math.round(u[$]);return u};return"conversion"in s&&(o.conversion=s.conversion),o}P.forEach(function(s){I[s]={},Object.defineProperty(I[s],"channels",{value:l[s].channels}),Object.defineProperty(I[s],"labels",{value:l[s].labels});var o=x(s),c=Object.keys(o);c.forEach(function(u){var y=o[u];I[s][u]=F(y),I[s][u].raw=q(y)})});var L=I,Y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},j={getRgba:Z,getHsla:X,getRgb:J,getHsl:ee,getHwb:Q,getAlpha:ie,hexString:de,rgbString:fe,rgbaString:_e,percentString:Re,percentaString:Qe,hslString:Ar,hslaString:Os,hwbString:ji,keyword:Ui};function Z(s){if(s){var o=/^#([a-fA-F0-9]{3,4})$/i,c=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,u=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,y=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,$=/(\w+)/,T=[0,0,0],K=1,D=s.match(o),G="";if(D){D=D[1],G=D[3];for(var te=0;te<T.length;te++)T[te]=parseInt(D[te]+D[te],16);G&&(K=Math.round(parseInt(G+G,16)/255*100)/100)}else if(D=s.match(c)){G=D[2],D=D[1];for(var te=0;te<T.length;te++)T[te]=parseInt(D.slice(te*2,te*2+2),16);G&&(K=Math.round(parseInt(G,16)/255*100)/100)}else if(D=s.match(u)){for(var te=0;te<T.length;te++)T[te]=parseInt(D[te+1]);K=parseFloat(D[4])}else if(D=s.match(y)){for(var te=0;te<T.length;te++)T[te]=Math.round(parseFloat(D[te+1])*2.55);K=parseFloat(D[4])}else if(D=s.match($)){if(D[1]=="transparent")return[0,0,0,0];if(T=Y[D[1]],!T)return}for(var te=0;te<T.length;te++)T[te]=hi(T[te],0,255);return!K&&K!=0?K=1:K=hi(K,0,1),T[3]=K,T}}function X(s){if(s){var o=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,c=s.match(o);if(c){var u=parseFloat(c[4]),y=hi(parseInt(c[1]),0,360),$=hi(parseFloat(c[2]),0,100),T=hi(parseFloat(c[3]),0,100),K=hi(isNaN(u)?1:u,0,1);return[y,$,T,K]}}}function Q(s){if(s){var o=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,c=s.match(o);if(c){var u=parseFloat(c[4]),y=hi(parseInt(c[1]),0,360),$=hi(parseFloat(c[2]),0,100),T=hi(parseFloat(c[3]),0,100),K=hi(isNaN(u)?1:u,0,1);return[y,$,T,K]}}}function J(s){var o=Z(s);return o&&o.slice(0,3)}function ee(s){var o=X(s);return o&&o.slice(0,3)}function ie(s){var o=Z(s);if(o)return o[3];if(o=X(s))return o[3];if(o=Q(s))return o[3]}function de(s,c){var c=c!==void 0&&s.length===3?c:s[3];return"#"+ca(s[0])+ca(s[1])+ca(s[2])+(c>=0&&c<1?ca(Math.round(c*255)):"")}function fe(s,o){return o<1||s[3]&&s[3]<1?_e(s,o):"rgb("+s[0]+", "+s[1]+", "+s[2]+")"}function _e(s,o){return o===void 0&&(o=s[3]!==void 0?s[3]:1),"rgba("+s[0]+", "+s[1]+", "+s[2]+", "+o+")"}function Re(s,o){if(o<1||s[3]&&s[3]<1)return Qe(s,o);var c=Math.round(s[0]/255*100),u=Math.round(s[1]/255*100),y=Math.round(s[2]/255*100);return"rgb("+c+"%, "+u+"%, "+y+"%)"}function Qe(s,o){var c=Math.round(s[0]/255*100),u=Math.round(s[1]/255*100),y=Math.round(s[2]/255*100);return"rgba("+c+"%, "+u+"%, "+y+"%, "+(o||s[3]||1)+")"}function Ar(s,o){return o<1||s[3]&&s[3]<1?Os(s,o):"hsl("+s[0]+", "+s[1]+"%, "+s[2]+"%)"}function Os(s,o){return o===void 0&&(o=s[3]!==void 0?s[3]:1),"hsla("+s[0]+", "+s[1]+"%, "+s[2]+"%, "+o+")"}function ji(s,o){return o===void 0&&(o=s[3]!==void 0?s[3]:1),"hwb("+s[0]+", "+s[1]+"%, "+s[2]+"%"+(o!==void 0&&o!==1?", "+o:"")+")"}function Ui(s){return Ue[s.slice(0,3)]}function hi(s,o,c){return Math.min(Math.max(o,s),c)}function ca(s){var o=s.toString(16).toUpperCase();return o.length<2?"0"+o:o}var Ue={};for(var ke in Y)Ue[Y[ke]]=ke;var qe=function(s){if(s instanceof qe)return s;if(!(this instanceof qe))return new qe(s);this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var o;typeof s=="string"?(o=j.getRgba(s),o?this.setValues("rgb",o):(o=j.getHsla(s))?this.setValues("hsl",o):(o=j.getHwb(s))&&this.setValues("hwb",o)):typeof s=="object"&&(o=s,o.r!==void 0||o.red!==void 0?this.setValues("rgb",o):o.l!==void 0||o.lightness!==void 0?this.setValues("hsl",o):o.v!==void 0||o.value!==void 0?this.setValues("hsv",o):o.w!==void 0||o.whiteness!==void 0?this.setValues("hwb",o):(o.c!==void 0||o.cyan!==void 0)&&this.setValues("cmyk",o))};qe.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var s=this.values;return s.alpha!==1?s.hwb.concat([s.alpha]):s.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var s=this.values;return s.rgb.concat([s.alpha])},hslaArray:function(){var s=this.values;return s.hsl.concat([s.alpha])},alpha:function(s){return s===void 0?this.values.alpha:(this.setValues("alpha",s),this)},red:function(s){return this.setChannel("rgb",0,s)},green:function(s){return this.setChannel("rgb",1,s)},blue:function(s){return this.setChannel("rgb",2,s)},hue:function(s){return s&&(s%=360,s=s<0?360+s:s),this.setChannel("hsl",0,s)},saturation:function(s){return this.setChannel("hsl",1,s)},lightness:function(s){return this.setChannel("hsl",2,s)},saturationv:function(s){return this.setChannel("hsv",1,s)},whiteness:function(s){return this.setChannel("hwb",1,s)},blackness:function(s){return this.setChannel("hwb",2,s)},value:function(s){return this.setChannel("hsv",2,s)},cyan:function(s){return this.setChannel("cmyk",0,s)},magenta:function(s){return this.setChannel("cmyk",1,s)},yellow:function(s){return this.setChannel("cmyk",2,s)},black:function(s){return this.setChannel("cmyk",3,s)},hexString:function(){return j.hexString(this.values.rgb)},rgbString:function(){return j.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return j.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return j.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return j.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return j.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return j.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return j.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var s=this.values.rgb;return s[0]<<16|s[1]<<8|s[2]},luminosity:function(){for(var s=this.values.rgb,o=[],c=0;c<s.length;c++){var u=s[c]/255;o[c]=u<=.03928?u/12.92:Math.pow((u+.055)/1.055,2.4)}return .2126*o[0]+.7152*o[1]+.0722*o[2]},contrast:function(s){var o=this.luminosity(),c=s.luminosity();return o>c?(o+.05)/(c+.05):(c+.05)/(o+.05)},level:function(s){var o=this.contrast(s);return o>=7.1?"AAA":o>=4.5?"AA":""},dark:function(){var s=this.values.rgb,o=(s[0]*299+s[1]*587+s[2]*114)/1e3;return o<128},light:function(){return!this.dark()},negate:function(){for(var s=[],o=0;o<3;o++)s[o]=255-this.values.rgb[o];return this.setValues("rgb",s),this},lighten:function(s){var o=this.values.hsl;return o[2]+=o[2]*s,this.setValues("hsl",o),this},darken:function(s){var o=this.values.hsl;return o[2]-=o[2]*s,this.setValues("hsl",o),this},saturate:function(s){var o=this.values.hsl;return o[1]+=o[1]*s,this.setValues("hsl",o),this},desaturate:function(s){var o=this.values.hsl;return o[1]-=o[1]*s,this.setValues("hsl",o),this},whiten:function(s){var o=this.values.hwb;return o[1]+=o[1]*s,this.setValues("hwb",o),this},blacken:function(s){var o=this.values.hwb;return o[2]+=o[2]*s,this.setValues("hwb",o),this},greyscale:function(){var s=this.values.rgb,o=s[0]*.3+s[1]*.59+s[2]*.11;return this.setValues("rgb",[o,o,o]),this},clearer:function(s){var o=this.values.alpha;return this.setValues("alpha",o-o*s),this},opaquer:function(s){var o=this.values.alpha;return this.setValues("alpha",o+o*s),this},rotate:function(s){var o=this.values.hsl,c=(o[0]+s)%360;return o[0]=c<0?360+c:c,this.setValues("hsl",o),this},mix:function(s,o){var c=this,u=s,y=o===void 0?.5:o,$=2*y-1,T=c.alpha()-u.alpha(),K=(($*T===-1?$:($+T)/(1+$*T))+1)/2,D=1-K;return this.rgb(K*c.red()+D*u.red(),K*c.green()+D*u.green(),K*c.blue()+D*u.blue()).alpha(c.alpha()*y+u.alpha()*(1-y))},toJSON:function(){return this.rgb()},clone:function(){var s=new qe,o=this.values,c=s.values,u,y;for(var $ in o)o.hasOwnProperty($)&&(u=o[$],y={}.toString.call(u),y==="[object Array]"?c[$]=u.slice(0):y==="[object Number]"?c[$]=u:console.error("unexpected color value:",u));return s}},qe.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},qe.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},qe.prototype.getValues=function(s){for(var o=this.values,c={},u=0;u<s.length;u++)c[s.charAt(u)]=o[s][u];return o.alpha!==1&&(c.a=o.alpha),c},qe.prototype.setValues=function(s,o){var c=this.values,u=this.spaces,y=this.maxes,$=1,T;if(this.valid=!0,s==="alpha")$=o;else if(o.length)c[s]=o.slice(0,s.length),$=o[s.length];else if(o[s.charAt(0)]!==void 0){for(T=0;T<s.length;T++)c[s][T]=o[s.charAt(T)];$=o.a}else if(o[u[s][0]]!==void 0){var K=u[s];for(T=0;T<s.length;T++)c[s][T]=o[K[T]];$=o.alpha}if(c.alpha=Math.max(0,Math.min(1,$===void 0?c.alpha:$)),s==="alpha")return!1;var D;for(T=0;T<s.length;T++)D=Math.max(0,Math.min(y[s][T],c[s][T])),c[s][T]=Math.round(D);for(var G in u)G!==s&&(c[G]=L[s][G](c[s]));return!0},qe.prototype.setSpace=function(s,o){var c=o[0];return c===void 0?this.getValues(s):(typeof c=="number"&&(c=Array.prototype.slice.call(o)),this.setValues(s,c),this)},qe.prototype.setChannel=function(s,o,c){var u=this.values[s];return c===void 0?u[o]:c===u[o]?this:(u[o]=c,this.setValues(s,u),this)},typeof window<"u"&&(window.Color=qe);var Le=qe;function ne(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}var ae={noop:function(){},uid:(function(){var s=0;return function(){return s++}})(),isNullOrUndef:function(s){return s===null||typeof s>"u"},isArray:function(s){if(Array.isArray&&Array.isArray(s))return!0;var o=Object.prototype.toString.call(s);return o.substr(0,7)==="[object"&&o.substr(-6)==="Array]"},isObject:function(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"},isFinite:function(s){return(typeof s=="number"||s instanceof Number)&&isFinite(s)},valueOrDefault:function(s,o){return typeof s>"u"?o:s},valueAtIndexOrDefault:function(s,o,c){return ae.valueOrDefault(ae.isArray(s)?s[o]:s,c)},callback:function(s,o,c){if(s&&typeof s.call=="function")return s.apply(c,o)},each:function(s,o,c,u){var y,$,T;if(ae.isArray(s))if($=s.length,u)for(y=$-1;y>=0;y--)o.call(c,s[y],y);else for(y=0;y<$;y++)o.call(c,s[y],y);else if(ae.isObject(s))for(T=Object.keys(s),$=T.length,y=0;y<$;y++)o.call(c,s[T[y]],T[y])},arrayEquals:function(s,o){var c,u,y,$;if(!s||!o||s.length!==o.length)return!1;for(c=0,u=s.length;c<u;++c)if(y=s[c],$=o[c],y instanceof Array&&$ instanceof Array){if(!ae.arrayEquals(y,$))return!1}else if(y!==$)return!1;return!0},clone:function(s){if(ae.isArray(s))return s.map(ae.clone);if(ae.isObject(s)){for(var o=Object.create(s),c=Object.keys(s),u=c.length,y=0;y<u;++y)o[c[y]]=ae.clone(s[c[y]]);return o}return s},_merger:function(s,o,c,u){if(ne(s)){var y=o[s],$=c[s];ae.isObject(y)&&ae.isObject($)?ae.merge(y,$,u):o[s]=ae.clone($)}},_mergerIf:function(s,o,c){if(ne(s)){var u=o[s],y=c[s];ae.isObject(u)&&ae.isObject(y)?ae.mergeIf(u,y):o.hasOwnProperty(s)||(o[s]=ae.clone(y))}},merge:function(s,o,c){var u=ae.isArray(o)?o:[o],y=u.length,$,T,K,D,G;if(!ae.isObject(s))return s;for(c=c||{},$=c.merger||ae._merger,T=0;T<y;++T)if(o=u[T],!!ae.isObject(o))for(K=Object.keys(o),G=0,D=K.length;G<D;++G)$(K[G],s,o,c);return s},mergeIf:function(s,o){return ae.merge(s,o,{merger:ae._mergerIf})},extend:Object.assign||function(s){return ae.merge(s,[].slice.call(arguments,1),{merger:function(o,c,u){c[o]=u[o]}})},inherits:function(s){var o=this,c=s&&s.hasOwnProperty("constructor")?s.constructor:function(){return o.apply(this,arguments)},u=function(){this.constructor=c};return u.prototype=o.prototype,c.prototype=new u,c.extend=ae.inherits,s&&ae.extend(c.prototype,s),c.__super__=o.prototype,c},_deprecated:function(s,o,c,u){o!==void 0&&console.warn(s+': "'+c+'" is deprecated. Please use "'+u+'" instead')}},$e=ae;ae.callCallback=ae.callback,ae.indexOf=function(s,o,c){return Array.prototype.indexOf.call(s,o,c)},ae.getValueOrDefault=ae.valueOrDefault,ae.getValueAtIndexOrDefault=ae.valueAtIndexOrDefault;var Je={linear:function(s){return s},easeInQuad:function(s){return s*s},easeOutQuad:function(s){return-s*(s-2)},easeInOutQuad:function(s){return(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1)},easeInCubic:function(s){return s*s*s},easeOutCubic:function(s){return(s=s-1)*s*s+1},easeInOutCubic:function(s){return(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2)},easeInQuart:function(s){return s*s*s*s},easeOutQuart:function(s){return-((s=s-1)*s*s*s-1)},easeInOutQuart:function(s){return(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2)},easeInQuint:function(s){return s*s*s*s*s},easeOutQuint:function(s){return(s=s-1)*s*s*s*s+1},easeInOutQuint:function(s){return(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)},easeInSine:function(s){return-Math.cos(s*(Math.PI/2))+1},easeOutSine:function(s){return Math.sin(s*(Math.PI/2))},easeInOutSine:function(s){return-.5*(Math.cos(Math.PI*s)-1)},easeInExpo:function(s){return s===0?0:Math.pow(2,10*(s-1))},easeOutExpo:function(s){return s===1?1:-Math.pow(2,-10*s)+1},easeInOutExpo:function(s){return s===0?0:s===1?1:(s/=.5)<1?.5*Math.pow(2,10*(s-1)):.5*(-Math.pow(2,-10*--s)+2)},easeInCirc:function(s){return s>=1?s:-(Math.sqrt(1-s*s)-1)},easeOutCirc:function(s){return Math.sqrt(1-(s=s-1)*s)},easeInOutCirc:function(s){return(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)},easeInElastic:function(s){var o=1.70158,c=0,u=1;return s===0?0:s===1?1:(c||(c=.3),o=c/(2*Math.PI)*Math.asin(1/u),-(u*Math.pow(2,10*(s-=1))*Math.sin((s-o)*(2*Math.PI)/c)))},easeOutElastic:function(s){var o=1.70158,c=0,u=1;return s===0?0:s===1?1:(c||(c=.3),o=c/(2*Math.PI)*Math.asin(1/u),u*Math.pow(2,-10*s)*Math.sin((s-o)*(2*Math.PI)/c)+1)},easeInOutElastic:function(s){var o=1.70158,c=0,u=1;return s===0?0:(s/=.5)===2?1:(c||(c=.45),o=c/(2*Math.PI)*Math.asin(1/u),s<1?-.5*(u*Math.pow(2,10*(s-=1))*Math.sin((s-o)*(2*Math.PI)/c)):u*Math.pow(2,-10*(s-=1))*Math.sin((s-o)*(2*Math.PI)/c)*.5+1)},easeInBack:function(s){var o=1.70158;return s*s*((o+1)*s-o)},easeOutBack:function(s){var o=1.70158;return(s=s-1)*s*((o+1)*s+o)+1},easeInOutBack:function(s){var o=1.70158;return(s/=.5)<1?.5*(s*s*(((o*=1.525)+1)*s-o)):.5*((s-=2)*s*(((o*=1.525)+1)*s+o)+2)},easeInBounce:function(s){return 1-Je.easeOutBounce(1-s)},easeOutBounce:function(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:function(s){return s<.5?Je.easeInBounce(s*2)*.5:Je.easeOutBounce(s*2-1)*.5+.5}},Ke={effects:Je};$e.easingEffects=Je;var bt=Math.PI,bs=bt/180,ge=bt*2,ue=bt/2,De=bt/4,Ye=bt*2/3,mi={clear:function(s){s.ctx.clearRect(0,0,s.width,s.height)},roundedRect:function(s,o,c,u,y,$){if($){var T=Math.min($,y/2,u/2),K=o+T,D=c+T,G=o+u-T,te=c+y-T;s.moveTo(o,D),K<G&&D<te?(s.arc(K,D,T,-bt,-ue),s.arc(G,D,T,-ue,0),s.arc(G,te,T,0,ue),s.arc(K,te,T,ue,bt)):K<G?(s.moveTo(K,c),s.arc(G,D,T,-ue,ue),s.arc(K,D,T,ue,bt+ue)):D<te?(s.arc(K,D,T,-bt,0),s.arc(K,te,T,0,bt)):s.arc(K,D,T,-bt,bt),s.closePath(),s.moveTo(o,c)}else s.rect(o,c,u,y)},drawPoint:function(s,o,c,u,y,$){var T,K,D,G,te,re=($||0)*bs;if(o&&typeof o=="object"&&(T=o.toString(),T==="[object HTMLImageElement]"||T==="[object HTMLCanvasElement]")){s.save(),s.translate(u,y),s.rotate(re),s.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),s.restore();return}if(!(isNaN(c)||c<=0)){switch(s.beginPath(),o){default:s.arc(u,y,c,0,ge),s.closePath();break;case"triangle":s.moveTo(u+Math.sin(re)*c,y-Math.cos(re)*c),re+=Ye,s.lineTo(u+Math.sin(re)*c,y-Math.cos(re)*c),re+=Ye,s.lineTo(u+Math.sin(re)*c,y-Math.cos(re)*c),s.closePath();break;case"rectRounded":te=c*.516,G=c-te,K=Math.cos(re+De)*G,D=Math.sin(re+De)*G,s.arc(u-K,y-D,te,re-bt,re-ue),s.arc(u+D,y-K,te,re-ue,re),s.arc(u+K,y+D,te,re,re+ue),s.arc(u-D,y+K,te,re+ue,re+bt),s.closePath();break;case"rect":if(!$){G=Math.SQRT1_2*c,s.rect(u-G,y-G,2*G,2*G);break}re+=De;case"rectRot":K=Math.cos(re)*c,D=Math.sin(re)*c,s.moveTo(u-K,y-D),s.lineTo(u+D,y-K),s.lineTo(u+K,y+D),s.lineTo(u-D,y+K),s.closePath();break;case"crossRot":re+=De;case"cross":K=Math.cos(re)*c,D=Math.sin(re)*c,s.moveTo(u-K,y-D),s.lineTo(u+K,y+D),s.moveTo(u+D,y-K),s.lineTo(u-D,y+K);break;case"star":K=Math.cos(re)*c,D=Math.sin(re)*c,s.moveTo(u-K,y-D),s.lineTo(u+K,y+D),s.moveTo(u+D,y-K),s.lineTo(u-D,y+K),re+=De,K=Math.cos(re)*c,D=Math.sin(re)*c,s.moveTo(u-K,y-D),s.lineTo(u+K,y+D),s.moveTo(u+D,y-K),s.lineTo(u-D,y+K);break;case"line":K=Math.cos(re)*c,D=Math.sin(re)*c,s.moveTo(u-K,y-D),s.lineTo(u+K,y+D);break;case"dash":s.moveTo(u,y),s.lineTo(u+Math.cos(re)*c,y+Math.sin(re)*c);break}s.fill(),s.stroke()}},_isPointInArea:function(s,o){var c=1e-6;return s.x>o.left-c&&s.x<o.right+c&&s.y>o.top-c&&s.y<o.bottom+c},clipArea:function(s,o){s.save(),s.beginPath(),s.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),s.clip()},unclipArea:function(s){s.restore()},lineTo:function(s,o,c,u){var y=c.steppedLine;if(y){if(y==="middle"){var $=(o.x+c.x)/2;s.lineTo($,u?c.y:o.y),s.lineTo($,u?o.y:c.y)}else y==="after"&&!u||y!=="after"&&u?s.lineTo(o.x,c.y):s.lineTo(c.x,o.y);s.lineTo(c.x,c.y);return}if(!c.tension){s.lineTo(c.x,c.y);return}s.bezierCurveTo(u?o.controlPointPreviousX:o.controlPointNextX,u?o.controlPointPreviousY:o.controlPointNextY,u?c.controlPointNextX:c.controlPointPreviousX,u?c.controlPointNextY:c.controlPointPreviousY,c.x,c.y)}},ws=mi;$e.clear=mi.clear,$e.drawRoundedRectangle=function(s){s.beginPath(),mi.roundedRect.apply(mi,arguments)};var pi={_set:function(s,o){return $e.merge(this[s]||(this[s]={}),o)}};pi._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var vr=pi,Gi=$e.valueOrDefault;function ga(s){return!s||$e.isNullOrUndef(s.size)||$e.isNullOrUndef(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}var fa={toLineHeight:function(s,o){var c=(""+s).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!c||c[1]==="normal")return o*1.2;switch(s=+c[2],c[3]){case"px":return s;case"%":s/=100;break}return o*s},toPadding:function(s){var o,c,u,y;return $e.isObject(s)?(o=+s.top||0,c=+s.right||0,u=+s.bottom||0,y=+s.left||0):o=c=u=y=+s||0,{top:o,right:c,bottom:u,left:y,height:o+u,width:y+c}},_parseFont:function(s){var o=vr.global,c=Gi(s.fontSize,o.defaultFontSize),u={family:Gi(s.fontFamily,o.defaultFontFamily),lineHeight:$e.options.toLineHeight(Gi(s.lineHeight,o.defaultLineHeight),c),size:c,style:Gi(s.fontStyle,o.defaultFontStyle),weight:null,string:""};return u.string=ga(u),u},resolve:function(s,o,c,u){var y=!0,$,T,K;for($=0,T=s.length;$<T;++$)if(K=s[$],K!==void 0&&(o!==void 0&&typeof K=="function"&&(K=K(o),y=!1),c!==void 0&&$e.isArray(K)&&(K=K[c],y=!1),K!==void 0))return u&&!y&&(u.cacheable=!1),K}},ya={_factorize:function(s){var o=[],c=Math.sqrt(s),u;for(u=1;u<c;u++)s%u===0&&(o.push(u),o.push(s/u));return c===(c|0)&&o.push(c),o.sort(function(y,$){return y-$}).pop(),o},log10:Math.log10||function(s){var o=Math.log(s)*Math.LOG10E,c=Math.round(o),u=s===Math.pow(10,c);return u?c:o}},ua=ya;$e.log10=ya.log10;var va=function(s,o){return{x:function(c){return s+s+o-c},setWidth:function(c){o=c},textAlign:function(c){return c==="center"?c:c==="right"?"left":"right"},xPlus:function(c,u){return c-u},leftForLtr:function(c,u){return c-u}}},_a=function(){return{x:function(s){return s},setWidth:function(s){},textAlign:function(s){return s},xPlus:function(s,o){return s+o},leftForLtr:function(s,o){return s}}},gi=function(s,o,c){return s?va(o,c):_a()},ha=function(s,o){var c,u;(o==="ltr"||o==="rtl")&&(c=s.canvas.style,u=[c.getPropertyValue("direction"),c.getPropertyPriority("direction")],c.setProperty("direction",o,"important"),s.prevTextDirection=u)},pa=function(s){var o=s.prevTextDirection;o!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",o[0],o[1]))},Ia={getRtlAdapter:gi,overrideTextDirection:ha,restoreTextDirection:pa},se=$e,Da=Ke,Sa=ws,Ma=fa,Th=ua,th=Ia;se.easing=Da,se.canvas=Sa,se.options=Ma,se.math=Th,se.rtl=th;function Ph(s,o,c,u){var y=Object.keys(c),$,T,K,D,G,te,re,oe,me;for($=0,T=y.length;$<T;++$)if(K=y[$],te=c[K],o.hasOwnProperty(K)||(o[K]=te),D=o[K],!(D===te||K[0]==="_")){if(s.hasOwnProperty(K)||(s[K]=D),G=s[K],re=typeof te,re===typeof G){if(re==="string"){if(oe=Le(G),oe.valid&&(me=Le(te),me.valid)){o[K]=me.mix(oe,u).rgbString();continue}}else if(se.isFinite(G)&&se.isFinite(te)){o[K]=G+(te-G)*u;continue}}o[K]=te}}var uh=function(s){se.extend(this,s),this.initialize.apply(this,arguments)};se.extend(uh.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var s=this;return s._view||(s._view=se.extend({},s._model)),s._start={},s},transition:function(s){var o=this,c=o._model,u=o._start,y=o._view;return!c||s===1?(o._view=se.extend({},c),o._start=null,o):(y||(y=o._view={}),u||(u=o._start={}),Ph(u,y,c,s),o)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return se.isNumber(this._model.x)&&se.isNumber(this._model.y)}}),uh.extend=se.inherits;var oh=uh,zh=oh.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),Vh=zh;Object.defineProperty(zh.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(zh.prototype,"chartInstance",{get:function(){return this.chart},set:function(s){this.chart=s}}),vr._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:se.noop,onComplete:se.noop}});var jh={animations:[],request:null,addAnimation:function(s,o,c,u){var y=this.animations,$,T;for(o.chart=s,o.startTime=Date.now(),o.duration=c,u||(s.animating=!0),$=0,T=y.length;$<T;++$)if(y[$].chart===s){y[$]=o;return}y.push(o),y.length===1&&this.requestAnimationFrame()},cancelAnimation:function(s){var o=se.findIndex(this.animations,function(c){return c.chart===s});o!==-1&&(this.animations.splice(o,1),s.animating=!1)},requestAnimationFrame:function(){var s=this;s.request===null&&(s.request=se.requestAnimFrame.call(window,function(){s.request=null,s.startDigest()}))},startDigest:function(){var s=this;s.advance(),s.animations.length>0&&s.requestAnimationFrame()},advance:function(){for(var s=this.animations,o,c,u,y,$=0;$<s.length;)o=s[$],c=o.chart,u=o.numSteps,y=Math.floor((Date.now()-o.startTime)/o.duration*u)+1,o.currentStep=Math.min(y,u),se.callback(o.render,[c,o],c),se.callback(o.onAnimationProgress,[o],c),o.currentStep>=u?(se.callback(o.onAnimationComplete,[o],c),c.animating=!1,s.splice($,1)):++$}},yh=se.options.resolve,Wh=["push","pop","shift","splice","unshift"];function mp(s,o){if(s._chartjs){s._chartjs.listeners.push(o);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[o]}}),Wh.forEach(function(c){var u="onData"+c.charAt(0).toUpperCase()+c.slice(1),y=s[c];Object.defineProperty(s,c,{configurable:!0,enumerable:!1,value:function(){var $=Array.prototype.slice.call(arguments),T=y.apply(this,$);return se.each(s._chartjs.listeners,function(K){typeof K[u]=="function"&&K[u].apply(K,$)}),T}})})}function tp(s,o){var c=s._chartjs;if(c){var u=c.listeners,y=u.indexOf(o);y!==-1&&u.splice(y,1),!(u.length>0)&&(Wh.forEach(function($){delete s[$]}),delete s._chartjs)}}var vp=function(s,o){this.initialize(s,o)};se.extend(vp.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(s,o){var c=this;c.chart=s,c.index=o,c.linkScales(),c.addElements(),c._type=c.getMeta().type},updateIndex:function(s){this.index=s},linkScales:function(){var s=this,o=s.getMeta(),c=s.chart,u=c.scales,y=s.getDataset(),$=c.options.scales;(o.xAxisID===null||!(o.xAxisID in u)||y.xAxisID)&&(o.xAxisID=y.xAxisID||$.xAxes[0].id),(o.yAxisID===null||!(o.yAxisID in u)||y.yAxisID)&&(o.yAxisID=y.yAxisID||$.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(s){return this.chart.scales[s]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&tp(this._data,this)},createMetaDataset:function(){var s=this,o=s.datasetElementType;return o&&new o({_chart:s.chart,_datasetIndex:s.index})},createMetaData:function(s){var o=this,c=o.dataElementType;return c&&new c({_chart:o.chart,_datasetIndex:o.index,_index:s})},addElements:function(){var s=this,o=s.getMeta(),c=s.getDataset().data||[],u=o.data,y,$;for(y=0,$=c.length;y<$;++y)u[y]=u[y]||s.createMetaData(y);o.dataset=o.dataset||s.createMetaDataset()},addElementAndReset:function(s){var o=this.createMetaData(s);this.getMeta().data.splice(s,0,o),this.updateElement(o,s,!0)},buildOrUpdateElements:function(){var s=this,o=s.getDataset(),c=o.data||(o.data=[]);s._data!==c&&(s._data&&tp(s._data,s),c&&Object.isExtensible(c)&&mp(c,s),s._data=c),s.resyncElements()},_configure:function(){var s=this;s._config=se.merge(Object.create(null),[s.chart.options.datasets[s._type],s.getDataset()],{merger:function(o,c,u){o!=="_meta"&&o!=="data"&&se._merger(o,c,u)}})},_update:function(s){var o=this;o._configure(),o._cachedDataOpts=null,o.update(s)},update:se.noop,transition:function(s){for(var o=this.getMeta(),c=o.data||[],u=c.length,y=0;y<u;++y)c[y].transition(s);o.dataset&&o.dataset.transition(s)},draw:function(){var s=this.getMeta(),o=s.data||[],c=o.length,u=0;for(s.dataset&&s.dataset.draw();u<c;++u)o[u].draw()},getStyle:function(s){var o=this,c=o.getMeta(),u=c.dataset,y;return o._configure(),u&&s===void 0?y=o._resolveDatasetElementOptions(u||{}):(s=s||0,y=o._resolveDataElementOptions(c.data[s]||{},s)),(y.fill===!1||y.fill===null)&&(y.backgroundColor=y.borderColor),y},_resolveDatasetElementOptions:function(s,o){var c=this,u=c.chart,y=c._config,$=s.custom||{},T=u.options.elements[c.datasetElementType.prototype._type]||{},K=c._datasetElementOptions,D={},G,te,re,oe,me={chart:u,dataset:c.getDataset(),datasetIndex:c.index,hover:o};for(G=0,te=K.length;G<te;++G)re=K[G],oe=o?"hover"+re.charAt(0).toUpperCase()+re.slice(1):re,D[re]=yh([$[oe],y[oe],T[oe]],me);return D},_resolveDataElementOptions:function(s,o){var c=this,u=s&&s.custom,y=c._cachedDataOpts;if(y&&!u)return y;var $=c.chart,T=c._config,K=$.options.elements[c.dataElementType.prototype._type]||{},D=c._dataElementOptions,G={},te={chart:$,dataIndex:o,dataset:c.getDataset(),datasetIndex:c.index},re={cacheable:!u},oe,me,Me,Pe;if(u=u||{},se.isArray(D))for(me=0,Me=D.length;me<Me;++me)Pe=D[me],G[Pe]=yh([u[Pe],T[Pe],K[Pe]],te,o,re);else for(oe=Object.keys(D),me=0,Me=oe.length;me<Me;++me)Pe=oe[me],G[Pe]=yh([u[Pe],T[D[Pe]],T[Pe],K[Pe]],te,o,re);return re.cacheable&&(c._cachedDataOpts=Object.freeze(G)),G},removeHoverStyle:function(s){se.merge(s._model,s.$previousStyle||{}),delete s.$previousStyle},setHoverStyle:function(s){var o=this.chart.data.datasets[s._datasetIndex],c=s._index,u=s.custom||{},y=s._model,$=se.getHoverColor;s.$previousStyle={backgroundColor:y.backgroundColor,borderColor:y.borderColor,borderWidth:y.borderWidth},y.backgroundColor=yh([u.hoverBackgroundColor,o.hoverBackgroundColor,$(y.backgroundColor)],void 0,c),y.borderColor=yh([u.hoverBorderColor,o.hoverBorderColor,$(y.borderColor)],void 0,c),y.borderWidth=yh([u.hoverBorderWidth,o.hoverBorderWidth,y.borderWidth],void 0,c)},_removeDatasetHoverStyle:function(){var s=this.getMeta().dataset;s&&this.removeHoverStyle(s)},_setDatasetHoverStyle:function(){var s=this.getMeta().dataset,o={},c,u,y,$,T,K;if(s){for(K=s._model,T=this._resolveDatasetElementOptions(s,!0),$=Object.keys(T),c=0,u=$.length;c<u;++c)y=$[c],o[y]=K[y],K[y]=T[y];s.$previousStyle=o}},resyncElements:function(){var s=this,o=s.getMeta(),c=s.getDataset().data,u=o.data.length,y=c.length;y<u?o.data.splice(y,u-y):y>u&&s.insertElements(u,y-u)},insertElements:function(s,o){for(var c=0;c<o;++c)this.addElementAndReset(s+c)},onDataPush:function(){var s=arguments.length;this.insertElements(this.getDataset().data.length-s,s)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(s,o){this.getMeta().data.splice(s,o),this.insertElements(s,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),vp.extend=se.inherits;var lh=vp,dh=Math.PI*2;vr._set("global",{elements:{arc:{backgroundColor:vr.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});function Yp(s,o){var c=o.startAngle,u=o.endAngle,y=o.pixelMargin,$=y/o.outerRadius,T=o.x,K=o.y;s.beginPath(),s.arc(T,K,o.outerRadius,c-$,u+$),o.innerRadius>y?($=y/o.innerRadius,s.arc(T,K,o.innerRadius-y,u+$,c-$,!0)):s.arc(T,K,y,u+Math.PI/2,c-Math.PI/2),s.closePath(),s.clip()}function jm(s,o,c,u){var y=c.endAngle,$;for(u&&(c.endAngle=c.startAngle+dh,Yp(s,c),c.endAngle=y,c.endAngle===c.startAngle&&c.fullCircles&&(c.endAngle+=dh,c.fullCircles--)),s.beginPath(),s.arc(c.x,c.y,c.innerRadius,c.startAngle+dh,c.startAngle,!0),$=0;$<c.fullCircles;++$)s.stroke();for(s.beginPath(),s.arc(c.x,c.y,o.outerRadius,c.startAngle,c.startAngle+dh),$=0;$<c.fullCircles;++$)s.stroke()}function Wm(s,o,c){var u=o.borderAlign==="inner";u?(s.lineWidth=o.borderWidth*2,s.lineJoin="round"):(s.lineWidth=o.borderWidth,s.lineJoin="bevel"),c.fullCircles&&jm(s,o,c,u),u&&Yp(s,c),s.beginPath(),s.arc(c.x,c.y,o.outerRadius,c.startAngle,c.endAngle),s.arc(c.x,c.y,c.innerRadius,c.endAngle,c.startAngle,!0),s.closePath(),s.stroke()}var Um=oh.extend({_type:"arc",inLabelRange:function(s){var o=this._view;return o?Math.pow(s-o.x,2)<Math.pow(o.radius+o.hoverRadius,2):!1},inRange:function(s,o){var c=this._view;if(c){for(var u=se.getAngleFromPoint(c,{x:s,y:o}),y=u.angle,$=u.distance,T=c.startAngle,K=c.endAngle;K<T;)K+=dh;for(;y>K;)y-=dh;for(;y<T;)y+=dh;var D=y>=T&&y<=K,G=$>=c.innerRadius&&$<=c.outerRadius;return D&&G}return!1},getCenterPoint:function(){var s=this._view,o=(s.startAngle+s.endAngle)/2,c=(s.innerRadius+s.outerRadius)/2;return{x:s.x+Math.cos(o)*c,y:s.y+Math.sin(o)*c}},getArea:function(){var s=this._view;return Math.PI*((s.endAngle-s.startAngle)/(2*Math.PI))*(Math.pow(s.outerRadius,2)-Math.pow(s.innerRadius,2))},tooltipPosition:function(){var s=this._view,o=s.startAngle+(s.endAngle-s.startAngle)/2,c=(s.outerRadius-s.innerRadius)/2+s.innerRadius;return{x:s.x+Math.cos(o)*c,y:s.y+Math.sin(o)*c}},draw:function(){var s=this._chart.ctx,o=this._view,c=o.borderAlign==="inner"?.33:0,u={x:o.x,y:o.y,innerRadius:o.innerRadius,outerRadius:Math.max(o.outerRadius-c,0),pixelMargin:c,startAngle:o.startAngle,endAngle:o.endAngle,fullCircles:Math.floor(o.circumference/dh)},y;if(s.save(),s.fillStyle=o.backgroundColor,s.strokeStyle=o.borderColor,u.fullCircles){for(u.endAngle=u.startAngle+dh,s.beginPath(),s.arc(u.x,u.y,u.outerRadius,u.startAngle,u.endAngle),s.arc(u.x,u.y,u.innerRadius,u.endAngle,u.startAngle,!0),s.closePath(),y=0;y<u.fullCircles;++y)s.fill();u.endAngle=u.startAngle+o.circumference%dh}s.beginPath(),s.arc(u.x,u.y,u.outerRadius,u.startAngle,u.endAngle),s.arc(u.x,u.y,u.innerRadius,u.endAngle,u.startAngle,!0),s.closePath(),s.fill(),o.borderWidth&&Wm(s,o,u),s.restore()}}),Kp=se.valueOrDefault,Qp=vr.global.defaultColor;vr._set("global",{elements:{line:{tension:.4,backgroundColor:Qp,borderWidth:3,borderColor:Qp,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Ym=oh.extend({_type:"line",draw:function(){var s=this,o=s._view,c=s._chart.ctx,u=o.spanGaps,y=s._children.slice(),$=vr.global,T=$.elements.line,K=-1,D=s._loop,G,te,re;if(y.length){if(s._loop){for(G=0;G<y.length;++G)if(te=se.previousItem(y,G),!y[G]._view.skip&&te._view.skip){y=y.slice(G).concat(y.slice(0,G)),D=u;break}D&&y.push(y[0])}for(c.save(),c.lineCap=o.borderCapStyle||T.borderCapStyle,c.setLineDash&&c.setLineDash(o.borderDash||T.borderDash),c.lineDashOffset=Kp(o.borderDashOffset,T.borderDashOffset),c.lineJoin=o.borderJoinStyle||T.borderJoinStyle,c.lineWidth=Kp(o.borderWidth,T.borderWidth),c.strokeStyle=o.borderColor||$.defaultColor,c.beginPath(),re=y[0]._view,re.skip||(c.moveTo(re.x,re.y),K=0),G=1;G<y.length;++G)re=y[G]._view,te=K===-1?se.previousItem(y,G):y[K],re.skip||(K!==G-1&&!u||K===-1?c.moveTo(re.x,re.y):se.canvas.lineTo(c,te._view,re),K=G);D&&c.closePath(),c.stroke(),c.restore()}}}),Km=se.valueOrDefault,Hp=vr.global.defaultColor;vr._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Hp,borderColor:Hp,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});function Gp(s){var o=this._view;return o?Math.abs(s-o.x)<o.radius+o.hitRadius:!1}function Qm(s){var o=this._view;return o?Math.abs(s-o.y)<o.radius+o.hitRadius:!1}var Hm=oh.extend({_type:"point",inRange:function(s,o){var c=this._view;return c?Math.pow(s-c.x,2)+Math.pow(o-c.y,2)<Math.pow(c.hitRadius+c.radius,2):!1},inLabelRange:Gp,inXRange:Gp,inYRange:Qm,getCenterPoint:function(){var s=this._view;return{x:s.x,y:s.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var s=this._view;return{x:s.x,y:s.y,padding:s.radius+s.borderWidth}},draw:function(s){var o=this._view,c=this._chart.ctx,u=o.pointStyle,y=o.rotation,$=o.radius,T=o.x,K=o.y,D=vr.global,G=D.defaultColor;o.skip||(s===void 0||se.canvas._isPointInArea(o,s))&&(c.strokeStyle=o.borderColor||G,c.lineWidth=Km(o.borderWidth,D.elements.point.borderWidth),c.fillStyle=o.backgroundColor||G,se.canvas.drawPoint(c,u,$,T,K,y))}}),Jp=vr.global.defaultColor;vr._set("global",{elements:{rectangle:{backgroundColor:Jp,borderColor:Jp,borderSkipped:"bottom",borderWidth:0}}});function np(s){return s&&s.width!==void 0}function Zp(s){var o,c,u,y,$;return np(s)?($=s.width/2,o=s.x-$,c=s.x+$,u=Math.min(s.y,s.base),y=Math.max(s.y,s.base)):($=s.height/2,o=Math.min(s.x,s.base),c=Math.max(s.x,s.base),u=s.y-$,y=s.y+$),{left:o,top:u,right:c,bottom:y}}function Xp(s,o,c){return s===o?c:s===c?o:s}function Gm(s){var o=s.borderSkipped,c={};return o&&(s.horizontal?s.base>s.x&&(o=Xp(o,"left","right")):s.base<s.y&&(o=Xp(o,"bottom","top")),c[o]=!0),c}function Jm(s,o,c){var u=s.borderWidth,y=Gm(s),$,T,K,D;return se.isObject(u)?($=+u.top||0,T=+u.right||0,K=+u.bottom||0,D=+u.left||0):$=T=K=D=+u||0,{t:y.top||$<0?0:$>c?c:$,r:y.right||T<0?0:T>o?o:T,b:y.bottom||K<0?0:K>c?c:K,l:y.left||D<0?0:D>o?o:D}}function Zm(s){var o=Zp(s),c=o.right-o.left,u=o.bottom-o.top,y=Jm(s,c/2,u/2);return{outer:{x:o.left,y:o.top,w:c,h:u},inner:{x:o.left+y.l,y:o.top+y.t,w:c-y.l-y.r,h:u-y.t-y.b}}}function Uh(s,o,c){var u=o===null,y=c===null,$=!s||u&&y?!1:Zp(s);return $&&(u||o>=$.left&&o<=$.right)&&(y||c>=$.top&&c<=$.bottom)}var Xm=oh.extend({_type:"rectangle",draw:function(){var s=this._chart.ctx,o=this._view,c=Zm(o),u=c.outer,y=c.inner;s.fillStyle=o.backgroundColor,s.fillRect(u.x,u.y,u.w,u.h),!(u.w===y.w&&u.h===y.h)&&(s.save(),s.beginPath(),s.rect(u.x,u.y,u.w,u.h),s.clip(),s.fillStyle=o.borderColor,s.rect(y.x,y.y,y.w,y.h),s.fill("evenodd"),s.restore())},height:function(){var s=this._view;return s.base-s.y},inRange:function(s,o){return Uh(this._view,s,o)},inLabelRange:function(s,o){var c=this._view;return np(c)?Uh(c,s,null):Uh(c,null,o)},inXRange:function(s){return Uh(this._view,s,null)},inYRange:function(s){return Uh(this._view,null,s)},getCenterPoint:function(){var s=this._view,o,c;return np(s)?(o=s.x,c=(s.y+s.base)/2):(o=(s.x+s.base)/2,c=s.y),{x:o,y:c}},getArea:function(){var s=this._view;return np(s)?s.width*Math.abs(s.y-s.base):s.height*Math.abs(s.x-s.base)},tooltipPosition:function(){var s=this._view;return{x:s.x,y:s.y}}}),nh={},Wv=Um,Yv=Ym,Qv=Hm,Hv=Xm;nh.Arc=Wv,nh.Line=Yv,nh.Point=Qv,nh.Rectangle=Hv;var Yh=se._deprecated,Nh=se.valueOrDefault;vr._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),vr._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});function Jv(s,o){var c=s._length,u,y,$,T;for($=1,T=o.length;$<T;++$)c=Math.min(c,Math.abs(o[$]-o[$-1]));for($=0,T=s.getTicks().length;$<T;++$)y=s.getPixelForTick($),c=$>0?Math.min(c,Math.abs(y-u)):c,u=y;return c}function Zv(s,o,c){var u=c.barThickness,y=o.stackCount,$=o.pixels[s],T=se.isNullOrUndef(u)?Jv(o.scale,o.pixels):-1,K,D;return se.isNullOrUndef(u)?(K=T*c.categoryPercentage,D=c.barPercentage):(K=u*y,D=1),{chunk:K/y,ratio:D,start:$-K/2}}function Xv(s,o,c){var u=o.pixels,y=u[s],$=s>0?u[s-1]:null,T=s<u.length-1?u[s+1]:null,K=c.categoryPercentage,D,G;return $===null&&($=y-(T===null?o.end-o.start:T-y)),T===null&&(T=y+y-$),D=y-(y-Math.min($,T))/2*K,G=Math.abs(T-$)/2*K,{chunk:G/o.stackCount,ratio:c.barPercentage,start:D}}var em=lh.extend({dataElementType:nh.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var s=this,o,c;lh.prototype.initialize.apply(s,arguments),o=s.getMeta(),o.stack=s.getDataset().stack,o.bar=!0,c=s._getIndexScale().options,Yh("bar chart",c.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),Yh("bar chart",c.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),Yh("bar chart",c.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),Yh("bar chart",s._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),Yh("bar chart",c.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(s){var o=this,c=o.getMeta().data,u,y;for(o._ruler=o.getRuler(),u=0,y=c.length;u<y;++u)o.updateElement(c[u],u,s)},updateElement:function(s,o,c){var u=this,y=u.getMeta(),$=u.getDataset(),T=u._resolveDataElementOptions(s,o);s._xScale=u.getScaleForId(y.xAxisID),s._yScale=u.getScaleForId(y.yAxisID),s._datasetIndex=u.index,s._index=o,s._model={backgroundColor:T.backgroundColor,borderColor:T.borderColor,borderSkipped:T.borderSkipped,borderWidth:T.borderWidth,datasetLabel:$.label,label:u.chart.data.labels[o]},se.isArray($.data[o])&&(s._model.borderSkipped=null),u._updateElementGeometry(s,o,c,T),s.pivot()},_updateElementGeometry:function(s,o,c,u){var y=this,$=s._model,T=y._getValueScale(),K=T.getBasePixel(),D=T.isHorizontal(),G=y._ruler||y.getRuler(),te=y.calculateBarValuePixels(y.index,o,u),re=y.calculateBarIndexPixels(y.index,o,G,u);$.horizontal=D,$.base=c?K:te.base,$.x=D?c?K:te.head:re.center,$.y=D?re.center:c?K:te.head,$.height=D?re.size:void 0,$.width=D?void 0:re.size},_getStacks:function(s){var o=this,c=o._getIndexScale(),u=c._getMatchingVisibleMetas(o._type),y=c.options.stacked,$=u.length,T=[],K,D;for(K=0;K<$&&(D=u[K],(y===!1||T.indexOf(D.stack)===-1||y===void 0&&D.stack===void 0)&&T.push(D.stack),D.index!==s);++K);return T},getStackCount:function(){return this._getStacks().length},getStackIndex:function(s,o){var c=this._getStacks(s),u=o!==void 0?c.indexOf(o):-1;return u===-1?c.length-1:u},getRuler:function(){var s=this,o=s._getIndexScale(),c=[],u,y;for(u=0,y=s.getMeta().data.length;u<y;++u)c.push(o.getPixelForValue(null,u,s.index));return{pixels:c,start:o._startPixel,end:o._endPixel,stackCount:s.getStackCount(),scale:o}},calculateBarValuePixels:function(s,o,c){var u=this,y=u.chart,$=u._getValueScale(),T=$.isHorizontal(),K=y.data.datasets,D=$._getMatchingVisibleMetas(u._type),G=$._parseValue(K[s].data[o]),te=c.minBarLength,re=$.options.stacked,oe=u.getMeta().stack,me=G.start===void 0?0:G.max>=0&&G.min>=0?G.min:G.max,Me=G.start===void 0?G.end:G.max>=0&&G.min>=0?G.max-G.min:G.min-G.max,Pe=D.length,We,vi,da,ma,wa,ba,Ca;if(re||re===void 0&&oe!==void 0)for(We=0;We<Pe&&(vi=D[We],vi.index!==s);++We)vi.stack===oe&&(Ca=$._parseValue(K[vi.index].data[o]),da=Ca.start===void 0?Ca.end:Ca.min>=0&&Ca.max>=0?Ca.max:Ca.min,(G.min<0&&da<0||G.max>=0&&da>0)&&(me+=da));return ma=$.getPixelForValue(me),wa=$.getPixelForValue(me+Me),ba=wa-ma,te!==void 0&&Math.abs(ba)<te&&(ba=te,Me>=0&&!T||Me<0&&T?wa=ma-te:wa=ma+te),{size:ba,base:ma,head:wa,center:wa+ba/2}},calculateBarIndexPixels:function(s,o,c,u){var y=this,$=u.barThickness==="flex"?Xv(o,c,u):Zv(o,c,u),T=y.getStackIndex(s,y.getMeta().stack),K=$.start+$.chunk*T+$.chunk/2,D=Math.min(Nh(u.maxBarThickness,1/0),$.chunk*$.ratio);return{base:K-D/2,head:K+D/2,center:K,size:D}},draw:function(){var s=this,o=s.chart,c=s._getValueScale(),u=s.getMeta().data,y=s.getDataset(),$=u.length,T=0;for(se.canvas.clipArea(o.ctx,o.chartArea);T<$;++T){var K=c._parseValue(y.data[T]);!isNaN(K.min)&&!isNaN(K.max)&&u[T].draw()}se.canvas.unclipArea(o.ctx)},_resolveDataElementOptions:function(){var s=this,o=se.extend({},lh.prototype._resolveDataElementOptions.apply(s,arguments)),c=s._getIndexScale().options,u=s._getValueScale().options;return o.barPercentage=Nh(c.barPercentage,o.barPercentage),o.barThickness=Nh(c.barThickness,o.barThickness),o.categoryPercentage=Nh(c.categoryPercentage,o.categoryPercentage),o.maxBarThickness=Nh(c.maxBarThickness,o.maxBarThickness),o.minBarLength=Nh(u.minBarLength,o.minBarLength),o}}),gp=se.valueOrDefault,eg=se.options.resolve;vr._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(s,o){var c=o.datasets[s.datasetIndex].label||"",u=o.datasets[s.datasetIndex].data[s.index];return c+": ("+s.xLabel+", "+s.yLabel+", "+u.r+")"}}}});var tg=lh.extend({dataElementType:nh.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(s){var o=this,c=o.getMeta(),u=c.data;se.each(u,function(y,$){o.updateElement(y,$,s)})},updateElement:function(s,o,c){var u=this,y=u.getMeta(),$=s.custom||{},T=u.getScaleForId(y.xAxisID),K=u.getScaleForId(y.yAxisID),D=u._resolveDataElementOptions(s,o),G=u.getDataset().data[o],te=u.index,re=c?T.getPixelForDecimal(.5):T.getPixelForValue(typeof G=="object"?G:NaN,o,te),oe=c?K.getBasePixel():K.getPixelForValue(G,o,te);s._xScale=T,s._yScale=K,s._options=D,s._datasetIndex=te,s._index=o,s._model={backgroundColor:D.backgroundColor,borderColor:D.borderColor,borderWidth:D.borderWidth,hitRadius:D.hitRadius,pointStyle:D.pointStyle,rotation:D.rotation,radius:c?0:D.radius,skip:$.skip||isNaN(re)||isNaN(oe),x:re,y:oe},s.pivot()},setHoverStyle:function(s){var o=s._model,c=s._options,u=se.getHoverColor;s.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth,radius:o.radius},o.backgroundColor=gp(c.hoverBackgroundColor,u(c.backgroundColor)),o.borderColor=gp(c.hoverBorderColor,u(c.borderColor)),o.borderWidth=gp(c.hoverBorderWidth,c.borderWidth),o.radius=c.radius+c.hoverRadius},_resolveDataElementOptions:function(s,o){var c=this,u=c.chart,y=c.getDataset(),$=s.custom||{},T=y.data[o]||{},K=lh.prototype._resolveDataElementOptions.apply(c,arguments),D={chart:u,dataIndex:o,dataset:y,datasetIndex:c.index};return c._cachedDataOpts===K&&(K=se.extend({},K)),K.radius=eg([$.radius,T.r,c._config.radius,u.options.elements.point.radius],D,o),K}}),sp=se.valueOrDefault,Ah=Math.PI,hh=Ah*2,Sh=Ah/2;vr._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(s){var o=document.createElement("ul"),c=s.data,u=c.datasets,y=c.labels,$,T,K,D;if(o.setAttribute("class",s.id+"-legend"),u.length)for($=0,T=u[0].data.length;$<T;++$)K=o.appendChild(document.createElement("li")),D=K.appendChild(document.createElement("span")),D.style.backgroundColor=u[0].backgroundColor[$],y[$]&&K.appendChild(document.createTextNode(y[$]));return o.outerHTML},legend:{labels:{generateLabels:function(s){var o=s.data;return o.labels.length&&o.datasets.length?o.labels.map(function(c,u){var y=s.getDatasetMeta(0),$=y.controller.getStyle(u);return{text:c,fillStyle:$.backgroundColor,strokeStyle:$.borderColor,lineWidth:$.borderWidth,hidden:isNaN(o.datasets[0].data[u])||y.data[u].hidden,index:u}}):[]}},onClick:function(s,o){var c=o.index,u=this.chart,y,$,T;for(y=0,$=(u.data.datasets||[]).length;y<$;++y)T=u.getDatasetMeta(y),T.data[c]&&(T.data[c].hidden=!T.data[c].hidden);u.update()}},cutoutPercentage:50,rotation:-Sh,circumference:hh,tooltips:{callbacks:{title:function(){return""},label:function(s,o){var c=o.labels[s.index],u=": "+o.datasets[s.datasetIndex].data[s.index];return se.isArray(c)?(c=c.slice(),c[0]+=u):c+=u,c}}}});var tm=lh.extend({dataElementType:nh.Arc,linkScales:se.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(s){for(var o=0,c=0;c<s;++c)this.chart.isDatasetVisible(c)&&++o;return o},update:function(s){var o=this,c=o.chart,u=c.chartArea,y=c.options,$=1,T=1,K=0,D=0,G=o.getMeta(),te=G.data,re=y.cutoutPercentage/100||0,oe=y.circumference,me=o._getRingWeight(o.index),Me,Pe,We,vi;if(oe<hh){var da=y.rotation%hh;da+=da>=Ah?-hh:da<-Ah?hh:0;var ma=da+oe,wa=Math.cos(da),ba=Math.sin(da),Ca=Math.cos(ma),xa=Math.sin(ma),Ra=da<=0&&ma>=0||ma>=hh,Pa=da<=Sh&&ma>=Sh||ma>=hh+Sh,Va=da===-Ah||ma>=Ah,za=da<=-Sh&&ma>=-Sh||ma>=Ah+Sh,La=Va?-1:Math.min(wa,wa*re,Ca,Ca*re),eh=za?-1:Math.min(ba,ba*re,xa,xa*re),Bh=Ra?1:Math.max(wa,wa*re,Ca,Ca*re),qh=Pa?1:Math.max(ba,ba*re,xa,xa*re);$=(Bh-La)/2,T=(qh-eh)/2,K=-(Bh+La)/2,D=-(qh+eh)/2}for(We=0,vi=te.length;We<vi;++We)te[We]._options=o._resolveDataElementOptions(te[We],We);for(c.borderWidth=o.getMaxBorderWidth(),Me=(u.right-u.left-c.borderWidth)/$,Pe=(u.bottom-u.top-c.borderWidth)/T,c.outerRadius=Math.max(Math.min(Me,Pe)/2,0),c.innerRadius=Math.max(c.outerRadius*re,0),c.radiusLength=(c.outerRadius-c.innerRadius)/(o._getVisibleDatasetWeightTotal()||1),c.offsetX=K*c.outerRadius,c.offsetY=D*c.outerRadius,G.total=o.calculateTotal(),o.outerRadius=c.outerRadius-c.radiusLength*o._getRingWeightOffset(o.index),o.innerRadius=Math.max(o.outerRadius-c.radiusLength*me,0),We=0,vi=te.length;We<vi;++We)o.updateElement(te[We],We,s)},updateElement:function(s,o,c){var u=this,y=u.chart,$=y.chartArea,T=y.options,K=T.animation,D=($.left+$.right)/2,G=($.top+$.bottom)/2,te=T.rotation,re=T.rotation,oe=u.getDataset(),me=c&&K.animateRotate||s.hidden?0:u.calculateCircumference(oe.data[o])*(T.circumference/hh),Me=c&&K.animateScale?0:u.innerRadius,Pe=c&&K.animateScale?0:u.outerRadius,We=s._options||{};se.extend(s,{_datasetIndex:u.index,_index:o,_model:{backgroundColor:We.backgroundColor,borderColor:We.borderColor,borderWidth:We.borderWidth,borderAlign:We.borderAlign,x:D+y.offsetX,y:G+y.offsetY,startAngle:te,endAngle:re,circumference:me,outerRadius:Pe,innerRadius:Me,label:se.valueAtIndexOrDefault(oe.label,o,y.data.labels[o])}});var vi=s._model;(!c||!K.animateRotate)&&(o===0?vi.startAngle=T.rotation:vi.startAngle=u.getMeta().data[o-1]._model.endAngle,vi.endAngle=vi.startAngle+vi.circumference),s.pivot()},calculateTotal:function(){var s=this.getDataset(),o=this.getMeta(),c=0,u;return se.each(o.data,function(y,$){u=s.data[$],!isNaN(u)&&!y.hidden&&(c+=Math.abs(u))}),c},calculateCircumference:function(s){var o=this.getMeta().total;return o>0&&!isNaN(s)?hh*(Math.abs(s)/o):0},getMaxBorderWidth:function(s){var o=this,c=0,u=o.chart,y,$,T,K,D,G,te,re;if(!s){for(y=0,$=u.data.datasets.length;y<$;++y)if(u.isDatasetVisible(y)){T=u.getDatasetMeta(y),s=T.data,y!==o.index&&(D=T.controller);break}}if(!s)return 0;for(y=0,$=s.length;y<$;++y)K=s[y],D?(D._configure(),G=D._resolveDataElementOptions(K,y)):G=K._options,G.borderAlign!=="inner"&&(te=G.borderWidth,re=G.hoverBorderWidth,c=te>c?te:c,c=re>c?re:c);return c},setHoverStyle:function(s){var o=s._model,c=s._options,u=se.getHoverColor;s.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth},o.backgroundColor=sp(c.hoverBackgroundColor,u(c.backgroundColor)),o.borderColor=sp(c.hoverBorderColor,u(c.borderColor)),o.borderWidth=sp(c.hoverBorderWidth,c.borderWidth)},_getRingWeightOffset:function(s){for(var o=0,c=0;c<s;++c)this.chart.isDatasetVisible(c)&&(o+=this._getRingWeight(c));return o},_getRingWeight:function(s){return Math.max(sp(this.chart.data.datasets[s].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});vr._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),vr._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var rg=em.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),ph=se.valueOrDefault,ng=se.options.resolve,yp=se.canvas._isPointInArea;vr._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});function rm(s,o){var c=s&&s.options.ticks||{},u=c.reverse,y=c.min===void 0?o:0,$=c.max===void 0?o:0;return{start:u?$:y,end:u?y:$}}function sg(s,o,c){var u=c/2,y=rm(s,u),$=rm(o,u);return{top:$.end,right:y.end,bottom:$.start,left:y.start}}function ig(s){var o,c,u,y;return se.isObject(s)?(o=s.top,c=s.right,u=s.bottom,y=s.left):o=c=u=y=s,{top:o,right:c,bottom:u,left:y}}var nm=lh.extend({datasetElementType:nh.Line,dataElementType:nh.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(s){var o=this,c=o.getMeta(),u=c.dataset,y=c.data||[],$=o.chart.options,T=o._config,K=o._showLine=ph(T.showLine,$.showLines),D,G;for(o._xScale=o.getScaleForId(c.xAxisID),o._yScale=o.getScaleForId(c.yAxisID),K&&(T.tension!==void 0&&T.lineTension===void 0&&(T.lineTension=T.tension),u._scale=o._yScale,u._datasetIndex=o.index,u._children=y,u._model=o._resolveDatasetElementOptions(u),u.pivot()),D=0,G=y.length;D<G;++D)o.updateElement(y[D],D,s);for(K&&u._model.tension!==0&&o.updateBezierControlPoints(),D=0,G=y.length;D<G;++D)y[D].pivot()},updateElement:function(s,o,c){var u=this,y=u.getMeta(),$=s.custom||{},T=u.getDataset(),K=u.index,D=T.data[o],G=u._xScale,te=u._yScale,re=y.dataset._model,oe,me,Me=u._resolveDataElementOptions(s,o);oe=G.getPixelForValue(typeof D=="object"?D:NaN,o,K),me=c?te.getBasePixel():u.calculatePointY(D,o,K),s._xScale=G,s._yScale=te,s._options=Me,s._datasetIndex=K,s._index=o,s._model={x:oe,y:me,skip:$.skip||isNaN(oe)||isNaN(me),radius:Me.radius,pointStyle:Me.pointStyle,rotation:Me.rotation,backgroundColor:Me.backgroundColor,borderColor:Me.borderColor,borderWidth:Me.borderWidth,tension:ph($.tension,re?re.tension:0),steppedLine:re?re.steppedLine:!1,hitRadius:Me.hitRadius}},_resolveDatasetElementOptions:function(s){var o=this,c=o._config,u=s.custom||{},y=o.chart.options,$=y.elements.line,T=lh.prototype._resolveDatasetElementOptions.apply(o,arguments);return T.spanGaps=ph(c.spanGaps,y.spanGaps),T.tension=ph(c.lineTension,$.tension),T.steppedLine=ng([u.steppedLine,c.steppedLine,$.stepped]),T.clip=ig(ph(c.clip,sg(o._xScale,o._yScale,T.borderWidth))),T},calculatePointY:function(s,o,c){var u=this,y=u.chart,$=u._yScale,T=0,K=0,D,G,te,re,oe,me,Me;if($.options.stacked){for(oe=+$.getRightValue(s),me=y._getSortedVisibleDatasetMetas(),Me=me.length,D=0;D<Me&&(te=me[D],te.index!==c);++D)G=y.data.datasets[te.index],te.type==="line"&&te.yAxisID===$.id&&(re=+$.getRightValue(G.data[o]),re<0?K+=re||0:T+=re||0);return oe<0?$.getPixelForValue(K+oe):$.getPixelForValue(T+oe)}return $.getPixelForValue(s)},updateBezierControlPoints:function(){var s=this,o=s.chart,c=s.getMeta(),u=c.dataset._model,y=o.chartArea,$=c.data||[],T,K,D,G;u.spanGaps&&($=$.filter(function(re){return!re._model.skip}));function te(re,oe,me){return Math.max(Math.min(re,me),oe)}if(u.cubicInterpolationMode==="monotone")se.splineCurveMonotone($);else for(T=0,K=$.length;T<K;++T)D=$[T]._model,G=se.splineCurve(se.previousItem($,T)._model,D,se.nextItem($,T)._model,u.tension),D.controlPointPreviousX=G.previous.x,D.controlPointPreviousY=G.previous.y,D.controlPointNextX=G.next.x,D.controlPointNextY=G.next.y;if(o.options.elements.line.capBezierPoints)for(T=0,K=$.length;T<K;++T)D=$[T]._model,yp(D,y)&&(T>0&&yp($[T-1]._model,y)&&(D.controlPointPreviousX=te(D.controlPointPreviousX,y.left,y.right),D.controlPointPreviousY=te(D.controlPointPreviousY,y.top,y.bottom)),T<$.length-1&&yp($[T+1]._model,y)&&(D.controlPointNextX=te(D.controlPointNextX,y.left,y.right),D.controlPointNextY=te(D.controlPointNextY,y.top,y.bottom)))},draw:function(){var s=this,o=s.chart,c=s.getMeta(),u=c.data||[],y=o.chartArea,$=o.canvas,T=0,K=u.length,D;for(s._showLine&&(D=c.dataset._model.clip,se.canvas.clipArea(o.ctx,{left:D.left===!1?0:y.left-D.left,right:D.right===!1?$.width:y.right+D.right,top:D.top===!1?0:y.top-D.top,bottom:D.bottom===!1?$.height:y.bottom+D.bottom}),c.dataset.draw(),se.canvas.unclipArea(o.ctx));T<K;++T)u[T].draw(y)},setHoverStyle:function(s){var o=s._model,c=s._options,u=se.getHoverColor;s.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth,radius:o.radius},o.backgroundColor=ph(c.hoverBackgroundColor,u(c.backgroundColor)),o.borderColor=ph(c.hoverBorderColor,u(c.borderColor)),o.borderWidth=ph(c.hoverBorderWidth,c.borderWidth),o.radius=ph(c.hoverRadius,c.radius)}}),ag=se.options.resolve;vr._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(s){var o=document.createElement("ul"),c=s.data,u=c.datasets,y=c.labels,$,T,K,D;if(o.setAttribute("class",s.id+"-legend"),u.length)for($=0,T=u[0].data.length;$<T;++$)K=o.appendChild(document.createElement("li")),D=K.appendChild(document.createElement("span")),D.style.backgroundColor=u[0].backgroundColor[$],y[$]&&K.appendChild(document.createTextNode(y[$]));return o.outerHTML},legend:{labels:{generateLabels:function(s){var o=s.data;return o.labels.length&&o.datasets.length?o.labels.map(function(c,u){var y=s.getDatasetMeta(0),$=y.controller.getStyle(u);return{text:c,fillStyle:$.backgroundColor,strokeStyle:$.borderColor,lineWidth:$.borderWidth,hidden:isNaN(o.datasets[0].data[u])||y.data[u].hidden,index:u}}):[]}},onClick:function(s,o){var c=o.index,u=this.chart,y,$,T;for(y=0,$=(u.data.datasets||[]).length;y<$;++y)T=u.getDatasetMeta(y),T.data[c].hidden=!T.data[c].hidden;u.update()}},tooltips:{callbacks:{title:function(){return""},label:function(s,o){return o.labels[s.index]+": "+s.yLabel}}}});var og=lh.extend({dataElementType:nh.Arc,linkScales:se.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(s){var o=this,c=o.getDataset(),u=o.getMeta(),y=o.chart.options.startAngle||0,$=o._starts=[],T=o._angles=[],K=u.data,D,G,te;for(o._updateRadius(),u.count=o.countVisibleElements(),D=0,G=c.data.length;D<G;D++)$[D]=y,te=o._computeAngle(D),T[D]=te,y+=te;for(D=0,G=K.length;D<G;++D)K[D]._options=o._resolveDataElementOptions(K[D],D),o.updateElement(K[D],D,s)},_updateRadius:function(){var s=this,o=s.chart,c=o.chartArea,u=o.options,y=Math.min(c.right-c.left,c.bottom-c.top);o.outerRadius=Math.max(y/2,0),o.innerRadius=Math.max(u.cutoutPercentage?o.outerRadius/100*u.cutoutPercentage:1,0),o.radiusLength=(o.outerRadius-o.innerRadius)/o.getVisibleDatasetCount(),s.outerRadius=o.outerRadius-o.radiusLength*s.index,s.innerRadius=s.outerRadius-o.radiusLength},updateElement:function(s,o,c){var u=this,y=u.chart,$=u.getDataset(),T=y.options,K=T.animation,D=y.scale,G=y.data.labels,te=D.xCenter,re=D.yCenter,oe=T.startAngle,me=s.hidden?0:D.getDistanceFromCenterForValue($.data[o]),Me=u._starts[o],Pe=Me+(s.hidden?0:u._angles[o]),We=K.animateScale?0:D.getDistanceFromCenterForValue($.data[o]),vi=s._options||{};se.extend(s,{_datasetIndex:u.index,_index:o,_scale:D,_model:{backgroundColor:vi.backgroundColor,borderColor:vi.borderColor,borderWidth:vi.borderWidth,borderAlign:vi.borderAlign,x:te,y:re,innerRadius:0,outerRadius:c?We:me,startAngle:c&&K.animateRotate?oe:Me,endAngle:c&&K.animateRotate?oe:Pe,label:se.valueAtIndexOrDefault(G,o,G[o])}}),s.pivot()},countVisibleElements:function(){var s=this.getDataset(),o=this.getMeta(),c=0;return se.each(o.data,function(u,y){!isNaN(s.data[y])&&!u.hidden&&c++}),c},setHoverStyle:function(s){var o=s._model,c=s._options,u=se.getHoverColor,y=se.valueOrDefault;s.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth},o.backgroundColor=y(c.hoverBackgroundColor,u(c.backgroundColor)),o.borderColor=y(c.hoverBorderColor,u(c.borderColor)),o.borderWidth=y(c.hoverBorderWidth,c.borderWidth)},_computeAngle:function(s){var o=this,c=this.getMeta().count,u=o.getDataset(),y=o.getMeta();if(isNaN(u.data[s])||y.data[s].hidden)return 0;var $={chart:o.chart,dataIndex:s,dataset:u,datasetIndex:o.index};return ag([o.chart.options.elements.arc.angle,2*Math.PI/c],$,s)}});vr._set("pie",se.clone(vr.doughnut)),vr._set("pie",{cutoutPercentage:0});var lg=tm,xh=se.valueOrDefault;vr._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var cg=lh.extend({datasetElementType:nh.Line,dataElementType:nh.Point,linkScales:se.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(s){var o=this,c=o.getMeta(),u=c.dataset,y=c.data||[],$=o.chart.scale,T=o._config,K,D;for(T.tension!==void 0&&T.lineTension===void 0&&(T.lineTension=T.tension),u._scale=$,u._datasetIndex=o.index,u._children=y,u._loop=!0,u._model=o._resolveDatasetElementOptions(u),u.pivot(),K=0,D=y.length;K<D;++K)o.updateElement(y[K],K,s);for(o.updateBezierControlPoints(),K=0,D=y.length;K<D;++K)y[K].pivot()},updateElement:function(s,o,c){var u=this,y=s.custom||{},$=u.getDataset(),T=u.chart.scale,K=T.getPointPositionForValue(o,$.data[o]),D=u._resolveDataElementOptions(s,o),G=u.getMeta().dataset._model,te=c?T.xCenter:K.x,re=c?T.yCenter:K.y;s._scale=T,s._options=D,s._datasetIndex=u.index,s._index=o,s._model={x:te,y:re,skip:y.skip||isNaN(te)||isNaN(re),radius:D.radius,pointStyle:D.pointStyle,rotation:D.rotation,backgroundColor:D.backgroundColor,borderColor:D.borderColor,borderWidth:D.borderWidth,tension:xh(y.tension,G?G.tension:0),hitRadius:D.hitRadius}},_resolveDatasetElementOptions:function(){var s=this,o=s._config,c=s.chart.options,u=lh.prototype._resolveDatasetElementOptions.apply(s,arguments);return u.spanGaps=xh(o.spanGaps,c.spanGaps),u.tension=xh(o.lineTension,c.elements.line.tension),u},updateBezierControlPoints:function(){var s=this,o=s.getMeta(),c=s.chart.chartArea,u=o.data||[],y,$,T,K;o.dataset._model.spanGaps&&(u=u.filter(function(G){return!G._model.skip}));function D(G,te,re){return Math.max(Math.min(G,re),te)}for(y=0,$=u.length;y<$;++y)T=u[y]._model,K=se.splineCurve(se.previousItem(u,y,!0)._model,T,se.nextItem(u,y,!0)._model,T.tension),T.controlPointPreviousX=D(K.previous.x,c.left,c.right),T.controlPointPreviousY=D(K.previous.y,c.top,c.bottom),T.controlPointNextX=D(K.next.x,c.left,c.right),T.controlPointNextY=D(K.next.y,c.top,c.bottom)},setHoverStyle:function(s){var o=s._model,c=s._options,u=se.getHoverColor;s.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth,radius:o.radius},o.backgroundColor=xh(c.hoverBackgroundColor,u(c.backgroundColor)),o.borderColor=xh(c.hoverBorderColor,u(c.borderColor)),o.borderWidth=xh(c.hoverBorderWidth,c.borderWidth),o.radius=xh(c.hoverRadius,c.radius)}});vr._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(s){return"("+s.xLabel+", "+s.yLabel+")"}}}}),vr._set("global",{datasets:{scatter:{showLine:!1}}});var ug=nm,sm={bar:em,bubble:tg,doughnut:tm,horizontalBar:rg,line:nm,polarArea:og,pie:lg,radar:cg,scatter:ug};function $h(s,o){return s.native?{x:s.x,y:s.y}:se.getRelativePosition(s,o)}function Kh(s,o){var c=s._getSortedVisibleDatasetMetas(),u,y,$,T,K,D;for(y=0,T=c.length;y<T;++y)for(u=c[y].data,$=0,K=u.length;$<K;++$)D=u[$],D._view.skip||o(D)}function bp(s,o){var c=[];return Kh(s,function(u){u.inRange(o.x,o.y)&&c.push(u)}),c}function wp(s,o,c,u){var y=Number.POSITIVE_INFINITY,$=[];return Kh(s,function(T){if(!(c&&!T.inRange(o.x,o.y))){var K=T.getCenterPoint(),D=u(o,K);D<y?($=[T],y=D):D===y&&$.push(T)}}),$}function _p(s){var o=s.indexOf("x")!==-1,c=s.indexOf("y")!==-1;return function(u,y){var $=o?Math.abs(u.x-y.x):0,T=c?Math.abs(u.y-y.y):0;return Math.sqrt(Math.pow($,2)+Math.pow(T,2))}}function kp(s,o,c){var u=$h(o,s);c.axis=c.axis||"x";var y=_p(c.axis),$=c.intersect?bp(s,u):wp(s,u,!1,y),T=[];return $.length?(s._getSortedVisibleDatasetMetas().forEach(function(K){var D=K.data[$[0]._index];D&&!D._view.skip&&T.push(D)}),T):[]}var Oh={modes:{single:function(s,o){var c=$h(o,s),u=[];return Kh(s,function(y){if(y.inRange(c.x,c.y))return u.push(y),u}),u.slice(0,1)},label:kp,index:kp,dataset:function(s,o,c){var u=$h(o,s);c.axis=c.axis||"xy";var y=_p(c.axis),$=c.intersect?bp(s,u):wp(s,u,!1,y);return $.length>0&&($=s.getDatasetMeta($[0]._datasetIndex).data),$},"x-axis":function(s,o){return kp(s,o,{intersect:!1})},point:function(s,o){var c=$h(o,s);return bp(s,c)},nearest:function(s,o,c){var u=$h(o,s);c.axis=c.axis||"xy";var y=_p(c.axis);return wp(s,u,c.intersect,y)},x:function(s,o,c){var u=$h(o,s),y=[],$=!1;return Kh(s,function(T){T.inXRange(u.x)&&y.push(T),T.inRange(u.x,u.y)&&($=!0)}),c.intersect&&!$&&(y=[]),y},y:function(s,o,c){var u=$h(o,s),y=[],$=!1;return Kh(s,function(T){T.inYRange(u.y)&&y.push(T),T.inRange(u.x,u.y)&&($=!0)}),c.intersect&&!$&&(y=[]),y}}},Ap=se.extend;function Qh(s,o){return se.where(s,function(c){return c.pos===o})}function ip(s,o){return s.sort(function(c,u){var y=o?u:c,$=o?c:u;return y.weight===$.weight?y.index-$.index:y.weight-$.weight})}function dg(s){var o=[],c,u,y;for(c=0,u=(s||[]).length;c<u;++c)y=s[c],o.push({index:c,box:y,pos:y.position,horizontal:y.isHorizontal(),weight:y.weight});return o}function fg(s,o){var c,u,y;for(c=0,u=s.length;c<u;++c)y=s[c],y.width=y.horizontal?y.box.fullWidth&&o.availableWidth:o.vBoxMaxWidth,y.height=y.horizontal&&o.hBoxMaxHeight}function hg(s){var o=dg(s),c=ip(Qh(o,"left"),!0),u=ip(Qh(o,"right")),y=ip(Qh(o,"top"),!0),$=ip(Qh(o,"bottom"));return{leftAndTop:c.concat(y),rightAndBottom:u.concat($),chartArea:Qh(o,"chartArea"),vertical:c.concat(u),horizontal:y.concat($)}}function im(s,o,c,u){return Math.max(s[c],o[c])+Math.max(s[u],o[u])}function pg(s,o,c){var u=c.box,y=s.maxPadding,$,T;if(c.size&&(s[c.pos]-=c.size),c.size=c.horizontal?u.height:u.width,s[c.pos]+=c.size,u.getPadding){var K=u.getPadding();y.top=Math.max(y.top,K.top),y.left=Math.max(y.left,K.left),y.bottom=Math.max(y.bottom,K.bottom),y.right=Math.max(y.right,K.right)}if($=o.outerWidth-im(y,s,"left","right"),T=o.outerHeight-im(y,s,"top","bottom"),$!==s.w||T!==s.h){s.w=$,s.h=T;var D=c.horizontal?[$,s.w]:[T,s.h];return D[0]!==D[1]&&(!isNaN(D[0])||!isNaN(D[1]))}}function mg(s){var o=s.maxPadding;function c(u){var y=Math.max(o[u]-s[u],0);return s[u]+=y,y}s.y+=c("top"),s.x+=c("left"),c("right"),c("bottom")}function vg(s,o){var c=o.maxPadding;function u(y){var $={left:0,top:0,right:0,bottom:0};return y.forEach(function(T){$[T]=Math.max(o[T],c[T])}),$}return u(s?["left","right"]:["top","bottom"])}function ap(s,o,c){var u=[],y,$,T,K,D,G;for(y=0,$=s.length;y<$;++y)T=s[y],K=T.box,K.update(T.width||o.w,T.height||o.h,vg(T.horizontal,o)),pg(o,c,T)&&(G=!0,u.length&&(D=!0)),K.fullWidth||u.push(T);return D&&ap(u,o,c)||G}function am(s,o,c){var u=c.padding,y=o.x,$=o.y,T,K,D,G;for(T=0,K=s.length;T<K;++T)D=s[T],G=D.box,D.horizontal?(G.left=G.fullWidth?u.left:o.left,G.right=G.fullWidth?c.outerWidth-u.right:o.left+o.w,G.top=$,G.bottom=$+G.height,G.width=G.right-G.left,$=G.bottom):(G.left=y,G.right=y+G.width,G.top=o.top,G.bottom=o.top+o.h,G.height=G.bottom-G.top,y=G.right);o.x=y,o.y=$}vr._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var ch={defaults:{},addBox:function(s,o){s.boxes||(s.boxes=[]),o.fullWidth=o.fullWidth||!1,o.position=o.position||"top",o.weight=o.weight||0,o._layers=o._layers||function(){return[{z:0,draw:function(){o.draw.apply(o,arguments)}}]},s.boxes.push(o)},removeBox:function(s,o){var c=s.boxes?s.boxes.indexOf(o):-1;c!==-1&&s.boxes.splice(c,1)},configure:function(s,o,c){for(var u=["fullWidth","position","weight"],y=u.length,$=0,T;$<y;++$)T=u[$],c.hasOwnProperty(T)&&(o[T]=c[T])},update:function(s,o,c){if(s){var u=s.options.layout||{},y=se.options.toPadding(u.padding),$=o-y.width,T=c-y.height,K=hg(s.boxes),D=K.vertical,G=K.horizontal,te=Object.freeze({outerWidth:o,outerHeight:c,padding:y,availableWidth:$,vBoxMaxWidth:$/2/D.length,hBoxMaxHeight:T/2}),re=Ap({maxPadding:Ap({},y),w:$,h:T,x:y.left,y:y.top},y);fg(D.concat(G),te),ap(D,re,te),ap(G,re,te)&&ap(D,re,te),mg(re),am(K.leftAndTop,re,te),re.x+=re.w,re.y+=re.h,am(K.rightAndBottom,re,te),s.chartArea={left:re.left,top:re.top,right:re.left+re.w,bottom:re.top+re.h},se.each(K.chartArea,function(oe){var me=oe.box;Ap(me,s.chartArea),me.update(re.w,re.h)})}}},gg={acquireContext:function(s){return s&&s.canvas&&(s=s.canvas),s&&s.getContext("2d")||null}},yg=`/*\r
 * DOM element rendering detection\r
 * https://davidwalsh.name/detect-node-insertion\r
 */\r
@keyframes chartjs-render-animation {\r
	from { opacity: 0.99; }\r
	to { opacity: 1; }\r
}\r
\r
.chartjs-render-monitor {\r
	animation: chartjs-render-animation 0.001s;\r
}\r
\r
/*\r
 * DOM element resizing detection\r
 * https://github.com/marcj/css-element-queries\r
 */\r
.chartjs-size-monitor,\r
.chartjs-size-monitor-expand,\r
.chartjs-size-monitor-shrink {\r
	position: absolute;\r
	direction: ltr;\r
	left: 0;\r
	top: 0;\r
	right: 0;\r
	bottom: 0;\r
	overflow: hidden;\r
	pointer-events: none;\r
	visibility: hidden;\r
	z-index: -1;\r
}\r
\r
.chartjs-size-monitor-expand > div {\r
	position: absolute;\r
	width: 1000000px;\r
	height: 1000000px;\r
	left: 0;\r
	top: 0;\r
}\r
\r
.chartjs-size-monitor-shrink > div {\r
	position: absolute;\r
	width: 200%;\r
	height: 200%;\r
	left: 0;\r
	top: 0;\r
}\r
`,bg=Object.freeze({__proto__:null,default:yg}),wg=i(bg),rh="$chartjs",Sp="chartjs-",xp=Sp+"size-monitor",om=Sp+"render-monitor",_g=Sp+"render-animation",lm=["animationstart","webkitAnimationStart"],kg={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function cm(s,o){var c=se.getStyle(s,o),u=c&&c.match(/^(\d+)(\.\d+)?px$/);return u?Number(u[1]):void 0}function Ag(s,o){var c=s.style,u=s.getAttribute("height"),y=s.getAttribute("width");if(s[rh]={initial:{height:u,width:y,style:{display:c.display,height:c.height,width:c.width}}},c.display=c.display||"block",y===null||y===""){var $=cm(s,"width");$!==void 0&&(s.width=$)}if(u===null||u==="")if(s.style.height==="")s.height=s.width/(o.options.aspectRatio||2);else{var T=cm(s,"height");$!==void 0&&(s.height=T)}return s}var Sg=(function(){var s=!1;try{var o=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("e",null,o)}catch{}return s})(),um=Sg?{passive:!0}:!1;function Hh(s,o,c){s.addEventListener(o,c,um)}function $p(s,o,c){s.removeEventListener(o,c,um)}function Ip(s,o,c,u,y){return{type:s,chart:o,native:y||null,x:c!==void 0?c:null,y:u!==void 0?u:null}}function xg(s,o){var c=kg[s.type]||s.type,u=se.getRelativePosition(s,o);return Ip(c,o,u.x,u.y,s)}function $g(s,o){var c=!1,u=[];return function(){u=Array.prototype.slice.call(arguments),o=o||this,c||(c=!0,se.requestAnimFrame.call(window,function(){c=!1,s.apply(o,u)}))}}function Gh(s){var o=document.createElement("div");return o.className=s||"",o}function Ig(s){var o=1e6,c=Gh(xp),u=Gh(xp+"-expand"),y=Gh(xp+"-shrink");u.appendChild(Gh()),y.appendChild(Gh()),c.appendChild(u),c.appendChild(y),c._reset=function(){u.scrollLeft=o,u.scrollTop=o,y.scrollLeft=o,y.scrollTop=o};var $=function(){c._reset(),s()};return Hh(u,"scroll",$.bind(u,"expand")),Hh(y,"scroll",$.bind(y,"shrink")),c}function Mg(s,o){var c=s[rh]||(s[rh]={}),u=c.renderProxy=function(y){y.animationName===_g&&o()};se.each(lm,function(y){Hh(s,y,u)}),c.reflow=!!s.offsetParent,s.classList.add(om)}function Eg(s){var o=s[rh]||{},c=o.renderProxy;c&&(se.each(lm,function(u){$p(s,u,c)}),delete o.renderProxy),s.classList.remove(om)}function Cg(s,o,c){var u=s[rh]||(s[rh]={}),y=u.resizer=Ig($g(function(){if(u.resizer){var $=c.options.maintainAspectRatio&&s.parentNode,T=$?$.clientWidth:0;o(Ip("resize",c)),$&&$.clientWidth<T&&c.canvas&&o(Ip("resize",c))}}));Mg(s,function(){if(u.resizer){var $=s.parentNode;$&&$!==y.parentNode&&$.insertBefore(y,$.firstChild),y._reset()}})}function Rg(s){var o=s[rh]||{},c=o.resizer;delete o.resizer,Eg(s),c&&c.parentNode&&c.parentNode.removeChild(c)}function Tg(s,o){var c=s[rh]||(s[rh]={});if(!c.containsStyles){c.containsStyles=!0,o=`/* Chart.js */
`+o;var u=document.createElement("style");u.setAttribute("type","text/css"),u.appendChild(document.createTextNode(o)),s.appendChild(u)}}var dm={disableCSSInjection:!1,_enabled:typeof window<"u"&&typeof document<"u",_ensureLoaded:function(s){if(!this.disableCSSInjection){var o=s.getRootNode?s.getRootNode():document,c=o.host?o:document.head;Tg(c,wg)}},acquireContext:function(s,o){typeof s=="string"?s=document.getElementById(s):s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas);var c=s&&s.getContext&&s.getContext("2d");return c&&c.canvas===s?(this._ensureLoaded(s),Ag(s,o),c):null},releaseContext:function(s){var o=s.canvas;if(o[rh]){var c=o[rh].initial;["height","width"].forEach(function(u){var y=c[u];se.isNullOrUndef(y)?o.removeAttribute(u):o.setAttribute(u,y)}),se.each(c.style||{},function(u,y){o.style[y]=u}),o.width=o.width,delete o[rh]}},addEventListener:function(s,o,c){var u=s.canvas;if(o==="resize"){Cg(u,c,s);return}var y=c[rh]||(c[rh]={}),$=y.proxies||(y.proxies={}),T=$[s.id+"_"+o]=function(K){c(xg(K,s))};Hh(u,o,T)},removeEventListener:function(s,o,c){var u=s.canvas;if(o==="resize"){Rg(u);return}var y=c[rh]||{},$=y.proxies||{},T=$[s.id+"_"+o];T&&$p(u,o,T)}};se.addEvent=Hh,se.removeEvent=$p;var Pg=dm._enabled?dm:gg,Dh=se.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Pg);vr._set("global",{plugins:{}});var Ta={_plugins:[],_cacheId:0,register:function(s){var o=this._plugins;[].concat(s).forEach(function(c){o.indexOf(c)===-1&&o.push(c)}),this._cacheId++},unregister:function(s){var o=this._plugins;[].concat(s).forEach(function(c){var u=o.indexOf(c);u!==-1&&o.splice(u,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(s,o,c){var u=this.descriptors(s),y=u.length,$,T,K,D,G;for($=0;$<y;++$)if(T=u[$],K=T.plugin,G=K[o],typeof G=="function"&&(D=[s].concat(c||[]),D.push(T.options),G.apply(K,D)===!1))return!1;return!0},descriptors:function(s){var o=s.$plugins||(s.$plugins={});if(o.id===this._cacheId)return o.descriptors;var c=[],u=[],y=s&&s.config||{},$=y.options&&y.options.plugins||{};return this._plugins.concat(y.plugins||[]).forEach(function(T){var K=c.indexOf(T);if(K===-1){var D=T.id,G=$[D];G!==!1&&(G===!0&&(G=se.clone(vr.global.plugins[D])),c.push(T),u.push({plugin:T,options:G||{}}))}}),o.descriptors=u,o.id=this._cacheId,u},_invalidate:function(s){delete s.$plugins}},Jh={constructors:{},defaults:{},registerScaleType:function(s,o,c){this.constructors[s]=o,this.defaults[s]=se.clone(c)},getScaleConstructor:function(s){return this.constructors.hasOwnProperty(s)?this.constructors[s]:void 0},getScaleDefaults:function(s){return this.defaults.hasOwnProperty(s)?se.merge(Object.create(null),[vr.scale,this.defaults[s]]):{}},updateScaleDefaults:function(s,o){var c=this;c.defaults.hasOwnProperty(s)&&(c.defaults[s]=se.extend(c.defaults[s],o))},addScalesToLayout:function(s){se.each(s.scales,function(o){o.fullWidth=o.options.fullWidth,o.position=o.options.position,o.weight=o.options.weight,ch.addBox(s,o)})}},mh=se.valueOrDefault,Mp=se.rtl.getRtlAdapter;vr._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:se.noop,title:function(s,o){var c="",u=o.labels,y=u?u.length:0;if(s.length>0){var $=s[0];$.label?c=$.label:$.xLabel?c=$.xLabel:y>0&&$.index<y&&(c=u[$.index])}return c},afterTitle:se.noop,beforeBody:se.noop,beforeLabel:se.noop,label:function(s,o){var c=o.datasets[s.datasetIndex].label||"";return c&&(c+=": "),se.isNullOrUndef(s.value)?c+=s.yLabel:c+=s.value,c},labelColor:function(s,o){var c=o.getDatasetMeta(s.datasetIndex),u=c.data[s.index],y=u._view;return{borderColor:y.borderColor,backgroundColor:y.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:se.noop,afterBody:se.noop,beforeFooter:se.noop,footer:se.noop,afterFooter:se.noop}}});var fm={average:function(s){if(!s.length)return!1;var o,c,u=0,y=0,$=0;for(o=0,c=s.length;o<c;++o){var T=s[o];if(T&&T.hasValue()){var K=T.tooltipPosition();u+=K.x,y+=K.y,++$}}return{x:u/$,y:y/$}},nearest:function(s,o){var c=o.x,u=o.y,y=Number.POSITIVE_INFINITY,$,T,K;for($=0,T=s.length;$<T;++$){var D=s[$];if(D&&D.hasValue()){var G=D.getCenterPoint(),te=se.distanceBetweenPoints(o,G);te<y&&(y=te,K=D)}}if(K){var re=K.tooltipPosition();c=re.x,u=re.y}return{x:c,y:u}}};function fh(s,o){return o&&(se.isArray(o)?Array.prototype.push.apply(s,o):s.push(o)),s}function vh(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function Ng(s){var o=s._xScale,c=s._yScale||s._scale,u=s._index,y=s._datasetIndex,$=s._chart.getDatasetMeta(y).controller,T=$._getIndexScale(),K=$._getValueScale();return{xLabel:o?o.getLabelForIndex(u,y):"",yLabel:c?c.getLabelForIndex(u,y):"",label:T?""+T.getLabelForIndex(u,y):"",value:K?""+K.getLabelForIndex(u,y):"",index:u,datasetIndex:y,x:s._model.x,y:s._model.y}}function hm(s){var o=vr.global;return{xPadding:s.xPadding,yPadding:s.yPadding,xAlign:s.xAlign,yAlign:s.yAlign,rtl:s.rtl,textDirection:s.textDirection,bodyFontColor:s.bodyFontColor,_bodyFontFamily:mh(s.bodyFontFamily,o.defaultFontFamily),_bodyFontStyle:mh(s.bodyFontStyle,o.defaultFontStyle),_bodyAlign:s.bodyAlign,bodyFontSize:mh(s.bodyFontSize,o.defaultFontSize),bodySpacing:s.bodySpacing,titleFontColor:s.titleFontColor,_titleFontFamily:mh(s.titleFontFamily,o.defaultFontFamily),_titleFontStyle:mh(s.titleFontStyle,o.defaultFontStyle),titleFontSize:mh(s.titleFontSize,o.defaultFontSize),_titleAlign:s.titleAlign,titleSpacing:s.titleSpacing,titleMarginBottom:s.titleMarginBottom,footerFontColor:s.footerFontColor,_footerFontFamily:mh(s.footerFontFamily,o.defaultFontFamily),_footerFontStyle:mh(s.footerFontStyle,o.defaultFontStyle),footerFontSize:mh(s.footerFontSize,o.defaultFontSize),_footerAlign:s.footerAlign,footerSpacing:s.footerSpacing,footerMarginTop:s.footerMarginTop,caretSize:s.caretSize,cornerRadius:s.cornerRadius,backgroundColor:s.backgroundColor,opacity:0,legendColorBackground:s.multiKeyBackground,displayColors:s.displayColors,borderColor:s.borderColor,borderWidth:s.borderWidth}}function Og(s,o){var c=s._chart.ctx,u=o.yPadding*2,y=0,$=o.body,T=$.reduce(function(Me,Pe){return Me+Pe.before.length+Pe.lines.length+Pe.after.length},0);T+=o.beforeBody.length+o.afterBody.length;var K=o.title.length,D=o.footer.length,G=o.titleFontSize,te=o.bodyFontSize,re=o.footerFontSize;u+=K*G,u+=K?(K-1)*o.titleSpacing:0,u+=K?o.titleMarginBottom:0,u+=T*te,u+=T?(T-1)*o.bodySpacing:0,u+=D?o.footerMarginTop:0,u+=D*re,u+=D?(D-1)*o.footerSpacing:0;var oe=0,me=function(Me){y=Math.max(y,c.measureText(Me).width+oe)};return c.font=se.fontString(G,o._titleFontStyle,o._titleFontFamily),se.each(o.title,me),c.font=se.fontString(te,o._bodyFontStyle,o._bodyFontFamily),se.each(o.beforeBody.concat(o.afterBody),me),oe=o.displayColors?te+2:0,se.each($,function(Me){se.each(Me.before,me),se.each(Me.lines,me),se.each(Me.after,me)}),oe=0,c.font=se.fontString(re,o._footerFontStyle,o._footerFontFamily),se.each(o.footer,me),y+=2*o.xPadding,{width:y,height:u}}function Dg(s,o){var c=s._model,u=s._chart,y=s._chart.chartArea,$="center",T="center";c.y<o.height?T="top":c.y>u.height-o.height&&(T="bottom");var K,D,G,te,re,oe=(y.left+y.right)/2,me=(y.top+y.bottom)/2;T==="center"?(K=function(Pe){return Pe<=oe},D=function(Pe){return Pe>oe}):(K=function(Pe){return Pe<=o.width/2},D=function(Pe){return Pe>=u.width-o.width/2}),G=function(Pe){return Pe+o.width+c.caretSize+c.caretPadding>u.width},te=function(Pe){return Pe-o.width-c.caretSize-c.caretPadding<0},re=function(Pe){return Pe<=me?"top":"bottom"},K(c.x)?($="left",G(c.x)&&($="center",T=re(c.y))):D(c.x)&&($="right",te(c.x)&&($="center",T=re(c.y)));var Me=s._options;return{xAlign:Me.xAlign?Me.xAlign:$,yAlign:Me.yAlign?Me.yAlign:T}}function Fg(s,o,c,u){var y=s.x,$=s.y,T=s.caretSize,K=s.caretPadding,D=s.cornerRadius,G=c.xAlign,te=c.yAlign,re=T+K,oe=D+K;return G==="right"?y-=o.width:G==="center"&&(y-=o.width/2,y+o.width>u.width&&(y=u.width-o.width),y<0&&(y=0)),te==="top"?$+=re:te==="bottom"?$-=o.height+re:$-=o.height/2,te==="center"?G==="left"?y+=re:G==="right"&&(y-=re):G==="left"?y-=oe:G==="right"&&(y+=oe),{x:y,y:$}}function op(s,o){return o==="center"?s.x+s.width/2:o==="right"?s.x+s.width-s.xPadding:s.x+s.xPadding}function pm(s){return fh([],vh(s))}var Lg=oh.extend({initialize:function(){this._model=hm(this._options),this._lastActive=[]},getTitle:function(){var s=this,o=s._options,c=o.callbacks,u=c.beforeTitle.apply(s,arguments),y=c.title.apply(s,arguments),$=c.afterTitle.apply(s,arguments),T=[];return T=fh(T,vh(u)),T=fh(T,vh(y)),T=fh(T,vh($)),T},getBeforeBody:function(){return pm(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(s,o){var c=this,u=c._options.callbacks,y=[];return se.each(s,function($){var T={before:[],lines:[],after:[]};fh(T.before,vh(u.beforeLabel.call(c,$,o))),fh(T.lines,u.label.call(c,$,o)),fh(T.after,vh(u.afterLabel.call(c,$,o))),y.push(T)}),y},getAfterBody:function(){return pm(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var s=this,o=s._options.callbacks,c=o.beforeFooter.apply(s,arguments),u=o.footer.apply(s,arguments),y=o.afterFooter.apply(s,arguments),$=[];return $=fh($,vh(c)),$=fh($,vh(u)),$=fh($,vh(y)),$},update:function(s){var o=this,c=o._options,u=o._model,y=o._model=hm(c),$=o._active,T=o._data,K={xAlign:u.xAlign,yAlign:u.yAlign},D={x:u.x,y:u.y},G={width:u.width,height:u.height},te={x:u.caretX,y:u.caretY},re,oe;if($.length){y.opacity=1;var me=[],Me=[];te=fm[c.position].call(o,$,o._eventPosition);var Pe=[];for(re=0,oe=$.length;re<oe;++re)Pe.push(Ng($[re]));c.filter&&(Pe=Pe.filter(function(We){return c.filter(We,T)})),c.itemSort&&(Pe=Pe.sort(function(We,vi){return c.itemSort(We,vi,T)})),se.each(Pe,function(We){me.push(c.callbacks.labelColor.call(o,We,o._chart)),Me.push(c.callbacks.labelTextColor.call(o,We,o._chart))}),y.title=o.getTitle(Pe,T),y.beforeBody=o.getBeforeBody(Pe,T),y.body=o.getBody(Pe,T),y.afterBody=o.getAfterBody(Pe,T),y.footer=o.getFooter(Pe,T),y.x=te.x,y.y=te.y,y.caretPadding=c.caretPadding,y.labelColors=me,y.labelTextColors=Me,y.dataPoints=Pe,G=Og(this,y),K=Dg(this,G),D=Fg(y,G,K,o._chart)}else y.opacity=0;return y.xAlign=K.xAlign,y.yAlign=K.yAlign,y.x=D.x,y.y=D.y,y.width=G.width,y.height=G.height,y.caretX=te.x,y.caretY=te.y,o._model=y,s&&c.custom&&c.custom.call(o,y),o},drawCaret:function(s,o){var c=this._chart.ctx,u=this._view,y=this.getCaretPosition(s,o,u);c.lineTo(y.x1,y.y1),c.lineTo(y.x2,y.y2),c.lineTo(y.x3,y.y3)},getCaretPosition:function(s,o,c){var u,y,$,T,K,D,G=c.caretSize,te=c.cornerRadius,re=c.xAlign,oe=c.yAlign,me=s.x,Me=s.y,Pe=o.width,We=o.height;if(oe==="center")K=Me+We/2,re==="left"?(u=me,y=u-G,$=u,T=K+G,D=K-G):(u=me+Pe,y=u+G,$=u,T=K-G,D=K+G);else if(re==="left"?(y=me+te+G,u=y-G,$=y+G):re==="right"?(y=me+Pe-te-G,u=y-G,$=y+G):(y=c.caretX,u=y-G,$=y+G),oe==="top")T=Me,K=T-G,D=T;else{T=Me+We,K=T+G,D=T;var vi=$;$=u,u=vi}return{x1:u,x2:y,x3:$,y1:T,y2:K,y3:D}},drawTitle:function(s,o,c){var u=o.title,y=u.length,$,T,K;if(y){var D=Mp(o.rtl,o.x,o.width);for(s.x=op(o,o._titleAlign),c.textAlign=D.textAlign(o._titleAlign),c.textBaseline="middle",$=o.titleFontSize,T=o.titleSpacing,c.fillStyle=o.titleFontColor,c.font=se.fontString($,o._titleFontStyle,o._titleFontFamily),K=0;K<y;++K)c.fillText(u[K],D.x(s.x),s.y+$/2),s.y+=$+T,K+1===y&&(s.y+=o.titleMarginBottom-T)}},drawBody:function(s,o,c){var u=o.bodyFontSize,y=o.bodySpacing,$=o._bodyAlign,T=o.body,K=o.displayColors,D=0,G=K?op(o,"left"):0,te=Mp(o.rtl,o.x,o.width),re=function(Ca){c.fillText(Ca,te.x(s.x+D),s.y+u/2),s.y+=u+y},oe,me,Me,Pe,We,vi,da,ma,wa=te.textAlign($);for(c.textAlign=$,c.textBaseline="middle",c.font=se.fontString(u,o._bodyFontStyle,o._bodyFontFamily),s.x=op(o,wa),c.fillStyle=o.bodyFontColor,se.each(o.beforeBody,re),D=K&&wa!=="right"?$==="center"?u/2+1:u+2:0,We=0,da=T.length;We<da;++We){for(oe=T[We],me=o.labelTextColors[We],Me=o.labelColors[We],c.fillStyle=me,se.each(oe.before,re),Pe=oe.lines,vi=0,ma=Pe.length;vi<ma;++vi){if(K){var ba=te.x(G);c.fillStyle=o.legendColorBackground,c.fillRect(te.leftForLtr(ba,u),s.y,u,u),c.lineWidth=1,c.strokeStyle=Me.borderColor,c.strokeRect(te.leftForLtr(ba,u),s.y,u,u),c.fillStyle=Me.backgroundColor,c.fillRect(te.leftForLtr(te.xPlus(ba,1),u-2),s.y+1,u-2,u-2),c.fillStyle=me}re(Pe[vi])}se.each(oe.after,re)}D=0,se.each(o.afterBody,re),s.y-=y},drawFooter:function(s,o,c){var u=o.footer,y=u.length,$,T;if(y){var K=Mp(o.rtl,o.x,o.width);for(s.x=op(o,o._footerAlign),s.y+=o.footerMarginTop,c.textAlign=K.textAlign(o._footerAlign),c.textBaseline="middle",$=o.footerFontSize,c.fillStyle=o.footerFontColor,c.font=se.fontString($,o._footerFontStyle,o._footerFontFamily),T=0;T<y;++T)c.fillText(u[T],K.x(s.x),s.y+$/2),s.y+=$+o.footerSpacing}},drawBackground:function(s,o,c,u){c.fillStyle=o.backgroundColor,c.strokeStyle=o.borderColor,c.lineWidth=o.borderWidth;var y=o.xAlign,$=o.yAlign,T=s.x,K=s.y,D=u.width,G=u.height,te=o.cornerRadius;c.beginPath(),c.moveTo(T+te,K),$==="top"&&this.drawCaret(s,u),c.lineTo(T+D-te,K),c.quadraticCurveTo(T+D,K,T+D,K+te),$==="center"&&y==="right"&&this.drawCaret(s,u),c.lineTo(T+D,K+G-te),c.quadraticCurveTo(T+D,K+G,T+D-te,K+G),$==="bottom"&&this.drawCaret(s,u),c.lineTo(T+te,K+G),c.quadraticCurveTo(T,K+G,T,K+G-te),$==="center"&&y==="left"&&this.drawCaret(s,u),c.lineTo(T,K+te),c.quadraticCurveTo(T,K,T+te,K),c.closePath(),c.fill(),o.borderWidth>0&&c.stroke()},draw:function(){var s=this._chart.ctx,o=this._view;if(o.opacity!==0){var c={width:o.width,height:o.height},u={x:o.x,y:o.y},y=Math.abs(o.opacity<.001)?0:o.opacity,$=o.title.length||o.beforeBody.length||o.body.length||o.afterBody.length||o.footer.length;this._options.enabled&&$&&(s.save(),s.globalAlpha=y,this.drawBackground(u,o,s,c),u.y+=o.yPadding,se.rtl.overrideTextDirection(s,o.textDirection),this.drawTitle(u,o,s),this.drawBody(u,o,s),this.drawFooter(u,o,s),se.rtl.restoreTextDirection(s,o.textDirection),s.restore())}},handleEvent:function(s){var o=this,c=o._options,u=!1;return o._lastActive=o._lastActive||[],s.type==="mouseout"?o._active=[]:(o._active=o._chart.getElementsAtEventForMode(s,c.mode,c),c.reverse&&o._active.reverse()),u=!se.arrayEquals(o._active,o._lastActive),u&&(o._lastActive=o._active,(c.enabled||c.custom)&&(o._eventPosition={x:s.x,y:s.y},o.update(!0),o.pivot())),u}}),Bg=fm,Ep=Lg;Ep.positioners=Bg;var Cp=se.valueOrDefault;vr._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});function mm(){return se.merge(Object.create(null),[].slice.call(arguments),{merger:function(s,o,c,u){if(s==="xAxes"||s==="yAxes"){var y=c[s].length,$,T,K;for(o[s]||(o[s]=[]),$=0;$<y;++$)K=c[s][$],T=Cp(K.type,s==="xAxes"?"category":"linear"),$>=o[s].length&&o[s].push({}),!o[s][$].type||K.type&&K.type!==o[s][$].type?se.merge(o[s][$],[Jh.getScaleDefaults(T),K]):se.merge(o[s][$],K)}else se._merger(s,o,c,u)}})}function Rp(){return se.merge(Object.create(null),[].slice.call(arguments),{merger:function(s,o,c,u){var y=o[s]||Object.create(null),$=c[s];s==="scales"?o[s]=mm(y,$):s==="scale"?o[s]=se.merge(y,[Jh.getScaleDefaults($.type),$]):se._merger(s,o,c,u)}})}function qg(s){s=s||Object.create(null);var o=s.data=s.data||{};return o.datasets=o.datasets||[],o.labels=o.labels||[],s.options=Rp(vr.global,vr[s.type],s.options||{}),s}function zg(s){var o=s.options;se.each(s.scales,function(c){ch.removeBox(s,c)}),o=Rp(vr.global,vr[s.config.type],o),s.options=s.config.options=o,s.ensureScalesHaveIDs(),s.buildOrUpdateScales(),s.tooltip._options=o.tooltips,s.tooltip.initialize()}function vm(s,o,c){var u,y=function($){return $.id===u};do u=o+c++;while(se.findIndex(s,y)>=0);return u}function gm(s){return s==="top"||s==="bottom"}function ym(s,o){return function(c,u){return c[s]===u[s]?c[o]-u[o]:c[s]-u[s]}}var bh=function(s,o){return this.construct(s,o),this};se.extend(bh.prototype,{construct:function(s,o){var c=this;o=qg(o);var u=Dh.acquireContext(s,o),y=u&&u.canvas,$=y&&y.height,T=y&&y.width;if(c.id=se.uid(),c.ctx=u,c.canvas=y,c.config=o,c.width=T,c.height=$,c.aspectRatio=$?T/$:null,c.options=o.options,c._bufferedRender=!1,c._layers=[],c.chart=c,c.controller=c,bh.instances[c.id]=c,Object.defineProperty(c,"data",{get:function(){return c.config.data},set:function(K){c.config.data=K}}),!u||!y){console.error("Failed to create chart: can't acquire context from the given item");return}c.initialize(),c.update()},initialize:function(){var s=this;return Ta.notify(s,"beforeInit"),se.retinaScale(s,s.options.devicePixelRatio),s.bindEvents(),s.options.responsive&&s.resize(!0),s.initToolTip(),Ta.notify(s,"afterInit"),s},clear:function(){return se.canvas.clear(this),this},stop:function(){return jh.cancelAnimation(this),this},resize:function(s){var o=this,c=o.options,u=o.canvas,y=c.maintainAspectRatio&&o.aspectRatio||null,$=Math.max(0,Math.floor(se.getMaximumWidth(u))),T=Math.max(0,Math.floor(y?$/y:se.getMaximumHeight(u)));if(!(o.width===$&&o.height===T)&&(u.width=o.width=$,u.height=o.height=T,u.style.width=$+"px",u.style.height=T+"px",se.retinaScale(o,c.devicePixelRatio),!s)){var K={width:$,height:T};Ta.notify(o,"resize",[K]),c.onResize&&c.onResize(o,K),o.stop(),o.update({duration:c.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var s=this.options,o=s.scales||{},c=s.scale;se.each(o.xAxes,function(u,y){u.id||(u.id=vm(o.xAxes,"x-axis-",y))}),se.each(o.yAxes,function(u,y){u.id||(u.id=vm(o.yAxes,"y-axis-",y))}),c&&(c.id=c.id||"scale")},buildOrUpdateScales:function(){var s=this,o=s.options,c=s.scales||{},u=[],y=Object.keys(c).reduce(function($,T){return $[T]=!1,$},{});o.scales&&(u=u.concat((o.scales.xAxes||[]).map(function($){return{options:$,dtype:"category",dposition:"bottom"}}),(o.scales.yAxes||[]).map(function($){return{options:$,dtype:"linear",dposition:"left"}}))),o.scale&&u.push({options:o.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),se.each(u,function($){var T=$.options,K=T.id,D=Cp(T.type,$.dtype);gm(T.position)!==gm($.dposition)&&(T.position=$.dposition),y[K]=!0;var G=null;if(K in c&&c[K].type===D)G=c[K],G.options=T,G.ctx=s.ctx,G.chart=s;else{var te=Jh.getScaleConstructor(D);if(!te)return;G=new te({id:K,type:D,options:T,ctx:s.ctx,chart:s}),c[G.id]=G}G.mergeTicksOptions(),$.isDefault&&(s.scale=G)}),se.each(y,function($,T){$||delete c[T]}),s.scales=c,Jh.addScalesToLayout(this)},buildOrUpdateControllers:function(){var s=this,o=[],c=s.data.datasets,u,y;for(u=0,y=c.length;u<y;u++){var $=c[u],T=s.getDatasetMeta(u),K=$.type||s.config.type;if(T.type&&T.type!==K&&(s.destroyDatasetMeta(u),T=s.getDatasetMeta(u)),T.type=K,T.order=$.order||0,T.index=u,T.controller)T.controller.updateIndex(u),T.controller.linkScales();else{var D=sm[T.type];if(D===void 0)throw new Error('"'+T.type+'" is not a chart type.');T.controller=new D(s,u),o.push(T.controller)}}return o},resetElements:function(){var s=this;se.each(s.data.datasets,function(o,c){s.getDatasetMeta(c).controller.reset()},s)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(s){var o=this,c,u;if((!s||typeof s!="object")&&(s={duration:s,lazy:arguments[1]}),zg(o),Ta._invalidate(o),Ta.notify(o,"beforeUpdate")!==!1){o.tooltip._data=o.data;var y=o.buildOrUpdateControllers();for(c=0,u=o.data.datasets.length;c<u;c++)o.getDatasetMeta(c).controller.buildOrUpdateElements();o.updateLayout(),o.options.animation&&o.options.animation.duration&&se.each(y,function($){$.reset()}),o.updateDatasets(),o.tooltip.initialize(),o.lastActive=[],Ta.notify(o,"afterUpdate"),o._layers.sort(ym("z","_idx")),o._bufferedRender?o._bufferedRequest={duration:s.duration,easing:s.easing,lazy:s.lazy}:o.render(s)}},updateLayout:function(){var s=this;Ta.notify(s,"beforeLayout")!==!1&&(ch.update(this,this.width,this.height),s._layers=[],se.each(s.boxes,function(o){o._configure&&o._configure(),s._layers.push.apply(s._layers,o._layers())},s),s._layers.forEach(function(o,c){o._idx=c}),Ta.notify(s,"afterScaleUpdate"),Ta.notify(s,"afterLayout"))},updateDatasets:function(){var s=this;if(Ta.notify(s,"beforeDatasetsUpdate")!==!1){for(var o=0,c=s.data.datasets.length;o<c;++o)s.updateDataset(o);Ta.notify(s,"afterDatasetsUpdate")}},updateDataset:function(s){var o=this,c=o.getDatasetMeta(s),u={meta:c,index:s};Ta.notify(o,"beforeDatasetUpdate",[u])!==!1&&(c.controller._update(),Ta.notify(o,"afterDatasetUpdate",[u]))},render:function(s){var o=this;(!s||typeof s!="object")&&(s={duration:s,lazy:arguments[1]});var c=o.options.animation,u=Cp(s.duration,c&&c.duration),y=s.lazy;if(Ta.notify(o,"beforeRender")!==!1){var $=function(K){Ta.notify(o,"afterRender"),se.callback(c&&c.onComplete,[K],o)};if(c&&u){var T=new Vh({numSteps:u/16.66,easing:s.easing||c.easing,render:function(K,D){var G=se.easing.effects[D.easing],te=D.currentStep,re=te/D.numSteps;K.draw(G(re),re,te)},onAnimationProgress:c.onProgress,onAnimationComplete:$});jh.addAnimation(o,T,u,y)}else o.draw(),$(new Vh({numSteps:0,chart:o}));return o}},draw:function(s){var o=this,c,u;if(o.clear(),se.isNullOrUndef(s)&&(s=1),o.transition(s),!(o.width<=0||o.height<=0)&&Ta.notify(o,"beforeDraw",[s])!==!1){for(u=o._layers,c=0;c<u.length&&u[c].z<=0;++c)u[c].draw(o.chartArea);for(o.drawDatasets(s);c<u.length;++c)u[c].draw(o.chartArea);o._drawTooltip(s),Ta.notify(o,"afterDraw",[s])}},transition:function(s){for(var o=this,c=0,u=(o.data.datasets||[]).length;c<u;++c)o.isDatasetVisible(c)&&o.getDatasetMeta(c).controller.transition(s);o.tooltip.transition(s)},_getSortedDatasetMetas:function(s){var o=this,c=o.data.datasets||[],u=[],y,$;for(y=0,$=c.length;y<$;++y)(!s||o.isDatasetVisible(y))&&u.push(o.getDatasetMeta(y));return u.sort(ym("order","index")),u},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(s){var o=this,c,u;if(Ta.notify(o,"beforeDatasetsDraw",[s])!==!1){for(c=o._getSortedVisibleDatasetMetas(),u=c.length-1;u>=0;--u)o.drawDataset(c[u],s);Ta.notify(o,"afterDatasetsDraw",[s])}},drawDataset:function(s,o){var c=this,u={meta:s,index:s.index,easingValue:o};Ta.notify(c,"beforeDatasetDraw",[u])!==!1&&(s.controller.draw(o),Ta.notify(c,"afterDatasetDraw",[u]))},_drawTooltip:function(s){var o=this,c=o.tooltip,u={tooltip:c,easingValue:s};Ta.notify(o,"beforeTooltipDraw",[u])!==!1&&(c.draw(),Ta.notify(o,"afterTooltipDraw",[u]))},getElementAtEvent:function(s){return Oh.modes.single(this,s)},getElementsAtEvent:function(s){return Oh.modes.label(this,s,{intersect:!0})},getElementsAtXAxis:function(s){return Oh.modes["x-axis"](this,s,{intersect:!0})},getElementsAtEventForMode:function(s,o,c){var u=Oh.modes[o];return typeof u=="function"?u(this,s,c):[]},getDatasetAtEvent:function(s){return Oh.modes.dataset(this,s,{intersect:!0})},getDatasetMeta:function(s){var o=this,c=o.data.datasets[s];c._meta||(c._meta={});var u=c._meta[o.id];return u||(u=c._meta[o.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:c.order||0,index:s}),u},getVisibleDatasetCount:function(){for(var s=0,o=0,c=this.data.datasets.length;o<c;++o)this.isDatasetVisible(o)&&s++;return s},isDatasetVisible:function(s){var o=this.getDatasetMeta(s);return typeof o.hidden=="boolean"?!o.hidden:!this.data.datasets[s].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(s){var o=this.id,c=this.data.datasets[s],u=c._meta&&c._meta[o];u&&(u.controller.destroy(),delete c._meta[o])},destroy:function(){var s=this,o=s.canvas,c,u;for(s.stop(),c=0,u=s.data.datasets.length;c<u;++c)s.destroyDatasetMeta(c);o&&(s.unbindEvents(),se.canvas.clear(s),Dh.releaseContext(s.ctx),s.canvas=null,s.ctx=null),Ta.notify(s,"destroy"),delete bh.instances[s.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var s=this;s.tooltip=new Ep({_chart:s,_chartInstance:s,_data:s.data,_options:s.options.tooltips},s)},bindEvents:function(){var s=this,o=s._listeners={},c=function(){s.eventHandler.apply(s,arguments)};se.each(s.options.events,function(u){Dh.addEventListener(s,u,c),o[u]=c}),s.options.responsive&&(c=function(){s.resize()},Dh.addEventListener(s,"resize",c),o.resize=c)},unbindEvents:function(){var s=this,o=s._listeners;o&&(delete s._listeners,se.each(o,function(c,u){Dh.removeEventListener(s,u,c)}))},updateHoverStyle:function(s,o,c){var u=c?"set":"remove",y,$,T;for($=0,T=s.length;$<T;++$)y=s[$],y&&this.getDatasetMeta(y._datasetIndex).controller[u+"HoverStyle"](y);o==="dataset"&&this.getDatasetMeta(s[0]._datasetIndex).controller["_"+u+"DatasetHoverStyle"]()},eventHandler:function(s){var o=this,c=o.tooltip;if(Ta.notify(o,"beforeEvent",[s])!==!1){o._bufferedRender=!0,o._bufferedRequest=null;var u=o.handleEvent(s);c&&(u=c._start?c.handleEvent(s):u|c.handleEvent(s)),Ta.notify(o,"afterEvent",[s]);var y=o._bufferedRequest;return y?o.render(y):u&&!o.animating&&(o.stop(),o.render({duration:o.options.hover.animationDuration,lazy:!0})),o._bufferedRender=!1,o._bufferedRequest=null,o}},handleEvent:function(s){var o=this,c=o.options||{},u=c.hover,y=!1;return o.lastActive=o.lastActive||[],s.type==="mouseout"?o.active=[]:o.active=o.getElementsAtEventForMode(s,u.mode,u),se.callback(c.onHover||c.hover.onHover,[s.native,o.active],o),(s.type==="mouseup"||s.type==="click")&&c.onClick&&c.onClick.call(o,s.native,o.active),o.lastActive.length&&o.updateHoverStyle(o.lastActive,u.mode,!1),o.active.length&&u.mode&&o.updateHoverStyle(o.active,u.mode,!0),y=!se.arrayEquals(o.active,o.lastActive),o.lastActive=o.active,y}}),bh.instances={};var ka=bh;bh.Controller=bh,bh.types={},se.configMerge=Rp,se.scaleMerge=mm;var Vg=function(){se.where=function(u,y){if(se.isArray(u)&&Array.prototype.filter)return u.filter(y);var $=[];return se.each(u,function(T){y(T)&&$.push(T)}),$},se.findIndex=Array.prototype.findIndex?function(u,y,$){return u.findIndex(y,$)}:function(u,y,$){$=$===void 0?u:$;for(var T=0,K=u.length;T<K;++T)if(y.call($,u[T],T,u))return T;return-1},se.findNextWhere=function(u,y,$){se.isNullOrUndef($)&&($=-1);for(var T=$+1;T<u.length;T++){var K=u[T];if(y(K))return K}},se.findPreviousWhere=function(u,y,$){se.isNullOrUndef($)&&($=u.length);for(var T=$-1;T>=0;T--){var K=u[T];if(y(K))return K}},se.isNumber=function(u){return!isNaN(parseFloat(u))&&isFinite(u)},se.almostEquals=function(u,y,$){return Math.abs(u-y)<$},se.almostWhole=function(u,y){var $=Math.round(u);return $-y<=u&&$+y>=u},se.max=function(u){return u.reduce(function(y,$){return isNaN($)?y:Math.max(y,$)},Number.NEGATIVE_INFINITY)},se.min=function(u){return u.reduce(function(y,$){return isNaN($)?y:Math.min(y,$)},Number.POSITIVE_INFINITY)},se.sign=Math.sign?function(u){return Math.sign(u)}:function(u){return u=+u,u===0||isNaN(u)?u:u>0?1:-1},se.toRadians=function(u){return u*(Math.PI/180)},se.toDegrees=function(u){return u*(180/Math.PI)},se._decimalPlaces=function(u){if(se.isFinite(u)){for(var y=1,$=0;Math.round(u*y)/y!==u;)y*=10,$++;return $}},se.getAngleFromPoint=function(u,y){var $=y.x-u.x,T=y.y-u.y,K=Math.sqrt($*$+T*T),D=Math.atan2(T,$);return D<-.5*Math.PI&&(D+=2*Math.PI),{angle:D,distance:K}},se.distanceBetweenPoints=function(u,y){return Math.sqrt(Math.pow(y.x-u.x,2)+Math.pow(y.y-u.y,2))},se.aliasPixel=function(u){return u%2===0?0:.5},se._alignPixel=function(u,y,$){var T=u.currentDevicePixelRatio,K=$/2;return Math.round((y-K)*T)/T+K},se.splineCurve=function(u,y,$,T){var K=u.skip?y:u,D=y,G=$.skip?y:$,te=Math.sqrt(Math.pow(D.x-K.x,2)+Math.pow(D.y-K.y,2)),re=Math.sqrt(Math.pow(G.x-D.x,2)+Math.pow(G.y-D.y,2)),oe=te/(te+re),me=re/(te+re);oe=isNaN(oe)?0:oe,me=isNaN(me)?0:me;var Me=T*oe,Pe=T*me;return{previous:{x:D.x-Me*(G.x-K.x),y:D.y-Me*(G.y-K.y)},next:{x:D.x+Pe*(G.x-K.x),y:D.y+Pe*(G.y-K.y)}}},se.EPSILON=Number.EPSILON||1e-14,se.splineCurveMonotone=function(u){var y=(u||[]).map(function(We){return{model:We._model,deltaK:0,mK:0}}),$=y.length,T,K,D,G;for(T=0;T<$;++T)if(D=y[T],!D.model.skip){if(K=T>0?y[T-1]:null,G=T<$-1?y[T+1]:null,G&&!G.model.skip){var te=G.model.x-D.model.x;D.deltaK=te!==0?(G.model.y-D.model.y)/te:0}!K||K.model.skip?D.mK=D.deltaK:!G||G.model.skip?D.mK=K.deltaK:this.sign(K.deltaK)!==this.sign(D.deltaK)?D.mK=0:D.mK=(K.deltaK+D.deltaK)/2}var re,oe,me,Me;for(T=0;T<$-1;++T)if(D=y[T],G=y[T+1],!(D.model.skip||G.model.skip)){if(se.almostEquals(D.deltaK,0,this.EPSILON)){D.mK=G.mK=0;continue}re=D.mK/D.deltaK,oe=G.mK/D.deltaK,Me=Math.pow(re,2)+Math.pow(oe,2),!(Me<=9)&&(me=3/Math.sqrt(Me),D.mK=re*me*D.deltaK,G.mK=oe*me*D.deltaK)}var Pe;for(T=0;T<$;++T)D=y[T],!D.model.skip&&(K=T>0?y[T-1]:null,G=T<$-1?y[T+1]:null,K&&!K.model.skip&&(Pe=(D.model.x-K.model.x)/3,D.model.controlPointPreviousX=D.model.x-Pe,D.model.controlPointPreviousY=D.model.y-Pe*D.mK),G&&!G.model.skip&&(Pe=(G.model.x-D.model.x)/3,D.model.controlPointNextX=D.model.x+Pe,D.model.controlPointNextY=D.model.y+Pe*D.mK))},se.nextItem=function(u,y,$){return $?y>=u.length-1?u[0]:u[y+1]:y>=u.length-1?u[u.length-1]:u[y+1]},se.previousItem=function(u,y,$){return $?y<=0?u[u.length-1]:u[y-1]:y<=0?u[0]:u[y-1]},se.niceNum=function(u,y){var $=Math.floor(se.log10(u)),T=u/Math.pow(10,$),K;return y?T<1.5?K=1:T<3?K=2:T<7?K=5:K=10:T<=1?K=1:T<=2?K=2:T<=5?K=5:K=10,K*Math.pow(10,$)},se.requestAnimFrame=(function(){return typeof window>"u"?function(u){u()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(u){return window.setTimeout(u,1e3/60)}})(),se.getRelativePosition=function(u,y){var $,T,K=u.originalEvent||u,D=u.target||u.srcElement,G=D.getBoundingClientRect(),te=K.touches;te&&te.length>0?($=te[0].clientX,T=te[0].clientY):($=K.clientX,T=K.clientY);var re=parseFloat(se.getStyle(D,"padding-left")),oe=parseFloat(se.getStyle(D,"padding-top")),me=parseFloat(se.getStyle(D,"padding-right")),Me=parseFloat(se.getStyle(D,"padding-bottom")),Pe=G.right-G.left-re-me,We=G.bottom-G.top-oe-Me;return $=Math.round(($-G.left-re)/Pe*D.width/y.currentDevicePixelRatio),T=Math.round((T-G.top-oe)/We*D.height/y.currentDevicePixelRatio),{x:$,y:T}};function s(u,y,$){var T;return typeof u=="string"?(T=parseInt(u,10),u.indexOf("%")!==-1&&(T=T/100*y.parentNode[$])):T=u,T}function o(u){return u!=null&&u!=="none"}function c(u,y,$){var T=document.defaultView,K=se._getParentNode(u),D=T.getComputedStyle(u)[y],G=T.getComputedStyle(K)[y],te=o(D),re=o(G),oe=Number.POSITIVE_INFINITY;return te||re?Math.min(te?s(D,u,$):oe,re?s(G,K,$):oe):"none"}se.getConstraintWidth=function(u){return c(u,"max-width","clientWidth")},se.getConstraintHeight=function(u){return c(u,"max-height","clientHeight")},se._calculatePadding=function(u,y,$){return y=se.getStyle(u,y),y.indexOf("%")>-1?$*parseInt(y,10)/100:parseInt(y,10)},se._getParentNode=function(u){var y=u.parentNode;return y&&y.toString()==="[object ShadowRoot]"&&(y=y.host),y},se.getMaximumWidth=function(u){var y=se._getParentNode(u);if(!y)return u.clientWidth;var $=y.clientWidth,T=se._calculatePadding(y,"padding-left",$),K=se._calculatePadding(y,"padding-right",$),D=$-T-K,G=se.getConstraintWidth(u);return isNaN(G)?D:Math.min(D,G)},se.getMaximumHeight=function(u){var y=se._getParentNode(u);if(!y)return u.clientHeight;var $=y.clientHeight,T=se._calculatePadding(y,"padding-top",$),K=se._calculatePadding(y,"padding-bottom",$),D=$-T-K,G=se.getConstraintHeight(u);return isNaN(G)?D:Math.min(D,G)},se.getStyle=function(u,y){return u.currentStyle?u.currentStyle[y]:document.defaultView.getComputedStyle(u,null).getPropertyValue(y)},se.retinaScale=function(u,y){var $=u.currentDevicePixelRatio=y||typeof window<"u"&&window.devicePixelRatio||1;if($!==1){var T=u.canvas,K=u.height,D=u.width;T.height=K*$,T.width=D*$,u.ctx.scale($,$),!T.style.height&&!T.style.width&&(T.style.height=K+"px",T.style.width=D+"px")}},se.fontString=function(u,y,$){return y+" "+u+"px "+$},se.longestText=function(u,y,$,T){T=T||{};var K=T.data=T.data||{},D=T.garbageCollect=T.garbageCollect||[];T.font!==y&&(K=T.data={},D=T.garbageCollect=[],T.font=y),u.font=y;var G=0,te=$.length,re,oe,me,Me,Pe;for(re=0;re<te;re++)if(Me=$[re],Me!=null&&se.isArray(Me)!==!0)G=se.measureText(u,K,D,G,Me);else if(se.isArray(Me))for(oe=0,me=Me.length;oe<me;oe++)Pe=Me[oe],Pe!=null&&!se.isArray(Pe)&&(G=se.measureText(u,K,D,G,Pe));var We=D.length/2;if(We>$.length){for(re=0;re<We;re++)delete K[D[re]];D.splice(0,We)}return G},se.measureText=function(u,y,$,T,K){var D=y[K];return D||(D=y[K]=u.measureText(K).width,$.push(K)),D>T&&(T=D),T},se.numberOfLabelLines=function(u){var y=1;return se.each(u,function($){se.isArray($)&&$.length>y&&(y=$.length)}),y},se.color=Le?function(u){return u instanceof CanvasGradient&&(u=vr.global.defaultColor),Le(u)}:function(u){return console.error("Color.js not found!"),u},se.getHoverColor=function(u){return u instanceof CanvasPattern||u instanceof CanvasGradient?u:se.color(u).saturate(.5).darken(.1).rgbString()}};function Ih(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function lp(s){this.options=s||{}}se.extend(lp.prototype,{formats:Ih,parse:Ih,format:Ih,add:Ih,diff:Ih,startOf:Ih,endOf:Ih,_create:function(s){return s}}),lp.override=function(s){se.extend(lp.prototype,s)};var jg=lp,Tp={_date:jg},Zh={formatters:{values:function(s){return se.isArray(s)?s:""+s},linear:function(s,o,c){var u=c.length>3?c[2]-c[1]:c[1]-c[0];Math.abs(u)>1&&s!==Math.floor(s)&&(u=s-Math.floor(s));var y=se.log10(Math.abs(u)),$="";if(s!==0){var T=Math.max(Math.abs(c[0]),Math.abs(c[c.length-1]));if(T<1e-4){var K=se.log10(Math.abs(s)),D=Math.floor(K)-Math.floor(y);D=Math.max(Math.min(D,20),0),$=s.toExponential(D)}else{var G=-1*Math.floor(y);G=Math.max(Math.min(G,20),0),$=s.toFixed(G)}}else $="0";return $},logarithmic:function(s,o,c){var u=s/Math.pow(10,Math.floor(se.log10(s)));return s===0?"0":u===1||u===2||u===5||o===0||o===c.length-1?s.toExponential():""}}},Mh=se.isArray,Xh=se.isNullOrUndef,Eh=se.valueOrDefault,Fh=se.valueAtIndexOrDefault;vr._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Zh.formatters.values,minor:{},major:{}}});function Wg(s,o){for(var c=[],u=s.length/o,y=0,$=s.length;y<$;y+=u)c.push(s[Math.floor(y)]);return c}function Ug(s,o,c){var u=s.getTicks().length,y=Math.min(o,u-1),$=s.getPixelForTick(y),T=s._startPixel,K=s._endPixel,D=1e-6,G;if(!(c&&(u===1?G=Math.max($-T,K-$):o===0?G=(s.getPixelForTick(1)-$)/2:G=($-s.getPixelForTick(y-1))/2,$+=y<o?G:-G,$<T-D||$>K+D)))return $}function Yg(s,o){se.each(s,function(c){var u=c.gc,y=u.length/2,$;if(y>o){for($=0;$<y;++$)delete c.data[u[$]];u.splice(0,y)}})}function Kg(s,o,c,u){var y=c.length,$=[],T=[],K=[],D=0,G=0,te,re,oe,me,Me,Pe,We,vi,da,ma,wa,ba,Ca;for(te=0;te<y;++te){if(me=c[te].label,Me=c[te].major?o.major:o.minor,s.font=Pe=Me.string,We=u[Pe]=u[Pe]||{data:{},gc:[]},vi=Me.lineHeight,da=ma=0,!Xh(me)&&!Mh(me))da=se.measureText(s,We.data,We.gc,da,me),ma=vi;else if(Mh(me))for(re=0,oe=me.length;re<oe;++re)wa=me[re],!Xh(wa)&&!Mh(wa)&&(da=se.measureText(s,We.data,We.gc,da,wa),ma+=vi);$.push(da),T.push(ma),K.push(vi/2),D=Math.max(da,D),G=Math.max(ma,G)}Yg(u,y),ba=$.indexOf(D),Ca=T.indexOf(G);function xa(Ra){return{width:$[Ra]||0,height:T[Ra]||0,offset:K[Ra]||0}}return{first:xa(0),last:xa(y-1),widest:xa(ba),highest:xa(Ca)}}function ep(s){return s.drawTicks?s.tickMarkLength:0}function Pp(s){var o,c;return s.display?(o=se.options._parseFont(s),c=se.options.toPadding(s.padding),o.lineHeight+c.height):0}function bm(s,o){return se.extend(se.options._parseFont({fontFamily:Eh(o.fontFamily,s.fontFamily),fontSize:Eh(o.fontSize,s.fontSize),fontStyle:Eh(o.fontStyle,s.fontStyle),lineHeight:Eh(o.lineHeight,s.lineHeight)}),{color:se.options.resolve([o.fontColor,s.fontColor,vr.global.defaultFontColor])})}function Np(s){var o=bm(s,s.minor),c=s.major.enabled?bm(s,s.major):o;return{minor:o,major:c}}function Op(s){var o=[],c,u,y;for(u=0,y=s.length;u<y;++u)c=s[u],typeof c._index<"u"&&o.push(c);return o}function Qg(s){var o=s.length,c,u;if(o<2)return!1;for(u=s[0],c=1;c<o;++c)if(s[c]-s[c-1]!==u)return!1;return u}function Hg(s,o,c,u){var y=Qg(s),$=(o.length-1)/u,T,K,D,G;if(!y)return Math.max($,1);for(T=se.math._factorize(y),D=0,G=T.length-1;D<G;D++)if(K=T[D],K>$)return K;return Math.max($,1)}function Gg(s){var o=[],c,u;for(c=0,u=s.length;c<u;c++)s[c].major&&o.push(c);return o}function Jg(s,o,c){var u=0,y=o[0],$,T;for(c=Math.ceil(c),$=0;$<s.length;$++)T=s[$],$===y?(T._index=$,u++,y=o[u*c]):delete T.label}function cp(s,o,c,u){var y=Eh(c,0),$=Math.min(Eh(u,s.length),s.length),T=0,K,D,G,te;for(o=Math.ceil(o),u&&(K=u-c,o=K/Math.floor(K/o)),te=y;te<0;)T++,te=Math.round(y+T*o);for(D=Math.max(y,0);D<$;D++)G=s[D],D===te?(G._index=D,T++,te=Math.round(y+T*o)):delete G.label}var Dp=oh.extend({zeroLineIndex:0,getPadding:function(){var s=this;return{left:s.paddingLeft||0,top:s.paddingTop||0,right:s.paddingRight||0,bottom:s.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var s=this.chart.data;return this.options.labels||(this.isHorizontal()?s.xLabels:s.yLabels)||s.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){se.callback(this.options.beforeUpdate,[this])},update:function(s,o,c){var u=this,y=u.options.ticks,$=y.sampleSize,T,K,D,G,te;if(u.beforeUpdate(),u.maxWidth=s,u.maxHeight=o,u.margins=se.extend({left:0,right:0,top:0,bottom:0},c),u._ticks=null,u.ticks=null,u._labelSizes=null,u._maxLabelLines=0,u.longestLabelWidth=0,u.longestTextCache=u.longestTextCache||{},u._gridLineItems=null,u._labelItems=null,u.beforeSetDimensions(),u.setDimensions(),u.afterSetDimensions(),u.beforeDataLimits(),u.determineDataLimits(),u.afterDataLimits(),u.beforeBuildTicks(),G=u.buildTicks()||[],G=u.afterBuildTicks(G)||G,(!G||!G.length)&&u.ticks)for(G=[],T=0,K=u.ticks.length;T<K;++T)G.push({value:u.ticks[T],major:!1});return u._ticks=G,te=$<G.length,D=u._convertTicksToLabels(te?Wg(G,$):G),u._configure(),u.beforeCalculateTickRotation(),u.calculateTickRotation(),u.afterCalculateTickRotation(),u.beforeFit(),u.fit(),u.afterFit(),u._ticksToDraw=y.display&&(y.autoSkip||y.source==="auto")?u._autoSkip(G):G,te&&(D=u._convertTicksToLabels(u._ticksToDraw)),u.ticks=D,u.afterUpdate(),u.minSize},_configure:function(){var s=this,o=s.options.ticks.reverse,c,u;s.isHorizontal()?(c=s.left,u=s.right):(c=s.top,u=s.bottom,o=!o),s._startPixel=c,s._endPixel=u,s._reversePixels=o,s._length=u-c},afterUpdate:function(){se.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){se.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var s=this;s.isHorizontal()?(s.width=s.maxWidth,s.left=0,s.right=s.width):(s.height=s.maxHeight,s.top=0,s.bottom=s.height),s.paddingLeft=0,s.paddingTop=0,s.paddingRight=0,s.paddingBottom=0},afterSetDimensions:function(){se.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){se.callback(this.options.beforeDataLimits,[this])},determineDataLimits:se.noop,afterDataLimits:function(){se.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){se.callback(this.options.beforeBuildTicks,[this])},buildTicks:se.noop,afterBuildTicks:function(s){var o=this;return Mh(s)&&s.length?se.callback(o.options.afterBuildTicks,[o,s]):(o.ticks=se.callback(o.options.afterBuildTicks,[o,o.ticks])||o.ticks,s)},beforeTickToLabelConversion:function(){se.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var s=this,o=s.options.ticks;s.ticks=s.ticks.map(o.userCallback||o.callback,this)},afterTickToLabelConversion:function(){se.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){se.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var s=this,o=s.options,c=o.ticks,u=s.getTicks().length,y=c.minRotation||0,$=c.maxRotation,T=y,K,D,G,te,re,oe,me;if(!s._isVisible()||!c.display||y>=$||u<=1||!s.isHorizontal()){s.labelRotation=y;return}K=s._getLabelSizes(),D=K.widest.width,G=K.highest.height-K.highest.offset,te=Math.min(s.maxWidth,s.chart.width-D),re=o.offset?s.maxWidth/u:te/(u-1),D+6>re&&(re=te/(u-(o.offset?.5:1)),oe=s.maxHeight-ep(o.gridLines)-c.padding-Pp(o.scaleLabel),me=Math.sqrt(D*D+G*G),T=se.toDegrees(Math.min(Math.asin(Math.min((K.highest.height+6)/re,1)),Math.asin(Math.min(oe/me,1))-Math.asin(G/me))),T=Math.max(y,Math.min($,T))),s.labelRotation=T},afterCalculateTickRotation:function(){se.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){se.callback(this.options.beforeFit,[this])},fit:function(){var s=this,o=s.minSize={width:0,height:0},c=s.chart,u=s.options,y=u.ticks,$=u.scaleLabel,T=u.gridLines,K=s._isVisible(),D=u.position==="bottom",G=s.isHorizontal();if(G?o.width=s.maxWidth:K&&(o.width=ep(T)+Pp($)),G?K&&(o.height=ep(T)+Pp($)):o.height=s.maxHeight,y.display&&K){var te=Np(y),re=s._getLabelSizes(),oe=re.first,me=re.last,Me=re.widest,Pe=re.highest,We=te.minor.lineHeight*.4,vi=y.padding;if(G){var da=s.labelRotation!==0,ma=se.toRadians(s.labelRotation),wa=Math.cos(ma),ba=Math.sin(ma),Ca=ba*Me.width+wa*(Pe.height-(da?Pe.offset:0))+(da?0:We);o.height=Math.min(s.maxHeight,o.height+Ca+vi);var xa=s.getPixelForTick(0)-s.left,Ra=s.right-s.getPixelForTick(s.getTicks().length-1),Pa,Va;da?(Pa=D?wa*oe.width+ba*oe.offset:ba*(oe.height-oe.offset),Va=D?ba*(me.height-me.offset):wa*me.width+ba*me.offset):(Pa=oe.width/2,Va=me.width/2),s.paddingLeft=Math.max((Pa-xa)*s.width/(s.width-xa),0)+3,s.paddingRight=Math.max((Va-Ra)*s.width/(s.width-Ra),0)+3}else{var za=y.mirror?0:Me.width+vi+We;o.width=Math.min(s.maxWidth,o.width+za),s.paddingTop=oe.height/2,s.paddingBottom=me.height/2}}s.handleMargins(),G?(s.width=s._length=c.width-s.margins.left-s.margins.right,s.height=o.height):(s.width=o.width,s.height=s._length=c.height-s.margins.top-s.margins.bottom)},handleMargins:function(){var s=this;s.margins&&(s.margins.left=Math.max(s.paddingLeft,s.margins.left),s.margins.top=Math.max(s.paddingTop,s.margins.top),s.margins.right=Math.max(s.paddingRight,s.margins.right),s.margins.bottom=Math.max(s.paddingBottom,s.margins.bottom))},afterFit:function(){se.callback(this.options.afterFit,[this])},isHorizontal:function(){var s=this.options.position;return s==="top"||s==="bottom"},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(s){if(Xh(s))return NaN;if((typeof s=="number"||s instanceof Number)&&!isFinite(s))return NaN;if(s){if(this.isHorizontal()){if(s.x!==void 0)return this.getRightValue(s.x)}else if(s.y!==void 0)return this.getRightValue(s.y)}return s},_convertTicksToLabels:function(s){var o=this,c,u,y;for(o.ticks=s.map(function($){return $.value}),o.beforeTickToLabelConversion(),c=o.convertTicksToLabels(s)||o.ticks,o.afterTickToLabelConversion(),u=0,y=s.length;u<y;++u)s[u].label=c[u];return c},_getLabelSizes:function(){var s=this,o=s._labelSizes;return o||(s._labelSizes=o=Kg(s.ctx,Np(s.options.ticks),s.getTicks(),s.longestTextCache),s.longestLabelWidth=o.widest.width),o},_parseValue:function(s){var o,c,u,y;return Mh(s)?(o=+this.getRightValue(s[0]),c=+this.getRightValue(s[1]),u=Math.min(o,c),y=Math.max(o,c)):(s=+this.getRightValue(s),o=void 0,c=s,u=s,y=s),{min:u,max:y,start:o,end:c}},_getScaleLabel:function(s){var o=this._parseValue(s);return o.start!==void 0?"["+o.start+", "+o.end+"]":+this.getRightValue(s)},getLabelForIndex:se.noop,getPixelForValue:se.noop,getValueForPixel:se.noop,getPixelForTick:function(s){var o=this,c=o.options.offset,u=o._ticks.length,y=1/Math.max(u-(c?0:1),1);return s<0||s>u-1?null:o.getPixelForDecimal(s*y+(c?y/2:0))},getPixelForDecimal:function(s){var o=this;return o._reversePixels&&(s=1-s),o._startPixel+s*o._length},getDecimalForPixel:function(s){var o=(s-this._startPixel)/this._length;return this._reversePixels?1-o:o},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var s=this,o=s.min,c=s.max;return s.beginAtZero?0:o<0&&c<0?c:o>0&&c>0?o:0},_autoSkip:function(s){var o=this,c=o.options.ticks,u=o._length,y=c.maxTicksLimit||u/o._tickSize()+1,$=c.major.enabled?Gg(s):[],T=$.length,K=$[0],D=$[T-1],G,te,re,oe;if(T>y)return Jg(s,$,T/y),Op(s);if(re=Hg($,s,u,y),T>0){for(G=0,te=T-1;G<te;G++)cp(s,re,$[G],$[G+1]);return oe=T>1?(D-K)/(T-1):null,cp(s,re,se.isNullOrUndef(oe)?0:K-oe,K),cp(s,re,D,se.isNullOrUndef(oe)?s.length:D+oe),Op(s)}return cp(s,re),Op(s)},_tickSize:function(){var s=this,o=s.options.ticks,c=se.toRadians(s.labelRotation),u=Math.abs(Math.cos(c)),y=Math.abs(Math.sin(c)),$=s._getLabelSizes(),T=o.autoSkipPadding||0,K=$?$.widest.width+T:0,D=$?$.highest.height+T:0;return s.isHorizontal()?D*u>K*y?K/u:D/y:D*y<K*u?D/u:K/y},_isVisible:function(){var s=this,o=s.chart,c=s.options.display,u,y,$;if(c!=="auto")return!!c;for(u=0,y=o.data.datasets.length;u<y;++u)if(o.isDatasetVisible(u)&&($=o.getDatasetMeta(u),$.xAxisID===s.id||$.yAxisID===s.id))return!0;return!1},_computeGridLineItems:function(s){var o=this,c=o.chart,u=o.options,y=u.gridLines,$=u.position,T=y.offsetGridLines,K=o.isHorizontal(),D=o._ticksToDraw,G=D.length+(T?1:0),te=ep(y),re=[],oe=y.drawBorder?Fh(y.lineWidth,0,0):0,me=oe/2,Me=se._alignPixel,Pe=function(Gy){return Me(c,Gy,oe)},We,vi,da,ma,wa,ba,Ca,xa,Ra,Pa,Va,za,La,eh,Bh,qh,Up;for($==="top"?(We=Pe(o.bottom),Ca=o.bottom-te,Ra=We-me,Va=Pe(s.top)+me,La=s.bottom):$==="bottom"?(We=Pe(o.top),Va=s.top,La=Pe(s.bottom)-me,Ca=We+me,Ra=o.top+te):$==="left"?(We=Pe(o.right),ba=o.right-te,xa=We-me,Pa=Pe(s.left)+me,za=s.right):(We=Pe(o.left),Pa=s.left,za=Pe(s.right)-me,ba=We+me,xa=o.left+te),vi=0;vi<G;++vi)da=D[vi]||{},!(Xh(da.label)&&vi<D.length)&&(vi===o.zeroLineIndex&&u.offset===T?(eh=y.zeroLineWidth,Bh=y.zeroLineColor,qh=y.zeroLineBorderDash||[],Up=y.zeroLineBorderDashOffset||0):(eh=Fh(y.lineWidth,vi,1),Bh=Fh(y.color,vi,"rgba(0,0,0,0.1)"),qh=y.borderDash||[],Up=y.borderDashOffset||0),ma=Ug(o,da._index||vi,T),ma!==void 0&&(wa=Me(c,ma,eh),K?ba=xa=Pa=za=wa:Ca=Ra=Va=La=wa,re.push({tx1:ba,ty1:Ca,tx2:xa,ty2:Ra,x1:Pa,y1:Va,x2:za,y2:La,width:eh,color:Bh,borderDash:qh,borderDashOffset:Up})));return re.ticksLength=G,re.borderValue=We,re},_computeLabelItems:function(){var s=this,o=s.options,c=o.ticks,u=o.position,y=c.mirror,$=s.isHorizontal(),T=s._ticksToDraw,K=Np(c),D=c.padding,G=ep(o.gridLines),te=-se.toRadians(s.labelRotation),re=[],oe,me,Me,Pe,We,vi,da,ma,wa,ba,Ca,xa;for(u==="top"?(vi=s.bottom-G-D,da=te?"left":"center"):u==="bottom"?(vi=s.top+G+D,da=te?"right":"center"):u==="left"?(We=s.right-(y?0:G)-D,da=y?"left":"right"):(We=s.left+(y?0:G)+D,da=y?"right":"left"),oe=0,me=T.length;oe<me;++oe)Me=T[oe],Pe=Me.label,!Xh(Pe)&&(ma=s.getPixelForTick(Me._index||oe)+c.labelOffset,wa=Me.major?K.major:K.minor,ba=wa.lineHeight,Ca=Mh(Pe)?Pe.length:1,$?(We=ma,xa=u==="top"?((te?1:.5)-Ca)*ba:(te?0:.5)*ba):(vi=ma,xa=(1-Ca)*ba/2),re.push({x:We,y:vi,rotation:te,label:Pe,font:wa,textOffset:xa,textAlign:da}));return re},_drawGrid:function(s){var o=this,c=o.options.gridLines;if(c.display){var u=o.ctx,y=o.chart,$=se._alignPixel,T=c.drawBorder?Fh(c.lineWidth,0,0):0,K=o._gridLineItems||(o._gridLineItems=o._computeGridLineItems(s)),D,G,te,re,oe;for(te=0,re=K.length;te<re;++te)oe=K[te],D=oe.width,G=oe.color,D&&G&&(u.save(),u.lineWidth=D,u.strokeStyle=G,u.setLineDash&&(u.setLineDash(oe.borderDash),u.lineDashOffset=oe.borderDashOffset),u.beginPath(),c.drawTicks&&(u.moveTo(oe.tx1,oe.ty1),u.lineTo(oe.tx2,oe.ty2)),c.drawOnChartArea&&(u.moveTo(oe.x1,oe.y1),u.lineTo(oe.x2,oe.y2)),u.stroke(),u.restore());if(T){var me=T,Me=Fh(c.lineWidth,K.ticksLength-1,1),Pe=K.borderValue,We,vi,da,ma;o.isHorizontal()?(We=$(y,o.left,me)-me/2,vi=$(y,o.right,Me)+Me/2,da=ma=Pe):(da=$(y,o.top,me)-me/2,ma=$(y,o.bottom,Me)+Me/2,We=vi=Pe),u.lineWidth=T,u.strokeStyle=Fh(c.color,0),u.beginPath(),u.moveTo(We,da),u.lineTo(vi,ma),u.stroke()}}},_drawLabels:function(){var s=this,o=s.options.ticks;if(o.display){var c=s.ctx,u=s._labelItems||(s._labelItems=s._computeLabelItems()),y,$,T,K,D,G,te,re;for(y=0,T=u.length;y<T;++y){if(D=u[y],G=D.font,c.save(),c.translate(D.x,D.y),c.rotate(D.rotation),c.font=G.string,c.fillStyle=G.color,c.textBaseline="middle",c.textAlign=D.textAlign,te=D.label,re=D.textOffset,Mh(te))for($=0,K=te.length;$<K;++$)c.fillText(""+te[$],0,re),re+=G.lineHeight;else c.fillText(te,0,re);c.restore()}}},_drawTitle:function(){var s=this,o=s.ctx,c=s.options,u=c.scaleLabel;if(u.display){var y=Eh(u.fontColor,vr.global.defaultFontColor),$=se.options._parseFont(u),T=se.options.toPadding(u.padding),K=$.lineHeight/2,D=c.position,G=0,te,re;if(s.isHorizontal())te=s.left+s.width/2,re=D==="bottom"?s.bottom-K-T.bottom:s.top+K+T.top;else{var oe=D==="left";te=oe?s.left+K+T.top:s.right-K-T.top,re=s.top+s.height/2,G=oe?-.5*Math.PI:.5*Math.PI}o.save(),o.translate(te,re),o.rotate(G),o.textAlign="center",o.textBaseline="middle",o.fillStyle=y,o.font=$.string,o.fillText(u.labelString,0,0),o.restore()}},draw:function(s){var o=this;o._isVisible()&&(o._drawGrid(s),o._drawTitle(),o._drawLabels())},_layers:function(){var s=this,o=s.options,c=o.ticks&&o.ticks.z||0,u=o.gridLines&&o.gridLines.z||0;return!s._isVisible()||c===u||s.draw!==s._draw?[{z:c,draw:function(){s.draw.apply(s,arguments)}}]:[{z:u,draw:function(){s._drawGrid.apply(s,arguments),s._drawTitle.apply(s,arguments)}},{z:c,draw:function(){s._drawLabels.apply(s,arguments)}}]},_getMatchingVisibleMetas:function(s){var o=this,c=o.isHorizontal();return o.chart._getSortedVisibleDatasetMetas().filter(function(u){return(!s||u.type===s)&&(c?u.xAxisID===o.id:u.yAxisID===o.id)})}});Dp.prototype._draw=Dp.prototype.draw;var sh=Dp,Fp=se.isNullOrUndef,Zg={position:"bottom"},wm=sh.extend({determineDataLimits:function(){var s=this,o=s._getLabels(),c=s.options.ticks,u=c.min,y=c.max,$=0,T=o.length-1,K;u!==void 0&&(K=o.indexOf(u),K>=0&&($=K)),y!==void 0&&(K=o.indexOf(y),K>=0&&(T=K)),s.minIndex=$,s.maxIndex=T,s.min=o[$],s.max=o[T]},buildTicks:function(){var s=this,o=s._getLabels(),c=s.minIndex,u=s.maxIndex;s.ticks=c===0&&u===o.length-1?o:o.slice(c,u+1)},getLabelForIndex:function(s,o){var c=this,u=c.chart;return u.getDatasetMeta(o).controller._getValueScaleId()===c.id?c.getRightValue(u.data.datasets[o].data[s]):c._getLabels()[s]},_configure:function(){var s=this,o=s.options.offset,c=s.ticks;sh.prototype._configure.call(s),s.isHorizontal()||(s._reversePixels=!s._reversePixels),c&&(s._startValue=s.minIndex-(o?.5:0),s._valueRange=Math.max(c.length-(o?0:1),1))},getPixelForValue:function(s,o,c){var u=this,y,$,T;return!Fp(o)&&!Fp(c)&&(s=u.chart.data.datasets[c].data[o]),Fp(s)||(y=u.isHorizontal()?s.x:s.y),(y!==void 0||s!==void 0&&isNaN(o))&&($=u._getLabels(),s=se.valueOrDefault(y,s),T=$.indexOf(s),o=T!==-1?T:o,isNaN(o)&&(o=s)),u.getPixelForDecimal((o-u._startValue)/u._valueRange)},getPixelForTick:function(s){var o=this.ticks;return s<0||s>o.length-1?null:this.getPixelForValue(o[s],s+this.minIndex)},getValueForPixel:function(s){var o=this,c=Math.round(o._startValue+o.getDecimalForPixel(s)*o._valueRange);return Math.min(Math.max(c,0),o.ticks.length-1)},getBasePixel:function(){return this.bottom}}),Xg=Zg;wm._defaults=Xg;var ey=se.noop,Ch=se.isNullOrUndef;function ty(s,o){var c=[],u=1e-14,y=s.stepSize,$=y||1,T=s.maxTicks-1,K=s.min,D=s.max,G=s.precision,te=o.min,re=o.max,oe=se.niceNum((re-te)/T/$)*$,me,Me,Pe,We;if(oe<u&&Ch(K)&&Ch(D))return[te,re];We=Math.ceil(re/oe)-Math.floor(te/oe),We>T&&(oe=se.niceNum(We*oe/T/$)*$),y||Ch(G)?me=Math.pow(10,se._decimalPlaces(oe)):(me=Math.pow(10,G),oe=Math.ceil(oe*me)/me),Me=Math.floor(te/oe)*oe,Pe=Math.ceil(re/oe)*oe,y&&(!Ch(K)&&se.almostWhole(K/oe,oe/1e3)&&(Me=K),!Ch(D)&&se.almostWhole(D/oe,oe/1e3)&&(Pe=D)),We=(Pe-Me)/oe,se.almostEquals(We,Math.round(We),oe/1e3)?We=Math.round(We):We=Math.ceil(We),Me=Math.round(Me*me)/me,Pe=Math.round(Pe*me)/me,c.push(Ch(K)?Me:K);for(var vi=1;vi<We;++vi)c.push(Math.round((Me+vi*oe)*me)/me);return c.push(Ch(D)?Pe:D),c}var up=sh.extend({getRightValue:function(s){return typeof s=="string"?+s:sh.prototype.getRightValue.call(this,s)},handleTickRangeOptions:function(){var s=this,o=s.options,c=o.ticks;if(c.beginAtZero){var u=se.sign(s.min),y=se.sign(s.max);u<0&&y<0?s.max=0:u>0&&y>0&&(s.min=0)}var $=c.min!==void 0||c.suggestedMin!==void 0,T=c.max!==void 0||c.suggestedMax!==void 0;c.min!==void 0?s.min=c.min:c.suggestedMin!==void 0&&(s.min===null?s.min=c.suggestedMin:s.min=Math.min(s.min,c.suggestedMin)),c.max!==void 0?s.max=c.max:c.suggestedMax!==void 0&&(s.max===null?s.max=c.suggestedMax:s.max=Math.max(s.max,c.suggestedMax)),$!==T&&s.min>=s.max&&($?s.max=s.min+1:s.min=s.max-1),s.min===s.max&&(s.max++,c.beginAtZero||s.min--)},getTickLimit:function(){var s=this,o=s.options.ticks,c=o.stepSize,u=o.maxTicksLimit,y;return c?y=Math.ceil(s.max/c)-Math.floor(s.min/c)+1:(y=s._computeTickLimit(),u=u||11),u&&(y=Math.min(u,y)),y},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:ey,buildTicks:function(){var s=this,o=s.options,c=o.ticks,u=s.getTickLimit();u=Math.max(2,u);var y={maxTicks:u,min:c.min,max:c.max,precision:c.precision,stepSize:se.valueOrDefault(c.fixedStepSize,c.stepSize)},$=s.ticks=ty(y,s);s.handleDirectionalChanges(),s.max=se.max($),s.min=se.min($),c.reverse?($.reverse(),s.start=s.max,s.end=s.min):(s.start=s.min,s.end=s.max)},convertTicksToLabels:function(){var s=this;s.ticksAsNumbers=s.ticks.slice(),s.zeroLineIndex=s.ticks.indexOf(0),sh.prototype.convertTicksToLabels.call(s)},_configure:function(){var s=this,o=s.getTicks(),c=s.min,u=s.max,y;sh.prototype._configure.call(s),s.options.offset&&o.length&&(y=(u-c)/Math.max(o.length-1,1)/2,c-=y,u+=y),s._startValue=c,s._endValue=u,s._valueRange=u-c}}),ry={position:"left",ticks:{callback:Zh.formatters.linear}},ny=0,sy=1;function iy(s,o,c){var u=[c.type,o===void 0&&c.stack===void 0?c.index:"",c.stack].join(".");return s[u]===void 0&&(s[u]={pos:[],neg:[]}),s[u]}function ay(s,o,c,u){var y=s.options,$=y.stacked,T=iy(o,$,c),K=T.pos,D=T.neg,G=u.length,te,re;for(te=0;te<G;++te)re=s._parseValue(u[te]),!(isNaN(re.min)||isNaN(re.max)||c.data[te].hidden)&&(K[te]=K[te]||0,D[te]=D[te]||0,y.relativePoints?K[te]=100:re.min<0||re.max<0?D[te]+=re.min:K[te]+=re.max)}function oy(s,o,c){var u=c.length,y,$;for(y=0;y<u;++y)$=s._parseValue(c[y]),!(isNaN($.min)||isNaN($.max)||o.data[y].hidden)&&(s.min=Math.min(s.min,$.min),s.max=Math.max(s.max,$.max))}var _m=up.extend({determineDataLimits:function(){var s=this,o=s.options,c=s.chart,u=c.data.datasets,y=s._getMatchingVisibleMetas(),$=o.stacked,T={},K=y.length,D,G,te,re;if(s.min=Number.POSITIVE_INFINITY,s.max=Number.NEGATIVE_INFINITY,$===void 0)for(D=0;!$&&D<K;++D)G=y[D],$=G.stack!==void 0;for(D=0;D<K;++D)G=y[D],te=u[G.index].data,$?ay(s,T,G,te):oy(s,G,te);se.each(T,function(oe){re=oe.pos.concat(oe.neg),s.min=Math.min(s.min,se.min(re)),s.max=Math.max(s.max,se.max(re))}),s.min=se.isFinite(s.min)&&!isNaN(s.min)?s.min:ny,s.max=se.isFinite(s.max)&&!isNaN(s.max)?s.max:sy,s.handleTickRangeOptions()},_computeTickLimit:function(){var s=this,o;return s.isHorizontal()?Math.ceil(s.width/40):(o=se.options._parseFont(s.options.ticks),Math.ceil(s.height/o.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(s,o){return this._getScaleLabel(this.chart.data.datasets[o].data[s])},getPixelForValue:function(s){var o=this;return o.getPixelForDecimal((+o.getRightValue(s)-o._startValue)/o._valueRange)},getValueForPixel:function(s){return this._startValue+this.getDecimalForPixel(s)*this._valueRange},getPixelForTick:function(s){var o=this.ticksAsNumbers;return s<0||s>o.length-1?null:this.getPixelForValue(o[s])}}),ly=ry;_m._defaults=ly;var Lp=se.valueOrDefault,ih=se.math.log10;function cy(s,o){var c=[],u=Lp(s.min,Math.pow(10,Math.floor(ih(o.min)))),y=Math.floor(ih(o.max)),$=Math.ceil(o.max/Math.pow(10,y)),T,K;u===0?(T=Math.floor(ih(o.minNotZero)),K=Math.floor(o.minNotZero/Math.pow(10,T)),c.push(u),u=K*Math.pow(10,T)):(T=Math.floor(ih(u)),K=Math.floor(u/Math.pow(10,T)));var D=T<0?Math.pow(10,Math.abs(T)):1;do c.push(u),++K,K===10&&(K=1,++T,D=T>=0?1:D),u=Math.round(K*Math.pow(10,T)*D)/D;while(T<y||T===y&&K<$);var G=Lp(s.max,u);return c.push(G),c}var uy={position:"left",ticks:{callback:Zh.formatters.logarithmic}};function dp(s,o){return se.isFinite(s)&&s>=0?s:o}var km=sh.extend({determineDataLimits:function(){var s=this,o=s.options,c=s.chart,u=c.data.datasets,y=s.isHorizontal();function $(We){return y?We.xAxisID===s.id:We.yAxisID===s.id}var T,K,D,G,te,re;s.min=Number.POSITIVE_INFINITY,s.max=Number.NEGATIVE_INFINITY,s.minNotZero=Number.POSITIVE_INFINITY;var oe=o.stacked;if(oe===void 0){for(T=0;T<u.length;T++)if(K=c.getDatasetMeta(T),c.isDatasetVisible(T)&&$(K)&&K.stack!==void 0){oe=!0;break}}if(o.stacked||oe){var me={};for(T=0;T<u.length;T++){K=c.getDatasetMeta(T);var Me=[K.type,o.stacked===void 0&&K.stack===void 0?T:"",K.stack].join(".");if(c.isDatasetVisible(T)&&$(K))for(me[Me]===void 0&&(me[Me]=[]),G=u[T].data,te=0,re=G.length;te<re;te++){var Pe=me[Me];D=s._parseValue(G[te]),!(isNaN(D.min)||isNaN(D.max)||K.data[te].hidden||D.min<0||D.max<0)&&(Pe[te]=Pe[te]||0,Pe[te]+=D.max)}}se.each(me,function(We){if(We.length>0){var vi=se.min(We),da=se.max(We);s.min=Math.min(s.min,vi),s.max=Math.max(s.max,da)}})}else for(T=0;T<u.length;T++)if(K=c.getDatasetMeta(T),c.isDatasetVisible(T)&&$(K))for(G=u[T].data,te=0,re=G.length;te<re;te++)D=s._parseValue(G[te]),!(isNaN(D.min)||isNaN(D.max)||K.data[te].hidden||D.min<0||D.max<0)&&(s.min=Math.min(D.min,s.min),s.max=Math.max(D.max,s.max),D.min!==0&&(s.minNotZero=Math.min(D.min,s.minNotZero)));s.min=se.isFinite(s.min)?s.min:null,s.max=se.isFinite(s.max)?s.max:null,s.minNotZero=se.isFinite(s.minNotZero)?s.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var s=this,o=s.options.ticks,c=1,u=10;s.min=dp(o.min,s.min),s.max=dp(o.max,s.max),s.min===s.max&&(s.min!==0&&s.min!==null?(s.min=Math.pow(10,Math.floor(ih(s.min))-1),s.max=Math.pow(10,Math.floor(ih(s.max))+1)):(s.min=c,s.max=u)),s.min===null&&(s.min=Math.pow(10,Math.floor(ih(s.max))-1)),s.max===null&&(s.max=s.min!==0?Math.pow(10,Math.floor(ih(s.min))+1):u),s.minNotZero===null&&(s.min>0?s.minNotZero=s.min:s.max<1?s.minNotZero=Math.pow(10,Math.floor(ih(s.max))):s.minNotZero=c)},buildTicks:function(){var s=this,o=s.options.ticks,c=!s.isHorizontal(),u={min:dp(o.min),max:dp(o.max)},y=s.ticks=cy(u,s);s.max=se.max(y),s.min=se.min(y),o.reverse?(c=!c,s.start=s.max,s.end=s.min):(s.start=s.min,s.end=s.max),c&&y.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),sh.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(s,o){return this._getScaleLabel(this.chart.data.datasets[o].data[s])},getPixelForTick:function(s){var o=this.tickValues;return s<0||s>o.length-1?null:this.getPixelForValue(o[s])},_getFirstTickValue:function(s){var o=Math.floor(ih(s)),c=Math.floor(s/Math.pow(10,o));return c*Math.pow(10,o)},_configure:function(){var s=this,o=s.min,c=0;sh.prototype._configure.call(s),o===0&&(o=s._getFirstTickValue(s.minNotZero),c=Lp(s.options.ticks.fontSize,vr.global.defaultFontSize)/s._length),s._startValue=ih(o),s._valueOffset=c,s._valueRange=(ih(s.max)-ih(o))/(1-c)},getPixelForValue:function(s){var o=this,c=0;return s=+o.getRightValue(s),s>o.min&&s>0&&(c=(ih(s)-o._startValue)/o._valueRange+o._valueOffset),o.getPixelForDecimal(c)},getValueForPixel:function(s){var o=this,c=o.getDecimalForPixel(s);return c===0&&o.min===0?0:Math.pow(10,o._startValue+(c-o._valueOffset)*o._valueRange)}}),dy=uy;km._defaults=dy;var fp=se.valueOrDefault,Bp=se.valueAtIndexOrDefault,Am=se.options.resolve,fy={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Zh.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(s){return s}}};function qp(s){var o=s.ticks;return o.display&&s.display?fp(o.fontSize,vr.global.defaultFontSize)+o.backdropPaddingY*2:0}function hy(s,o,c){return se.isArray(c)?{w:se.longestText(s,s.font,c),h:c.length*o}:{w:s.measureText(c).width,h:o}}function Sm(s,o,c,u,y){return s===u||s===y?{start:o-c/2,end:o+c/2}:s<u||s>y?{start:o-c,end:o}:{start:o,end:o+c}}function py(s){var o=se.options._parseFont(s.options.pointLabels),c={l:0,r:s.width,t:0,b:s.height-s.paddingTop},u={},y,$,T;s.ctx.font=o.string,s._pointLabelSizes=[];var K=s.chart.data.labels.length;for(y=0;y<K;y++){T=s.getPointPosition(y,s.drawingArea+5),$=hy(s.ctx,o.lineHeight,s.pointLabels[y]),s._pointLabelSizes[y]=$;var D=s.getIndexAngle(y),G=se.toDegrees(D)%360,te=Sm(G,T.x,$.w,0,180),re=Sm(G,T.y,$.h,90,270);te.start<c.l&&(c.l=te.start,u.l=D),te.end>c.r&&(c.r=te.end,u.r=D),re.start<c.t&&(c.t=re.start,u.t=D),re.end>c.b&&(c.b=re.end,u.b=D)}s.setReductions(s.drawingArea,c,u)}function my(s){return s===0||s===180?"center":s<180?"left":"right"}function vy(s,o,c,u){var y=c.y+u/2,$,T;if(se.isArray(o))for($=0,T=o.length;$<T;++$)s.fillText(o[$],c.x,y),y+=u;else s.fillText(o,c.x,y)}function gy(s,o,c){s===90||s===270?c.y-=o.h/2:(s>270||s<90)&&(c.y-=o.h)}function yy(s){var o=s.ctx,c=s.options,u=c.pointLabels,y=qp(c),$=s.getDistanceFromCenterForValue(c.ticks.reverse?s.min:s.max),T=se.options._parseFont(u);o.save(),o.font=T.string,o.textBaseline="middle";for(var K=s.chart.data.labels.length-1;K>=0;K--){var D=K===0?y/2:0,G=s.getPointPosition(K,$+D+5),te=Bp(u.fontColor,K,vr.global.defaultFontColor);o.fillStyle=te;var re=s.getIndexAngle(K),oe=se.toDegrees(re);o.textAlign=my(oe),gy(oe,s._pointLabelSizes[K],G),vy(o,s.pointLabels[K],G,T.lineHeight)}o.restore()}function by(s,o,c,u){var y=s.ctx,$=o.circular,T=s.chart.data.labels.length,K=Bp(o.color,u-1),D=Bp(o.lineWidth,u-1),G;if(!(!$&&!T||!K||!D)){if(y.save(),y.strokeStyle=K,y.lineWidth=D,y.setLineDash&&(y.setLineDash(o.borderDash||[]),y.lineDashOffset=o.borderDashOffset||0),y.beginPath(),$)y.arc(s.xCenter,s.yCenter,c,0,Math.PI*2);else{G=s.getPointPosition(0,c),y.moveTo(G.x,G.y);for(var te=1;te<T;te++)G=s.getPointPosition(te,c),y.lineTo(G.x,G.y)}y.closePath(),y.stroke(),y.restore()}}function hp(s){return se.isNumber(s)?s:0}var xm=up.extend({setDimensions:function(){var s=this;s.width=s.maxWidth,s.height=s.maxHeight,s.paddingTop=qp(s.options)/2,s.xCenter=Math.floor(s.width/2),s.yCenter=Math.floor((s.height-s.paddingTop)/2),s.drawingArea=Math.min(s.height-s.paddingTop,s.width)/2},determineDataLimits:function(){var s=this,o=s.chart,c=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;se.each(o.data.datasets,function(y,$){if(o.isDatasetVisible($)){var T=o.getDatasetMeta($);se.each(y.data,function(K,D){var G=+s.getRightValue(K);isNaN(G)||T.data[D].hidden||(c=Math.min(G,c),u=Math.max(G,u))})}}),s.min=c===Number.POSITIVE_INFINITY?0:c,s.max=u===Number.NEGATIVE_INFINITY?0:u,s.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/qp(this.options))},convertTicksToLabels:function(){var s=this;up.prototype.convertTicksToLabels.call(s),s.pointLabels=s.chart.data.labels.map(function(){var o=se.callback(s.options.pointLabels.callback,arguments,s);return o||o===0?o:""})},getLabelForIndex:function(s,o){return+this.getRightValue(this.chart.data.datasets[o].data[s])},fit:function(){var s=this,o=s.options;o.display&&o.pointLabels.display?py(s):s.setCenterPoint(0,0,0,0)},setReductions:function(s,o,c){var u=this,y=o.l/Math.sin(c.l),$=Math.max(o.r-u.width,0)/Math.sin(c.r),T=-o.t/Math.cos(c.t),K=-Math.max(o.b-(u.height-u.paddingTop),0)/Math.cos(c.b);y=hp(y),$=hp($),T=hp(T),K=hp(K),u.drawingArea=Math.min(Math.floor(s-(y+$)/2),Math.floor(s-(T+K)/2)),u.setCenterPoint(y,$,T,K)},setCenterPoint:function(s,o,c,u){var y=this,$=y.width-o-y.drawingArea,T=s+y.drawingArea,K=c+y.drawingArea,D=y.height-y.paddingTop-u-y.drawingArea;y.xCenter=Math.floor((T+$)/2+y.left),y.yCenter=Math.floor((K+D)/2+y.top+y.paddingTop)},getIndexAngle:function(s){var o=this.chart,c=360/o.data.labels.length,u=o.options||{},y=u.startAngle||0,$=(s*c+y)%360;return($<0?$+360:$)*Math.PI*2/360},getDistanceFromCenterForValue:function(s){var o=this;if(se.isNullOrUndef(s))return NaN;var c=o.drawingArea/(o.max-o.min);return o.options.ticks.reverse?(o.max-s)*c:(s-o.min)*c},getPointPosition:function(s,o){var c=this,u=c.getIndexAngle(s)-Math.PI/2;return{x:Math.cos(u)*o+c.xCenter,y:Math.sin(u)*o+c.yCenter}},getPointPositionForValue:function(s,o){return this.getPointPosition(s,this.getDistanceFromCenterForValue(o))},getBasePosition:function(s){var o=this,c=o.min,u=o.max;return o.getPointPositionForValue(s||0,o.beginAtZero?0:c<0&&u<0?u:c>0&&u>0?c:0)},_drawGrid:function(){var s=this,o=s.ctx,c=s.options,u=c.gridLines,y=c.angleLines,$=fp(y.lineWidth,u.lineWidth),T=fp(y.color,u.color),K,D,G;if(c.pointLabels.display&&yy(s),u.display&&se.each(s.ticks,function(te,re){re!==0&&(D=s.getDistanceFromCenterForValue(s.ticksAsNumbers[re]),by(s,u,D,re))}),y.display&&$&&T){for(o.save(),o.lineWidth=$,o.strokeStyle=T,o.setLineDash&&(o.setLineDash(Am([y.borderDash,u.borderDash,[]])),o.lineDashOffset=Am([y.borderDashOffset,u.borderDashOffset,0])),K=s.chart.data.labels.length-1;K>=0;K--)D=s.getDistanceFromCenterForValue(c.ticks.reverse?s.min:s.max),G=s.getPointPosition(K,D),o.beginPath(),o.moveTo(s.xCenter,s.yCenter),o.lineTo(G.x,G.y),o.stroke();o.restore()}},_drawLabels:function(){var s=this,o=s.ctx,c=s.options,u=c.ticks;if(u.display){var y=s.getIndexAngle(0),$=se.options._parseFont(u),T=fp(u.fontColor,vr.global.defaultFontColor),K,D;o.save(),o.font=$.string,o.translate(s.xCenter,s.yCenter),o.rotate(y),o.textAlign="center",o.textBaseline="middle",se.each(s.ticks,function(G,te){te===0&&!u.reverse||(K=s.getDistanceFromCenterForValue(s.ticksAsNumbers[te]),u.showLabelBackdrop&&(D=o.measureText(G).width,o.fillStyle=u.backdropColor,o.fillRect(-D/2-u.backdropPaddingX,-K-$.size/2-u.backdropPaddingY,D+u.backdropPaddingX*2,$.size+u.backdropPaddingY*2)),o.fillStyle=T,o.fillText(G,0,-K))}),o.restore()}},_drawTitle:se.noop}),wy=fy;xm._defaults=wy;var zp=se._deprecated,$m=se.options.resolve,_y=se.valueOrDefault,Im=Number.MIN_SAFE_INTEGER||-9007199254740991,Vp=Number.MAX_SAFE_INTEGER||9007199254740991,pp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ah=Object.keys(pp);function Mm(s,o){return s-o}function ky(s){var o={},c=[],u,y,$;for(u=0,y=s.length;u<y;++u)$=s[u],o[$]||(o[$]=!0,c.push($));return c}function Em(s){return se.valueOrDefault(s.time.min,s.ticks.min)}function Cm(s){return se.valueOrDefault(s.time.max,s.ticks.max)}function Ay(s,o,c,u){if(u==="linear"||!s.length)return[{time:o,pos:0},{time:c,pos:1}];var y=[],$=[o],T,K,D,G,te;for(T=0,K=s.length;T<K;++T)G=s[T],G>o&&G<c&&$.push(G);for($.push(c),T=0,K=$.length;T<K;++T)te=$[T+1],D=$[T-1],G=$[T],(D===void 0||te===void 0||Math.round((te+D)/2)!==G)&&y.push({time:G,pos:T/(K-1)});return y}function Sy(s,o,c){for(var u=0,y=s.length-1,$,T,K;u>=0&&u<=y;)if($=u+y>>1,T=s[$-1]||null,K=s[$],T)if(K[o]<c)u=$+1;else if(T[o]>c)y=$-1;else return{lo:T,hi:K};else return{lo:null,hi:K};return{lo:K,hi:null}}function Lh(s,o,c,u){var y=Sy(s,o,c),$=y.lo?y.hi?y.lo:s[s.length-2]:s[0],T=y.lo?y.hi?y.hi:s[s.length-1]:s[1],K=T[o]-$[o],D=K?(c-$[o])/K:0,G=(T[u]-$[u])*D;return $[u]+G}function jp(s,o){var c=s._adapter,u=s.options.time,y=u.parser,$=y||u.format,T=o;return typeof y=="function"&&(T=y(T)),se.isFinite(T)||(T=typeof $=="string"?c.parse(T,$):c.parse(T)),T!==null?+T:(!y&&typeof $=="function"&&(T=$(o),se.isFinite(T)||(T=c.parse(T))),T)}function Rh(s,o){if(se.isNullOrUndef(o))return null;var c=s.options.time,u=jp(s,s.getRightValue(o));return u===null||c.round&&(u=+s._adapter.startOf(u,c.round)),u}function Rm(s,o,c,u){var y=ah.length,$,T,K;for($=ah.indexOf(s);$<y-1;++$)if(T=pp[ah[$]],K=T.steps?T.steps:Vp,T.common&&Math.ceil((c-o)/(K*T.size))<=u)return ah[$];return ah[y-1]}function xy(s,o,c,u,y){var $,T;for($=ah.length-1;$>=ah.indexOf(c);$--)if(T=ah[$],pp[T].common&&s._adapter.diff(y,u,T)>=o-1)return T;return ah[c?ah.indexOf(c):0]}function $y(s){for(var o=ah.indexOf(s)+1,c=ah.length;o<c;++o)if(pp[ah[o]].common)return ah[o]}function Iy(s,o,c,u){var y=s._adapter,$=s.options,T=$.time,K=T.unit||Rm(T.minUnit,o,c,u),D=$m([T.stepSize,T.unitStepSize,1]),G=K==="week"?T.isoWeekday:!1,te=o,re=[],oe;if(G&&(te=+y.startOf(te,"isoWeek",G)),te=+y.startOf(te,G?"day":K),y.diff(c,o,K)>1e5*D)throw o+" and "+c+" are too far apart with stepSize of "+D+" "+K;for(oe=te;oe<c;oe=+y.add(oe,D,K))re.push(oe);return(oe===c||$.bounds==="ticks")&&re.push(oe),re}function My(s,o,c,u,y){var $=0,T=0,K,D;return y.offset&&o.length&&(K=Lh(s,"time",o[0],"pos"),o.length===1?$=1-K:$=(Lh(s,"time",o[1],"pos")-K)/2,D=Lh(s,"time",o[o.length-1],"pos"),o.length===1?T=D:T=(D-Lh(s,"time",o[o.length-2],"pos"))/2),{start:$,end:T,factor:1/($+1+T)}}function Ey(s,o,c,u){var y=s._adapter,$=+y.startOf(o[0].value,u),T=o[o.length-1].value,K,D;for(K=$;K<=T;K=+y.add(K,1,u))D=c[K],D>=0&&(o[D].major=!0);return o}function Tm(s,o,c){var u=[],y={},$=o.length,T,K;for(T=0;T<$;++T)K=o[T],y[K]=T,u.push({value:K,major:!1});return $===0||!c?u:Ey(s,u,y,c)}var Cy={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},Pm=sh.extend({initialize:function(){this.mergeTicksOptions(),sh.prototype.initialize.call(this)},update:function(){var s=this,o=s.options,c=o.time||(o.time={}),u=s._adapter=new Tp._date(o.adapters.date);return zp("time scale",c.format,"time.format","time.parser"),zp("time scale",c.min,"time.min","ticks.min"),zp("time scale",c.max,"time.max","ticks.max"),se.mergeIf(c.displayFormats,u.formats()),sh.prototype.update.apply(s,arguments)},getRightValue:function(s){return s&&s.t!==void 0&&(s=s.t),sh.prototype.getRightValue.call(this,s)},determineDataLimits:function(){var s=this,o=s.chart,c=s._adapter,u=s.options,y=u.time.unit||"day",$=Vp,T=Im,K=[],D=[],G=[],te,re,oe,me,Me,Pe,We,vi=s._getLabels();for(te=0,oe=vi.length;te<oe;++te)G.push(Rh(s,vi[te]));for(te=0,oe=(o.data.datasets||[]).length;te<oe;++te)if(o.isDatasetVisible(te))if(Me=o.data.datasets[te].data,se.isObject(Me[0]))for(D[te]=[],re=0,me=Me.length;re<me;++re)Pe=Rh(s,Me[re]),K.push(Pe),D[te][re]=Pe;else D[te]=G.slice(0),We||(K=K.concat(G),We=!0);else D[te]=[];G.length&&($=Math.min($,G[0]),T=Math.max(T,G[G.length-1])),K.length&&(K=oe>1?ky(K).sort(Mm):K.sort(Mm),$=Math.min($,K[0]),T=Math.max(T,K[K.length-1])),$=Rh(s,Em(u))||$,T=Rh(s,Cm(u))||T,$=$===Vp?+c.startOf(Date.now(),y):$,T=T===Im?+c.endOf(Date.now(),y)+1:T,s.min=Math.min($,T),s.max=Math.max($+1,T),s._table=[],s._timestamps={data:K,datasets:D,labels:G}},buildTicks:function(){var s=this,o=s.min,c=s.max,u=s.options,y=u.ticks,$=u.time,T=s._timestamps,K=[],D=s.getLabelCapacity(o),G=y.source,te=u.distribution,re,oe,me;for(G==="data"||G==="auto"&&te==="series"?T=T.data:G==="labels"?T=T.labels:T=Iy(s,o,c,D),u.bounds==="ticks"&&T.length&&(o=T[0],c=T[T.length-1]),o=Rh(s,Em(u))||o,c=Rh(s,Cm(u))||c,re=0,oe=T.length;re<oe;++re)me=T[re],me>=o&&me<=c&&K.push(me);return s.min=o,s.max=c,s._unit=$.unit||(y.autoSkip?Rm($.minUnit,s.min,s.max,D):xy(s,K.length,$.minUnit,s.min,s.max)),s._majorUnit=!y.major.enabled||s._unit==="year"?void 0:$y(s._unit),s._table=Ay(s._timestamps.data,o,c,te),s._offsets=My(s._table,K,o,c,u),y.reverse&&K.reverse(),Tm(s,K,s._majorUnit)},getLabelForIndex:function(s,o){var c=this,u=c._adapter,y=c.chart.data,$=c.options.time,T=y.labels&&s<y.labels.length?y.labels[s]:"",K=y.datasets[o].data[s];return se.isObject(K)&&(T=c.getRightValue(K)),$.tooltipFormat?u.format(jp(c,T),$.tooltipFormat):typeof T=="string"?T:u.format(jp(c,T),$.displayFormats.datetime)},tickFormatFunction:function(s,o,c,u){var y=this,$=y._adapter,T=y.options,K=T.time.displayFormats,D=K[y._unit],G=y._majorUnit,te=K[G],re=c[o],oe=T.ticks,me=G&&te&&re&&re.major,Me=$.format(s,u||(me?te:D)),Pe=me?oe.major:oe.minor,We=$m([Pe.callback,Pe.userCallback,oe.callback,oe.userCallback]);return We?We(Me,o,c):Me},convertTicksToLabels:function(s){var o=[],c,u;for(c=0,u=s.length;c<u;++c)o.push(this.tickFormatFunction(s[c].value,c,s));return o},getPixelForOffset:function(s){var o=this,c=o._offsets,u=Lh(o._table,"time",s,"pos");return o.getPixelForDecimal((c.start+u)*c.factor)},getPixelForValue:function(s,o,c){var u=this,y=null;if(o!==void 0&&c!==void 0&&(y=u._timestamps.datasets[c][o]),y===null&&(y=Rh(u,s)),y!==null)return u.getPixelForOffset(y)},getPixelForTick:function(s){var o=this.getTicks();return s>=0&&s<o.length?this.getPixelForOffset(o[s].value):null},getValueForPixel:function(s){var o=this,c=o._offsets,u=o.getDecimalForPixel(s)/c.factor-c.end,y=Lh(o._table,"pos",u,"time");return o._adapter._create(y)},_getLabelSize:function(s){var o=this,c=o.options.ticks,u=o.ctx.measureText(s).width,y=se.toRadians(o.isHorizontal()?c.maxRotation:c.minRotation),$=Math.cos(y),T=Math.sin(y),K=_y(c.fontSize,vr.global.defaultFontSize);return{w:u*$+K*T,h:u*T+K*$}},getLabelWidth:function(s){return this._getLabelSize(s).w},getLabelCapacity:function(s){var o=this,c=o.options.time,u=c.displayFormats,y=u[c.unit]||u.millisecond,$=o.tickFormatFunction(s,0,Tm(o,[s],o._majorUnit),y),T=o._getLabelSize($),K=Math.floor(o.isHorizontal()?o.width/T.w:o.height/T.h);return o.options.offset&&K--,K>0?K:1}}),Ry=Cy;Pm._defaults=Ry;var Ty={category:wm,linear:_m,logarithmic:km,radialLinear:xm,time:Pm},Py={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Tp._date.override(typeof r=="function"?{_id:"moment",formats:function(){return Py},parse:function(s,o){return typeof s=="string"&&typeof o=="string"?s=r(s,o):s instanceof r||(s=r(s)),s.isValid()?s.valueOf():null},format:function(s,o){return r(s).format(o)},add:function(s,o,c){return r(s).add(o,c).valueOf()},diff:function(s,o,c){return r(s).diff(r(o),c)},startOf:function(s,o,c){return s=r(s),o==="isoWeek"?s.isoWeekday(c).valueOf():s.startOf(o).valueOf()},endOf:function(s,o){return r(s).endOf(o).valueOf()},_create:function(s){return r(s)}}:{}),vr._set("global",{plugins:{filler:{propagate:!0}}});var Ny={dataset:function(s){var o=s.fill,c=s.chart,u=c.getDatasetMeta(o),y=u&&c.isDatasetVisible(o),$=y&&u.dataset._children||[],T=$.length||0;return T?function(K,D){return D<T&&$[D]._view||null}:null},boundary:function(s){var o=s.boundary,c=o?o.x:null,u=o?o.y:null;return se.isArray(o)?function(y,$){return o[$]}:function(y){return{x:c===null?y.x:c,y:u===null?y.y:u}}}};function Oy(s,o,c){var u=s._model||{},y=u.fill,$;if(y===void 0&&(y=!!u.backgroundColor),y===!1||y===null)return!1;if(y===!0)return"origin";if($=parseFloat(y,10),isFinite($)&&Math.floor($)===$)return(y[0]==="-"||y[0]==="+")&&($=o+$),$===o||$<0||$>=c?!1:$;switch(y){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return y;default:return!1}}function Dy(s){var o=s.el._model||{},c=s.el._scale||{},u=s.fill,y=null,$;if(isFinite(u))return null;if(u==="start"?y=o.scaleBottom===void 0?c.bottom:o.scaleBottom:u==="end"?y=o.scaleTop===void 0?c.top:o.scaleTop:o.scaleZero!==void 0?y=o.scaleZero:c.getBasePixel&&(y=c.getBasePixel()),y!=null){if(y.x!==void 0&&y.y!==void 0)return y;if(se.isFinite(y))return $=c.isHorizontal(),{x:$?y:null,y:$?null:y}}return null}function Fy(s){var o=s.el._scale,c=o.options,u=o.chart.data.labels.length,y=s.fill,$=[],T,K,D,G,te;if(!u)return null;for(T=c.ticks.reverse?o.max:o.min,K=c.ticks.reverse?o.min:o.max,D=o.getPointPositionForValue(0,T),G=0;G<u;++G)te=y==="start"||y==="end"?o.getPointPositionForValue(G,y==="start"?T:K):o.getBasePosition(G),c.gridLines.circular&&(te.cx=D.x,te.cy=D.y,te.angle=o.getIndexAngle(G)-Math.PI/2),$.push(te);return $}function Ly(s){var o=s.el._scale||{};return o.getPointPositionForValue?Fy(s):Dy(s)}function By(s,o,c){var u=s[o],y=u.fill,$=[o],T;if(!c)return y;for(;y!==!1&&$.indexOf(y)===-1;){if(!isFinite(y))return y;if(T=s[y],!T)return!1;if(T.visible)return y;$.push(y),y=T.fill}return!1}function qy(s){var o=s.fill,c="dataset";return o===!1?null:(isFinite(o)||(c="boundary"),Ny[c](s))}function Nm(s){return s&&!s.skip}function Om(s,o,c,u,y){var $,T,K,D;if(!(!u||!y)){for(s.moveTo(o[0].x,o[0].y),$=1;$<u;++$)se.canvas.lineTo(s,o[$-1],o[$]);if(c[0].angle!==void 0){for(T=c[0].cx,K=c[0].cy,D=Math.sqrt(Math.pow(c[0].x-T,2)+Math.pow(c[0].y-K,2)),$=y-1;$>0;--$)s.arc(T,K,D,c[$].angle,c[$-1].angle,!0);return}for(s.lineTo(c[y-1].x,c[y-1].y),$=y-1;$>0;--$)se.canvas.lineTo(s,c[$],c[$-1],!0)}}function zy(s,o,c,u,y,$){var T=o.length,K=u.spanGaps,D=[],G=[],te=0,re=0,oe,me,Me,Pe,We,vi,da,ma;for(s.beginPath(),oe=0,me=T;oe<me;++oe)Me=oe%T,Pe=o[Me]._view,We=c(Pe,Me,u),vi=Nm(Pe),da=Nm(We),$&&ma===void 0&&vi&&(ma=oe+1,me=T+ma),vi&&da?(te=D.push(Pe),re=G.push(We)):te&&re&&(K?(vi&&D.push(Pe),da&&G.push(We)):(Om(s,D,G,te,re),te=re=0,D=[],G=[]));Om(s,D,G,te,re),s.closePath(),s.fillStyle=y,s.fill()}var Vy={id:"filler",afterDatasetsUpdate:function(s,o){var c=(s.data.datasets||[]).length,u=o.propagate,y=[],$,T,K,D;for(T=0;T<c;++T)$=s.getDatasetMeta(T),K=$.dataset,D=null,K&&K._model&&K instanceof nh.Line&&(D={visible:s.isDatasetVisible(T),fill:Oy(K,T,c),chart:s,el:K}),$.$filler=D,y.push(D);for(T=0;T<c;++T)D=y[T],D&&(D.fill=By(y,T,u),D.boundary=Ly(D),D.mapper=qy(D))},beforeDatasetsDraw:function(s){var o=s._getSortedVisibleDatasetMetas(),c=s.ctx,u,y,$,T,K,D,G;for(y=o.length-1;y>=0;--y)u=o[y].$filler,!(!u||!u.visible)&&($=u.el,T=$._view,K=$._children||[],D=u.mapper,G=T.backgroundColor||vr.global.defaultColor,D&&G&&K.length&&(se.canvas.clipArea(c,s.chartArea),zy(c,K,D,T,G,$._loop),se.canvas.unclipArea(c)))}},jy=se.rtl.getRtlAdapter,wh=se.noop,_h=se.valueOrDefault;vr._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(s,o){var c=o.datasetIndex,u=this.chart,y=u.getDatasetMeta(c);y.hidden=y.hidden===null?!u.data.datasets[c].hidden:null,u.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(s){var o=s.data.datasets,c=s.options.legend||{},u=c.labels&&c.labels.usePointStyle;return s._getSortedDatasetMetas().map(function(y){var $=y.controller.getStyle(u?0:void 0);return{text:o[y.index].label,fillStyle:$.backgroundColor,hidden:!s.isDatasetVisible(y.index),lineCap:$.borderCapStyle,lineDash:$.borderDash,lineDashOffset:$.borderDashOffset,lineJoin:$.borderJoinStyle,lineWidth:$.borderWidth,strokeStyle:$.borderColor,pointStyle:$.pointStyle,rotation:$.rotation,datasetIndex:y.index}},this)}}},legendCallback:function(s){var o=document.createElement("ul"),c=s.data.datasets,u,y,$,T;for(o.setAttribute("class",s.id+"-legend"),u=0,y=c.length;u<y;u++)$=o.appendChild(document.createElement("li")),T=$.appendChild(document.createElement("span")),T.style.backgroundColor=c[u].backgroundColor,c[u].label&&$.appendChild(document.createTextNode(c[u].label));return o.outerHTML}});function Wp(s,o){return s.usePointStyle&&s.boxWidth>o?o:s.boxWidth}var Dm=oh.extend({initialize:function(s){var o=this;se.extend(o,s),o.legendHitBoxes=[],o._hoveredItem=null,o.doughnutMode=!1},beforeUpdate:wh,update:function(s,o,c){var u=this;return u.beforeUpdate(),u.maxWidth=s,u.maxHeight=o,u.margins=c,u.beforeSetDimensions(),u.setDimensions(),u.afterSetDimensions(),u.beforeBuildLabels(),u.buildLabels(),u.afterBuildLabels(),u.beforeFit(),u.fit(),u.afterFit(),u.afterUpdate(),u.minSize},afterUpdate:wh,beforeSetDimensions:wh,setDimensions:function(){var s=this;s.isHorizontal()?(s.width=s.maxWidth,s.left=0,s.right=s.width):(s.height=s.maxHeight,s.top=0,s.bottom=s.height),s.paddingLeft=0,s.paddingTop=0,s.paddingRight=0,s.paddingBottom=0,s.minSize={width:0,height:0}},afterSetDimensions:wh,beforeBuildLabels:wh,buildLabels:function(){var s=this,o=s.options.labels||{},c=se.callback(o.generateLabels,[s.chart],s)||[];o.filter&&(c=c.filter(function(u){return o.filter(u,s.chart.data)})),s.options.reverse&&c.reverse(),s.legendItems=c},afterBuildLabels:wh,beforeFit:wh,fit:function(){var s=this,o=s.options,c=o.labels,u=o.display,y=s.ctx,$=se.options._parseFont(c),T=$.size,K=s.legendHitBoxes=[],D=s.minSize,G=s.isHorizontal();if(G?(D.width=s.maxWidth,D.height=u?10:0):(D.width=u?10:0,D.height=s.maxHeight),!u){s.width=D.width=s.height=D.height=0;return}if(y.font=$.string,G){var te=s.lineWidths=[0],re=0;y.textAlign="left",y.textBaseline="middle",se.each(s.legendItems,function(da,ma){var wa=Wp(c,T),ba=wa+T/2+y.measureText(da.text).width;(ma===0||te[te.length-1]+ba+2*c.padding>D.width)&&(re+=T+c.padding,te[te.length-(ma>0?0:1)]=0),K[ma]={left:0,top:0,width:ba,height:T},te[te.length-1]+=ba+c.padding}),D.height+=re}else{var oe=c.padding,me=s.columnWidths=[],Me=s.columnHeights=[],Pe=c.padding,We=0,vi=0;se.each(s.legendItems,function(da,ma){var wa=Wp(c,T),ba=wa+T/2+y.measureText(da.text).width;ma>0&&vi+T+2*oe>D.height&&(Pe+=We+c.padding,me.push(We),Me.push(vi),We=0,vi=0),We=Math.max(We,ba),vi+=T+oe,K[ma]={left:0,top:0,width:ba,height:T}}),Pe+=We,me.push(We),Me.push(vi),D.width+=Pe}s.width=D.width,s.height=D.height},afterFit:wh,isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},draw:function(){var s=this,o=s.options,c=o.labels,u=vr.global,y=u.defaultColor,$=u.elements.line,T=s.height,K=s.columnHeights,D=s.width,G=s.lineWidths;if(o.display){var te=jy(o.rtl,s.left,s.minSize.width),re=s.ctx,oe=_h(c.fontColor,u.defaultFontColor),me=se.options._parseFont(c),Me=me.size,Pe;re.textAlign=te.textAlign("left"),re.textBaseline="middle",re.lineWidth=.5,re.strokeStyle=oe,re.fillStyle=oe,re.font=me.string;var We=Wp(c,Me),vi=s.legendHitBoxes,da=function(xa,Ra,Pa){if(!(isNaN(We)||We<=0)){re.save();var Va=_h(Pa.lineWidth,$.borderWidth);if(re.fillStyle=_h(Pa.fillStyle,y),re.lineCap=_h(Pa.lineCap,$.borderCapStyle),re.lineDashOffset=_h(Pa.lineDashOffset,$.borderDashOffset),re.lineJoin=_h(Pa.lineJoin,$.borderJoinStyle),re.lineWidth=Va,re.strokeStyle=_h(Pa.strokeStyle,y),re.setLineDash&&re.setLineDash(_h(Pa.lineDash,$.borderDash)),c&&c.usePointStyle){var za=We*Math.SQRT2/2,La=te.xPlus(xa,We/2),eh=Ra+Me/2;se.canvas.drawPoint(re,Pa.pointStyle,za,La,eh,Pa.rotation)}else re.fillRect(te.leftForLtr(xa,We),Ra,We,Me),Va!==0&&re.strokeRect(te.leftForLtr(xa,We),Ra,We,Me);re.restore()}},ma=function(xa,Ra,Pa,Va){var za=Me/2,La=te.xPlus(xa,We+za),eh=Ra+za;re.fillText(Pa.text,La,eh),Pa.hidden&&(re.beginPath(),re.lineWidth=2,re.moveTo(La,eh),re.lineTo(te.xPlus(La,Va),eh),re.stroke())},wa=function(xa,Ra){switch(o.align){case"start":return c.padding;case"end":return xa-Ra;default:return(xa-Ra+c.padding)/2}},ba=s.isHorizontal();ba?Pe={x:s.left+wa(D,G[0]),y:s.top+c.padding,line:0}:Pe={x:s.left+c.padding,y:s.top+wa(T,K[0]),line:0},se.rtl.overrideTextDirection(s.ctx,o.textDirection);var Ca=Me+c.padding;se.each(s.legendItems,function(xa,Ra){var Pa=re.measureText(xa.text).width,Va=We+Me/2+Pa,za=Pe.x,La=Pe.y;te.setWidth(s.minSize.width),ba?Ra>0&&za+Va+c.padding>s.left+s.minSize.width&&(La=Pe.y+=Ca,Pe.line++,za=Pe.x=s.left+wa(D,G[Pe.line])):Ra>0&&La+Ca>s.top+s.minSize.height&&(za=Pe.x=za+s.columnWidths[Pe.line]+c.padding,Pe.line++,La=Pe.y=s.top+wa(T,K[Pe.line]));var eh=te.x(za);da(eh,La,xa),vi[Ra].left=te.leftForLtr(eh,vi[Ra].width),vi[Ra].top=La,ma(eh,La,xa,Pa),ba?Pe.x+=Va+c.padding:Pe.y+=Ca}),se.rtl.restoreTextDirection(s.ctx,o.textDirection)}},_getLegendItemAt:function(s,o){var c=this,u,y,$;if(s>=c.left&&s<=c.right&&o>=c.top&&o<=c.bottom){for($=c.legendHitBoxes,u=0;u<$.length;++u)if(y=$[u],s>=y.left&&s<=y.left+y.width&&o>=y.top&&o<=y.top+y.height)return c.legendItems[u]}return null},handleEvent:function(s){var o=this,c=o.options,u=s.type==="mouseup"?"click":s.type,y;if(u==="mousemove"){if(!c.onHover&&!c.onLeave)return}else if(u==="click"){if(!c.onClick)return}else return;y=o._getLegendItemAt(s.x,s.y),u==="click"?y&&c.onClick&&c.onClick.call(o,s.native,y):(c.onLeave&&y!==o._hoveredItem&&(o._hoveredItem&&c.onLeave.call(o,s.native,o._hoveredItem),o._hoveredItem=y),c.onHover&&y&&c.onHover.call(o,s.native,y))}});function Fm(s,o){var c=new Dm({ctx:s.ctx,options:o,chart:s});ch.configure(s,c,o),ch.addBox(s,c),s.legend=c}var Wy={id:"legend",_element:Dm,beforeInit:function(s){var o=s.options.legend;o&&Fm(s,o)},beforeUpdate:function(s){var o=s.options.legend,c=s.legend;o?(se.mergeIf(o,vr.global.legend),c?(ch.configure(s,c,o),c.options=o):Fm(s,o)):c&&(ch.removeBox(s,c),delete s.legend)},afterEvent:function(s,o){var c=s.legend;c&&c.handleEvent(o)}},gh=se.noop;vr._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Lm=oh.extend({initialize:function(s){var o=this;se.extend(o,s),o.legendHitBoxes=[]},beforeUpdate:gh,update:function(s,o,c){var u=this;return u.beforeUpdate(),u.maxWidth=s,u.maxHeight=o,u.margins=c,u.beforeSetDimensions(),u.setDimensions(),u.afterSetDimensions(),u.beforeBuildLabels(),u.buildLabels(),u.afterBuildLabels(),u.beforeFit(),u.fit(),u.afterFit(),u.afterUpdate(),u.minSize},afterUpdate:gh,beforeSetDimensions:gh,setDimensions:function(){var s=this;s.isHorizontal()?(s.width=s.maxWidth,s.left=0,s.right=s.width):(s.height=s.maxHeight,s.top=0,s.bottom=s.height),s.paddingLeft=0,s.paddingTop=0,s.paddingRight=0,s.paddingBottom=0,s.minSize={width:0,height:0}},afterSetDimensions:gh,beforeBuildLabels:gh,buildLabels:gh,afterBuildLabels:gh,beforeFit:gh,fit:function(){var s=this,o=s.options,c=s.minSize={},u=s.isHorizontal(),y,$;if(!o.display){s.width=c.width=s.height=c.height=0;return}y=se.isArray(o.text)?o.text.length:1,$=y*se.options._parseFont(o).lineHeight+o.padding*2,s.width=c.width=u?s.maxWidth:$,s.height=c.height=u?$:s.maxHeight},afterFit:gh,isHorizontal:function(){var s=this.options.position;return s==="top"||s==="bottom"},draw:function(){var s=this,o=s.ctx,c=s.options;if(c.display){var u=se.options._parseFont(c),y=u.lineHeight,$=y/2+c.padding,T=0,K=s.top,D=s.left,G=s.bottom,te=s.right,re,oe,me;o.fillStyle=se.valueOrDefault(c.fontColor,vr.global.defaultFontColor),o.font=u.string,s.isHorizontal()?(oe=D+(te-D)/2,me=K+$,re=te-D):(oe=c.position==="left"?D+$:te-$,me=K+(G-K)/2,re=G-K,T=Math.PI*(c.position==="left"?-.5:.5)),o.save(),o.translate(oe,me),o.rotate(T),o.textAlign="center",o.textBaseline="middle";var Me=c.text;if(se.isArray(Me))for(var Pe=0,We=0;We<Me.length;++We)o.fillText(Me[We],0,Pe,re),Pe+=y;else o.fillText(Me,0,0,re);o.restore()}}});function Bm(s,o){var c=new Lm({ctx:s.ctx,options:o,chart:s});ch.configure(s,c,o),ch.addBox(s,c),s.titleBlock=c}var Uy={id:"title",_element:Lm,beforeInit:function(s){var o=s.options.title;o&&Bm(s,o)},beforeUpdate:function(s){var o=s.options.title,c=s.titleBlock;o?(se.mergeIf(o,vr.global.title),c?(ch.configure(s,c,o),c.options=o):Bm(s,o)):c&&(ch.removeBox(s,c),delete s.titleBlock)}},kh={},Yy=Vy,Ky=Wy,Qy=Uy;kh.filler=Yy,kh.legend=Ky,kh.title=Qy,ka.helpers=se,Vg(),ka._adapters=Tp,ka.Animation=Vh,ka.animationService=jh,ka.controllers=sm,ka.DatasetController=lh,ka.defaults=vr,ka.Element=oh,ka.elements=nh,ka.Interaction=Oh,ka.layouts=ch,ka.platform=Dh,ka.plugins=Ta,ka.Scale=sh,ka.scaleService=Jh,ka.Ticks=Zh,ka.Tooltip=Ep,ka.helpers.each(Ty,function(s,o){ka.scaleService.registerScaleType(o,s,s._defaults)});for(var qm in kh)kh.hasOwnProperty(qm)&&ka.plugins.register(kh[qm]);ka.platform.initialize();var Hy=ka;return typeof window<"u"&&(window.Chart=ka),ka.Chart=ka,ka.Legend=kh.legend._element,ka.Title=kh.title._element,ka.pluginService=ka.plugins,ka.PluginBase=ka.Element.extend({}),ka.canvasHelpers=ka.helpers.canvas,ka.layoutService=ka.layouts,ka.LinearScaleBase=up,ka.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(s){ka[s]=function(o,c){return new ka(o,ka.helpers.merge(c||{},{type:s.charAt(0).toLowerCase()+s.slice(1)}))}}),Hy}))})(Chart$1)),Chart$1.exports}var ChartExports=requireChart();const Wi=!1;var pr=Array.isArray,Na=Array.prototype.indexOf,js=Array.from,Wr=Object.defineProperty,Tt=Object.getOwnPropertyDescriptor,Yi=Object.getOwnPropertyDescriptors,qa=Object.prototype,Fa=Array.prototype,Gs=Object.getPrototypeOf,bi=Object.isExtensible;function wr(e){return typeof e=="function"}const rt=()=>{};function Ka(e){return e()}function Yr(e){for(var t=0;t<e.length;t++)e[t]()}function Hi(){var e,t,r=new Promise((n,i)=>{e=n,t=i});return{promise:r,resolve:e,reject:t}}const nt=2,Us=4,as=8,Wt=16,$t=32,Yt=64,Ws=128,ft=256,Hr=512,He=1024,ct=2048,It=4096,gt=8192,Ht=16384,Ys=32768,Vr=65536,wi=1<<17,Aa=1<<18,hr=1<<19,Xi=1<<20,Is=1<<21,os=1<<22,Kt=1<<23,xt=Symbol("$state"),Zi=Symbol("legacy props"),Ba=Symbol(""),kr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ji(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Oa(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ja(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ga(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ua(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Wa(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ya(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ha(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Xa(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Za(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ja(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ls=1,cs=2,Qi=4,Qa=8,eo=16,to=1,ro=2,en=4,so=8,io=16,tn=1,no=2,Oe=Symbol(),ao="http://www.w3.org/1999/xhtml",oo="@attach";function lo(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function co(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let uo=!1;function rn(e){return e===this.v}function Hs(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function fo(e,t){return e!==t}function sn(e){return!Hs(e,this.v)}let mr=!1,vo=!1;function po(){mr=!0}let Fe=null;function cr(e){Fe=e}function le(e,t=!1,r){Fe={p:Fe,c:null,e:null,s:e,x:null,l:mr&&!t?{s:null,u:null,$:[]}:null}}function ce(e){var t=Fe,r=t.e;if(r!==null){t.e=null;for(var n of r)wn(n)}return Fe=t.p,{}}function gr(){return!mr||Fe!==null&&Fe.l===null}let Nt=[];function nn(){var e=Nt;Nt=[],Yr(e)}function Vt(e){if(Nt.length===0&&!Sr){var t=Nt;queueMicrotask(()=>{t===Nt&&nn()})}Nt.push(e)}function ho(){for(;Nt.length>0;)nn()}const mo=new WeakMap;function an(e){var t=he;if(t===null)return xe.f|=Kt,e;if((t.f&Ys)===0){if((t.f&Ws)===0)throw!t.parent&&e instanceof Error&&on(e),e;t.b.error(e)}else dr(e,t)}function dr(e,t){for(;t!==null;){if((t.f&Ws)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e instanceof Error&&on(e),e}function on(e){const t=mo.get(e);t&&(Wr(e,"message",{value:t.message}),Wr(e,"stack",{value:t.stack}))}const Br=new Set;let Ne=null,Ur=null,Ds=new Set,_t=[],ds=null,Ts=!1,Sr=!1;class ut{current=new Map;#t=new Map;#e=new Set;#i=0;#a=null;#c=[];#s=[];#n=[];#r=[];#o=[];#u=[];skipped_effects=new Set;process(t){_t=[],Ur=null;for(const i of t)this.#d(i);if(this.#i===0){this.#f();var r=this.#s,n=this.#n;this.#s=[],this.#n=[],this.#r=[],Ur=this,Ne=null,_i(r),_i(n),this.#a?.resolve()}else this.#l(this.#s),this.#l(this.#n),this.#l(this.#r);for(const i of this.#c)ur(i);this.#c=[]}#d(t){t.f^=He;for(var r=t.first;r!==null;){var n=r.f,i=(n&($t|Yt))!==0,a=i&&(n&He)!==0,l=a||(n&gt)!==0||this.skipped_effects.has(r);if(!l&&r.fn!==null){i?r.f^=He:(n&Us)!==0?this.#n.push(r):(n&He)===0&&((n&os)!==0&&r.b?.is_pending()?this.#c.push(r):Nr(r)&&((r.f&Wt)!==0&&this.#r.push(r),ur(r)));var d=r.first;if(d!==null){r=d;continue}}var p=r.parent;for(r=r.next;r===null&&p!==null;)r=p.next,p=p.parent}}#l(t){for(const r of t)((r.f&ct)!==0?this.#o:this.#u).push(r),Ze(r,He);t.length=0}capture(t,r){this.#t.has(t)||this.#t.set(t,r),this.current.set(t,t.v)}activate(){Ne=this}deactivate(){Ne=null,Ur=null;for(const t of Ds)if(Ds.delete(t),t(),Ne!==null)break}flush(){if(_t.length>0){if(this.activate(),ln(),Ne!==null&&Ne!==this)return}else this.#i===0&&this.#f();this.deactivate()}#f(){for(const t of this.#e)t();if(this.#e.clear(),Br.size>1){this.#t.clear();let t=!0;for(const r of Br){if(r===this){t=!1;continue}for(const[n,i]of this.current){if(r.current.has(n))if(t)r.current.set(n,i);else continue;cn(n)}if(_t.length>0){Ne=r;for(const n of _t)r.#d(n);_t=[]}}Ne=null}Br.delete(this)}increment(){this.#i+=1}decrement(){if(this.#i-=1,this.#i===0){for(const t of this.#o)Ze(t,ct),Ot(t);for(const t of this.#u)Ze(t,It),Ot(t);this.flush()}else this.deactivate()}add_callback(t){this.#e.add(t)}settled(){return(this.#a??=Hi()).promise}static ensure(){if(Ne===null){const t=Ne=new ut;Br.add(Ne),Sr||ut.enqueue(()=>{Ne===t&&t.flush()})}return Ne}static enqueue(t){Vt(t)}static apply(t){return rt}}function go(e){var t=Sr;Sr=!0;try{for(var r;;){if(ho(),_t.length===0&&(Ne?.flush(),_t.length===0))return ds=null,r;ln()}}finally{Sr=t}}function ln(){var e=ar;Ts=!0;try{var t=0;for(ki(!0);_t.length>0;){var r=ut.ensure();if(t++>1e3){var n,i;bo()}r.process(_t),zt.clear()}}finally{Ts=!1,ki(e),ds=null}}function bo(){try{Wa()}catch(e){dr(e,ds)}}let Lt=null;function _i(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(Ht|gt))===0&&Nr(n)&&(Lt=[],ur(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?kn(n):n.fn=null),Lt?.length>0)){zt.clear();for(const i of Lt)ur(i);Lt=[]}}Lt=null}}function cn(e){if(e.reactions!==null)for(const t of e.reactions){const r=t.f;(r&nt)!==0?cn(t):(r&(os|Wt))!==0&&(Ze(t,ct),Ot(t))}}function Ot(e){for(var t=ds=e;t.parent!==null;){t=t.parent;var r=t.f;if(Ts&&t===he&&(r&Wt)!==0)return;if((r&(Yt|$t))!==0){if((r&He)===0)return;t.f^=He}}_t.push(t)}function wo(e){let t=0,r=Et(0),n;return()=>{Eo()&&(f$1(r),Zt(()=>(t===0&&(n=_$1(()=>e(()=>Mr(r)))),t+=1,()=>{Vt(()=>{t-=1,t===0&&(n?.(),n=void 0,Mr(r))})})))}}var _o=Vr|hr|Ws;function xo(e,t,r){new yo(e,t,r)}class yo{parent;#t=!1;#e;#i=null;#a;#c;#s;#n=null;#r=null;#o=null;#u=null;#d=0;#l=0;#f=!1;#h=null;#g=()=>{this.#h&&jt(this.#h,this.#d)};#y=wo(()=>(this.#h=Et(this.#d),()=>{this.#h=null}));constructor(t,r,n){this.#e=t,this.#a=r,this.#c=n,this.parent=he.b,this.#t=!!this.#a.pending,this.#s=Jt(()=>{he.b=this;{try{this.#n=tt(()=>n(this.#e))}catch(i){this.error(i)}this.#l>0?this.#m():this.#t=!1}},_o)}#b(){try{this.#n=tt(()=>this.#c(this.#e))}catch(t){this.error(t)}this.#t=!1}#w(){const t=this.#a.pending;t&&(this.#r=tt(()=>t(this.#e)),ut.enqueue(()=>{this.#n=this.#p(()=>(ut.ensure(),tt(()=>this.#c(this.#e)))),this.#l>0?this.#m():(At(this.#r,()=>{this.#r=null}),this.#t=!1)}))}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#a.pending}#p(t){var r=he,n=xe,i=Fe;vt(this.#s),it(this.#s),cr(this.#s.ctx);try{return t()}catch(a){return an(a),null}finally{vt(r),it(n),cr(i)}}#m(){const t=this.#a.pending;this.#n!==null&&(this.#u=document.createDocumentFragment(),ko(this.#n,this.#u)),this.#r===null&&(this.#r=tt(()=>t(this.#e)))}#v(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#v(t);return}this.#l+=t,this.#l===0&&(this.#t=!1,this.#r&&At(this.#r,()=>{this.#r=null}),this.#u&&(this.#e.before(this.#u),this.#u=null),Vt(()=>{ut.ensure().flush()}))}update_pending_count(t){this.#v(t),this.#d+=t,Ds.add(this.#g)}get_effect_pending(){return this.#y(),f$1(this.#h)}error(t){var r=this.#a.onerror;let n=this.#a.failed;if(this.#f||!r&&!n)throw t;this.#n&&(Xe(this.#n),this.#n=null),this.#r&&(Xe(this.#r),this.#r=null),this.#o&&(Xe(this.#o),this.#o=null);var i=!1,a=!1;const l=()=>{if(i){co();return}i=!0,a&&Ja(),ut.ensure(),this.#d=0,this.#o!==null&&At(this.#o,()=>{this.#o=null}),this.#t=this.has_pending_snippet(),this.#n=this.#p(()=>(this.#f=!1,tt(()=>this.#c(this.#e)))),this.#l>0?this.#m():this.#t=!1};var d=xe;try{it(null),a=!0,r?.(t,l),a=!1}catch(p){dr(p,this.#s&&this.#s.parent)}finally{it(d)}n&&Vt(()=>{this.#o=this.#p(()=>{this.#f=!0;try{return tt(()=>{n(this.#e,()=>t,()=>l)})}catch(p){return dr(p,this.#s.parent),null}finally{this.#f=!1}})})}}function ko(e,t){for(var r=e.nodes_start,n=e.nodes_end;r!==null;){var i=r===n?null:Lr(r);t.append(r),r=i}}function dn(e,t,r){const n=gr()?Er:Pr;if(t.length===0){r(e.map(n));return}var i=Ne,a=he,l=So();Promise.all(t.map(d=>Mo(d))).then(d=>{i?.activate(),l();try{r([...e.map(n),...d])}catch(p){(a.f&Ht)===0&&dr(p,a)}i?.deactivate(),un()}).catch(d=>{dr(d,a)})}function So(){var e=he,t=xe,r=Fe,n=Ne;return function(){vt(e),it(t),cr(r),n?.activate()}}function un(){vt(null),it(null),cr(null)}function Er(e){var t=nt|ct,r=xe!==null&&(xe.f&nt)!==0?xe:null;return he===null||r!==null&&(r.f&ft)!==0?t|=ft:he.f|=hr,{ctx:Fe,deps:null,effects:null,equals:rn,f:t,fn:e,reactions:null,rv:0,v:Oe,wv:0,parent:r??he,ac:null}}function Mo(e,t){let r=he;r===null&&Oa();var n=r.b,i=void 0,a=Et(Oe),l=!xe,d=new Map;return No(()=>{var p=Hi();i=p.promise;try{Promise.resolve(e()).then(p.resolve,p.reject)}catch(I){p.reject(I)}var m=Ne,A=n.is_pending();l&&(n.update_pending_count(1),A||(m.increment(),d.get(m)?.reject(kr),d.set(m,p)));const x=(I,P=void 0)=>{A||m.activate(),P?P!==kr&&(a.f|=Kt,jt(a,P)):((a.f&Kt)!==0&&(a.f^=Kt),jt(a,I)),l&&(n.update_pending_count(-1),A||m.decrement()),un()};p.promise.then(x,I=>x(null,I||"unknown"))}),vs(()=>{for(const p of d.values())p.reject(kr)}),new Promise(p=>{function m(A){function x(){A===i?p(a):m(i)}A.then(x,x)}m(i)})}function ht(e){const t=Er(e);return Cn(t),t}function Pr(e){const t=Er(e);return t.equals=sn,t}function fn(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Xe(t[r])}}function Ro(e){for(var t=e.parent;t!==null;){if((t.f&nt)===0)return t;t=t.parent}return null}function Xs(e){var t,r=he;vt(Ro(e));try{fn(e),t=Tn(e)}finally{vt(r)}return t}function vn(e){var t=Xs(e);if(e.equals(t)||(e.v=t,e.wv=In()),!Qt){var r=(Dt||(e.f&ft)!==0)&&e.deps!==null?It:He;Ze(e,r)}}const zt=new Map;function Et(e,t){var r={f:0,v:e,reactions:null,equals:rn,rv:0,wv:0};return r}function Ae(e,t){const r=Et(e);return Cn(r),r}function H(e,t=!1,r=!0){const n=Et(e);return t||(n.equals=sn),mr&&r&&Fe!==null&&Fe.l!==null&&(Fe.l.s??=[]).push(n),n}function Co(e,t){return E(e,_$1(()=>f$1(e))),t}function E(e,t,r=!1){xe!==null&&(!mt||(xe.f&wi)!==0)&&gr()&&(xe.f&(nt|Wt|os|wi))!==0&&!Rt?.includes(e)&&Za();let n=r?Mt(t):t;return jt(e,n)}function jt(e,t){if(!e.equals(t)){var r=e.v;Qt?zt.set(e,t):zt.set(e,r),e.v=t;var n=ut.ensure();n.capture(e,r),(e.f&nt)!==0&&((e.f&ct)!==0&&Xs(e),Ze(e,(e.f&ft)===0?He:It)),e.wv=In(),pn(e,ct),gr()&&he!==null&&(he.f&He)!==0&&(he.f&($t|Yt))===0&&(dt===null?Ko([e]):dt.push(e))}return t}function zs(e,t=1){var r=f$1(e),n=t===1?r++:r--;return E(e,r),n}function Mr(e){E(e,e.v+1)}function pn(e,t){var r=e.reactions;if(r!==null)for(var n=gr(),i=r.length,a=0;a<i;a++){var l=r[a],d=l.f;if(!(!n&&l===he)){var p=(d&ct)===0;p&&Ze(l,t),(d&nt)!==0?pn(l,It):p&&((d&Wt)!==0&&Lt!==null&&Lt.push(l),Ot(l))}}}function Mt(e){if(typeof e!="object"||e===null||xt in e)return e;const t=Gs(e);if(t!==qa&&t!==Fa)return e;var r=new Map,n=pr(e),i=Ae(0),a=Bt,l=d=>{if(Bt===a)return d();var p=xe,m=Bt;it(null),Mi(a);var A=d();return it(p),Mi(m),A};return n&&r.set("length",Ae(e.length)),new Proxy(e,{defineProperty(d,p,m){(!("value"in m)||m.configurable===!1||m.enumerable===!1||m.writable===!1)&&Ha();var A=r.get(p);return A===void 0?A=l(()=>{var x=Ae(m.value);return r.set(p,x),x}):E(A,m.value,!0),!0},deleteProperty(d,p){var m=r.get(p);if(m===void 0){if(p in d){const A=l(()=>Ae(Oe));r.set(p,A),Mr(i)}}else E(m,Oe),Mr(i);return!0},get(d,p,m){if(p===xt)return e;var A=r.get(p),x=p in d;if(A===void 0&&(!x||Tt(d,p)?.writable)&&(A=l(()=>{var P=Mt(x?d[p]:Oe),q=Ae(P);return q}),r.set(p,A)),A!==void 0){var I=f$1(A);return I===Oe?void 0:I}return Reflect.get(d,p,m)},getOwnPropertyDescriptor(d,p){var m=Reflect.getOwnPropertyDescriptor(d,p);if(m&&"value"in m){var A=r.get(p);A&&(m.value=f$1(A))}else if(m===void 0){var x=r.get(p),I=x?.v;if(x!==void 0&&I!==Oe)return{enumerable:!0,configurable:!0,value:I,writable:!0}}return m},has(d,p){if(p===xt)return!0;var m=r.get(p),A=m!==void 0&&m.v!==Oe||Reflect.has(d,p);if(m!==void 0||he!==null&&(!A||Tt(d,p)?.writable)){m===void 0&&(m=l(()=>{var I=A?Mt(d[p]):Oe,P=Ae(I);return P}),r.set(p,m));var x=f$1(m);if(x===Oe)return!1}return A},set(d,p,m,A){var x=r.get(p),I=p in d;if(n&&p==="length")for(var P=m;P<x.v;P+=1){var q=r.get(P+"");q!==void 0?E(q,Oe):P in d&&(q=l(()=>Ae(Oe)),r.set(P+"",q))}if(x===void 0)(!I||Tt(d,p)?.writable)&&(x=l(()=>Ae(void 0)),E(x,Mt(m)),r.set(p,x));else{I=x.v!==Oe;var F=l(()=>Mt(m));E(x,F)}var L=Reflect.getOwnPropertyDescriptor(d,p);if(L?.set&&L.set.call(A,m),!I){if(n&&typeof p=="string"){var Y=r.get("length"),j=Number(p);Number.isInteger(j)&&j>=Y.v&&E(Y,j+1)}Mr(i)}return!0},ownKeys(d){f$1(i);var p=Reflect.ownKeys(d).filter(x=>{var I=r.get(x);return I===void 0||I.v!==Oe});for(var[m,A]of r)A.v!==Oe&&!(m in d)&&p.push(m);return p},setPrototypeOf(){Xa()}})}function xi(e){try{if(e!==null&&typeof e=="object"&&xt in e)return e[xt]}catch{}return e}function $o(e,t){return Object.is(xi(e),xi(t))}var Ir,hn,mn,gn;function Io(){if(Ir===void 0){Ir=window,hn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;mn=Tt(t,"firstChild").get,gn=Tt(t,"nextSibling").get,bi(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),bi(r)&&(r.__t=void 0)}}function Xt(e=""){return document.createTextNode(e)}function lt(e){return mn.call(e)}function Lr(e){return gn.call(e)}function g(e,t){return lt(e)}function W(e,t=!1){{var r=lt(e);return r instanceof Comment&&r.data===""?Lr(r):r}}function R(e,t=1,r=!1){let n=e;for(;t--;)n=Lr(n);return n}function Do(e){e.textContent=""}function Zs(){return!1}function To(e,t){if(t){const r=document.body;e.autofocus=!0,Vt(()=>{document.activeElement===r&&e.focus()})}}let yi=!1;function zo(){yi||(yi=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function us(e){var t=xe,r=he;it(null),vt(null);try{return e()}finally{it(t),vt(r)}}function fs(e,t,r,n=r){e.addEventListener(t,()=>us(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),zo()}function bn(e){he===null&&xe===null&&Ua(),xe!==null&&(xe.f&ft)!==0&&he===null&&Ga(),Qt&&ja()}function Vo(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function St(e,t,r,n=!0){var i=he;i!==null&&(i.f&gt)!==0&&(e|=gt);var a={ctx:Fe,deps:null,nodes_start:null,nodes_end:null,f:e|ct,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{ur(a),a.f|=Ys}catch(p){throw Xe(a),p}else t!==null&&Ot(a);if(n){var l=a;if(r&&l.deps===null&&l.teardown===null&&l.nodes_start===null&&l.first===l.last&&(l.f&hr)===0&&(l=l.first),l!==null&&(l.parent=i,i!==null&&Vo(l,i),xe!==null&&(xe.f&nt)!==0&&(e&Yt)===0)){var d=xe;(d.effects??=[]).push(l)}}return a}function Eo(){return xe!==null&&!mt}function vs(e){const t=St(as,null,!1);return Ze(t,He),t.teardown=e,t}function Xr(e){bn();var t=he.f,r=!xe&&(t&$t)!==0&&(t&Ys)===0;if(r){var n=Fe;(n.e??=[]).push(e)}else return wn(e)}function wn(e){return St(Us|Xi,e,!1)}function Po(e){return bn(),St(as|Xi,e,!0)}function Lo(e){ut.ensure();const t=St(Yt|hr,e,!0);return(r={})=>new Promise(n=>{r.outro?At(t,()=>{Xe(t),n(void 0)}):(Xe(t),n(void 0))})}function Ct(e){return St(Us,e,!1)}function je(e,t){var r=Fe,n={effect:null,ran:!1,deps:e};r.l.$.push(n),n.effect=Zt(()=>{e(),!n.ran&&(n.ran=!0,_$1(t))})}function st(){var e=Fe;Zt(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&He)!==0&&Ze(r,It),Nr(r)&&ur(r),t.ran=!1}})}function No(e){return St(os|hr,e,!0)}function Zt(e,t=0){return St(as|t,e,!0)}function O(e,t=[],r=[]){dn(t,r,n=>{St(as,()=>e(...n.map(f$1)),!0)})}function Jt(e,t=0){var r=St(Wt|t,e,!0);return r}function tt(e,t=!0){return St($t|hr,e,!0,t)}function _n(e){var t=e.teardown;if(t!==null){const r=Qt,n=xe;Si(!0),it(null);try{t.call(null)}finally{Si(r),it(n)}}}function xn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const i=r.ac;i!==null&&us(()=>{i.abort(kr)});var n=r.next;(r.f&Yt)!==0?r.parent=null:Xe(r,t),r=n}}function qo(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&$t)===0&&Xe(t),t=r}}function Xe(e,t=!0){var r=!1;(t||(e.f&Aa)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(yn(e.nodes_start,e.nodes_end),r=!0),xn(e,t&&!r),Zr(e,0),Ze(e,Ht);var n=e.transitions;if(n!==null)for(const a of n)a.stop();_n(e);var i=e.parent;i!==null&&i.first!==null&&kn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function yn(e,t){for(;e!==null;){var r=e===t?null:Lr(e);e.remove(),e=r}}function kn(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function At(e,t){var r=[];Js(e,r,!0),Sn(r,()=>{Xe(e),t&&t()})}function Sn(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function Js(e,t,r){if((e.f&gt)===0){if(e.f^=gt,e.transitions!==null)for(const l of e.transitions)(l.is_global||r)&&t.push(l);for(var n=e.first;n!==null;){var i=n.next,a=(n.f&Vr)!==0||(n.f&$t)!==0;Js(n,t,a?r:!1),n=i}}}function Qs(e){Mn(e,!0)}function Mn(e,t){if((e.f&gt)!==0){e.f^=gt,(e.f&He)===0&&(Ze(e,ct),Ot(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&Vr)!==0||(r.f&$t)!==0;Mn(r,i?t:!1),r=n}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let rr=null;function Fo(e){var t=rr;try{if(rr=new Set,_$1(e),t!==null)for(var r of rr)t.add(r);return rr}finally{rr=t}}function Rn(e){for(var t of Fo(e))jt(t,t.v)}let ar=!1;function ki(e){ar=e}let Qt=!1;function Si(e){Qt=e}let xe=null,mt=!1;function it(e){xe=e}let he=null;function vt(e){he=e}let Rt=null;function Cn(e){xe!==null&&(Rt===null?Rt=[e]:Rt.push(e))}let et=null,at=0,dt=null;function Ko(e){dt=e}let $n=1,Dr=0,Bt=Dr;function Mi(e){Bt=e}let Dt=!1;function In(){return++$n}function Nr(e){var t=e.f;if((t&ct)!==0)return!0;if((t&It)!==0){var r=e.deps,n=(t&ft)!==0;if(r!==null){var i,a,l=(t&Hr)!==0,d=n&&he!==null&&!Dt,p=r.length;if((l||d)&&(he===null||(he.f&Ht)===0)){var m=e,A=m.parent;for(i=0;i<p;i++)a=r[i],(l||!a?.reactions?.includes(m))&&(a.reactions??=[]).push(m);l&&(m.f^=Hr),d&&A!==null&&(A.f&ft)===0&&(m.f^=ft)}for(i=0;i<p;i++)if(a=r[i],Nr(a)&&vn(a),a.wv>e.wv)return!0}(!n||he!==null&&!Dt)&&Ze(e,He)}return!1}function Dn(e,t,r=!0){var n=e.reactions;if(n!==null&&!Rt?.includes(e))for(var i=0;i<n.length;i++){var a=n[i];(a.f&nt)!==0?Dn(a,t,!1):t===a&&(r?Ze(a,ct):(a.f&He)!==0&&Ze(a,It),Ot(a))}}function Tn(e){var t=et,r=at,n=dt,i=xe,a=Dt,l=Rt,d=Fe,p=mt,m=Bt,A=e.f;et=null,at=0,dt=null,Dt=(A&ft)!==0&&(mt||!ar||xe===null),xe=(A&($t|Yt))===0?e:null,Rt=null,cr(e.ctx),mt=!1,Bt=++Dr,e.ac!==null&&(us(()=>{e.ac.abort(kr)}),e.ac=null);try{e.f|=Is;var x=e.fn,I=x(),P=e.deps;if(et!==null){var q;if(Zr(e,at),P!==null&&at>0)for(P.length=at+et.length,q=0;q<et.length;q++)P[at+q]=et[q];else e.deps=P=et;if(!Dt||(A&nt)!==0&&e.reactions!==null)for(q=at;q<P.length;q++)(P[q].reactions??=[]).push(e)}else P!==null&&at<P.length&&(Zr(e,at),P.length=at);if(gr()&&dt!==null&&!mt&&P!==null&&(e.f&(nt|It|ct))===0)for(q=0;q<dt.length;q++)Dn(dt[q],e);return i!==null&&i!==e&&(Dr++,dt!==null&&(n===null?n=dt:n.push(...dt))),(e.f&Kt)!==0&&(e.f^=Kt),I}catch(F){return an(F)}finally{e.f^=Is,et=t,at=r,dt=n,xe=i,Dt=a,Rt=l,cr(d),mt=p,Bt=m}}function Ao(e,t){let r=t.reactions;if(r!==null){var n=Na.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&(t.f&nt)!==0&&(et===null||!et.includes(t))&&(Ze(t,It),(t.f&(ft|Hr))===0&&(t.f^=Hr),fn(t),Zr(t,0))}function Zr(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Ao(e,r[n])}function ur(e){var t=e.f;if((t&Ht)===0){Ze(e,He);var r=he,n=ar;he=e,ar=!0;try{(t&Wt)!==0?qo(e):xn(e),_n(e);var i=Tn(e);e.teardown=typeof i=="function"?i:null,e.wv=$n;var a;Wi&&vo&&(e.f&ct)!==0&&e.deps}finally{ar=n,he=r}}}async function Bo(){await Promise.resolve(),go()}function f$1(e){var t=e.f,r=(t&nt)!==0;if(rr?.add(e),xe!==null&&!mt){var n=he!==null&&(he.f&Ht)!==0;if(!n&&!Rt?.includes(e)){var i=xe.deps;if((xe.f&Is)!==0)e.rv<Dr&&(e.rv=Dr,et===null&&i!==null&&i[at]===e?at++:et===null?et=[e]:(!Dt||!et.includes(e))&&et.push(e));else{(xe.deps??=[]).push(e);var a=e.reactions;a===null?e.reactions=[xe]:a.includes(xe)||a.push(xe)}}}else if(r&&e.deps===null&&e.effects===null){var l=e,d=l.parent;d!==null&&(d.f&ft)===0&&(l.f^=ft)}if(Qt){if(zt.has(e))return zt.get(e);if(r){l=e;var p=l.v;return((l.f&He)===0&&l.reactions!==null||zn(l))&&(p=Xs(l)),zt.set(l,p),p}}else r&&(l=e,Nr(l)&&vn(l));if((e.f&Kt)!==0)throw e.v;return e.v}function zn(e){if(e.v===Oe)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(zt.has(t)||(t.f&nt)!==0&&zn(t))return!0;return!1}function _$1(e){var t=mt;try{return mt=!0,e()}finally{mt=t}}const Oo=-7169;function Ze(e,t){e.f=e.f&Oo|t}function z(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(xt in e)Vs(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&xt in r&&Vs(r)}}}function Vs(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Vs(e[n],t)}catch{}const r=Gs(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Yi(r);for(let i in n){const a=n[i].get;if(a)try{a.call(e)}catch{}}}}}function jo(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Go=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Uo(e){return Go.includes(e)}const Wo={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Yo(e){return e=e.toLowerCase(),Wo[e]??e}const Ho=["touchstart","touchmove"];function Xo(e){return Ho.includes(e)}const Vn=new Set,Es=new Set;function En(e,t,r,n={}){function i(a){if(n.capture||yr.call(t,a),!a.cancelBubble)return us(()=>r?.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Vt(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function be(e,t,r,n,i){var a={capture:n,passive:i},l=En(e,t,r,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&vs(()=>{t.removeEventListener(e,l,a)})}function Pt(e){for(var t=0;t<e.length;t++)Vn.add(e[t]);for(var r of Es)r(e)}let Ri=null;function yr(e){var t=this,r=t.ownerDocument,n=e.type,i=e.composedPath?.()||[],a=i[0]||e.target;Ri=e;var l=0,d=Ri===e&&e.__root;if(d){var p=i.indexOf(d);if(p!==-1&&(t===document||t===window)){e.__root=t;return}var m=i.indexOf(t);if(m===-1)return;p<=m&&(l=p)}if(a=i[l]||e.target,a!==t){Wr(e,"currentTarget",{configurable:!0,get(){return a||r}});var A=xe,x=he;it(null),vt(null);try{for(var I,P=[];a!==null;){var q=a.assignedSlot||a.parentNode||a.host||null;try{var F=a["__"+n];if(F!=null&&(!a.disabled||e.target===a))if(pr(F)){var[L,...Y]=F;L.apply(a,[e,...Y])}else F.call(a,e)}catch(j){I?P.push(j):I=j}if(e.cancelBubble||q===t||q===null)break;a=q}if(I){for(let j of P)queueMicrotask(()=>{throw j});throw I}}finally{e.__root=t,delete e.currentTarget,it(A),vt(x)}}}function ei(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Gt(e,t){var r=he;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function V(e,t){var r=(t&tn)!==0,n=(t&no)!==0,i,a=!e.startsWith("<!>");return()=>{i===void 0&&(i=ei(a?e:"<!>"+e),r||(i=lt(i)));var l=n||hn?document.importNode(i,!0):i.cloneNode(!0);if(r){var d=lt(l),p=l.lastChild;Gt(d,p)}else Gt(l,l);return l}}function Zo(e,t,r="svg"){var n=!e.startsWith("<!>"),i=(t&tn)!==0,a=`<${r}>${n?e:"<!>"+e}</${r}>`,l;return()=>{if(!l){var d=ei(a),p=lt(d);if(i)for(l=document.createDocumentFragment();lt(p);)l.appendChild(lt(p));else l=lt(p)}var m=l.cloneNode(!0);if(i){var A=lt(m),x=m.lastChild;Gt(A,x)}else Gt(m,m);return m}}function qr(e,t){return Zo(e,t,"svg")}function or(e=""){{var t=Xt(e+"");return Gt(t,t),t}}function we(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Xt();return e.append(t,r),Gt(t,r),e}function M(e,t){e!==null&&e.before(t)}function B(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function Jo(e,t){return Qo(e,t)}const er=new Map;function Qo(e,{target:t,anchor:r,props:n={},events:i,context:a,intro:l=!0}){Io();var d=new Set,p=x=>{for(var I=0;I<x.length;I++){var P=x[I];if(!d.has(P)){d.add(P);var q=Xo(P);t.addEventListener(P,yr,{passive:q});var F=er.get(P);F===void 0?(document.addEventListener(P,yr,{passive:q}),er.set(P,1)):er.set(P,F+1)}}};p(js(Vn)),Es.add(p);var m=void 0,A=Lo(()=>{var x=r??t.appendChild(Xt());return xo(x,{pending:()=>{}},I=>{if(a){le({});var P=Fe;P.c=a}i&&(n.$$events=i),m=e(I,n)||{},a&&ce()}),()=>{for(var I of d){t.removeEventListener(I,yr);var P=er.get(I);--P===0?(document.removeEventListener(I,yr),er.delete(I)):er.set(I,P)}Es.delete(p),x!==r&&x.parentNode?.removeChild(x)}});return el.set(m,A),m}let el=new WeakMap;function N(e,t,r=!1){var n=e,i=null,a=null,l=Oe,d=r?Vr:0,p=!1;const m=(P,q=!0)=>{p=!0,I(q,P)};var A=null;function x(){A!==null&&(A.lastChild.remove(),n.before(A),A=null);var P=l?i:a,q=l?a:i;P&&Qs(P),q&&At(q,()=>{l?a=null:i=null})}const I=(P,q)=>{if(l!==(l=P)){var F=Zs(),L=n;if(F&&(A=document.createDocumentFragment(),A.append(L=Xt())),l?i??=q&&tt(()=>q(L)):a??=q&&tt(()=>q(L)),F){var Y=Ne,j=l?i:a,Z=l?a:i;j&&Y.skipped_effects.delete(j),Z&&Y.skipped_effects.add(Z),Y.add_callback(x)}else x()}};Jt(()=>{p=!1,t(m),p||I(null,null)},d)}function tl(e,t,r){var n=e,i=Oe,a,l,d=null,p=gr()?fo:Hs;function m(){a&&At(a),d!==null&&(d.lastChild.remove(),n.before(d),d=null),a=l}Jt(()=>{if(p(i,i=t())){var A=n,x=Zs();x&&(d=document.createDocumentFragment(),d.append(A=Xt())),l=tt(()=>r(A)),x?Ne.add_callback(m):m()}})}function Ve(e,t){return t}function rl(e,t,r){for(var n=e.items,i=[],a=t.length,l=0;l<a;l++)Js(t[l].e,i,!0);var d=a>0&&i.length===0&&r!==null;if(d){var p=r.parentNode;Do(p),p.append(r),n.clear(),wt(e,t[0].prev,t[a-1].next)}Sn(i,()=>{for(var m=0;m<a;m++){var A=t[m];d||(n.delete(A.k),wt(e,A.prev,A.next)),Xe(A.e,!d)}})}function Ie(e,t,r,n,i,a=null){var l=e,d={flags:t,items:new Map,first:null},p=(t&Qi)!==0;if(p){var m=e;l=m.appendChild(Xt())}var A=null,x=!1,I=new Map,P=Pr(()=>{var Y=r();return pr(Y)?Y:Y==null?[]:js(Y)}),q,F;function L(){sl(F,q,d,I,l,i,t,n,r),a!==null&&(q.length===0?A?Qs(A):A=tt(()=>a(l)):A!==null&&At(A,()=>{A=null}))}Jt(()=>{F??=he,q=f$1(P);var Y=q.length;x&&Y===0||(x=Y===0,L(),f$1(P))})}function sl(e,t,r,n,i,a,l,d,p){var m=(l&Qa)!==0,A=(l&(ls|cs))!==0,x=t.length,I=r.items,P=r.first,q=P,F,L=null,Y,j=[],Z=[],X,Q,J,ee;if(m)for(ee=0;ee<x;ee+=1)X=t[ee],Q=d(X,ee),J=I.get(Q),J!==void 0&&(J.a?.measure(),(Y??=new Set).add(J));for(ee=0;ee<x;ee+=1){if(X=t[ee],Q=d(X,ee),J=I.get(Q),J===void 0){var ie=n.get(Q);if(ie!==void 0){n.delete(Q),I.set(Q,ie);var de=L?L.next:q;wt(r,L,ie),wt(r,ie,de),_s(ie,de,i),L=ie}else{var fe=q?q.e.nodes_start:i;L=Ln(fe,r,L,L===null?r.first:L.next,X,Q,ee,a,l,p)}I.set(Q,L),j=[],Z=[],q=L.next;continue}if(A&&Pn(J,X,ee,l),(J.e.f&gt)!==0&&(Qs(J.e),m&&(J.a?.unfix(),(Y??=new Set).delete(J))),J!==q){if(F!==void 0&&F.has(J)){if(j.length<Z.length){var _e=Z[0],Re;L=_e.prev;var Qe=j[0],Ar=j[j.length-1];for(Re=0;Re<j.length;Re+=1)_s(j[Re],_e,i);for(Re=0;Re<Z.length;Re+=1)F.delete(Z[Re]);wt(r,Qe.prev,Ar.next),wt(r,L,Qe),wt(r,Ar,_e),q=_e,L=Ar,ee-=1,j=[],Z=[]}else F.delete(J),_s(J,q,i),wt(r,J.prev,J.next),wt(r,J,L===null?r.first:L.next),wt(r,L,J),L=J;continue}for(j=[],Z=[];q!==null&&q.k!==Q;)(q.e.f&gt)===0&&(F??=new Set).add(q),Z.push(q),q=q.next;if(q===null)continue;J=q}j.push(J),L=J,q=J.next}if(q!==null||F!==void 0){for(var Os=F===void 0?[]:js(F);q!==null;)(q.e.f&gt)===0&&Os.push(q),q=q.next;var ji=Os.length;if(ji>0){var Ui=(l&Qi)!==0&&x===0?i:null;if(m){for(ee=0;ee<ji;ee+=1)Os[ee].a?.measure();for(ee=0;ee<ji;ee+=1)Os[ee].a?.fix()}rl(r,Os,Ui)}}m&&Vt(()=>{if(Y!==void 0)for(J of Y)J.a?.apply()}),e.first=r.first&&r.first.e,e.last=L&&L.e;for(var hi of n.values())Xe(hi.e);n.clear()}function Pn(e,t,r,n){(n&ls)!==0&&jt(e.v,t),(n&cs)!==0?jt(e.i,r):e.i=r}function Ln(e,t,r,n,i,a,l,d,p,m,A){var x=(p&ls)!==0,I=(p&eo)===0,P=x?I?H(i,!1,!1):Et(i):i,q=(p&cs)===0?l:Et(l),F={i:q,v:P,k:a,a:null,e:null,prev:r,next:n};if(e===null){var L=document.createDocumentFragment();L.append(e=Xt())}return F.e=tt(()=>d(e,P,q,m),uo),F.e.prev=r&&r.e,F.e.next=n&&n.e,r===null?A||(t.first=F):(r.next=F,r.e.next=F.e),n!==null&&(n.prev=F,n.e.prev=F.e),F}function _s(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==null&&a!==n;){var l=Lr(a);i.before(a),a=l}}function wt(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Te(e,t,r=!1,n=!1,i=!1){var a=e,l="";O(()=>{var d=he;if(l!==(l=t()??"")&&(d.nodes_start!==null&&(yn(d.nodes_start,d.nodes_end),d.nodes_start=d.nodes_end=null),l!=="")){var p=l+"";r?p=`<svg>${p}</svg>`:n&&(p=`<math>${p}</math>`);var m=ei(p);if((r||n)&&(m=lt(m)),Gt(lt(m),m.lastChild),r||n)for(;lt(m);)a.before(lt(m));else a.before(m)}})}function ti(e,t,r,n,i){var a=t.$$slots?.[r],l=!1;a===!0&&(a=t.children,l=!0),a===void 0?i!==null&&i(e):a(e,l?()=>n:n)}function Nn(e,t,...r){var n=e,i=rt,a;Jt(()=>{i!==(i=t())&&(a&&(Xe(a),a=null),a=tt(()=>i(n,...r)))},Vr)}function pe(e,t){Ct(()=>{var r=e.getRootNode(),n=r.host?r:r.head??r.ownerDocument.head;if(!n.querySelector("#"+t.hash)){const i=document.createElement("style");i.id=t.hash,i.textContent=t.code,n.appendChild(i)}})}function Ps(e,t,r){Ct(()=>{var n=_$1(()=>t(e,r?.())||{});if(n?.destroy)return()=>n.destroy()})}function il(e,t){var r=void 0,n;Jt(()=>{r!==(r=t())&&(n&&(Xe(n),n=null),r&&(n=tt(()=>{Ct(()=>r(e))})))})}function qn(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=qn(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function nl(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=qn(e))&&(n&&(n+=" "),n+=t);return n}function Jr(e){return typeof e=="object"?nl(e):e??""}const Ci=[...` 	
\r\f\v\uFEFF`];function al(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var i in r)if(r[i])n=n?n+" "+i:i;else if(n.length)for(var a=i.length,l=0;(l=n.indexOf(i,l))>=0;){var d=l+a;(l===0||Ci.includes(n[l-1]))&&(d===n.length||Ci.includes(n[d]))?n=(l===0?"":n.substring(0,l))+n.substring(d+1):l=d}}return n===""?null:n}function $i(e,t=!1){var r=t?" !important;":";",n="";for(var i in e){var a=e[i];a!=null&&a!==""&&(n+=" "+i+": "+a+r)}return n}function xs(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function ol(e,t){if(t){var r="",n,i;if(Array.isArray(t)?(n=t[0],i=t[1]):n=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,l=0,d=!1,p=[];n&&p.push(...Object.keys(n).map(xs)),i&&p.push(...Object.keys(i).map(xs));var m=0,A=-1;const F=e.length;for(var x=0;x<F;x++){var I=e[x];if(d?I==="/"&&e[x-1]==="*"&&(d=!1):a?a===I&&(a=!1):I==="/"&&e[x+1]==="*"?d=!0:I==='"'||I==="'"?a=I:I==="("?l++:I===")"&&l--,!d&&a===!1&&l===0){if(I===":"&&A===-1)A=x;else if(I===";"||x===F-1){if(A!==-1){var P=xs(e.substring(m,A).trim());if(!p.includes(P)){I!==";"&&x++;var q=e.substring(m,x).trim();r+=" "+q+";"}}m=x+1,A=-1}}}}return n&&(r+=$i(n)),i&&(r+=$i(i,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function Ee(e,t,r,n,i,a){var l=e.__className;if(l!==r||l===void 0){var d=al(r,n,a);d==null?e.removeAttribute("class"):t?e.className=d:e.setAttribute("class",d),e.__className=r}else if(a&&i!==a)for(var p in a){var m=!!a[p];(i==null||m!==!!i[p])&&e.classList.toggle(p,m)}return a}function ys(e,t={},r,n){for(var i in r){var a=r[i];t[i]!==a&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,a,n))}}function Be(e,t,r,n){var i=e.__style;if(i!==t){var a=ol(t,n);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}else n&&(Array.isArray(n)?(ys(e,r?.[0],n[0]),ys(e,r?.[1],n[1],"important")):ys(e,r,n));return n}function Qr(e,t,r=!1){if(e.multiple){if(t==null)return;if(!pr(t))return lo();for(var n of e.options)n.selected=t.includes(Rr(n));return}for(n of e.options){var i=Rr(n);if($o(i,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Fn(e){var t=new MutationObserver(()=>{Qr(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),vs(()=>{t.disconnect()})}function Kn(e,t,r=t){var n=!0;fs(e,"change",i=>{var a=i?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(a),Rr);else{var d=e.querySelector(a)??e.querySelector("option:not([disabled])");l=d&&Rr(d)}r(l)}),Ct(()=>{var i=t();if(Qr(e,i,n),n&&i===void 0){var a=e.querySelector(":checked");a!==null&&(i=Rr(a),r(i))}e.__value=i,n=!1}),Fn(e)}function Rr(e){return"__value"in e?e.__value:e.value}const sr=Symbol("class"),_r=Symbol("style"),An=Symbol("is custom element"),Bn=Symbol("is html");function ll(e,t){var r=si(e);r.checked!==(r.checked=t??void 0)&&(e.checked=t)}function ri(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function yt(e,t,r,n){var i=si(e);i[t]!==(i[t]=r)&&(t==="loading"&&(e[Ba]=r),r==null?e.removeAttribute(t):typeof r!="string"&&On(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function cl(e,t,r,n,i=!1,a=!1){var l=si(e),d=l[An],p=!l[Bn],m=t||{},A=e.tagName==="OPTION";for(var x in t)x in r||(r[x]=null);r.class?r.class=Jr(r.class):(n||r[sr])&&(r.class=null),r[_r]&&(r.style??=null);var I=On(e);for(const Z in r){let X=r[Z];if(A&&Z==="value"&&X==null){e.value=e.__value="",m[Z]=X;continue}if(Z==="class"){var P=e.namespaceURI==="http://www.w3.org/1999/xhtml";Ee(e,P,X,n,t?.[sr],r[sr]),m[Z]=X,m[sr]=r[sr];continue}if(Z==="style"){Be(e,X,t?.[_r],r[_r]),m[Z]=X,m[_r]=r[_r];continue}var q=m[Z];if(!(X===q&&!(X===void 0&&e.hasAttribute(Z)))){m[Z]=X;var F=Z[0]+Z[1];if(F!=="$$")if(F==="on"){const Q={},J="$$"+Z;let ee=Z.slice(2);var L=Uo(ee);if(jo(ee)&&(ee=ee.slice(0,-7),Q.capture=!0),!L&&q){if(X!=null)continue;e.removeEventListener(ee,m[J],Q),m[J]=null}if(X!=null)if(L)e[`__${ee}`]=X,Pt([ee]);else{let ie=function(de){m[Z].call(this,de)};m[J]=En(ee,e,ie,Q)}else L&&(e[`__${ee}`]=void 0)}else if(Z==="style")yt(e,Z,X);else if(Z==="autofocus")To(e,!!X);else if(!d&&(Z==="__value"||Z==="value"&&X!=null))e.value=e.__value=X;else if(Z==="selected"&&A)ri(e,X);else{var Y=Z;p||(Y=Yo(Y));var j=Y==="defaultValue"||Y==="defaultChecked";if(X==null&&!d&&!j)if(l[Z]=null,Y==="value"||Y==="checked"){let Q=e;const J=t===void 0;if(Y==="value"){let ee=Q.defaultValue;Q.removeAttribute(Y),Q.defaultValue=ee,Q.value=Q.__value=J?ee:null}else{let ee=Q.defaultChecked;Q.removeAttribute(Y),Q.defaultChecked=ee,Q.checked=J?ee:!1}}else e.removeAttribute(Z);else j||I.includes(Y)&&(d||typeof X!="string")?(e[Y]=X,Y in l&&(l[Y]=Oe)):typeof X!="function"&&yt(e,Y,X)}}}return m}function Ls(e,t,r=[],n=[],i,a=!1,l=!1){dn(r,n,d=>{var p=void 0,m={},A=e.nodeName==="SELECT",x=!1;if(Jt(()=>{var P=t(...d.map(f$1)),q=cl(e,p,P,i,a,l);x&&A&&"value"in P&&Qr(e,P.value);for(let L of Object.getOwnPropertySymbols(m))P[L]||Xe(m[L]);for(let L of Object.getOwnPropertySymbols(P)){var F=P[L];L.description===oo&&(!p||F!==p[L])&&(m[L]&&Xe(m[L]),m[L]=tt(()=>il(e,()=>F))),q[L]=F}p=q}),A){var I=e;Ct(()=>{Qr(I,p.value,!0),Fn(I)})}x=!0})}function si(e){return e.__attributes??={[An]:e.nodeName.includes("-"),[Bn]:e.namespaceURI===ao}}var Ii=new Map;function On(e){var t=e.getAttribute("is")||e.nodeName,r=Ii.get(t);if(r)return r;Ii.set(t,r=[]);for(var n,i=e,a=Element.prototype;a!==i;){n=Yi(i);for(var l in n)n[l].set&&r.push(l);i=Gs(i)}return r}function ii(e,t,r=t){var n=new WeakSet;fs(e,"input",async i=>{var a=i?e.defaultValue:e.value;if(a=ks(e)?Ss(a):a,r(a),Ne!==null&&n.add(Ne),await Bo(),a!==(a=t())){var l=e.selectionStart,d=e.selectionEnd;e.value=a??"",d!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(d,e.value.length))}}),_$1(t)==null&&e.value&&(r(ks(e)?Ss(e.value):e.value),Ne!==null&&n.add(Ne)),Zt(()=>{var i=t();if(e===document.activeElement){var a=Ur??Ne;if(n.has(a))return}ks(e)&&i===Ss(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function jn(e,t,r=t){fs(e,"change",n=>{var i=n?e.defaultChecked:e.checked;r(i)}),_$1(t)==null&&r(e.checked),Zt(()=>{var n=t();e.checked=!!n})}function ks(e){var t=e.type;return t==="number"||t==="range"}function Ss(e){return e===""?null:+e}function dl(e,t,r=t){fs(e,"change",()=>{r(e.files)}),Zt(()=>{e.files=t()})}function Di(e,t){return e===t||e?.[xt]===t}function ps(e={},t,r,n){return Ct(()=>{var i,a;return Zt(()=>{i=a,a=[],_$1(()=>{e!==r(...a)&&(t(e,...a),i&&Di(r(...i),e)&&t(null,...i))})}),()=>{Vt(()=>{a&&Di(r(...a),e)&&t(null,...a)})}}),e}function ni(e){return function(...t){var r=t[0];return r.preventDefault(),e?.apply(this,t)}}function Ce(e=!1){const t=Fe,r=t.l.u;if(!r)return;let n=()=>z(t.s);if(e){let i=0,a={};const l=Er(()=>{let d=!1;const p=t.s;for(const m in p)p[m]!==a[m]&&(a[m]=p[m],d=!0);return d&&i++,i});n=()=>f$1(l)}r.b.length&&Po(()=>{Ti(t,n),Yr(r.b)}),Xr(()=>{const i=_$1(()=>r.m.map(Ka));return()=>{for(const a of i)typeof a=="function"&&a()}}),r.a.length&&Xr(()=>{Ti(t,n),Yr(r.a)})}function Ti(e,t){if(e.l.s)for(const r of e.l.s)f$1(r);t()}function ot(e,t){var r=e.$$events?.[t.type],n=pr(r)?r.slice():r==null?[]:[r];for(var i of n)i.call(this,t)}function ai(e,t,r){if(e==null)return t(void 0),r&&r(void 0),rt;const n=_$1(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const tr=[];function ul(e,t){return{subscribe:Se(e,t).subscribe}}function Se(e,t=rt){let r=null;const n=new Set;function i(d){if(Hs(e,d)&&(e=d,r)){const p=!tr.length;for(const m of n)m[1](),tr.push(m,e);if(p){for(let m=0;m<tr.length;m+=2)tr[m][0](tr[m+1]);tr.length=0}}}function a(d){i(d(e))}function l(d,p=rt){const m=[d,p];return n.add(m),n.size===1&&(r=t(i,a)||rt),d(e),()=>{n.delete(m),n.size===0&&r&&(r(),r=null)}}return{set:i,update:a,subscribe:l}}function ye(e,t,r){const n=!Array.isArray(e),i=n?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return ul(r,(l,d)=>{let p=!1;const m=[];let A=0,x=rt;const I=()=>{if(A)return;x();const q=t(n?m[0]:m,l,d);a?l(q):x=typeof q=="function"?q:rt},P=i.map((q,F)=>ai(q,L=>{m[F]=L,A&=~(1<<F),p&&I()},()=>{A|=1<<F}));return p=!0,I(),function(){Yr(P),x(),p=!1}})}function ze(e){let t;return ai(e,r=>t=r)(),t}let Or=!1,Ns=Symbol();function ve(e,t,r){const n=r[t]??={store:null,source:H(void 0),unsubscribe:rt};if(n.store!==e&&!(Ns in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=rt;else{var i=!0;n.unsubscribe=ai(e,a=>{i?n.source.v=a:E(n.source,a)}),i=!1}return e&&Ns in r?ze(e):f$1(n.source)}function kt(e,t,r){let n=r[t];return n&&n.store!==e&&(n.unsubscribe(),n.unsubscribe=rt),e}function ir(e,t){return e.set(t),t}function Ge(){const e={};function t(){vs(()=>{for(var r in e)e[r].unsubscribe();Wr(e,Ns,{enumerable:!1,value:!0})})}return[e,t]}function fl(e){var t=Or;try{return Or=!1,[e(),Or]}finally{Or=t}}const vl={get(e,t){if(!e.exclude.includes(t))return f$1(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,r){if(!(t in e.special)){var n=he;try{vt(e.parent_effect),e.special[t]=U({get[t](){return e.props[t]}},t,en)}finally{vt(n)}}return e.special[t](r),zs(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),zs(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function es(e,t){return new Proxy({props:e,exclude:t,special:{},version:Et(0),parent_effect:he},vl)}const pl={get(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(wr(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(e,t,r){let n=e.props.length;for(;n--;){let i=e.props[n];wr(i)&&(i=i());const a=Tt(i,t);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(wr(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const i=Tt(n,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===xt||t===Zi)return!1;for(let r of e.props)if(wr(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props)if(wr(r)&&(r=r()),!!r){for(const n in r)t.includes(n)||t.push(n);for(const n of Object.getOwnPropertySymbols(r))t.includes(n)||t.push(n)}return t}};function hl(...e){return new Proxy({props:e},pl)}function U(e,t,r,n){var i=!mr||(r&ro)!==0,a=(r&so)!==0,l=(r&io)!==0,d=n,p=!0,m=()=>(p&&(p=!1,d=l?_$1(n):n),d),A;if(a){var x=xt in e||Zi in e;A=Tt(e,t)?.set??(x&&t in e?Z=>e[t]=Z:void 0)}var I,P=!1;a?[I,P]=fl(()=>e[t]):I=e[t],I===void 0&&n!==void 0&&(I=m(),A&&(i&&Ya(),A(I)));var q;if(i?q=()=>{var Z=e[t];return Z===void 0?m():(p=!0,Z)}:q=()=>{var Z=e[t];return Z!==void 0&&(d=void 0),Z===void 0?d:Z},i&&(r&en)===0)return q;if(A){var F=e.$$legacy;return(function(Z,X){return arguments.length>0?((!i||!X||F||P)&&A(X?q():Z),Z):q()})}var L=!1,Y=((r&to)!==0?Er:Pr)(()=>(L=!1,q()));a&&f$1(Y);var j=he;return(function(Z,X){if(arguments.length>0){const Q=X?f$1(Y):i&&a?Mt(Z):Z;return E(Y,Q),L=!0,d!==void 0&&(d=Q),Z}return Qt&&L||(j.f&Ht)!==0?Y.v:f$1(Y)})}function br(e){Fe===null&&Ji(),mr&&Fe.l!==null?gl(Fe).m.push(e):Xr(()=>{const t=_$1(e);if(typeof t=="function")return t})}function ml(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function pt(){const e=Fe;return e===null&&Ji(),(t,r,n)=>{const i=e.s.$$events?.[t];if(i){const a=pr(i)?i.slice():[i],l=ml(t,r,n);for(const d of a)d.call(e.x,l);return!l.defaultPrevented}return!0}}function gl(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}class bl{constructor(t){this.config=t,this.checkDataCoordinator=createCheckDataCoordinator(),t.comparison&&(this.comparisonDataCoordinator=createComparisonDataCoordinator())}}async function wl(e){const t=await createConfig(e);return new bl(t)}const _l="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(_l);po();function qs(e){const t=r=>{e&&!e.contains(r.target)&&!r.defaultPrevented&&(r.stopPropagation(),e.dispatchEvent(new CustomEvent("clickout")))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function oi(e){const t=e.target;return t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.tagName==="SELECT"||t.isContentEditable}var xl=qr("<g><!></g>");function yl(e,t){le(t,!1);let r=870711;function n(){return r+=1,`fa-${r.toString(16)}`}let i=H(""),a=U(t,"data",8);function l(m){if(!m||!m.raw)return"";let A=m.raw;const x={};return A=A.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(I,P)=>{const q=n();return x[P]=q,` id="${q}"`}),A=A.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(I,P,q,F)=>{const L=P||F;return!L||!x[L]?I:`#${x[L]}`}),A}je(()=>z(a()),()=>{E(i,l(a()))}),st();var d=xl(),p=g(d);Te(p,()=>f$1(i),!0),M(e,d),ce()}var kl=qr("<svg><!></svg>");const Sl={hash:"svelte-4tj8j2",code:`.fa-icon.svelte-4tj8j2 {display:inline-block;fill:currentColor;}.fa-flip-horizontal.svelte-4tj8j2 {transform:scale(-1, 1);}.fa-flip-vertical.svelte-4tj8j2 {transform:scale(1, -1);}.fa-spin.svelte-4tj8j2 {
    animation: svelte-4tj8j2-fa-spin 1s 0s infinite linear;}.fa-inverse.svelte-4tj8j2 {color:#fff;}.fa-pulse.svelte-4tj8j2 {
    animation: svelte-4tj8j2-fa-spin 1s infinite steps(8);}
  @keyframes svelte-4tj8j2-fa-spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }`};function Ml(e,t){const r=es(t,["children","$$slots","$$events","$$legacy"]),n=es(r,["class","width","height","box","spin","inverse","pulse","flip","style","label"]);pe(e,Sl);let i=U(t,"class",8,""),a=U(t,"width",8),l=U(t,"height",8),d=U(t,"box",8,"0 0 0 0"),p=U(t,"spin",8,!1),m=U(t,"inverse",8,!1),A=U(t,"pulse",8,!1),x=U(t,"flip",8,"none"),I=U(t,"style",8,""),P=U(t,"label",8,"");var q=kl();Ls(q,L=>({version:"1.1",class:`fa-icon ${i()??""}`,width:a(),height:l(),"aria-label":P(),role:P()?"img":"presentation",viewBox:d(),style:I(),...n,[sr]:L}),[()=>({"fa-spin":p(),"fa-pulse":A(),"fa-inverse":m(),"fa-flip-horizontal":x()==="horizontal","fa-flip-vertical":x()==="vertical"})],void 0,"svelte-4tj8j2");var F=g(q);ti(F,t,"default",{},null),M(e,q)}var Rl=qr("<path></path>"),Cl=qr("<polygon></polygon>"),$l=qr("<!><!><!>",1);function nr(e,t){const r=es(t,["children","$$slots","$$events","$$legacy"]),n=es(r,["class","data","scale","spin","inverse","pulse","flip","label","style"]);le(t,!1);let i=U(t,"class",8,""),a=U(t,"data",8),l=H(),d=U(t,"scale",8,1),p=U(t,"spin",8,!1),m=U(t,"inverse",8,!1),A=U(t,"pulse",8,!1),x=U(t,"flip",8,void 0),I=U(t,"label",8,""),P=U(t,"style",8,""),q=1,F=H(10),L=H(10),Y=H(),j=H();function Z(fe){let _e,Re;if(fe)if("definition"in fe){console.error("`import faIconName from '@fortawesome/package-name/faIconName` not supported - Please use `import { faIconName } from '@fortawesome/package-name/faIconName'` instead");return}else if("iconName"in fe&&"icon"in fe){_e=fe.iconName;const[Qe,Ar,,,Os]=fe.icon,ji=Array.isArray(Os)?Os:[Os];Re={width:Qe,height:Ar,paths:ji.map(Ui=>({d:Ui}))}}else _e=Object.keys(fe)[0],Re=fe[_e];else return;return Re}function X(){let fe=1;return typeof d()<"u"&&(fe=Number(d())),isNaN(fe)||fe<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),q):fe*q}function Q(){return f$1(l)?`0 0 ${f$1(l).width} ${f$1(l).height}`:`0 0 ${f$1(F)} ${f$1(L)}`}function J(){return f$1(l)?Math.max(f$1(l).width,f$1(l).height)/16:1}function ee(){return f$1(l)?f$1(l).width/J()*X():0}function ie(){return f$1(l)?f$1(l).height/J()*X():0}function de(){let fe="";P()!==null&&(fe+=P());let _e=X();return _e===1?fe.length===0?"":fe:(fe!==""&&!fe.endsWith(";")&&(fe+="; "),`${fe}font-size: ${_e}em`)}je(()=>(z(a()),z(P()),z(d())),()=>{E(l,Z(a())),P(),d(),E(F,ee()),E(L,ie()),E(Y,de()),E(j,Q())}),st(),Ce(),Ml(e,hl({get label(){return I()},get width(){return f$1(F)},get height(){return f$1(L)},get box(){return f$1(j)},get style(){return f$1(Y)},get spin(){return p()},get flip(){return x()},get inverse(){return m()},get pulse(){return A()},get class(){return i()}},()=>n,{children:(fe,_e)=>{var Re=we(),Qe=W(Re);ti(Qe,t,"default",{},Ar=>{var Os=$l(),ji=W(Os);Ie(ji,1,()=>(f$1(l),_$1(()=>f$1(l)?.paths||[])),Ve,(Ue,ke)=>{var qe=Rl();Ls(qe,()=>({...f$1(ke)})),M(Ue,qe)});var Ui=R(ji);Ie(Ui,1,()=>(f$1(l),_$1(()=>f$1(l)?.polygons||[])),Ve,(Ue,ke)=>{var qe=Cl();Ls(qe,()=>({...f$1(ke)})),M(Ue,qe)});var hi=R(Ui);{var ca=Ue=>{yl(Ue,{get data(){return f$1(l)},set data(ke){E(l,ke)},$$legacy:!0})};N(hi,Ue=>{f$1(l),_$1(()=>f$1(l)?.raw)&&Ue(ca)})}M(Ar,Os)}),M(fe,Re)},$$slots:{default:!0}})),ce()}var Il=(e,t)=>t.onClick?.(),Dl=V("<button><!></button>");const Tl={hash:"svelte-1tubfyr",code:".button.svelte-1tubfyr {display:flex;align-items:center;justify-content:center;padding:4px 8px;background:var(--button-bg-normal);border:1px solid var(--border-color-normal);border-radius:var(--button-border-radius);color:var(--text-color-primary);font-family:inherit;font-size:1.25rem;cursor:pointer;}.button.svelte-1tubfyr:hover:not(:disabled) {background-color:var(--button-bg-hover);border-color:var(--button-border-hover);}.button.primary.svelte-1tubfyr {background-color:var(--button-bg-primary-normal);border-color:var(--button-bg-primary-normal);}.button.primary.svelte-1tubfyr:hover:not(:disabled) {background-color:var(--button-bg-primary-hover);border-color:var(--button-border-hover);}.button.svelte-1tubfyr:disabled {opacity:0.5;cursor:not-allowed;}"};function ts(e,t){le(t,!0),pe(e,Tl);let r=U(t,"class",3,""),n=U(t,"disabled",3,!1),i=U(t,"primary",3,!1);var a=Dl();a.__click=[Il,t];var l=g(a);Nn(l,()=>t.children??rt),O(()=>{Ee(a,1,`button ${r()??""} ${i()?"primary":""}`,"svelte-1tubfyr"),a.disabled=n(),yt(a,"aria-label",t.ariaLabel)}),M(e,a),ce()}Pt(["click"]);const zl={hash:"svelte-16mzbar",code:".button.icon-button {width:24px;min-width:24px;height:24px;min-height:24px;padding:0 !important;}.icon-button .icon {width:16px;height:16px;}"};function Gn(e,t){pe(e,zl);let r=U(t,"class",3,"");ts(e,{get class(){return`icon-button ${r()??""}`},get disabled(){return t.disabled},get ariaLabel(){return t.ariaLabel},get onClick(){return t.onClick},children:(n,i)=>{nr(n,{class:"icon",get data(){return t.icon}})},$$slots:{default:!0}})}function li(e,t){Gn(e,{get icon(){return faXmark},ariaLabel:"Close",get onClick(){return t.onClick}})}var Vl=V('<hr class="svelte-1qkoku4"/>'),El=V('<li class="svelte-1qkoku4"><button role="menuitem"><i></i> </button></li>'),Pl=V('<nav class="svelte-1qkoku4"><div class="navbar svelte-1qkoku4" id="navbar"><ul class="svelte-1qkoku4"></ul></div></nav>');const Ll={hash:"svelte-1qkoku4",code:".svelte-1qkoku4 {padding:0;margin:0;}nav.svelte-1qkoku4 {z-index:200;}.navbar.svelte-1qkoku4 {display:inline-flex;flex-direction:column;width:200px;background-color:#fff;border-radius:0.4rem;box-shadow:0 0.2rem 0.4rem rgba(0, 0, 0, 0.8);overflow:hidden;}.navbar.svelte-1qkoku4 ul:where(.svelte-1qkoku4) {margin:6px;}ul.svelte-1qkoku4 li:where(.svelte-1qkoku4) {display:block;list-style-type:none;width:1fr;}ul.svelte-1qkoku4 li:where(.svelte-1qkoku4) button:where(.svelte-1qkoku4) {font-family:Roboto, sans-serif;font-weight:700;font-size:1rem;color:#222;width:100%;height:30px;text-align:left;border:0px;background-color:#fff;}ul.svelte-1qkoku4 li:where(.svelte-1qkoku4) button.disabled:where(.svelte-1qkoku4) {color:#888;pointer-events:none;}ul.svelte-1qkoku4 li:where(.svelte-1qkoku4) button:where(.svelte-1qkoku4):not(.disabled):hover {color:#000;text-align:left;border-radius:0.3rem;background-color:#eee;}ul.svelte-1qkoku4 li:where(.svelte-1qkoku4) button:where(.svelte-1qkoku4) i:where(.svelte-1qkoku4) {padding:0px 15px 0px 10px;}hr.svelte-1qkoku4 {border:none;border-bottom:1px solid #ccc;margin:5px 0px;}"};function hs(e,t){le(t,!1),pe(e,Ll);let r=U(t,"items",8),n=U(t,"initialEvent",8);const i=pt();let a=H({x:0,y:0}),l=H(!1);function d(P){i("item-selected",P)}function p(){i("close")}function m(P){P.key==="Escape"&&i("close")}br(()=>(window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m)})),je(()=>z(n()),()=>{n()?(E(a,{x:n().clientX,y:n().clientY+6}),E(l,!0)):E(l,!1)}),st(),Ce();var A=we(),x=W(A);{var I=P=>{var q=Pl(),F=g(q),L=g(F);Ie(L,5,r,Ve,(Y,j)=>{var Z=we(),X=W(Z);{var Q=ee=>{var ie=Vl();M(ee,ie)},J=ee=>{var ie=El(),de=g(ie);let fe;var _e=g(de),Re=R(_e,1,!0);O(Qe=>{fe=Ee(de,1,"svelte-1qkoku4",null,fe,Qe),Ee(_e,1,Jr((f$1(j),_$1(()=>f$1(j).iconClass))),"svelte-1qkoku4"),B(Re,(f$1(j),_$1(()=>f$1(j).displayText)))},[()=>({disabled:f$1(j).disabled===!0})]),be("click",de,()=>d(f$1(j).key)),M(ee,ie)};N(X,ee=>{f$1(j),_$1(()=>f$1(j).key=="hr")?ee(Q):ee(J,!1)})}M(Y,Z)}),Ps(q,Y=>qs?.(Y)),Ct(()=>be("clickout",q,p)),O(()=>Be(q,`position: fixed; top:${f$1(a),_$1(()=>f$1(a).y)??""}px; left:${f$1(a),_$1(()=>f$1(a).x)??""}px`)),M(P,q)};N(x,P=>{f$1(l)&&P(I)})}M(e,A),ce()}const Nl={hash:"svelte-j0hnxf",code:".button.icon-button.reload-button .icon {width:10px;height:10px;}"};function ql(e,t){pe(e,Nl),Gn(e,{get icon(){return faRotateRight},class:"reload-button",get disabled(){return t.disabled},ariaLabel:"Reload",get onClick(){return t.onClick}})}function Fl(e,t){e.target===e.currentTarget&&t()}function Kl(e,t){e.key==="Escape"&&t()}var Al=V('<div class="dialog-backdrop svelte-u4vwrf" role="dialog" aria-modal="true" aria-labelledby="dialog-title" tabindex="-1"><div class="dialog-content svelte-u4vwrf"><div class="dialog-header svelte-u4vwrf"><h2 id="dialog-title" class="dialog-title svelte-u4vwrf"> </h2> <!></div> <div class="dialog-body svelte-u4vwrf"><!></div></div></div>');const Bl={hash:"svelte-u4vwrf",code:".dialog-backdrop.svelte-u4vwrf {position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.5);display:flex;justify-content:center;align-items:center;z-index:1000;}.dialog-content.svelte-u4vwrf {background-color:var(--panel-bg);border:1px solid var(--panel-border);border-radius:var(--panel-border-radius);box-shadow:0 4px 6px rgba(0, 0, 0, 0.3);width:90%;max-width:500px;max-height:90vh;overflow:auto;}.dialog-header.svelte-u4vwrf {display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid var(--panel-border);}.dialog-title.svelte-u4vwrf {margin-right:1rem;font-size:1.25rem;font-weight:700;color:var(--text-color-primary);}.dialog-body.svelte-u4vwrf {padding:1.5rem;}"};function Ol(e,t){le(t,!0),pe(e,Bl);let r=U(t,"open",15,!1);function n(){r(!1)}var i=we(),a=W(i);{var l=d=>{var p=Al();p.__click=[Fl,n],p.__keydown=[Kl,n];var m=g(p),A=g(m),x=g(A),I=g(x),P=R(x,2);li(P,{onClick:n});var q=R(A,2),F=g(q);Nn(F,()=>t.children??rt),O(()=>B(I,t.title)),M(d,p)};N(a,d=>{r()&&d(l)})}M(e,i),ce()}Pt(["click","keydown"]);function jl(e,t){e.key==="Enter"&&(e.preventDefault(),t())}var Gl=V('<div class="bundle-copy-dialog-form svelte-sgftfs"><label for="bundle-name-input" class="bundle-copy-dialog-label svelte-sgftfs">Bundle name</label> <input id="bundle-name-input" type="text" class="bundle-copy-dialog-input svelte-sgftfs" aria-label="Bundle name"/> <div class="bundle-copy-dialog-actions svelte-sgftfs"><!> <!></div></div>');const Ul={hash:"svelte-sgftfs",code:".bundle-copy-dialog-form.svelte-sgftfs {display:flex;flex-direction:column;gap:1rem;}.bundle-copy-dialog-label.svelte-sgftfs {font-weight:700;color:var(--text-color-primary);}.bundle-copy-dialog-input.svelte-sgftfs {flex:1;padding:0.5rem;background-color:var(--input-bg);border:1px solid var(--border-color-normal);border-radius:var(--input-border-radius);color:var(--text-color-primary);font-family:inherit;font-size:inherit;}.bundle-copy-dialog-input.svelte-sgftfs:focus {outline:none;border-color:var(--border-color-focused);box-shadow:0 0 0 1px var(--border-color-focused);}.bundle-copy-dialog-actions.svelte-sgftfs {display:flex;justify-content:flex-end;gap:1rem;margin-top:0.5rem;}"};function Wl(e,t){le(t,!0),pe(e,Ul);let r=U(t,"open",15,!1),n=Ae(Mt(t.initialName));function i(){t.onSave?.(t.srcBundle,f$1(n)),r(!1)}function a(){r(!1)}Xr(()=>{r()&&E(n,t.initialName,!0)}),Ol(e,{title:"Save Bundle Copy",get open(){return r()},set open(l){r(l)},children:(l,d)=>{var p=Gl(),m=R(g(p),2);m.__keydown=[jl,i];var A=R(m,2),x=g(A);ts(x,{onClick:a,children:(P,q)=>{var F=or("Cancel");M(P,F)},$$slots:{default:!0}});var I=R(x,2);ts(I,{primary:!0,onClick:i,children:(P,q)=>{var F=or("Save");M(P,F)},$$slots:{default:!0}}),ii(m,()=>f$1(n),P=>E(n,P)),M(l,p)},$$slots:{default:!0}}),ce()}Pt(["keydown"]);var Yl=(e,t)=>t("name"),Hl=V('<span class="bundle-selector-sort-indicator svelte-zzpifv"> </span>'),Xl=(e,t)=>t("date"),Zl=V('<span class="bundle-selector-sort-indicator svelte-zzpifv"> </span>'),Jl=V('<div class="bundle-selector-empty svelte-zzpifv"></div>'),Ql=V('<div class="bundle-selector-empty svelte-zzpifv">No bundles found</div>'),ec=(e,t,r)=>t.onSelect?.(f$1(r)),tc=(e,t,r)=>t(e,f$1(r)),rc=(e,t,r)=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),t.onSelect?.(f$1(r)))},sc=V('<div role="option" aria-selected="false" tabindex="0"><!> <span class="bundle-selector-item-bundle-name svelte-zzpifv"> </span> <span class="bundle-selector-item-bundle-date svelte-zzpifv"> </span></div>'),ic=V('<div><div class="bundle-selector-header svelte-zzpifv"><div class="bundle-selector-search-bar svelte-zzpifv"><input type="text" placeholder="Search bundles..." class="bundle-selector-search-input svelte-zzpifv" role="searchbox" aria-label="Search bundles"/></div></div> <div class="bundle-selector-item-container svelte-zzpifv"><div class="bundle-selector-item-header svelte-zzpifv"><div class="bundle-selector-header-download svelte-zzpifv"></div> <button class="bundle-selector-sort-button svelte-zzpifv">Name <!></button> <button class="bundle-selector-sort-button svelte-zzpifv">Last Modified <!></button></div> <div class="bundle-selector-item-content svelte-zzpifv" role="listbox"><!></div></div> <div class="bundle-selector-status-bar svelte-zzpifv"><div class="bundle-selector-status-message svelte-zzpifv"><!></div> <!></div></div> <!> <!>',1);const nc={hash:"svelte-zzpifv",code:".bundle-selector.svelte-zzpifv {display:flex;flex-direction:column;width:100%;height:100%;background-color:var(--panel-bg);overflow:hidden;}.bundle-selector-header.svelte-zzpifv {display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:var(--panel-header-bg);border-bottom:1px solid var(--panel-border);border-radius:var(--panel-border-radius) var(--panel-border-radius) 0 0;}.bundle-selector-search-bar.svelte-zzpifv {display:flex;flex:1;}.bundle-selector-search-input.svelte-zzpifv {width:100%;height:2rem;padding:0.5rem;background-color:var(--input-bg);border:1px solid var(--border-color-normal);border-radius:var(--input-border-radius);color:var(--text-color-primary);font-family:inherit;}.bundle-selector-search-input.svelte-zzpifv:focus {outline:none;border-color:var(--border-color-focused);box-shadow:0 0 0 1px var(--border-color-focused);}.bundle-selector-empty.svelte-zzpifv {display:flex;align-items:center;justify-content:center;height:100%;min-height:4rem;color:var(--text-color-secondary);font-style:italic;}.bundle-selector-item-container.svelte-zzpifv {display:flex;flex-direction:column;flex:1;overflow:hidden;}.bundle-selector-item-header.svelte-zzpifv {display:grid;grid-template-columns:18px 1fr auto;gap:1rem;padding:0.5rem 1.5rem;background-color:#333;border-bottom:1px solid var(--panel-border);font-weight:700;}.bundle-selector-header-download.svelte-zzpifv {width:18px;}.bundle-selector-sort-button.svelte-zzpifv {display:flex;align-items:flex-start;gap:0.5rem;background:none;border:none;padding:0;color:var(--text-color-primary);font:inherit;cursor:pointer;}.bundle-selector-sort-button.svelte-zzpifv:hover {color:var(--link-color-hover);}.bundle-selector-sort-indicator.svelte-zzpifv {margin-top:-0.1rem;}.bundle-selector-item-content.svelte-zzpifv {flex:1;overflow-y:auto;}.bundle-selector-item-row.svelte-zzpifv {display:grid;grid-template-columns:18px 1fr auto;gap:1rem;align-items:center;padding:0.5rem 1.5rem;user-select:none;cursor:pointer;}.bundle-selector-item-row.svelte-zzpifv:hover {background-color:#444;}.bundle-selector-item-row.svelte-zzpifv:last-child {border-bottom:none;}.bundle-selector-item-bundle-name.svelte-zzpifv {overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.bundle-selector.left.svelte-zzpifv .bundle-selector-item-row.active:where(.svelte-zzpifv) .bundle-selector-item-bundle-name:where(.svelte-zzpifv) {color:var(--dataset-0);}.bundle-selector.right.svelte-zzpifv .bundle-selector-item-row.active:where(.svelte-zzpifv) .bundle-selector-item-bundle-name:where(.svelte-zzpifv) {color:var(--dataset-1);}.bundle-selector-item-bundle-date.svelte-zzpifv {color:var(--text-color-secondary);white-space:nowrap;}.bundle-selector-status-bar.svelte-zzpifv {display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:var(--panel-footer-bg);border-top:1px solid var(--panel-border);}.bundle-selector-status-message.svelte-zzpifv {color:var(--text-color-secondary);}"};function ac(e,t){le(t,!0),pe(e,nc);let r=ht(()=>t.side==="left"?t.bundleManager.activeBundleUrlL:t.bundleManager.activeBundleUrlR),n=ht(()=>t.bundleManager.bundles),i=ht(()=>t.bundleManager.loading),a=ht(()=>t.bundleManager.error),l=Ae(""),d=Ae("date"),p=Ae("desc"),m=Ae(void 0),A=Ae(Mt([])),x=Ae(void 0),I=Ae(!1),P=Ae("");const q=ht(()=>{let ue=[...f$1(n)];if(f$1(l)){const De=f$1(n).map(Ye=>({bundle:Ye,name:Ye.remote?.name||Ye.local?.name||""}));ue=Ea.go(f$1(l),De,{keys:["name"],threshold:-1e4}).map(Ye=>Ye.obj.bundle)}return ue.sort((De,Ye)=>{const mi=f$1(p)==="asc"?1:-1;if(f$1(d)==="date"){const ws=De.remote?.lastModified||De.local?.lastModified||"",pi=Ye.remote?.lastModified||Ye.local?.lastModified||"";return mi*(new Date(ws).getTime()-new Date(pi).getTime())}else{const ws=De.remote?.name||De.local?.name||"",pi=Ye.remote?.name||Ye.local?.name||"";return mi*ws.localeCompare(pi)}})});br(()=>{t.bundleManager.load()});function F(ue){f$1(d)===ue?E(p,f$1(p)==="asc"?"desc":"asc",!0):(E(d,ue,!0),E(p,"desc"))}function L(ue){const De=new Date(ue),Ye=De.toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric"}),mi=De.toLocaleTimeString(void 0,{hour12:!0,hour:"numeric",minute:"2-digit"});return`${Ye} at ${mi}`}function Y(){t.bundleManager.load()}function j(ue,De){ue.preventDefault(),E(m,ue,!0),E(x,De,!0),De.remote?E(A,[{key:"save-to-local",displayText:"Save to Local"}],!0):De.local&&E(A,[{key:"save-copy",displayText:"Save Copy..."}],!0)}function Z(ue){const De=ue.detail;if(De==="save-to-local"&&f$1(x))t.bundleManager.downloadBundle(f$1(x));else if(De==="save-copy"&&f$1(x)){const Ye=f$1(x).local?.name||"";E(P,`${Ye} copy`),E(I,!0)}E(m,void 0)}function X(ue,De){t.bundleManager.copyBundle(ue,De)}function Q(){E(m,void 0)}var J=ic(),ee=W(J),ie=g(ee),de=g(ie),fe=g(de),_e=R(ie,2),Re=g(_e),Qe=R(g(Re),2);Qe.__click=[Yl,F];var Ar=R(g(Qe));{var Os=ue=>{var De=Hl(),Ye=g(De);O(()=>B(Ye,f$1(p)==="asc"?"":"")),M(ue,De)};N(Ar,ue=>{f$1(d)==="name"&&ue(Os)})}var ji=R(Qe,2);ji.__click=[Xl,F];var Ui=R(g(ji));{var hi=ue=>{var De=Zl(),Ye=g(De);O(()=>B(Ye,f$1(p)==="asc"?"":"")),M(ue,De)};N(Ui,ue=>{f$1(d)==="date"&&ue(hi)})}var ca=R(Re,2),Ue=g(ca);{var ke=ue=>{var De=Jl();M(ue,De)},qe=ue=>{var De=we(),Ye=W(De);{var mi=pi=>{var vr=Ql();M(pi,vr)},ws=pi=>{var vr=we(),Gi=W(vr);Ie(Gi,17,()=>f$1(q),Ve,(ga,fa)=>{const ya=ht(()=>f$1(fa).remote?.url===f$1(r)||f$1(fa).local?.url===f$1(r));var ua=sc();let va;ua.__click=[ec,t,fa],ua.__contextmenu=[tc,j,fa],ua.__keydown=[rc,t,fa];var _a=g(ua);{let se=ht(()=>f$1(fa).remote?faCloud:faLaptop);nr(_a,{class:"bundle-selector-item-location",get data(){return f$1(se)}})}var gi=R(_a,2),ha=g(gi),pa=R(gi,2),Ia=g(pa);O((se,Da)=>{va=Ee(ua,1,"bundle-selector-item-row svelte-zzpifv",null,va,se),yt(ua,"aria-label",f$1(fa).remote?.name||f$1(fa).local?.name||""),B(ha,f$1(fa).remote?.name||f$1(fa).local?.name||""),B(Ia,Da)},[()=>({active:f$1(ya)}),()=>L(f$1(fa).remote?.lastModified||f$1(fa).local?.lastModified||"")]),M(ga,ua)}),M(pi,vr)};N(Ye,pi=>{f$1(n).length===0?pi(mi):pi(ws,!1)},!0)}M(ue,De)};N(Ue,ue=>{f$1(a)||f$1(i)?ue(ke):ue(qe,!1)})}var Le=R(_e,2),ne=g(Le),ae=g(ne);{var $e=ue=>{var De=or("Loading...");M(ue,De)},Je=ue=>{var De=we(),Ye=W(De);{var mi=pi=>{var vr=or();O(()=>B(vr,f$1(a))),M(pi,vr)},ws=pi=>{var vr=or();O(()=>B(vr,`${f$1(n).length??""} ${f$1(n).length===1?"bundle":"bundles"}`)),M(pi,vr)};N(Ye,pi=>{f$1(a)?pi(mi):pi(ws,!1)},!0)}M(ue,De)};N(ae,ue=>{f$1(i)?ue($e):ue(Je,!1)})}var Ke=R(ne,2);ql(Ke,{get disabled(){return f$1(i)},onClick:()=>Y()});var bt=R(ee,2);{var bs=ue=>{hs(ue,{get items(){return f$1(A)},get initialEvent(){return f$1(m)},$$events:{"item-selected":Z,close:Q}})};N(bt,ue=>{f$1(m)&&ue(bs)})}var ge=R(bt,2);Wl(ge,{get srcBundle(){return f$1(x)},get initialName(){return f$1(P)},onSave:X,get open(){return f$1(I)},set open(ue){E(I,ue,!0)}}),O(()=>Ee(ee,1,`bundle-selector ${t.side??""}`,"svelte-zzpifv")),ii(fe,()=>f$1(l),ue=>E(l,ue)),M(e,J),ce()}Pt(["click","contextmenu","keydown"]);var oc=V('<div class="bundle-selector-popover svelte-1sz9kyj"><div class="bundle-selector-popover-header svelte-1sz9kyj"><div class="bundle-selector-popover-header-title svelte-1sz9kyj">Select Bundle</div> <!></div> <!></div>');const lc={hash:"svelte-1sz9kyj",code:".bundle-selector-popover.svelte-1sz9kyj {display:flex;flex-direction:column;flex:1;height:100%;background-color:var(--panel-bg);color:var(--text-color-primary);}.bundle-selector-popover-header.svelte-1sz9kyj {display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:var(--panel-header-bg);border-bottom:1px solid var(--panel-border);}.bundle-selector-popover-header-title.svelte-1sz9kyj {font-size:1.2rem;font-weight:700;}"};function cc(e,t){le(t,!0),pe(e,lc);var r=oc(),n=g(r),i=R(g(n),2);li(i,{onClick:()=>t.onClose?.()});var a=R(n,2);ac(a,{get side(){return t.side},get bundleManager(){return t.bundleManager},get onSelect(){return t.onSelect}}),M(e,r),ce()}var dc=V('<div class="lazy-container svelte-tqw4wl"><!></div>');const uc={hash:"svelte-tqw4wl",code:".lazy-container.svelte-tqw4wl {position:relative;display:flex;height:100%;}"};function Fr(e,t){le(t,!1),pe(e,uc);let r=U(t,"visible",12,!1),n=U(t,"syncInit",8,!1),i=H();br(()=>{const p=f$1(i).closest(".scroll-container");if(p===void 0)throw new Error("Lazy component requires an ancestor marked with the 'scroll-container' class");function m(){const x=p.getBoundingClientRect(),I=f$1(i).getBoundingClientRect();return I.bottom>x.top&&I.top<x.bottom&&I.right>x.left&&I.left<x.right}let A=new IntersectionObserver(x=>{const I=x[0].isIntersecting;I&&!r()?r(!0):!I&&r()&&r(!1)},{root:p,rootMargin:"100% 200% 200% 100%"});return A.observe(f$1(i)),n()&&m()&&r(!0),()=>{r(!1),A.disconnect()}}),Ce();var a=dc(),l=g(a);{var d=p=>{var m=we(),A=W(m);ti(A,t,"default",{},null),M(p,m)};N(l,p=>{r()&&p(d)})}ps(a,p=>E(i,p),()=>f$1(i)),M(e,a),ce()}var fc=V('<div class="bundle-graph-container svelte-5k776f"></div>');const vc={hash:"svelte-5k776f",code:".bundle-graph-container.svelte-5k776f {width:100%;height:100%;}"};function pc(e,t){le(t,!1),pe(e,vc);let r=U(t,"viewModel",8),n=H(),i;br(()=>(i=r().createGraphView(f$1(n)),()=>{i?.destroy(),i=void 0})),Ce();var a=fc();ps(a,l=>E(n,l),()=>f$1(n)),M(e,a),ce()}var hc=V('<div class="link-row svelte-tkhsbk"> </div>'),mc=V('<div class="link-container svelte-tkhsbk"></div>'),gc=V('<div class="graph-container svelte-tkhsbk"><!></div> <!>',1),bc=V('<div class="message not-shown svelte-tkhsbk"><span>Graph not shown: scenario is invalid in&nbsp;</span> <span> </span></div>'),wc=V('<div class="graph-and-info svelte-tkhsbk"><div><!></div> <!></div>'),_c=V('<div class="message not-included svelte-tkhsbk"><span>Graph not included in&nbsp;</span> <span> </span></div>'),xc=V('<div class="context-graph-container svelte-tkhsbk"><!></div>');const yc={hash:"svelte-tkhsbk",code:'.context-graph-container.svelte-tkhsbk {display:inline-flex;flex-direction:column;flex:0 0 38rem;background-color:#fff;}.graph-and-info.svelte-tkhsbk {display:flex;flex-direction:column;}.graph-title.svelte-tkhsbk {margin:0.5rem 0;padding:0 0.8rem;font-family:"Roboto Condensed";font-size:1.55rem;}.graph-container.svelte-tkhsbk {display:block;position:relative;width:38rem;height:280px;}.message.svelte-tkhsbk {display:flex;flex:1;min-height:280px;align-items:center;justify-content:center;color:#aaa;border:solid 1px #fff;}.message.not-included.svelte-tkhsbk {background-color:#555;}.link-container.svelte-tkhsbk {display:flex;flex-direction:column;align-items:flex-start;margin-bottom:0.4rem;}.link-row.svelte-tkhsbk {height:1.2rem;margin:0 0.8rem;color:#999;cursor:pointer;}.link-row.svelte-tkhsbk:hover {color:#000;}'};function rs(e,t){le(t,!1),pe(e,yc);const r=()=>ve(f$1(l),"$content",n),[n,i]=Ge();let a=U(t,"viewModel",8),l=H(a().content),d=H(!1),p=H(f$1(d)),m=H();function A(F){switch(F.kind){case"url":window.open(F.content,"_blank");break;case"copy":copyTextToClipboard(F.content);break;default:zr(F.kind)}}je(()=>(f$1(d),f$1(p),z(a()),f$1(m)),()=>{(f$1(d)!==f$1(p)||a().requestKey!==f$1(m)?.requestKey)&&(f$1(m)?.clearData(),E(p,f$1(d)),E(m,a()),kt(E(l,a().content),"$content",n),f$1(d)&&a().requestData())}),st(),Ce();var x=xc(),I=g(x);{var P=F=>{var L=wc(),Y=g(L),j=g(Y);Te(j,()=>(z(a()),_$1(()=>a().graphSpec.title)));var Z=R(Y,2);{var X=J=>{var ee=gc(),ie=W(ee),de=g(ie);Fr(de,{get visible(){return f$1(d)},set visible(Re){E(d,Re)},children:(Re,Qe)=>{var Ar=we(),Os=W(Ar);{var ji=Ui=>{pc(Ui,{get viewModel(){return r(),_$1(()=>r().graphData)}})};N(Os,Ui=>{r(),_$1(()=>r()&&r().graphData)&&Ui(ji)})}M(Re,Ar)},$$slots:{default:!0},$$legacy:!0});var fe=R(ie,2);{var _e=Re=>{var Qe=mc();Ie(Qe,5,()=>(z(a()),_$1(()=>a().linkItems)),Ve,(Ar,Os)=>{var ji=hc(),Ui=g(ji);O(()=>B(Ui,(f$1(Os),_$1(()=>f$1(Os).text)))),be("click",ji,()=>A(f$1(Os))),M(Ar,ji)}),M(Re,Qe)};N(fe,Re=>{z(a()),_$1(()=>a().linkItems)&&Re(_e)})}M(J,ee)},Q=J=>{var ee=bc(),ie=R(g(ee),2),de=g(ie);O(()=>{Ee(ie,1,Jr((z(a()),_$1(()=>a().datasetClass))),"svelte-tkhsbk"),B(de,(z(a()),_$1(()=>a().bundleName)))}),M(J,ee)};N(Z,J=>{z(a()),_$1(()=>a().requestKey)?J(X):J(Q,!1)})}O(()=>Ee(Y,1,(z(a()),_$1(()=>`graph-title ${a().datasetClass}`)),"svelte-tkhsbk")),M(F,L)},q=F=>{var L=_c(),Y=R(g(L),2),j=g(Y);O(()=>{Ee(Y,1,Jr((z(a()),_$1(()=>a().datasetClass))),"svelte-tkhsbk"),B(j,(z(a()),_$1(()=>a().bundleName)))}),M(F,L)};N(I,F=>{z(a()),_$1(()=>a().graphSpec)?F(P):F(q,!1)})}M(e,x),ce(),i()}let kc=1;class Un{constructor(t,r,n,i,a){this.dataCoordinator=r,this.bundle=n,this.scenario=i,this.graphSpec=a,this.dataRequested=!1,this.dataLoaded=!1;const l=n==="right"?t.bundleR:t.bundleL;if(this.bundleName=l.name,this.datasetClass=`dataset-color-${n==="right"?"1":"0"}`,a){const d=n==="right"?i.specR:i.specL;if(d!==void 0){const p=l.models[0];this.linkItems=p.getGraphLinksForScenario?.(d,a.id)||[],this.requestKey=`context-graph::${kc++}::${n}::${a.id}::${i.key}`}else this.linkItems=[];this.writableContent=Se(void 0),this.content=this.writableContent}}requestData(){if(this.requestKey===void 0){this.dataRequested=!0,this.dataLoaded=!0;return}if(this.dataRequested)return;this.dataRequested=!0;const t=this.bundle==="left"?this.scenario.specL:void 0,r=this.bundle==="right"?this.scenario.specR:void 0;this.dataCoordinator.requestGraphData(this.requestKey,"left",t,"right",r,this.graphSpec.id,(n,i)=>{if(!this.dataRequested)return;const a=r?i:n;this.writableContent.set({graphData:a}),this.dataLoaded=!0})}clearData(){this.dataRequested&&(this.writableContent.set(void 0),this.dataLoaded||this.dataCoordinator.cancelRequest(this.requestKey),this.dataRequested=!1,this.dataLoaded=!1)}}function ci(e,t){if(e===void 0)return t.length+2;if(e===0)return 0;for(let r=0;r<t.length;r++)if(e<t[r])return r+1;return t.length+1}function Wn(e){return e===void 0?!0:e.some((t,r)=>r>0&&r<e.length-1&&t>0)}function Ut(e,t){return`<span class="dataset-color-${t==="left"?0:1}">${e}</span>`}function lr(e){if(!e)return[];const t=-Number.MAX_VALUE/2,r=Number.MAX_VALUE/2,n=[];for(const[i,a]of e.entries())a<t||a>r||n.push({x:i,y:a});return n}let Sc=1;class Yn{constructor(t,r,n,i,a,l,d,p,m,A){this.comparisonConfig=t,this.dataCoordinator=r,this.baselineTestSummary=n,this.sortMode=i,this.kind=a,this.title=l,this.subtitle=d,this.scenario=p,this.datasetKey=m,this.pinnedItemKey=A,this.dataRequested=!1,this.dataLoaded=!1,this.requestKey=`detail-box::${Sc++}::${p.key}::${m}`,this.writableContent=Se(void 0),this.content=this.writableContent,this.writableYRange=Se(void 0),this.yRange=this.writableYRange}requestData(){if(this.dataRequested)return;this.dataRequested=!0;const t=[this.datasetKey],r=this.comparisonConfig.datasets.getReferencePlotsForDataset(this.datasetKey,this.scenario);t.push(...r.map(n=>n.datasetKey)),this.dataCoordinator.requestDatasetMaps(this.requestKey,"left",this.scenario.specL,"right",this.scenario.specR,t,(n,i)=>{if(!this.dataRequested)return;const a=this.scenario.settings.kind==="all-inputs-settings"&&this.scenario.settings.position==="at-default",l=this.baselineTestSummary?.md??0,d=this.baselineTestSummary?.ad??0,p=Mc(this.scenario.key,this.datasetKey,n,i),m=testSummaryFromReport(p,l,d),A=Ar=>{const Os=this.comparisonConfig,ji=Ar==="left"?Os.bundleL.name:Os.bundleR.name;return`Data only defined in ${Ut(ji,Ar)}`},x=p.diffReport;let I,P,q,F;switch(x.validity){case"both":{if(x.maxDiff===0)q=0,I=0,P=0,F="No differences";else{const Ar=this.sortMode==="max-diff-relative"||this.sortMode==="avg-diff-relative"?this.comparisonConfig.ratioThresholds:this.comparisonConfig.thresholds;let Os;switch(this.sortMode){case"max-diff":Os=m?.md??0;break;case"avg-diff":Os=m?.ad??0;break;case"max-diff-relative":Os=m?.mdb??0;break;case"avg-diff-relative":Os=m?.adb??0;break;default:assertNeverExports$1.assertNever(this.sortMode)}q=ci(Os,Ar),I=m?.mdb??0,P=m?.adb??0,F=void 0}break}case"left-only":q=void 0,F=A("left");break;case"right-only":q=void 0,F=A("right");break;default:q=void 0,F="Dataset not defined for this scenario";break}const L=this.comparisonConfig.bundleL.modelSpec,Y=this.comparisonConfig.bundleR.modelSpec,j=L.outputVars.get(this.datasetKey),Z=Y.outputVars.get(this.datasetKey)||j;let X,Q;Z.sourceName===void 0&&(L.startTime!==void 0&&Y.startTime!==void 0&&(X=Math.min(L.startTime,Y.startTime)),L.endTime!==void 0&&Y.endTime!==void 0&&(Q=Math.max(L.endTime,Y.endTime)));const J=lr(n?.get(this.datasetKey)),ee=lr(i?.get(this.datasetKey)),ie=[];function de(Ar,Os,ji,Ui){ie.push({points:Ar,color:Os,style:ji||"normal",lineWidth:Ui})}de(ee,"deepskyblue"),de(J,"crimson");for(const Ar of r){const Os=lr(i?.get(Ar.datasetKey));de(Os,Ar.color,Ar.style,Ar.lineWidth)}let fe=Number.POSITIVE_INFINITY,_e=Number.NEGATIVE_INFINITY;function Re(Ar){for(const Os of Ar)Os.y<fe&&(fe=Os.y),Os.y>_e&&(_e=Os.y)}for(const Ar of ie)Re(Ar.points);this.writableYRange.set({min:fe,max:_e});const Qe={key:this.requestKey,plots:ie,xMin:X,xMax:Q,yMin:this.activeYMin,yMax:this.activeYMax};this.localContent={bucketClass:`bucket-border-${q!==void 0?q:"undefined"}`,message:F,diffReport:x,baselineMaxDiff:a?void 0:l,maxDiffRelativeToBaseline:I,avgDiffRelativeToBaseline:P,comparisonGraphViewModel:Qe},this.writableContent.set(this.localContent),this.dataLoaded=!0})}updateYAxisRange(t){if(this.activeYMin=t?.min,this.activeYMax=t?.max,this.localContent){const r=this.localContent.comparisonGraphViewModel;r.yMin=this.activeYMin,r.yMax=this.activeYMax,r.onUpdated?.()}}clearData(){this.dataRequested&&(this.localContent=void 0,this.writableContent.set(void 0),this.dataLoaded||this.dataCoordinator.cancelRequest(this.requestKey),this.dataRequested=!1,this.dataLoaded=!1)}}function Mc(e,t,r,n){const i=r?.get(t),a=n?.get(t),l=diffDatasets(i,a);return{scenarioKey:e,datasetKey:t,diffReport:l}}function Tr(e,t,r,n,i,a,l,d,p){const m=[];for(const I of p){if(I===void 0){m.push(void 0);continue}let P,q;switch(a){case"scenarios":P="scenario",q=I.scenario.key;break;case"datasets":P="dataset",q=I.testSummary.d;break;case"freeform":P="freeform",q=`${I.scenario.key}::${I.testSummary.d}`;break;default:zr(a)}m.push(new Yn(e,t,r.get(I.testSummary.d),i,P,I.title,I.subtitle,I.scenario,I.testSummary.d,q))}const A=ye(m.map(I=>I.yRange),I=>{let P=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY;for(const F of I)F?.min<P&&(P=F.min),F?.max>q&&(q=F.max);return{min:P,max:q}});ye([n.consistentYRange,A],([I,P])=>I?P:void 0).subscribe(I=>{for(const P of m)P.updateYAxisRange(I)});const x=`row_${m.map(I=>I.pinnedItemKey).join("_")}`;return{kind:a,title:l,subtitle:d,items:p,boxes:m,pinnedItemKey:x}}function Rc(e){const t=e.comparisonConfig,r=e.dataCoordinator,n=t.bundleL.modelSpec,i=t.bundleR.modelSpec;function a(p,m,A){return new Un(t,r,A,p,m)}const l=t.datasets.getContextGraphIdsForDataset(e.datasetKey,e.scenario),d=[];for(const p of l){const m=n.graphSpecs?.find(x=>x.id===p),A=i.graphSpecs?.find(x=>x.id===p);d.push({graphL:a(e.scenario,m,"left"),graphR:a(e.scenario,A,"right")})}return d}const zi="#444",jr="Roboto Condensed",Vi=14,Ei="#777",Pi="rgba(0, 0, 0, 0)",Cc={beforeDatasetsDraw:e=>{const t=e.ctx;t.save();const r=e.data.datasets;for(let n=0;n<r.length;n++){const i=r[n];if(i.data.length!==1)continue;const a=e.getDatasetMeta(n).data[0];let l;if(i.fill==="+1"){if(n+1>=r.length)break;const d=e.getDatasetMeta(n+1).data[0];l={x:d._view.x,y:d._view.y}}else if(i.fill==="start")l={x:a._view.x,y:e.chartArea.bottom};else if(i.fill==="end")l={x:a._view.x,y:e.chartArea.top};else return;t.beginPath(),t.moveTo(a._view.x,a._view.y),t.lineTo(l.x,l.y),t.closePath(),t.strokeStyle=i.backgroundColor,t.lineWidth=4,t.stroke()}t.restore()}};ChartExports.Chart.pluginService.register(Cc);class $c{constructor(t,r){this.canvas=t,this.viewModel=r,this.chart=Ic(t,r)}update(){const t=this.chart;function r(n,i){const a=t.data.datasets.find(l=>l.label===n);if(a){const l=a.data[0];l.y=i}}t&&(r("hidden-y-min",this.viewModel.yMin),r("hidden-y-max",this.viewModel.yMax),t.update())}destroy(){this.chart?.destroy(),this.chart=void 0}}function Ic(e,t){const r=[],n=(A,x,I)=>{r.push({label:A,type:"scatter",fill:!1,borderColor:Pi,backgroundColor:Pi,pointHitRadius:0,pointHoverRadius:0,pointRadius:0,data:[{x,y:I}]})};let i=Number.NEGATIVE_INFINITY;function a(A){let x,I=!1;switch(A.style){case"dashed":x=[8,2];break;case"fill-to-next":I="+1";break;case"fill-above":I="end";break;case"fill-below":I="start";break}let P;I!==!1&&(P=`rgba(0, 128, 0, ${A.points.length>1?.1:.3})`);let q=0,F;A.points.length===1&&A.style!=="dashed"&&(q=5,F=A.color);for(const L of A.points)L.x>i&&(i=L.x);r.push({data:A.points,borderColor:A.color,borderWidth:A.lineWidth!==void 0?A.lineWidth:3,borderDash:x,backgroundColor:P,fill:I,pointRadius:q,pointBackgroundColor:F,pointBorderWidth:0,pointBorderColor:"transparent",lineTension:0})}for(const A of t.plots)a(A);const l=t.xMin,d=t.xMax,p=l===1990,m=d!==void 0?d:i;return n("hidden-y-min",m,t.yMin),n("hidden-y-max",m,t.yMax),new ChartExports.Chart(e,{type:"line",data:{datasets:r},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0,title:{display:!1},legend:{display:!1},elements:{point:{radius:0}},tooltips:{titleFontFamily:jr,bodyFontFamily:jr},scales:{xAxes:[{type:"linear",position:"bottom",gridLines:{color:zi},ticks:{maxTicksLimit:6,maxRotation:0,min:l,max:d,fontFamily:jr,fontSize:Vi,fontColor:Ei,callback:(A,x)=>p&&x===0?"":A}}],yAxes:[{gridLines:{color:zi},ticks:{fontFamily:jr,fontSize:Vi,fontColor:Ei}}]}}})}var Dc=V('<div class="graph-inner-container svelte-1ez5fe6"></div>');const Tc={hash:"svelte-1ez5fe6",code:".graph-inner-container.svelte-1ez5fe6 {position:absolute;top:0;left:0;bottom:0;right:0;}"};function ms$1(e,t){le(t,!1),pe(e,Tc);let r=U(t,"viewModel",12),n=H(),i=H(),a=H();function l(){f$1(i)?.destroy();const p=document.createElement("canvas");for(;f$1(n).firstChild;)f$1(n).firstChild.remove();f$1(n).appendChild(p),E(a,r().key),E(i,new $c(p,r())),r(r().onUpdated=()=>{f$1(i)?.update()},!0)}br(()=>(l(),()=>{f$1(i)?.destroy(),E(i,void 0)})),je(()=>(f$1(i),z(r()),f$1(a)),()=>{f$1(i)&&r().key!==f$1(a)&&l()}),st(),Ce();var d=Dc();ps(d,p=>E(n,p),()=>f$1(n)),M(e,d),ce()}var zc=V('<span class="subtitle svelte-15isgd1"><!></span>'),Vc=V('<div class="title-row no-selection svelte-15isgd1"><div class="title-content svelte-15isgd1"><span class="title svelte-15isgd1"><!></span> <!></div></div>'),Ec=V('<div class="message svelte-15isgd1"><!></div>'),Pc=V('<div class="data-row svelte-15isgd1"><div class="data-label svelte-15isgd1">rel</div> <div class="data-value svelte-15isgd1"> </div></div>'),Lc=V('<div class="data-row svelte-15isgd1"><div class="data-label svelte-15isgd1">rel</div> <div class="data-value svelte-15isgd1"> </div></div>'),Nc=V('<div class="data-row svelte-15isgd1"><div class="data-label svelte-15isgd1">avg</div> <div class="data-value svelte-15isgd1"> </div></div> <div class="data-row svelte-15isgd1"><div class="data-label svelte-15isgd1">min</div> <div class="data-value svelte-15isgd1"> </div></div> <div class="data-row svelte-15isgd1"><div class="data-label svelte-15isgd1">max</div> <div class="data-value svelte-15isgd1"><!></div></div> <!> <!>',1),qc=V('<div><div class="graph-container svelte-15isgd1"><!></div> <div class="message-container svelte-15isgd1"><!></div></div>'),Fc=V('<div class="detail-box svelte-15isgd1"><!> <div class="content-container svelte-15isgd1"><!></div></div>');const Kc={hash:"svelte-15isgd1",code:".detail-box.svelte-15isgd1 {display:flex;flex-direction:column;--box-graph-w: calc(30rem * var(--graph-zoom));--box-graph-h: calc(22rem * var(--graph-zoom));}.title-row.svelte-15isgd1 {position:relative;max-width:calc(var(--box-graph-w) + 1rem);height:1.4rem;cursor:pointer;}.title-content.svelte-15isgd1 {position:absolute;max-width:calc(var(--box-graph-w) + 1rem);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.title-content.svelte-15isgd1:hover {width:max-content;max-width:unset;overflow:unset;z-index:100;background-color:#3c3c3c;}.title.svelte-15isgd1 {margin-left:0.7rem;font-size:1.1em;font-weight:700;}.subtitle.svelte-15isgd1 {color:#aaa;margin-left:0.4rem;margin-right:0.7rem;}.content-container.svelte-15isgd1 {display:flex;flex-direction:column;width:calc(var(--box-graph-w) + 1rem + 0.6rem);max-width:calc(var(--box-graph-w) + 1rem + 0.6rem);height:calc(var(--box-graph-h) + 4rem + 1rem + 0.6rem);max-height:calc(var(--box-graph-h) + 4rem + 1rem + 0.6rem);}.content.svelte-15isgd1 {display:flex;flex-direction:column;height:calc(var(--box-graph-h) + 4rem);padding:0.5rem;border-width:0.3rem;border-style:solid;border-radius:0.8rem;}.content.no-baseline-diff.svelte-15isgd1 {border-style:dashed;}.graph-container.svelte-15isgd1 {position:relative;display:flex;width:var(--box-graph-w);height:var(--box-graph-h);}.message-container.svelte-15isgd1 {display:flex;flex-direction:column;max-width:var(--box-graph-w);height:4rem;justify-content:flex-end;}.message.svelte-15isgd1 {white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.data-row.svelte-15isgd1 {display:flex;flex-direction:row;align-items:baseline;}.data-label.svelte-15isgd1 {font-size:0.9em;color:#aaa;min-width:2rem;margin-right:0.4rem;text-align:right;}.data-value.svelte-15isgd1 {white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}"};function Hn(e,t){le(t,!1),pe(e,Kc);const r=()=>ve(f$1(l),"$content",n),[n,i]=Ge();let a=U(t,"viewModel",8),l=H(a().content),d=H(!1),p=H(f$1(d)),m=H();const A=pt();function x(){A("toggle-context-graphs")}function I(J){a().kind!=="freeform"&&A("show-context-menu",{kind:"box",itemKey:a().pinnedItemKey,scenario:a().scenario,clickEvent:J})}function P(J){return J!=null?`${J.toFixed(2)}%`:"n/a"}function q(J){return J!=null?J.toFixed(4):"undefined"}function F(J){const ee=J.diffReport.maxDiffPoint;let ie="";return ie+=P(J.diffReport.maxDiff),ee&&(ie+="&nbsp;(",ie+=`<span class="dataset-color-0">${q(ee.valueL)}</span>`,ie+=`&nbsp;${ee.valueL<ee.valueR?"&lt;":"&gt;"}&nbsp;`,ie+=`<span class="dataset-color-1">${q(ee.valueR)}</span>`,ie+=`) at ${ee.time}`),ie}function L(J){return J!=null?`${J.toFixed(2)}`:"n/a"}je(()=>(f$1(d),f$1(p),z(a()),f$1(m)),()=>{(f$1(d)!==f$1(p)||a().requestKey!==f$1(m)?.requestKey)&&(f$1(m)?.clearData(),E(p,f$1(d)),E(m,a()),kt(E(l,a().content),"$content",n),f$1(d)&&a().requestData())}),st(),Ce();var Y=Fc(),j=g(Y);{var Z=J=>{var ee=Vc(),ie=g(ee),de=g(ie),fe=g(de);Te(fe,()=>(z(a()),_$1(()=>a().title)));var _e=R(de,2);{var Re=Qe=>{var Ar=zc(),Os=g(Ar);Te(Os,()=>(z(a()),_$1(()=>a().subtitle))),M(Qe,Ar)};N(_e,Qe=>{z(a()),_$1(()=>a().subtitle)&&Qe(Re)})}be("click",ee,x),be("contextmenu",ee,ni(I)),M(J,ee)};N(j,J=>{z(a()),_$1(()=>a().title)&&J(Z)})}var X=R(j,2),Q=g(X);Fr(Q,{get visible(){return f$1(d)},set visible(J){E(d,J)},children:(J,ee)=>{var ie=we(),de=W(ie);{var fe=_e=>{var Re=qc();let Qe;var Ar=g(Re),Os=g(Ar);ms$1(Os,{get viewModel(){return r(),_$1(()=>r().comparisonGraphViewModel)}});var ji=R(Ar,2),Ui=g(ji);{var hi=Ue=>{var ke=Ec(),qe=g(ke);Te(qe,()=>(r(),_$1(()=>r().message))),M(Ue,ke)},ca=Ue=>{var ke=Nc(),qe=W(ke),Le=R(g(qe),2),ne=g(Le),ae=R(qe,2),$e=R(g(ae),2),Je=g($e),Ke=R(ae,2),bt=R(g(Ke),2),bs=g(bt);Te(bs,()=>(r(),_$1(()=>F(r()))));var ge=R(Ke,2);{var ue=mi=>{var ws=Pc(),pi=R(g(ws),2),vr=g(pi);O(Gi=>B(vr,Gi),[()=>(r(),_$1(()=>L(r().maxDiffRelativeToBaseline)))]),M(mi,ws)};N(ge,mi=>{z(a()),_$1(()=>a().sortMode==="max-diff-relative")&&mi(ue)})}var De=R(ge,2);{var Ye=mi=>{var ws=Lc(),pi=R(g(ws),2),vr=g(pi);O(Gi=>B(vr,Gi),[()=>(r(),_$1(()=>L(r().avgDiffRelativeToBaseline)))]),M(mi,ws)};N(De,mi=>{z(a()),_$1(()=>a().sortMode==="avg-diff-relative")&&mi(Ye)})}O((mi,ws)=>{B(ne,mi),B(Je,ws)},[()=>(r(),_$1(()=>P(r().diffReport.avgDiff))),()=>(r(),_$1(()=>P(r().diffReport.minDiff)))]),M(Ue,ke)};N(Ui,Ue=>{r(),_$1(()=>r().message)?Ue(hi):Ue(ca,!1)})}O(Ue=>Qe=Ee(Re,1,(r(),_$1(()=>`content ${r().bucketClass}`)),"svelte-15isgd1",Qe,Ue),[()=>({"no-baseline-diff":(a().sortMode==="max-diff-relative"||a().sortMode==="avg-diff-relative")&&r().baselineMaxDiff===0&&r().diffReport.maxDiff!==0})]),M(_e,Re)};N(de,_e=>{r()&&_e(fe)})}M(J,ie)},$$slots:{default:!0},$$legacy:!0}),M(e,Y),ce(),i()}var Ac=V('<div class="subtitle svelte-p46ums"><!></div>'),Bc=V('<div class="title-row svelte-p46ums"><div class="title svelte-p46ums"><!></div> <!></div>'),Oc=V('<div class="spacer-fixed svelte-p46ums"></div>'),jc=V("<!> <div><!></div>",1),Gc=V('<div class="context-graph-row svelte-p46ums"><!> <div class="context-graph-spacer svelte-p46ums"></div> <!></div>'),Uc=V('<div class="context-graphs-container svelte-p46ums"><div></div> <div class="context-graphs-column svelte-p46ums"><!></div></div>'),Wc=V('<div class="detail-row svelte-p46ums"><!> <div class="boxes svelte-p46ums"></div> <!></div>');const Yc={hash:"svelte-p46ums",code:".detail-row.svelte-p46ums {display:flex;flex-direction:column;}.title-row.svelte-p46ums {align-items:baseline;margin-bottom:0.5rem;}.title.svelte-p46ums {margin-right:0.8rem;font-size:1.5em;font-weight:700;}.subtitle.svelte-p46ums {font-size:1.3em;color:#aaa;}.subtitle.svelte-p46ums .subtitle-sep {color:#666;}.boxes.svelte-p46ums {display:flex;flex-direction:row;}.box-container.dimmed.svelte-p46ums {opacity:0.2;}.spacer-fixed.svelte-p46ums {min-width:1.5rem;}.context-graphs-container.svelte-p46ums {display:inline-flex;flex-direction:row;margin-top:1rem;padding:0 1rem;background-color:#555;}.context-graphs-column.svelte-p46ums {display:inline-flex;flex-direction:column;}.context-graph-row.svelte-p46ums {display:flex;flex-direction:row;width:77.5rem;margin:1rem 0;}.context-graph-spacer.svelte-p46ums {min-width:1.5rem;}"};function Li(e,t){le(t,!1),pe(e,Yc);let r=U(t,"viewModel",8),n=H(),i=H();const a=pt();function l(L){a("show-context-menu",{kind:"row",itemKey:r().pinnedItemKey,clickEvent:L})}function d(L,Y){return Y!==void 0&&L!==Y}function p(L){L===f$1(n)?(E(n,void 0),E(i,void 0)):(E(n,L),E(i,Rc(r().boxes[L])))}function m(L){return L===void 0?0:r().boxes.length>0?(L+.5)/r().boxes.length*100:0}je(()=>z(r()),()=>{r()&&(E(n,void 0),E(i,void 0))}),st(),Ce();var A=Wc(),x=g(A);{var I=L=>{var Y=Bc(),j=g(Y),Z=g(j);Te(Z,()=>(z(r()),_$1(()=>r().title)));var X=R(j,2);{var Q=J=>{var ee=Ac(),ie=g(ee);Te(ie,()=>(z(r()),_$1(()=>r().subtitle))),M(J,ee)};N(X,J=>{z(r()),_$1(()=>r().subtitle)&&J(Q)})}be("contextmenu",Y,ni(l)),M(L,Y)};N(x,L=>{z(r()),_$1(()=>r().title)&&L(I)})}var P=R(x,2);Ie(P,5,()=>(z(r()),_$1(()=>r().boxes)),Ve,(L,Y,j)=>{var Z=jc(),X=W(Z);{var Q=de=>{var fe=Oc();M(de,fe)};N(X,de=>{j>0&&de(Q)})}var J=R(X,2);let ee;var ie=g(J);Hn(ie,{get viewModel(){return f$1(Y)},$$events:{"toggle-context-graphs":()=>p(j),"show-context-menu"(de){ot.call(this,t,de)}}}),O(de=>ee=Ee(J,1,"box-container svelte-p46ums",null,ee,de),[()=>({dimmed:d(j,f$1(n))})]),M(L,Z)});var q=R(P,2);{var F=L=>{var Y=Uc(),j=g(Y),Z=R(j,2),X=g(Z);{var Q=J=>{var ee=we(),ie=W(ee);Ie(ie,1,()=>f$1(i),Ve,(de,fe)=>{var _e=Gc(),Re=g(_e);rs(Re,{get viewModel(){return f$1(fe),_$1(()=>f$1(fe).graphL)}});var Qe=R(Re,4);rs(Qe,{get viewModel(){return f$1(fe),_$1(()=>f$1(fe).graphR)}}),M(de,_e)}),M(J,ee)};N(X,J=>{f$1(i)&&J(Q)})}O(J=>Be(j,`min-width: max(0%, min(calc(${J??""}% - 38.75rem), calc(100% - 77.5rem)))`),[()=>(f$1(n),_$1(()=>m(f$1(n))))]),M(L,Y)};N(q,L=>{f$1(n)!==void 0&&L(F)})}M(e,A),ce()}var Hc=V('<div class="legend-item svelte-ili0m8"><!></div>'),Xc=V('<div class="legend-item svelte-ili0m8"><!></div>'),Zc=V('<div> </div> <span class="dataset-arrow svelte-ili0m8">&nbsp;-&gt;&nbsp;</span> <div> </div>',1),Jc=V("<div> </div>"),Qc=V("<div> </div>"),ed=V('<div class="detail-box-container svelte-ili0m8"><!></div>'),td=V('<div class="dataset-container svelte-ili0m8"><div class="dataset-row svelte-ili0m8"><!> <!></div> <!></div>');const rd={hash:"svelte-ili0m8",code:'.dataset-container.svelte-ili0m8 {display:flex;flex:1;flex-direction:column;}.dataset-row.svelte-ili0m8 {display:flex;flex:1;align-items:baseline;margin-left:0.6rem;cursor:pointer;}.dataset-row.svelte-ili0m8:hover {background-color:rgba(255, 255, 255, 0.05);}.dataset-arrow.svelte-ili0m8 {color:#777;}.legend-item.svelte-ili0m8 {font-family:"Roboto Condensed";font-weight:700;font-size:1rem;margin:0.2rem 0.4rem;padding:0.25rem 0.6rem 0.2rem 0.6rem;color:#fff;text-align:center;text-shadow:0 0.5px 1.5px #000;}.detail-box-container.svelte-ili0m8 {display:flex;flex:1;margin-top:0.2rem;margin-bottom:0.8rem;margin-left:0.4rem;}'};function sd(e,t){le(t,!1),pe(e,rd);const r=()=>ve(P,"$detailBoxVisible",n),[n,i]=Ge();let a=U(t,"viewModel",8);const l=a().nameL,d=a().nameR,p=a().legendColorL,m=a().legendColorR,A=a().legendLabelL,x=a().legendLabelR,I=a().bucketClass,P=a().detailBoxVisible;function q(){P.update(de=>!de)}Ce();var F=td(),L=g(F),Y=g(L);{var j=de=>{var fe=Hc(),_e=g(fe);Te(_e,()=>_$1(()=>A.toUpperCase())),O(()=>Be(fe,`background-color: ${p??""};`)),M(de,fe)},Z=de=>{var fe=we(),_e=W(fe);{var Re=Qe=>{var Ar=Xc(),Os=g(Ar);Te(Os,()=>_$1(()=>x.toUpperCase())),O(()=>Be(Ar,`background-color: ${m??""};`)),M(Qe,Ar)};N(_e,Qe=>{x&&Qe(Re)},!0)}M(de,fe)};N(Y,de=>{A&&!x?de(j):de(Z,!1)})}var X=R(Y,2);{var Q=de=>{var fe=Zc(),_e=W(fe),Re=g(_e),Qe=R(_e,4),Ar=g(Qe);O(()=>{Ee(_e,1,`dataset-name ${I}`,"svelte-ili0m8"),B(Re,l),Ee(Qe,1,`dataset-name ${I}`,"svelte-ili0m8"),B(Ar,d)}),M(de,fe)},J=de=>{var fe=we(),_e=W(fe);{var Re=Ar=>{var Os=Jc(),ji=g(Os);O(()=>{Ee(Os,1,`dataset-name ${I}`,"svelte-ili0m8"),B(ji,l)}),M(Ar,Os)},Qe=Ar=>{var Os=we(),ji=W(Os);{var Ui=hi=>{var ca=Qc(),Ue=g(ca);O(()=>{Ee(ca,1,`dataset-name ${I}`,"svelte-ili0m8"),B(Ue,d)}),M(hi,ca)};N(ji,hi=>{d&&hi(Ui)},!0)}M(Ar,Os)};N(_e,Ar=>{l&&!d?Ar(Re):Ar(Qe,!1)},!0)}M(de,fe)};N(X,de=>{l&&d&&l!==d?de(Q):de(J,!1)})}var ee=R(L,2);{var ie=de=>{var fe=ed(),_e=g(fe);Hn(_e,{get viewModel(){return z(a()),_$1(()=>a().detailBoxViewModel)}}),M(de,fe)};N(ee,de=>{r()&&de(ie)})}be("click",L,q),M(e,F),ce(),i()}var id=V('<div class="spacer-flex svelte-1sxfmis"></div>'),nd=V('<div class="metadata-row svelte-1sxfmis"><div class="metadata-col svelte-1sxfmis"><div class="metadata-key svelte-1sxfmis"> </div> <span>&nbsp;</span> <div class="metadata-value"> </div></div> <div class="spacer-fixed svelte-1sxfmis"></div> <div class="metadata-col svelte-1sxfmis"><div class="metadata-key svelte-1sxfmis"> </div> <span>&nbsp;</span> <div class="metadata-value"> </div></div></div>'),ad=V('<div class="metadata-header svelte-1sxfmis">Metadata differences:</div> <!>',1),od=V('<div class="metadata-header svelte-1sxfmis">Dataset differences:</div> <!>',1),ld=V('<div class="spacer-flex svelte-1sxfmis"></div>'),cd=V('<div class="graphs-row svelte-1sxfmis"><!> <div class="content svelte-1sxfmis"><div class="graphs-container svelte-1sxfmis"><!> <div class="spacer-fixed svelte-1sxfmis"></div> <!></div> <div class="metadata-container svelte-1sxfmis"><div class="metadata-header svelte-1sxfmis"> </div> <!> <!></div></div> <!></div>');const dd={hash:"svelte-1sxfmis",code:".graphs-row.svelte-1sxfmis {display:flex;flex-direction:row;flex:1;}.spacer-flex.svelte-1sxfmis {flex:1;}.spacer-fixed.svelte-1sxfmis {flex:0 0 2rem;}.content.svelte-1sxfmis {display:flex;flex-direction:column;flex:1;}.graphs-container.svelte-1sxfmis {display:flex;flex-direction:row;}.metadata-container.svelte-1sxfmis {display:flex;flex-direction:column;}.metadata-header.svelte-1sxfmis {margin-top:0.6rem;}.metadata-row.svelte-1sxfmis {display:flex;flex-direction:row;}.metadata-row.svelte-1sxfmis:hover {background-color:rgba(255, 255, 255, 0.05);}.metadata-col.svelte-1sxfmis {display:flex;width:38rem;align-items:baseline;}.metadata-key.svelte-1sxfmis {color:#aaa;font-size:0.8em;margin-left:1rem;}"};function ud(e,t){le(t,!1),pe(e,dd);let r=U(t,"viewModel",8),n=U(t,"align",8,"center");Ce();var i=cd(),a=g(i);{var l=X=>{var Q=id();M(X,Q)};N(a,X=>{n()==="center"&&X(l)})}var d=R(a,2),p=g(d),m=g(p);rs(m,{get viewModel(){return z(r()),_$1(()=>r().graphL)}});var A=R(m,4);rs(A,{get viewModel(){return z(r()),_$1(()=>r().graphR)}});var x=R(p,2),I=g(x),P=g(I),q=R(I,2);{var F=X=>{var Q=ad(),J=R(W(Q),2);Ie(J,1,()=>(z(r()),_$1(()=>r().metadataRows)),Ve,(ee,ie)=>{var de=nd(),fe=g(de),_e=g(fe),Re=g(_e),Qe=R(_e,4),Ar=g(Qe),Os=R(fe,4),ji=g(Os),Ui=g(ji),hi=R(ji,4),ca=g(hi);O(()=>{B(Re,(f$1(ie),_$1(()=>f$1(ie).key))),B(Ar,(f$1(ie),_$1(()=>f$1(ie).valueL||"n/a"))),B(Ui,(f$1(ie),_$1(()=>f$1(ie).key))),B(ca,(f$1(ie),_$1(()=>f$1(ie).valueR||"n/a")))}),M(ee,de)}),M(X,Q)};N(q,X=>{z(r()),_$1(()=>r().metadataRows.length>0)&&X(F)})}var L=R(q,2);{var Y=X=>{var Q=od(),J=R(W(Q),2);Ie(J,1,()=>(z(r()),_$1(()=>r().datasetRows)),Ve,(ee,ie)=>{sd(ee,{get viewModel(){return f$1(ie)}})}),M(X,Q)};N(L,X=>{z(r()),_$1(()=>r().datasetRows.length>0)&&X(Y)})}var j=R(d,2);{var Z=X=>{var Q=ld();M(X,Q)};N(j,X=>{n()==="center"&&X(Z)})}O(()=>B(P,`id ${z(r()),_$1(()=>r().graphId)??""}`)),M(e,i),ce()}var fd=V('<div class="pretitle svelte-4i7ul9"><!></div>'),vd=V('<div class="subtitle svelte-4i7ul9"><!></div>'),pd=V('<div class="annotations svelte-4i7ul9"><!></div>'),hd=V('<li class="related-item"><!></li>'),md=V('<div class="related svelte-4i7ul9"><span> </span> <ul class="svelte-4i7ul9"></ul></div>'),gd=V('<div class="row-container svelte-4i7ul9"><!></div>'),bd=V('<div class="section-title svelte-4i7ul9"> </div> <!>',1),wd=V('<div class="section-title svelte-4i7ul9"> </div>'),_d=V("<!> <!>",1),xd=V('<div class="row-container svelte-4i7ul9"><!></div>'),yd=V('<div class="section-title svelte-4i7ul9"> </div> <!>',1),kd=V('<div class="section-title svelte-4i7ul9"> </div>'),Sd=V('<div class="row-container svelte-4i7ul9"><!></div>'),Md=V('<div class="compare-detail-container svelte-4i7ul9"><div class="header-container svelte-4i7ul9"><div class="title-and-links svelte-4i7ul9"><div class="title-container svelte-4i7ul9"><!> <div class="title-and-subtitle svelte-4i7ul9"><div class="title svelte-4i7ul9"><!></div> <!> <!></div></div> <div class="spacer-flex svelte-4i7ul9"></div> <div class="nav-links no-selection svelte-4i7ul9"><div class="nav-link svelte-4i7ul9">previous</div> <div class="nav-link-sep svelte-4i7ul9">&nbsp;|&nbsp;</div> <div class="nav-link svelte-4i7ul9">next</div></div></div> <!></div> <div class="scroll-container svelte-4i7ul9" tabindex="0"><div class="scroll-content svelte-4i7ul9"><!> <!> <!> <!> <div class="footer svelte-4i7ul9"></div> <!></div></div></div>');const Rd={hash:"svelte-4i7ul9",code:".compare-detail-container.svelte-4i7ul9 {display:flex;flex-direction:column;flex:1;}.header-container.svelte-4i7ul9 {display:flex;flex-direction:column;width:calc(min(100%, 100vw) - 2rem);margin:0 -1rem;padding:0 2rem;box-shadow:0 1rem 0.5rem -0.5rem rgba(0, 0, 0, 0.5);z-index:1;}.title-and-links.svelte-4i7ul9 {display:flex;flex-direction:row;align-items:center;height:4.5rem;}.spacer-flex.svelte-4i7ul9 {flex:1;}.nav-links.svelte-4i7ul9 {display:flex;flex-direction:row;font-size:0.8em;}.nav-link-sep.svelte-4i7ul9 {color:#444;}.nav-link.svelte-4i7ul9 {cursor:pointer;color:#777;}.title-container.svelte-4i7ul9 {display:flex;flex-direction:column;}.pretitle.svelte-4i7ul9 {margin-bottom:0.2rem;font-size:0.9em;font-weight:700;color:#aaa;}.title-and-subtitle.svelte-4i7ul9 {display:flex;flex-direction:row;align-items:baseline;}.title.svelte-4i7ul9 {margin-bottom:0.4rem;font-size:2em;font-weight:700;cursor:pointer;}.subtitle.svelte-4i7ul9 {font-size:1.2em;font-weight:700;margin-left:1.2rem;color:#aaa;}.annotations.svelte-4i7ul9 {margin-left:0.3rem;color:#aaa;}.annotations.svelte-4i7ul9 .annotation {margin:0 0.3rem;padding:0.1rem 0.3rem;background-color:#222;border:0.5px solid #555;border-radius:0.4rem;}.related.svelte-4i7ul9 {font-size:1em;color:#aaa;margin-bottom:0.6rem;}.related.svelte-4i7ul9 .related-sep {color:#666;}ul.svelte-4i7ul9 {margin:0.1rem 0;padding-left:2rem;}.scroll-container.svelte-4i7ul9 {display:flex;flex-direction:row;max-width:min(100vw, 100%);flex:1 0 1px;overflow:auto;outline:none;background-color:#3c3c3c;}.scroll-content.svelte-4i7ul9 {position:relative;}.section-title.svelte-4i7ul9 {width:calc(min(100%, 100vw) - 2rem);margin:1.5rem 1rem 2rem 1rem;padding:0.2rem 0;border-bottom:solid 1px #555;color:#ccc;font-size:1.4em;font-weight:700;}.section-title.svelte-4i7ul9:not(:first-child) {margin-top:5rem;}.row-container.svelte-4i7ul9 {display:flex;flex-direction:row;margin-top:0.5rem;margin-bottom:3rem;margin-left:1rem;margin-right:1rem;}.row-container.svelte-4i7ul9:first-child {margin-top:3rem;}.footer.svelte-4i7ul9 {height:1rem;}"};function Cd(e,t){le(t,!1),pe(e,Rd);const r=()=>ve(f$1(m),"$pinnedDetailRows",i),n=()=>ve(f$1(A),"$regularDetailRows",i),[i,a]=Ge();let l=U(t,"viewModel",8),d=H(),p=H(),m=H(),A=H(),x=H(),I,P,q=H([]),F=H(),L=H(!1);const Y=pt();function j(ws){switch(ws){case"detail-previous":case"detail-next":{let pi;switch(l().kind){case"freeform-view":case"scenario-view":pi="views";break;case"scenario":pi="by-scenario";break;case"dataset":pi="by-dataset";break;default:zr(l().kind)}Y("command",{cmd:ws==="detail-previous"?"show-comparison-detail-for-previous":"show-comparison-detail-for-next",kind:pi,summaryRowKey:l().summaryRowKey});break}default:Y("command",{cmd:ws});break}}function Z(ws){const pi=ws.detail?.kind;switch(pi){case"box":case"row":{const vr=ws.detail.itemKey,Gi=ze(l().pinnedItemState.getPinned(vr)),ga=Gi?"Unpin":"Pin",fa=pi==="row"?"Row":f$1(d);if(I=vr,P=ws.detail.scenario,E(q,[{key:"toggle-item-pinned",displayText:`${ga} ${fa}`}]),Gi){const ya=ze(l().pinnedItemState.orderedKeys);ya.length>1&&ya[0]!==vr&&f$1(q).push({key:"move-item-to-top",displayText:`Move ${fa} to Top`})}fa==="Scenario"&&f$1(q).push({key:"show-trace-view",displayText:"Open Scenario in Trace View"}),E(F,ws.detail.clickEvent);break}default:I=void 0,P=void 0,E(q,[]),E(F,void 0);break}}function X(){E(F,void 0)}function Q(ws){E(F,void 0);const pi=I,vr=ws.detail;switch(vr){case"toggle-item-pinned":l().pinnedItemState.toggleItemPinned(pi);break;case"move-item-to-top":l().pinnedItemState.moveItemToTop(pi);break;case"show-trace-view":Y("command",{cmd:"show-trace-view-with-scenario",scenarioSpec:P?.specR,scenarioKind:"comparison"});break;default:console.error(`ERROR: Unhandled context menu command '${vr}'`);break}}function J(ws){oi(ws)||(ws.key==="ArrowLeft"?(j("detail-previous"),ws.preventDefault()):ws.key==="ArrowRight"?(j("detail-next"),ws.preventDefault()):ws.key==="ArrowUp"&&f$1(x).scrollTop===0&&(j("show-summary"),ws.preventDefault()))}function ee(){E(L,!f$1(L))}br(()=>{f$1(x).focus()}),je(()=>(z(l()),f$1(d),f$1(x)),()=>{if(l()){switch(l().kind){case"freeform-view":E(d,"Row");break;case"scenario":case"scenario-view":E(d,"Dataset");break;case"dataset":E(d,"Scenario");break;default:E(d,"Item");break}E(p,`${f$1(d)}s`),kt(E(m,l().pinnedDetailRows),"$pinnedDetailRows",i),kt(E(A,l().regularDetailRows),"$regularDetailRows",i),f$1(x)&&Co(x,f$1(x).scrollTop=0),E(L,!1)}}),st(),Ce();var ie=Md();be("keydown",Ir,J);var de=g(ie),fe=g(de),_e=g(fe),Re=g(_e);{var Qe=ws=>{var pi=fd(),vr=g(pi);Te(vr,()=>(z(l()),_$1(()=>l().pretitle))),M(ws,pi)};N(Re,ws=>{z(l()),_$1(()=>l().pretitle)&&ws(Qe)})}var Ar=R(Re,2),Os=g(Ar),ji=g(Os);Te(ji,()=>(z(l()),_$1(()=>l().title)));var Ui=R(Os,2);{var hi=ws=>{var pi=vd(),vr=g(pi);Te(vr,()=>(z(l()),_$1(()=>l().subtitle))),M(ws,pi)};N(Ui,ws=>{z(l()),_$1(()=>l().subtitle)&&ws(hi)})}var ca=R(Ui,2);{var Ue=ws=>{var pi=pd(),vr=g(pi);Te(vr,()=>(z(l()),_$1(()=>l().annotations))),M(ws,pi)};N(ca,ws=>{z(l()),_$1(()=>l().annotations)&&ws(Ue)})}var ke=R(_e,4),qe=g(ke),Le=R(qe,4),ne=R(fe,2);{var ae=ws=>{var pi=md(),vr=g(pi),Gi=g(vr),ga=R(vr,2);Ie(ga,5,()=>(z(l()),_$1(()=>l().relatedItems)),Ve,(fa,ya)=>{var ua=hd(),va=g(ua);Te(va,()=>f$1(ya)),M(fa,ua)}),O(()=>B(Gi,(z(l()),_$1(()=>l().relatedListHeader)))),M(ws,pi)};N(ne,ws=>{f$1(L),z(l()),_$1(()=>f$1(L)&&l().relatedItems.length>0)&&ws(ae)})}var $e=R(de,2),Je=g($e),Ke=g(Je);{var bt=ws=>{var pi=_d(),vr=W(pi);Ie(vr,1,()=>(z(l()),_$1(()=>l().graphSections)),Ve,(fa,ya)=>{var ua=bd(),va=W(ua),_a=g(va),gi=R(va,2);Ie(gi,1,()=>(f$1(ya),_$1(()=>f$1(ya).rows)),Ve,(ha,pa)=>{var Ia=gd(),se=g(Ia);tl(se,()=>f$1(pa),Da=>{ud(Da,{get viewModel(){return f$1(pa)},align:"left"})}),M(ha,Ia)}),O(()=>B(_a,(f$1(ya),_$1(()=>f$1(ya).title)))),M(fa,ua)});var Gi=R(vr,2);{var ga=fa=>{var ya=wd(),ua=g(ya);O(()=>B(ua,`All ${f$1(p)??""}`)),M(fa,ya)};N(Gi,fa=>{r(),_$1(()=>r().length===0)&&fa(ga)})}M(ws,pi)};N(Ke,ws=>{z(l()),_$1(()=>l().graphSections.length>0)&&ws(bt)})}var bs=R(Ke,2);{var ge=ws=>{var pi=yd(),vr=W(pi),Gi=g(vr),ga=R(vr,2);Ie(ga,1,r,Ve,(fa,ya)=>{var ua=xd(),va=g(ua);Li(va,{get viewModel(){return f$1(ya)},$$events:{"show-context-menu":Z}}),M(fa,ua)}),O(()=>B(Gi,`Pinned ${f$1(p)??""}`)),M(ws,pi)};N(bs,ws=>{r(),_$1(()=>r().length>0)&&ws(ge)})}var ue=R(bs,2);{var De=ws=>{var pi=kd(),vr=g(pi);O(()=>B(vr,`All ${f$1(p)??""}`)),M(ws,pi)};N(ue,ws=>{r(),_$1(()=>r().length>0)&&ws(De)})}var Ye=R(ue,2);Ie(Ye,1,n,Ve,(ws,pi)=>{var vr=Sd(),Gi=g(vr);Li(Gi,{get viewModel(){return f$1(pi)},$$events:{"show-context-menu":Z}}),M(ws,vr)});var mi=R(Ye,4);hs(mi,{get items(){return f$1(q)},get initialEvent(){return f$1(F)},$$events:{"item-selected":Q,clickout:X}}),ps($e,ws=>E(x,ws),()=>f$1(x)),be("click",Os,ee),be("click",qe,()=>j("detail-previous")),be("click",Le,()=>j("detail-next")),M(e,ie),ce(),a()}var $d=(e,t,r,n)=>{const i=e.altKey;t.viewModel.toggleExpanded(r(),i),n()},Id=V('<button class="filter-expand-button svelte-44fxm2"><span></span></button>'),Dd=V('<span class="filter-expand-spacer svelte-44fxm2"></span>'),Td=(e,t,r,n)=>{t.viewModel.toggleChecked(r()),n()},zd=V('<div class="filter-children"></div>'),Vd=V('<div class="filter-item svelte-44fxm2"><!> <label class="filter-label svelte-44fxm2"><input type="checkbox" class="filter-checkbox svelte-44fxm2"/> <span class="filter-text svelte-44fxm2"><!></span></label></div> <!>',1),Ed=V('<div class="filter-panel svelte-44fxm2"></div>');const Pd={hash:"svelte-44fxm2",code:".filter-panel.svelte-44fxm2 {display:flex;flex-direction:column;flex:1;padding:1rem;background-color:var(--panel-bg);color:var(--text-color-primary);font-family:Roboto, sans-serif;font-size:1rem;line-height:1.3;}.filter-item.svelte-44fxm2 {display:flex;align-items:center;margin:0.2rem 0;}.filter-label.svelte-44fxm2 {display:flex;align-items:center;user-select:none;cursor:pointer;}.filter-label.svelte-44fxm2:hover {background-color:rgba(255, 255, 255, 0.1);border-radius:2px;padding:0.125rem 0.25rem;margin:-0.125rem -0.25rem;}.filter-checkbox.svelte-44fxm2 {margin-right:0.5rem;cursor:pointer;}.filter-text.svelte-44fxm2 {flex:1;}.filter-expand-button.svelte-44fxm2 {background:none;border:none;padding:0;margin-right:0.1rem;cursor:pointer;display:flex;align-items:center;justify-content:center;width:1.3rem;height:1.3rem;}.filter-expand-button.svelte-44fxm2:hover {background-color:rgba(255, 255, 255, 0.1);border-radius:2px;}.filter-triangle.svelte-44fxm2 {font-size:1rem;color:var(--text-color-secondary);user-select:none;}.filter-triangle.expanded.svelte-44fxm2 {transform:rotate(90deg);}.filter-expand-spacer.svelte-44fxm2 {width:1.3rem;height:1.3rem;margin-right:0.25rem;}"};function Ni(e,t){le(t,!0),pe(e,Pd);const r=(d,p=rt,m=rt)=>{const A=ht(()=>t.viewModel.getCheckboxState(m(),f$1(i))),x=ht(()=>n(p())),I=ht(()=>t.viewModel.isExpanded(m(),f$1(i))),P=ht(()=>m().children&&m().children.length>0);var q=Vd(),F=W(q),L=g(F);{var Y=de=>{var fe=Id();fe.__click=[$d,t,m,a];var _e=g(fe);let Re;O(Qe=>{yt(fe,"data-testid",`${m().key??""}-triangle`),Re=Ee(_e,1,"filter-triangle svelte-44fxm2",null,Re,Qe)},[()=>({expanded:f$1(I)})]),M(de,fe)},j=de=>{var fe=Dd();M(de,fe)};N(L,de=>{f$1(P)?de(Y):de(j,!1)})}var Z=R(L,2),X=g(Z);X.__change=[Td,t,m,a];var Q=R(X,2),J=g(Q);Te(J,()=>m().label);var ee=R(F,2);{var ie=de=>{var fe=zd();Ie(fe,21,()=>m().children,_e=>_e.key,(_e,Re)=>{r(_e,()=>p()+1,()=>f$1(Re))}),O(()=>{yt(fe,"data-testid",`${m().key??""}-children`),Be(fe,`display: ${f$1(I)?"block":"none"}`)}),M(de,fe)};N(ee,de=>{f$1(P)&&de(ie)})}O(()=>{Be(F,f$1(x)),ll(X,f$1(A)==="checked"),X.indeterminate=f$1(A)==="indeterminate"}),M(d,q)};function n(d){return`padding-left: ${d*20}px;`}let i=Ae(0);function a(){zs(i)}var l=Ed();Ie(l,21,()=>t.viewModel.items,d=>d.key,(d,p)=>{r(d,()=>0,()=>f$1(p))}),M(e,l),ce()}Pt(["click","change"]);var Ld=(e,t)=>t("checks"),Nd=(e,t)=>t("scenarios"),qd=V('<div class="filter-popover-content-empty svelte-1i7odm5"><p>No checks configured</p></div>'),Fd=V('<div class="filter-popover-content-empty svelte-1i7odm5"><p>No comparisons configured</p></div>'),Kd=V('<div class="filter-popover svelte-1i7odm5"><div class="filter-popover-header svelte-1i7odm5"><div class="filter-popover-header-title svelte-1i7odm5">Filters</div> <!></div> <div class="filter-popover-tab-bar svelte-1i7odm5"><button>Checks</button> <button>Comparison Scenarios</button></div> <div class="filter-popover-content svelte-1i7odm5"><!></div> <div class="filter-popover-footer svelte-1i7odm5"><!></div></div>');const Ad={hash:"svelte-1i7odm5",code:".filter-popover.svelte-1i7odm5 {display:flex;flex-direction:column;flex:1;height:100%;background-color:var(--panel-bg);color:var(--text-color-primary);}.filter-popover-header.svelte-1i7odm5 {display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:var(--panel-header-bg);border-bottom:1px solid var(--panel-border);}.filter-popover-header-title.svelte-1i7odm5 {font-size:1.2rem;font-weight:700;}.filter-popover-tab-bar.svelte-1i7odm5 {display:flex;background-color:#333;}.filter-popover-tab-button.svelte-1i7odm5 {flex:1;padding:0.75rem 1rem;background-color:var(--panel-bg);border:none;border-bottom:1px solid var(--panel-border);font-family:Roboto, sans-serif;font-size:1rem;color:var(--text-color-secondary);cursor:pointer;}.filter-popover-tab-button.svelte-1i7odm5:hover {background-color:var(--input-bg);color:var(--text-color-primary);}.filter-popover-tab-button.active.svelte-1i7odm5 {background-color:#333;color:var(--text-color-primary);border-bottom-color:var(--border-color-focused);}.filter-popover-content.svelte-1i7odm5 {flex:1;overflow:auto;}.filter-popover-content.svelte-1i7odm5 .filter-panel {border-top:none;}.filter-popover-content-empty.svelte-1i7odm5 {display:flex;height:100%;justify-content:center;align-items:center;padding:1rem;}.filter-popover-footer.svelte-1i7odm5 {display:flex;justify-content:flex-end;padding:1rem;background-color:var(--panel-footer-bg);border-top:1px solid var(--panel-border);}"};function Bd(e,t){le(t,!0),pe(e,Ad);let r=Ae("checks");function n(j){E(r,j,!0)}var i=Kd(),a=g(i),l=R(g(a),2);li(l,{onClick:()=>t.onClose()});var d=R(a,2),p=g(d);let m;p.__click=[Ld,n];var A=R(p,2);let x;A.__click=[Nd,n];var I=R(d,2),P=g(I);{var q=j=>{var Z=we(),X=W(Z);{var Q=ee=>{Ni(ee,{get viewModel(){return t.viewModel.checksPanel}})},J=ee=>{var ie=qd();M(ee,ie)};N(X,ee=>{t.viewModel.checksPanel?ee(Q):ee(J,!1)})}M(j,Z)},F=j=>{var Z=we(),X=W(Z);{var Q=J=>{var ee=we(),ie=W(ee);{var de=_e=>{Ni(_e,{get viewModel(){return t.viewModel.comparisonScenariosPanel}})},fe=_e=>{var Re=Fd();M(_e,Re)};N(ie,_e=>{t.viewModel.comparisonScenariosPanel?_e(de):_e(fe,!1)})}M(J,ee)};N(X,J=>{f$1(r)==="scenarios"&&J(Q)},!0)}M(j,Z)};N(P,j=>{f$1(r)==="checks"?j(q):j(F,!1)})}var L=R(I,2),Y=g(L);ts(Y,{onClick:()=>t.onApplyAndRun?.(),children:(j,Z)=>{var X=or("Apply and Run");M(j,X)},$$slots:{default:!0}}),O((j,Z)=>{m=Ee(p,1,"filter-popover-tab-button svelte-1i7odm5",null,m,j),x=Ee(A,1,"filter-popover-tab-button svelte-1i7odm5",null,x,Z)},[()=>({active:f$1(r)==="checks"}),()=>({active:f$1(r)==="scenarios"})]),M(e,i),ce()}Pt(["click"]);var Od=V('<div class="freeform-item-subtitle"><!></div>'),jd=V('<div class="freeform-item-title-row no-selection"><div class="freeform-item-title svelte-gipzah"><!></div> <!></div>'),Gd=V('<div class="freeform-item-content"><div class="freeform-item-graph-container"><!></div></div>'),Ud=V('<div class="freeform-item svelte-gipzah"><!> <div class="freeform-item-content-container"><!></div></div>');const Wd={hash:"svelte-gipzah",code:".freeform-item.svelte-gipzah {display:flex;flex-direction:column;width:240px;height:200px;min-height:200px;border:solid 0.5px red;}.freeform-item-title.svelte-gipzah {font-size:10px;color:#fff;}"};function Yd(e,t){le(t,!1),pe(e,Wd);const r=()=>ve(f$1(l),"$content",n),[n,i]=Ge();let a=U(t,"viewModel",8),l=H(a().content),d=H(!1),p=H(f$1(d)),m=H();const A=pt();function x(){A("toggle")}je(()=>(f$1(d),f$1(p),z(a()),f$1(m)),()=>{(f$1(d)!==f$1(p)||a().requestKey!==f$1(m)?.requestKey)&&(f$1(m)?.clearData(),E(p,f$1(d)),E(m,a()),kt(E(l,a().content),"$content",n),f$1(d)&&a().requestData())}),st(),Ce();var I=Ud(),P=g(I);{var q=Y=>{var j=jd(),Z=g(j),X=g(Z);Te(X,()=>(z(a()),_$1(()=>a().title)));var Q=R(Z,2);{var J=ee=>{var ie=Od(),de=g(ie);Te(de,()=>(z(a()),_$1(()=>a().subtitle))),M(ee,ie)};N(Q,ee=>{z(a()),_$1(()=>a().subtitle)&&ee(J)})}be("click",Z,x),M(Y,j)};N(P,Y=>{z(a()),_$1(()=>a().title)&&Y(q)})}var F=R(P,2),L=g(F);Fr(L,{get visible(){return f$1(d)},set visible(Y){E(d,Y)},children:(Y,j)=>{var Z=we(),X=W(Z);{var Q=J=>{var ee=Gd(),ie=g(ee),de=g(ie);ms$1(de,{get viewModel(){return r(),_$1(()=>r().comparisonGraphViewModel)}}),M(J,ee)};N(X,J=>{r()&&J(Q)})}M(Y,Z)},$$slots:{default:!0},$$legacy:!0}),M(e,I),ce(),i()}var Hd=V('<div class="freeform-container svelte-1cqoei9"><div class="freeform-scroll-container svelte-1cqoei9"></div></div>');const Xd={hash:"svelte-1cqoei9",code:".freeform-container.svelte-1cqoei9 {display:flex;flex-direction:column;flex:1;}.freeform-scroll-container.svelte-1cqoei9 {display:flex;flex:1 1 1px;flex-direction:column;gap:20px;overflow:auto;padding:1rem;align-items:flex-start;outline:none;background-color:#3c3c3c;}"};function Zd(e,t){le(t,!1),pe(e,Xd);const r=()=>ve(a,"$items",n),[n,i]=Ge(),a=U(t,"viewModel",8)().items;Ce();var l=Hd(),d=g(l);Ie(d,5,r,Ve,(p,m)=>{Yd(p,{get viewModel(){return f$1(m)}})}),M(e,l),ce(),i()}var Jd=V('<div class="header-group svelte-1u5zf43"><div class="label svelte-1u5zf43">Generated:</div> <div class="label generated-date svelte-1u5zf43"> </div></div>'),Qd=V('<button class="bundle-button dataset-color-0 svelte-1u5zf43" data-testid="bundle-selector-left"> </button> <button class="bundle-button dataset-color-1 svelte-1u5zf43" data-testid="bundle-selector-right"> </button>',1),eu=V('<div class="label dataset-color-0 svelte-1u5zf43"> </div> <div class="label dataset-color-1 svelte-1u5zf43"> </div>',1),tu=V('<button class="icon-button filter svelte-1u5zf43" aria-label="Filters"><!></button>'),ru=V('<div class="spacer-fixed svelte-1u5zf43"></div> <div class="header-group svelte-1u5zf43"><div class="label svelte-1u5zf43">Comparing:</div> <!></div> <div class="spacer-fixed svelte-1u5zf43"></div> <div class="header-group svelte-1u5zf43"><div class="label svelte-1u5zf43">Thresholds:</div> <div class="label bucket-color-0 svelte-1u5zf43"><!></div> <div class="label bucket-color-1 svelte-1u5zf43"><!></div> <div class="label bucket-color-2 svelte-1u5zf43"><!></div> <div class="label bucket-color-3 svelte-1u5zf43"><!></div> <div class="label bucket-color-4 svelte-1u5zf43"><!></div></div> <div class="spacer-fixed svelte-1u5zf43"></div> <div class="header-group svelte-1u5zf43"><!> <button class="icon-button controls svelte-1u5zf43" aria-label="Controls"><!></button></div>',1),su=V('<div class="spacer-fixed svelte-1u5zf43"></div> <div class="header-group svelte-1u5zf43"><button class="icon-button filter svelte-1u5zf43" aria-label="Filters"><!></button></div>',1),iu=V("<option> </option>"),nu=V('<div class="control-label concurrency svelte-1u5zf43">Concurrency:</div> <select class="selector concurrency"></select> <div class="spacer-fixed svelte-1u5zf43"></div>',1),au=V('<div class="header-controls svelte-1u5zf43"><div class="spacer-flex svelte-1u5zf43"></div> <!> <div class="control-label sort-by svelte-1u5zf43">Sort by:</div> <select class="selector" data-testid="sort-mode-selector"><option>max diff</option><option>avg diff</option><option>max diff / max baseline diff</option><option>avg diff / avg baseline diff</option></select> <div class="spacer-fixed svelte-1u5zf43"></div> <input class="checkbox" type="checkbox" name="toggle-consistent-y-range"/> <label for="toggle-consistent-y-range">Consistent Y-Axis Ranges</label> <div class="spacer-fixed svelte-1u5zf43"></div> <div class="control-label">Graph Zoom:</div> <input type="range" min="0.3" max="2.5" step="0.1" class="svelte-1u5zf43"/> <div class="control-label"> </div></div>'),ou=V('<div class="header-container svelte-1u5zf43"><div class="header-content svelte-1u5zf43"><div class="header-group svelte-1u5zf43"><button class="icon-button home svelte-1u5zf43" aria-label="Home"><!></button></div> <div class="spacer-flex svelte-1u5zf43"></div> <!> <!></div> <!> <div class="line svelte-1u5zf43"></div></div>');const lu={hash:"svelte-1u5zf43",code:`.header-container.svelte-1u5zf43 {display:flex;flex-direction:column;box-sizing:border-box;width:100%;max-width:min(100%, 100vw);padding:0 1rem;color:#aaa;}.header-content.svelte-1u5zf43 {display:flex;flex-direction:row;margin:0.4rem 0;}.header-group.svelte-1u5zf43 {display:flex;flex-direction:row;align-items:center;}.spacer-flex.svelte-1u5zf43 {flex:1;min-width:20px;}.spacer-fixed.svelte-1u5zf43 {width:2rem;}.icon-button.svelte-1u5zf43 {background:none;border:none;padding:0;color:#bbb;cursor:pointer;}.icon-button.svelte-1u5zf43:hover {color:#fff;}.icon-button.controls.svelte-1u5zf43 {margin-left:1rem;}.label.svelte-1u5zf43:not(:last-child) {margin-right:1rem;}.generated-date.svelte-1u5zf43 {color:#ddd;}.bundle-button.svelte-1u5zf43 {background:none;padding:0.25rem 0.5rem;font:inherit;border:1px solid #333;border-radius:4px;cursor:pointer;}.bundle-button.svelte-1u5zf43:hover {background-color:rgba(255, 255, 255, 0.1);border-color:#888;}.bundle-button.svelte-1u5zf43:not(:last-child) {margin-right:1rem;}.header-controls.svelte-1u5zf43 {display:flex;flex-direction:row;margin:0.4rem 0;align-items:center;}.control-label.concurrency.svelte-1u5zf43,
.control-label.sort-by.svelte-1u5zf43 {margin-right:0.4rem;}input[type=range].svelte-1u5zf43 {width:10rem;margin:0 0.4rem;}.line.svelte-1u5zf43 {min-height:1px;margin-bottom:1rem;background-color:#555;}`};function cu(e,t){le(t,!1),pe(e,lu);const r=()=>ve(j,"$concurrency",m),n=()=>ve(P,"$generatedDateString",m),i=()=>ve(I,"$thresholds",m),a=()=>ve(q,"$controlsVisible",m),l=()=>ve(Y,"$sortMode",m),d=()=>ve(L,"$consistentYRange",m),p=()=>ve(F,"$zoom",m),[m,A]=Ge();let x=U(t,"viewModel",8);const I=x().thresholds,P=x().generatedDateString,q=x().controlsVisible,F=x().zoom,L=x().consistentYRange,Y=x().sortMode,j=x().concurrency,Z=pt();function X(){Z("command",{cmd:"show-summary"})}function Q(ke){Z("command",{cmd:"toggle-bundle-selector",side:ke})}function J(){Z("command",{cmd:"toggle-filters"})}function ee(){x().controlsVisible.update(ke=>!ke)}function ie(ke){const qe=parseInt(ke.target.value);ir(j,qe),document.dispatchEvent(new CustomEvent("sde-check-config-changed"))}Ce();var de=ou(),fe=g(de),_e=g(fe),Re=g(_e),Qe=g(Re);nr(Qe,{class:"icon",get data(){return faHome}});var Ar=R(_e,4);{var Os=ke=>{var qe=Jd(),Le=R(g(qe),2),ne=g(Le);O(()=>B(ne,n())),M(ke,qe)};N(Ar,ke=>{n()&&ke(Os)})}var ji=R(Ar,2);{var Ui=ke=>{var qe=ru(),Le=R(W(qe),2),ne=R(g(Le),2);{var ae=ua=>{var va=Qd(),_a=W(va),gi=g(_a),ha=R(_a,2),pa=g(ha);O(()=>{B(gi,(z(x()),_$1(()=>x().nameL))),B(pa,(z(x()),_$1(()=>x().nameR)))}),be("click",_a,()=>Q("left")),be("click",ha,()=>Q("right")),M(ua,va)},$e=ua=>{var va=eu(),_a=W(va),gi=g(_a),ha=R(_a,2),pa=g(ha);O(()=>{B(gi,(z(x()),_$1(()=>x().nameL))),B(pa,(z(x()),_$1(()=>x().nameR)))}),M(ua,va)};N(ne,ua=>{z(x()),_$1(()=>x().bundleManager)?ua(ae):ua($e,!1)})}var Je=R(Le,4),Ke=R(g(Je),2),bt=g(Ke);Te(bt,()=>(i(),_$1(()=>i()[0])));var bs=R(Ke,2),ge=g(bs);Te(ge,()=>(i(),_$1(()=>i()[1])));var ue=R(bs,2),De=g(ue);Te(De,()=>(i(),_$1(()=>i()[2])));var Ye=R(ue,2),mi=g(Ye);Te(mi,()=>(i(),_$1(()=>i()[3])));var ws=R(Ye,2),pi=g(ws);Te(pi,()=>(i(),_$1(()=>i()[4])));var vr=R(Je,4),Gi=g(vr);{var ga=ua=>{var va=tu(),_a=g(va);nr(_a,{class:"icon",get data(){return faFilter}}),be("click",va,J),M(ua,va)};N(Gi,ua=>{z(x()),_$1(()=>x().devMode)&&ua(ga)})}var fa=R(Gi,2),ya=g(fa);nr(ya,{class:"icon",get data(){return faCog}}),be("click",fa,ee),M(ke,qe)},hi=ke=>{var qe=we(),Le=W(qe);{var ne=ae=>{var $e=su(),Je=R(W($e),2),Ke=g(Je),bt=g(Ke);nr(bt,{class:"icon",get data(){return faFilter}}),be("click",Ke,J),M(ae,$e)};N(Le,ae=>{z(x()),_$1(()=>x().devMode)&&ae(ne)},!0)}M(ke,qe)};N(ji,ke=>{z(x()),_$1(()=>x().nameL)?ke(Ui):ke(hi,!1)})}var ca=R(fe,2);{var Ue=ke=>{var qe=au(),Le=R(g(qe),2);{var ne=Ye=>{var mi=nu(),ws=R(W(mi),2);Ie(ws,4,()=>_$1(()=>Array.from({length:Math.floor(navigator.hardwareConcurrency/2)},(pi,vr)=>vr+1)),Ve,(pi,vr)=>{var Gi=iu(),ga=g(Gi),fa={};O(()=>{ri(Gi,vr===r()),B(ga,vr),fa!==(fa=vr)&&(Gi.value=(Gi.__value=vr)??"")}),M(pi,Gi)}),be("change",ws,ie),M(Ye,mi)};N(Le,Ye=>{z(x()),_$1(()=>x().devMode)&&Ye(ne)})}var ae=R(Le,4);O(()=>{l(),Rn(()=>{})});var $e=g(ae);$e.value=$e.__value="max-diff";var Je=R($e);Je.value=Je.__value="avg-diff";var Ke=R(Je);Ke.value=Ke.__value="max-diff-relative";var bt=R(Ke);bt.value=bt.__value="avg-diff-relative";var bs=R(ae,4),ge=R(bs,8),ue=R(ge,2),De=g(ue);O(Ye=>B(De,Ye),[()=>(p(),_$1(()=>`${p().toFixed(1)}x`))]),Kn(ae,l,Ye=>ir(Y,Ye)),jn(bs,d,Ye=>ir(L,Ye)),ii(ge,p,Ye=>ir(F,Ye)),M(ke,qe)};N(ca,ke=>{a()&&ke(Ue)})}be("click",Re,X),M(e,de),ce(),A()}var du=V("<div></div>"),uu=V('<div class="dot-plot-container svelte-yxhckp"><div class="hline svelte-yxhckp"></div> <div class="vline end-line svelte-yxhckp" style="left: 0;"></div> <div class="vline end-line svelte-yxhckp" style="left: 100%;"></div> <!> <div></div></div>');const fu={hash:"svelte-yxhckp",code:".dot-plot-container.svelte-yxhckp {position:relative;width:100%;height:1.6rem;}.hline.svelte-yxhckp {position:absolute;left:0;top:0.7rem;width:100%;height:1px;background-color:#555;}.vline.svelte-yxhckp {position:absolute;left:0;height:1.4rem;width:1px;}.vline.end-line.svelte-yxhckp {background-color:#555;}.vline.avg-line.svelte-yxhckp {width:2px;margin-left:-1px;}.dot.svelte-yxhckp {position:absolute;top:0.3rem;width:0.8rem;height:0.8rem;margin-left:-0.4rem;border-radius:0.4rem;opacity:0.2;}"};function Fs(e,t){le(t,!1),pe(e,fu);let r=U(t,"viewModel",8),n=U(t,"colorClass",8);Ce();var i=uu(),a=R(g(i),6);Ie(a,1,()=>(z(r()),_$1(()=>r().points)),Ve,(d,p)=>{var m=du();O(()=>{Ee(m,1,`dot ${n()}`,"svelte-yxhckp"),Be(m,`left: ${f$1(p)??""}%;`)}),M(d,m)});var l=R(a,2);O(()=>{Ee(l,1,`vline avg-line ${n()}`,"svelte-yxhckp"),Be(l,`left: ${z(r()),_$1(()=>r().avgPoint)??""}%;`)}),M(e,i),ce()}var vu=V('<button class="run">Run</button>'),pu=V("<div>Running performance tests, please wait</div>"),hu=V('<tr><td class="rownum svelte-180kq73" rowspan="2"> </td><td class="dim svelte-180kq73"> </td><td class="value dataset-color-0 svelte-180kq73"> </td><td class="dim svelte-180kq73"> </td><td class="plot svelte-180kq73"><!></td></tr> <tr><td class="dim svelte-180kq73"> </td><td class="value dataset-color-1 svelte-180kq73"> </td><td class="dim svelte-180kq73"> </td><td class="plot svelte-180kq73"><!></td></tr>',1),mu=V('<table class="svelte-180kq73"><thead><tr><th class="svelte-180kq73">run</th><th class="svelte-180kq73">min</th><th class="svelte-180kq73">avg</th><th class="svelte-180kq73">max</th></tr></thead><tbody></tbody></table>'),gu=V('<div class="perf-container svelte-180kq73"><div class="controls-container svelte-180kq73"><!></div> <div class="table-container svelte-180kq73"><!></div></div>');const bu={hash:"svelte-180kq73",code:`.perf-container.svelte-180kq73 {display:flex;flex-direction:column;padding:0 1rem;}.controls-container.svelte-180kq73 {display:flex;flex-direction:column;align-items:flex-start;height:3rem;}.table-container.svelte-180kq73 {display:flex;flex:1;}table.svelte-180kq73 {border-collapse:collapse;}td.svelte-180kq73,
th.svelte-180kq73 {padding-top:0.2rem;padding-bottom:0.2rem;}th.svelte-180kq73 {color:#aaa;text-align:right;font-weight:500;}td.svelte-180kq73 {width:4.5rem;text-align:right;font-family:monospace;}td.rownum.svelte-180kq73 {width:2rem;}td.dim.svelte-180kq73 {color:#777;}td.plot.svelte-180kq73 {width:30rem;padding-left:2rem;padding-right:2rem;}`};function wu(e,t){le(t,!1),pe(e,bu);const r=()=>ve(l,"$rows",n),[n,i]=Ge();let a=U(t,"viewModel",8);const l=a().rows;let d=H(!1);function p(){f$1(d)||(E(d,!0),runPerf({onComplete:(Y,j)=>{a().addRow(Y,j),E(d,!1)},onError:Y=>{console.error(Y),E(d,!1)}}))}Ce();var m=gu(),A=g(m),x=g(A);{var I=Y=>{var j=vu();O(()=>j.disabled=f$1(d)),be("click",j,p),M(Y,j)},P=Y=>{var j=pu();M(Y,j)};N(x,Y=>{f$1(d)?Y(P,!1):Y(I)})}var q=R(A,2),F=g(q);{var L=Y=>{var j=mu(),Z=R(g(j));Ie(Z,5,r,Ve,(X,Q)=>{var J=hu(),ee=W(J),ie=g(ee),de=g(ie),fe=R(ie),_e=g(fe),Re=R(fe),Qe=g(Re),Ar=R(Re),Os=g(Ar),ji=R(Ar),Ui=g(ji);Fs(Ui,{get viewModel(){return f$1(Q),_$1(()=>f$1(Q).dotPlotL)},colorClass:"dataset-bg-0"});var hi=R(ee,2),ca=g(hi),Ue=g(ca),ke=R(ca),qe=g(ke),Le=R(ke),ne=g(Le),ae=R(Le),$e=g(ae);Fs($e,{get viewModel(){return f$1(Q),_$1(()=>f$1(Q).dotPlotR)},colorClass:"dataset-bg-1"}),O(()=>{B(de,(f$1(Q),_$1(()=>f$1(Q).num))),B(_e,(f$1(Q),_$1(()=>f$1(Q).minTimeL))),B(Qe,(f$1(Q),_$1(()=>f$1(Q).avgTimeL))),B(Os,(f$1(Q),_$1(()=>f$1(Q).maxTimeL))),B(Ue,(f$1(Q),_$1(()=>f$1(Q).minTimeR))),B(qe,(f$1(Q),_$1(()=>f$1(Q).avgTimeR))),B(ne,(f$1(Q),_$1(()=>f$1(Q).maxTimeR)))}),M(X,J)}),M(Y,j)};N(F,Y=>{r(),_$1(()=>r().length>0)&&Y(L)})}M(e,m),ce(),i()}var _u=V('<div class="graph-container svelte-hxzd9c"><!></div>');const xu={hash:"svelte-hxzd9c",code:".graph-container.svelte-hxzd9c {position:relative;display:flex;width:36rem;height:22rem;margin-left:1rem;margin-top:0.5rem;margin-bottom:1rem;}"};function yu(e,t){le(t,!1),pe(e,xu);const r=()=>ve(f$1(l),"$content",n),[n,i]=Ge();let a=U(t,"viewModel",8),l=H(a().content),d=H(!1),p=H(f$1(d)),m=H();je(()=>(f$1(d),f$1(p),z(a()),f$1(m)),()=>{(f$1(d)!==f$1(p)||a().baseRequestKey!==f$1(m)?.baseRequestKey)&&(f$1(m)?.clearData(),E(p,f$1(d)),E(m,a()),kt(E(l,a().content),"$content",n),f$1(d)&&a().requestData())}),st(),Ce(),Fr(e,{get visible(){return f$1(d)},set visible(A){E(d,A)},children:(A,x)=>{var I=we(),P=W(I);{var q=F=>{var L=_u(),Y=g(L);ms$1(Y,{get viewModel(){return r(),_$1(()=>r().comparisonGraphViewModel)}}),M(F,L)};N(P,F=>{r()&&F(q)})}M(A,I)},$$slots:{default:!0},$$legacy:!0}),ce(),i()}var ku=V('<div class="row check-graph svelte-hx6uys"><!></div>'),Su=V('<div class="child-rows"></div>'),Mu=V('<div><span class="label"><!></span></div> <!>',1);const Ru={hash:"svelte-hx6uys",code:".check-graph.svelte-hx6uys {height:23rem;margin-left:8.5rem;}"};function Xn(e,t){le(t,!1),pe(e,Ru);const r=()=>ve(f$1(d),"$expanded",i),n=()=>ve(f$1(l),"$childRows",i),[i,a]=Ge(),l=H(),d=H();let p=U(t,"viewModel",8),m=U(t,"onShowContextMenu",8);function A(){p().onClicked()}function x(j){p().scenarioReport?.checkScenario?.spec&&(j.preventDefault(),m()?.(j,p()))}je(()=>z(p()),()=>{kt(E(l,p().childRows),"$childRows",i)}),je(()=>z(p()),()=>{kt(E(d,p().expanded),"$expanded",i)}),st(),Ce();var I=Mu(),P=W(I),q=g(P),F=g(q);Te(F,()=>(z(p()),_$1(()=>p().span)));var L=R(P,2);{var Y=j=>{var Z=we(),X=W(Z);{var Q=ee=>{var ie=ku(),de=g(ie);yu(de,{get viewModel(){return z(p()),_$1(()=>p().graphBoxViewModel)}}),M(ee,ie)},J=ee=>{var ie=Su();Ie(ie,5,n,Ve,(de,fe)=>{var _e=we(),Re=W(_e);Xn(Re,{get viewModel(){return f$1(fe)},get onShowContextMenu(){return m()}}),M(de,_e)}),M(ee,ie)};N(X,ee=>{z(p()),_$1(()=>p().graphBoxViewModel)?ee(Q):ee(J,!1)})}M(j,Z)};N(L,j=>{r()&&j(Y)})}O(()=>Ee(P,1,(z(p()),_$1(()=>`row ${p().rowClasses}`)),"svelte-hx6uys")),be("click",q,A),be("contextmenu",P,x),M(e,I),ce(),a()}var Cu=V('<div class="bar bucket-bg-0 svelte-148uwot"></div> <div class="bar status-bg-failed svelte-148uwot"></div> <div class="bar status-bg-error svelte-148uwot"></div> <div class="bar status-bg-skipped svelte-148uwot"></div>',1),$u=V('<div class="bar gray svelte-148uwot" style="width: 100%"></div>'),Iu=V("<span>No checks</span>"),Du=V("<span> </span>"),Tu=V('<span class="sep svelte-148uwot">&nbsp;|&nbsp;</span> <span class="status-color-passed"> </span>',1),zu=V('<span class="sep svelte-148uwot">&nbsp;|&nbsp;</span> <span class="status-color-failed"> </span>',1),Vu=V('<span class="status-color-error"> </span>'),Eu=V('<span class="status-color-error"> </span>'),Pu=V('<span class="sep svelte-148uwot">&nbsp;|&nbsp;</span> <!>',1),Lu=V('<span class="sep svelte-148uwot">&nbsp;|&nbsp;</span> <span class="status-color-skipped"> </span>',1),Nu=V("<span> </span> <!> <!> <!> <!>",1),qu=V('<div class="group-container svelte-148uwot"><div class="row group"><div class="label"> </div></div> <!></div>'),Fu=V('<div class="check-summary-container svelte-148uwot"><div class="summary-bar-row svelte-148uwot"><div class="bar-container svelte-148uwot"><!></div> <span class="summary-label svelte-148uwot"><!></span></div> <div class="check-detail svelte-148uwot"></div> <!></div>');const Ku={hash:"svelte-148uwot",code:`.check-summary-container.svelte-148uwot {display:flex;flex-direction:column;}.check-detail.svelte-148uwot {display:flex;flex-direction:column;}.group-container.svelte-148uwot {margin-bottom:1.2rem;}.group-container.svelte-148uwot .test-rows {display:flex;flex-direction:column;}.group-container.svelte-148uwot .test-rows:not(.children-visible) {display:none;}.group-container.svelte-148uwot .test-rows.children-visible {display:flex;}.group-container.svelte-148uwot .row {display:flex;flex-direction:row;}.group-container.svelte-148uwot .row.group {position:sticky;top:50px;height:32px;z-index:6;background-color:#272727;font-size:1.2em;}.group-container.svelte-148uwot .row.group > .label {margin-top:8px;}.group-container.svelte-148uwot .row.test {position:sticky;display:flex;align-items:center;top:82px;height:20px;z-index:5;background-color:#272727;}.group-container.svelte-148uwot .row.scenario {position:sticky;top:102px;height:18px;z-index:4;background-color:#272727;}.group-container.svelte-148uwot .row.dataset {position:sticky;top:120px;height:18px;z-index:3;background-color:#272727;}.group-container.svelte-148uwot .row.predicate {position:sticky;top:138px;height:18px;z-index:2;background-color:#272727;}.group-container.svelte-148uwot .row.placeholder {height:18px;}.group-container.svelte-148uwot .row > .label {cursor:pointer;}.group-container.svelte-148uwot .row.scenario,
.group-container.svelte-148uwot .row.dataset,
.group-container.svelte-148uwot .row.predicate {color:#777;}.group-container.svelte-148uwot .bold {font-weight:700;color:#bbb;}.summary-bar-row.svelte-148uwot {display:flex;flex-direction:row;align-items:baseline;align-self:flex-start;margin:2.6rem 0;opacity:1;}.bar-container.svelte-148uwot {display:flex;flex-direction:row;width:15rem;height:0.8rem;}.bar.svelte-148uwot {height:0.8rem;}.bar.gray.svelte-148uwot {background-color:#777;}.summary-label.svelte-148uwot {margin-left:0.8rem;color:#fff;}.sep.svelte-148uwot {color:#777;}`};function Au(e,t){le(t,!1),pe(e,Ku);let r=U(t,"viewModel",8),n,i=H([]),a=H();const l=pt();function d(J,ee){ee.scenarioReport?.checkScenario?.spec?(n=ee.scenarioReport,E(i,[{key:"show-trace-view",displayText:"Open Scenario in Trace View"}]),E(a,J)):(n=void 0,E(i,[]),E(a,void 0))}function p(){E(a,void 0)}function m(J){E(a,void 0);const ee=J.detail;ee==="show-trace-view"?l("command",{cmd:"show-trace-view-with-scenario",scenarioSpec:n?.checkScenario?.spec,scenarioKind:"check"}):console.error(`ERROR: Unhandled context menu command '${ee}'`)}Ce();var A=Fu(),x=g(A),I=g(x),P=g(I);{var q=J=>{var ee=Cu(),ie=W(ee),de=R(ie,2),fe=R(de,2),_e=R(fe,2);O(()=>{Be(ie,`width: ${z(r()),_$1(()=>r().percents[0])??""}%;`),Be(de,`width: ${z(r()),_$1(()=>r().percents[1])??""}%;`),Be(fe,`width: ${z(r()),_$1(()=>r().percents[2])??""}%;`),Be(_e,`width: ${z(r()),_$1(()=>r().percents[3])??""}%;`)}),M(J,ee)},F=J=>{var ee=$u();M(J,ee)};N(P,J=>{z(r()),_$1(()=>r().total>0)?J(q):J(F,!1)})}var L=R(I,2),Y=g(L);{var j=J=>{var ee=Iu();M(J,ee)},Z=J=>{var ee=we(),ie=W(ee);{var de=_e=>{var Re=Du(),Qe=g(Re);O(()=>B(Qe,`${z(r()),_$1(()=>r().total)??""} total passed`)),M(_e,Re)},fe=_e=>{var Re=Nu(),Qe=W(Re),Ar=g(Qe),Os=R(Qe,2);{var ji=Le=>{var ne=Tu(),ae=R(W(ne),2),$e=g(ae);O(()=>B($e,`${z(r()),_$1(()=>r().passed)??""} passed`)),M(Le,ne)};N(Os,Le=>{z(r()),_$1(()=>r().passed)&&Le(ji)})}var Ui=R(Os,2);{var hi=Le=>{var ne=zu(),ae=R(W(ne),2),$e=g(ae);O(()=>B($e,`${z(r()),_$1(()=>r().failed)??""} failed`)),M(Le,ne)};N(Ui,Le=>{z(r()),_$1(()=>r().failed)&&Le(hi)})}var ca=R(Ui,2);{var Ue=Le=>{var ne=Pu(),ae=R(W(ne),2);{var $e=Ke=>{var bt=Vu(),bs=g(bt);O(()=>B(bs,`${z(r()),_$1(()=>r().errors)??""} errors`)),M(Ke,bt)},Je=Ke=>{var bt=Eu(),bs=g(bt);O(()=>B(bs,`${z(r()),_$1(()=>r().errors)??""} error`)),M(Ke,bt)};N(ae,Ke=>{z(r()),_$1(()=>r().errors>1)?Ke($e):Ke(Je,!1)})}M(Le,ne)};N(ca,Le=>{z(r()),_$1(()=>r().errors)&&Le(Ue)})}var ke=R(ca,2);{var qe=Le=>{var ne=Lu(),ae=R(W(ne),2),$e=g(ae);O(()=>B($e,`${z(r()),_$1(()=>r().skipped)??""} skipped`)),M(Le,ne)};N(ke,Le=>{z(r()),_$1(()=>r().skipped)&&Le(qe)})}O(()=>B(Ar,`${z(r()),_$1(()=>r().total)??""} total`)),M(_e,Re)};N(ie,_e=>{z(r()),_$1(()=>r().total===r().passed)?_e(de):_e(fe,!1)},!0)}M(J,ee)};N(Y,J=>{z(r()),_$1(()=>r().total===0)?J(j):J(Z,!1)})}var X=R(x,2);Ie(X,5,()=>(z(r()),_$1(()=>r().groups)),Ve,(J,ee)=>{var ie=qu(),de=g(ie),fe=g(de),_e=g(fe),Re=R(de,2);Ie(Re,1,()=>(f$1(ee),_$1(()=>f$1(ee).tests)),Ve,(Qe,Ar)=>{Xn(Qe,{get viewModel(){return f$1(Ar)},onShowContextMenu:d})}),O(()=>B(_e,(f$1(ee),_$1(()=>f$1(ee).name)))),M(J,ie)});var Q=R(X,2);hs(Q,{get items(){return f$1(i)},get initialEvent(){return f$1(a)},$$events:{"item-selected":m,clickout:p}}),M(e,A),ce()}var Bu=V('<div class="bar striped svelte-st0o1s"></div>'),Ou=V('<div class="bar bucket-bg-0 svelte-st0o1s"></div> <div class="bar bucket-bg-1 svelte-st0o1s"></div> <div class="bar bucket-bg-2 svelte-st0o1s"></div> <div class="bar bucket-bg-3 svelte-st0o1s"></div> <div class="bar bucket-bg-4 svelte-st0o1s"></div> <div class="bar bucket-bg-5 svelte-st0o1s"></div>',1),ju=V('<div class="subtitle svelte-st0o1s"><!></div>'),Gu=V('<div class="annotations svelte-st0o1s"><!></div>'),Uu=V('<div class="summary-row svelte-st0o1s"><div class="bar-container svelte-st0o1s"><!></div> <div class="title-container svelte-st0o1s"><div class="title-part svelte-st0o1s"><div class="title svelte-st0o1s"><!></div> <!> <!></div></div></div>');const Wu={hash:"svelte-st0o1s",code:".summary-row.svelte-st0o1s {display:flex;flex-direction:row;flex:0 0 auto;align-items:flex-end;margin:0.2rem 0;opacity:0.8;}.summary-row.svelte-st0o1s:hover {opacity:1;}.bar-container.svelte-st0o1s {display:flex;flex-direction:row;width:15rem;height:0.8rem;margin-bottom:0.25rem;cursor:pointer;}.bar.svelte-st0o1s {height:0.8rem;}.bar.striped.svelte-st0o1s {width:100%;background:repeating-linear-gradient(-45deg, goldenrod, goldenrod 0.4rem, darkgoldenrod 0.4rem, darkgoldenrod 1rem);}.title-container.svelte-st0o1s {display:flex;flex-direction:column;margin-left:0.8rem;}.title-part.svelte-st0o1s {display:flex;flex-direction:row;align-items:baseline;}.title.svelte-st0o1s {color:#fff;cursor:pointer;}.subtitle.svelte-st0o1s {font-size:0.8em;margin-left:0.6rem;color:#aaa;cursor:pointer;}.annotations.svelte-st0o1s {font-size:0.8em;margin-left:0.3rem;color:#aaa;}.annotations.svelte-st0o1s .annotation {margin:0 0.3rem;padding:0.1rem 0.3rem;background-color:#1c1c1c;border:0.5px solid #555;border-radius:0.4rem;}"};function Yu(e,t){le(t,!1),pe(e,Wu);let r=U(t,"viewModel",8);const n=r().diffPercentByBucket,i=pt();function a(){r().itemKey&&i("command",{cmd:"show-comparison-detail",summaryRow:r()})}function l(X){r().groupSummary?.root.kind==="scenario"&&i("show-context-menu",{kind:"scenario",scenario:r().groupSummary?.root,clickEvent:X})}Ce();var d=Uu(),p=g(d),m=g(p);{var A=X=>{var Q=Bu();M(X,Q)},x=X=>{var Q=Ou(),J=W(Q),ee=R(J,2),ie=R(ee,2),de=R(ie,2),fe=R(de,2),_e=R(fe,2);O(()=>{Be(J,`width: ${_$1(()=>n[0])??""}%;`),Be(ee,`width: ${_$1(()=>n[1])??""}%;`),Be(ie,`width: ${_$1(()=>n[2])??""}%;`),Be(de,`width: ${_$1(()=>n[3])??""}%;`),Be(fe,`width: ${_$1(()=>n[4])??""}%;`),Be(_e,`width: ${_$1(()=>n[5])??""}%;`)}),M(X,Q)};N(m,X=>{z(r()),_$1(()=>r().diffPercentByBucket===void 0)?X(A):X(x,!1)})}var I=R(p,2),P=g(I),q=g(P),F=g(q);Te(F,()=>(z(r()),_$1(()=>r().title)));var L=R(q,2);{var Y=X=>{var Q=ju(),J=g(Q);Te(J,()=>(z(r()),_$1(()=>r().subtitle))),be("click",Q,a),M(X,Q)};N(L,X=>{z(r()),_$1(()=>r().subtitle)&&X(Y)})}var j=R(L,2);{var Z=X=>{var Q=Gu(),J=g(Q);Te(J,()=>(z(r()),_$1(()=>r().annotations))),M(X,Q)};N(j,X=>{z(r()),_$1(()=>r().annotations)&&X(Z)})}be("click",p,a),be("click",q,a),be("contextmenu",P,ni(l)),M(e,d),ce()}var Hu=V('<div class="header-count svelte-lq58a5"> </div>'),Xu=V('<div class="section-container svelte-lq58a5"><div><div class="header-bar svelte-lq58a5"></div> <div class="header-title svelte-lq58a5"><!></div> <!></div> <!></div>');const Zu={hash:"svelte-lq58a5",code:".section-container.svelte-lq58a5 {display:flex;flex-direction:column;}.section-container.svelte-lq58a5:not(:last-child) {margin-bottom:1.5rem;}.header-row.svelte-lq58a5 {display:flex;flex-direction:row;align-items:center;margin:0.4rem 0;cursor:pointer;}.header-row.collapsed.svelte-lq58a5 {opacity:0.5;}.header-row.svelte-lq58a5:hover {opacity:0.8;}.header-bar.svelte-lq58a5 {display:flex;width:15rem;height:1px;background-color:#555;}.header-title.svelte-lq58a5 {margin-left:0.8rem;color:#fff;font-size:1.2em;}.header-count.svelte-lq58a5 {margin-left:0.5rem;padding:0.1rem 0.5rem;border-radius:1rem;background-color:rgba(255, 165, 0, 0.7);color:#eee;font-size:0.85em;}"};function Ju(e,t){le(t,!1),pe(e,Zu);const r=()=>ve(l,"$expanded",n),[n,i]=Ge();let a=U(t,"viewModel",8);const l=a().expanded;function d(){l.update(L=>!L)}Ce();var p=Xu(),m=g(p),A=R(g(m),2),x=g(A);Te(x,()=>(z(a()),_$1(()=>a().header.title)));var I=R(A,2);{var P=L=>{var Y=Hu(),j=g(Y);O(()=>B(j,(z(a()),_$1(()=>a().rowsWithDiffs)))),M(L,Y)};N(I,L=>{z(a()),_$1(()=>a().rowsWithDiffs>0)&&L(P)})}var q=R(m,2);{var F=L=>{var Y=we(),j=W(Y);Ie(j,1,()=>(z(a()),_$1(()=>a().rows)),Ve,(Z,X)=>{Yu(Z,{get viewModel(){return f$1(X)},$$events:{command(Q){ot.call(this,t,Q)},"show-context-menu"(Q){ot.call(this,t,Q)}}})}),M(L,Y)};N(q,L=>{r()&&L(F)})}O(()=>Ee(m,1,`header-row ${r()?"expanded":"collapsed"}`,"svelte-lq58a5")),be("click",m,d),M(e,p),ce(),i()}var Qu=V('<div class="section-container svelte-1ewsx3b"><!></div>'),ef=V('<div class="comparison-summary-container svelte-1ewsx3b"><!> <div class="footer svelte-1ewsx3b"></div> <!></div>');const tf={hash:"svelte-1ewsx3b",code:".comparison-summary-container.svelte-1ewsx3b {display:flex;flex-direction:column;padding-top:2rem;}.section-container.svelte-1ewsx3b {display:flex;flex-direction:column;scroll-margin-top:5rem;}.section-container.svelte-1ewsx3b:not(:last-child) {margin-bottom:1.5rem;}.footer.svelte-1ewsx3b {flex:0 0 1rem;}"};function Ms(e,t){le(t,!1),pe(e,tf);const r=()=>ve(f$1(a),"$sections",n),[n,i]=Ge(),a=H();let l=U(t,"viewModel",8),d,p=H([]),m=H();const A=pt();function x(Y){Y.detail?.kind==="scenario"?(d=Y.detail.scenario,E(p,[{key:"show-trace-view",displayText:"Open Scenario in Trace View"}]),E(m,Y.detail.clickEvent)):(d=void 0,E(p,[]),E(m,void 0))}function I(){E(m,void 0)}function P(Y){E(m,void 0);const j=Y.detail;j==="show-trace-view"?A("command",{cmd:"show-trace-view-with-scenario",scenarioSpec:d?.specR,scenarioKind:"comparison"}):console.error(`ERROR: Unhandled context menu command '${j}'`)}je(()=>z(l()),()=>{kt(E(a,l().sections),"$sections",n)}),st(),Ce();var q=ef(),F=g(q);Ie(F,1,r,Ve,(Y,j)=>{var Z=Qu(),X=g(Z);Ju(X,{get viewModel(){return f$1(j)},$$events:{command(Q){ot.call(this,t,Q)},"show-context-menu":x}}),O(()=>yt(Z,"id",(f$1(j),_$1(()=>f$1(j).header.rowKey)))),M(Y,Z)});var L=R(F,4);hs(L,{get items(){return f$1(p)},get initialEvent(){return f$1(m)},$$events:{"item-selected":P,clickout:I}}),M(e,q),ce(),i()}var rf=V('<td class="plot svelte-t7dc3f"><!></td>'),sf=V('<td> </td> <td class="svelte-t7dc3f"><div class="cell svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"></div></div></td> <td class="svelte-t7dc3f"><div class="cell svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"></div></div></td> <td class="svelte-t7dc3f"><div class="cell svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"> </div></div></td> <td class="svelte-t7dc3f"><div class="cell svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"> </div></div></td> <td class="svelte-t7dc3f"><div class="cell svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"> </div></div></td> <td class="svelte-t7dc3f"><div class="cell dim svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"></div></div></td> <td class="svelte-t7dc3f"><div class="cell dim svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"></div></div></td> <!>',1);const nf={hash:"svelte-t7dc3f",code:"td.svelte-t7dc3f {padding:0;height:1.8rem;}.name.svelte-t7dc3f {padding-right:3rem;max-width:20rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.row-header {color:#aaa;}.cell.svelte-t7dc3f {display:flex;width:100%;flex-direction:row;align-items:baseline;font-family:monospace;}.cell.dim.svelte-t7dc3f {color:#777;}.value.svelte-t7dc3f {flex:1;padding-right:0.4rem;text-align:right;}.change.svelte-t7dc3f {flex:1;padding-left:0.4rem;text-align:left;font-size:0.8em;}.plot.svelte-t7dc3f {width:12rem;padding-left:2rem;padding-right:2rem;cursor:pointer;}"};function Rs(e,t){le(t,!1),pe(e,nf);let r=U(t,"viewModel",8);const n=r().datasetClassIndex,i=n!==void 0?`dataset-color-${n}`:"row-header",a=n!==void 0?`dataset-bg-${n}`:"",l=pt();function d(){l("command",{cmd:"show-perf"})}Ce();var p=sf(),m=W(p),A=g(m),x=R(m,2),I=g(x),P=g(I),q=g(P),F=R(x,2),L=g(F),Y=g(L),j=g(Y),Z=R(F,2),X=g(Z),Q=g(X),J=g(Q),ee=R(Q,2),ie=g(ee),de=R(Z,2),fe=g(de),_e=g(fe),Re=g(_e),Qe=R(_e,2),Ar=g(Qe),Os=R(de,2),ji=g(Os),Ui=g(ji),hi=g(Ui),ca=R(Ui,2),Ue=g(ca),ke=R(Os,2),qe=g(ke),Le=g(qe),ne=g(Le),ae=R(ke,2),$e=g(ae),Je=g($e),Ke=g(Je),bt=R(ae,2);{var bs=ge=>{var ue=rf(),De=g(ue);Fs(De,{get viewModel(){return z(r()),_$1(()=>r().dotPlot)},get colorClass(){return a}}),be("click",ue,d),M(ge,ue)};N(bt,ge=>{z(r()),_$1(()=>r().dotPlot)&&ge(bs)})}O(()=>{Ee(m,1,`name ${i}`,"svelte-t7dc3f"),B(A,(z(r()),_$1(()=>r().modelName))),B(q,(z(r()),_$1(()=>r().inputs))),B(j,(z(r()),_$1(()=>r().outputs))),B(J,(z(r()),_$1(()=>r().modelSize))),B(ie,(z(r()),_$1(()=>r().modelSizePctChange))),B(Re,(z(r()),_$1(()=>r().dataSize))),B(Ar,(z(r()),_$1(()=>r().dataSizePctChange))),B(hi,(z(r()),_$1(()=>r().avgTime))),B(Ue,(z(r()),_$1(()=>r().avgTimePctChange))),B(ne,(z(r()),_$1(()=>r().minTime))),B(Ke,(z(r()),_$1(()=>r().maxTime)))}),M(e,p),ce()}var af=V('<table class="header svelte-183yv7e"><thead><tr><th class="svelte-183yv7e"></th><th class="svelte-183yv7e">inputs</th><th class="svelte-183yv7e">outputs</th><th class="svelte-183yv7e">model size (bytes)</th><th class="svelte-183yv7e">data size (bytes)</th><th class="svelte-183yv7e">avg time (ms)</th><th class="dim svelte-183yv7e">min time (ms)</th><th class="dim svelte-183yv7e">max time (ms)</th><th class="svelte-183yv7e"></th></tr></thead><tbody><tr><!></tr><tr><!></tr><tr><!></tr></tbody></table>');const of={hash:"svelte-183yv7e",code:"table.svelte-183yv7e {border-collapse:collapse;}th.svelte-183yv7e {color:#aaa;text-align:left;font-family:Roboto;font-weight:500;}th.dim.svelte-183yv7e {color:#555;}th.svelte-183yv7e:nth-child(2), th.svelte-183yv7e:nth-child(3) {width:6rem;}th.svelte-183yv7e:nth-child(4), th.svelte-183yv7e:nth-child(5) {width:10rem;}th.svelte-183yv7e:nth-child(6) {width:8rem;}th.svelte-183yv7e:nth-child(7), th.svelte-183yv7e:nth-child(8) {width:8rem;}"};function lf(e,t){le(t,!1),pe(e,of);let r=U(t,"viewModel",8);Ce();var n=af(),i=R(g(n)),a=g(i),l=g(a);Rs(l,{get viewModel(){return z(r()),_$1(()=>r().row1)},$$events:{command(x){ot.call(this,t,x)}}});var d=R(a),p=g(d);Rs(p,{get viewModel(){return z(r()),_$1(()=>r().row2)},$$events:{command(x){ot.call(this,t,x)}}});var m=R(d),A=g(m);Rs(A,{get viewModel(){return z(r()),_$1(()=>r().row3)},$$events:{command(x){ot.call(this,t,x)}}}),M(e,n),ce()}var cf=(e,t)=>t.onClick(),df=V('<div><div class="tab-title svelte-1dgb6r4"> </div> <div> </div></div>');const uf={hash:"svelte-1dgb6r4",code:".tab-item.svelte-1dgb6r4 {display:flex;flex-direction:column;padding:0.5rem 3rem 0.3rem 0;cursor:pointer;opacity:0.7;border-bottom:solid 1px transparent;}.tab-item.svelte-1dgb6r4:hover {opacity:1;}.tab-item.selected.svelte-1dgb6r4 {opacity:1;border-bottom:solid 1px #555;}.tab-title.svelte-1dgb6r4 {font-size:1.6rem;font-weight:700;color:#fff;margin-bottom:0.2rem;cursor:pointer;}.tab-subtitle.svelte-1dgb6r4 {font-size:1rem;font-weight:400;}"};function ff(e,t){le(t,!0),pe(e,uf);const r=()=>ve(t.subtitleClass,"$subtitleClass",i),n=()=>ve(t.subtitle,"$subtitle",i),[i,a]=Ge();var l=df();let d;l.__click=[cf,t];var p=g(l),m=g(p),A=R(p,2),x=g(A);O(I=>{d=Ee(l,1,"tab-item svelte-1dgb6r4",null,d,I),B(m,t.title),Ee(A,1,`tab-subtitle ${r()}`,"svelte-1dgb6r4"),B(x,n())},[()=>({selected:t.selected})]),M(e,l),ce(),a()}Pt(["click"]);var vf=V('<div class="tab-bar svelte-6ugrco"></div>');const pf={hash:"svelte-6ugrco",code:".tab-bar.svelte-6ugrco {position:sticky;top:0;display:flex;flex-direction:row;gap:3rem;background-color:#272727;z-index:1000;margin:0 -1rem;padding:0 1rem;box-shadow:0 1rem 0.5rem -0.5rem rgba(0, 0, 0, 0.8);}"};function hf(e,t){le(t,!1),pe(e,pf);const r=()=>ve(l,"$selectedItemId",n),[n,i]=Ge();let a=U(t,"viewModel",8);const l=a().selectedItemId,d=pt();function p(x){a().selectedIndex.set(x)}function m(x){oi(x)||(x.key==="ArrowLeft"?(a().selectedIndex.update(I=>I>0?I-1:I),x.preventDefault()):x.key==="ArrowRight"?(a().selectedIndex.update(I=>I<a().items.length-1?I+1:I),x.preventDefault()):x.key==="ArrowDown"&&(d("command",{cmd:"enter-tab",itemId:r()}),x.preventDefault()))}Ce();var A=vf();be("keydown",Ir,m),Ie(A,5,()=>(z(a()),_$1(()=>a().items)),Ve,(x,I,P)=>{{let q=Pr(()=>(f$1(I),r(),_$1(()=>f$1(I).id===r())));ff(x,{get title(){return f$1(I),_$1(()=>f$1(I).title)},get subtitle(){return f$1(I),_$1(()=>f$1(I).subtitle)},get subtitleClass(){return f$1(I),_$1(()=>f$1(I).subtitleClass)},get selected(){return f$1(q)},onClick:()=>p(P)})}}),M(e,A),ce(),i()}var mf=V('<div class="header-container svelte-3dzbgn"><!></div> <div class="line svelte-3dzbgn"></div>',1),gf=V('<div class="summary-container svelte-3dzbgn"><div class="scroll-container svelte-3dzbgn"><!> <!> <!></div></div>');const bf={hash:"svelte-3dzbgn",code:".summary-container.svelte-3dzbgn {display:flex;flex-direction:column;flex:1;}.scroll-container.svelte-3dzbgn {position:relative;display:flex;flex:1 1 1px;flex-direction:column;padding:0 1rem;overflow:auto;}.header-container.svelte-3dzbgn {margin-bottom:1rem;}.line.svelte-3dzbgn {min-height:1px;margin-bottom:0.5rem;background-color:#555;}"};function wf(e,t){le(t,!1),pe(e,bf);const r=()=>ve(l,"$selectedTabId",n),[n,i]=Ge();let a=U(t,"viewModel",8);const l=a().tabBarViewModel.selectedItemId;Ce();var d=gf(),p=g(d),m=g(p);{var A=F=>{var L=mf(),Y=W(L),j=g(Y);lf(j,{get viewModel(){return z(a()),_$1(()=>a().statsTableViewModel)},$$events:{command(Z){ot.call(this,t,Z)}}}),M(F,L)};N(m,F=>{z(a()),_$1(()=>a().statsTableViewModel)&&F(A)})}var x=R(m,2);hf(x,{get viewModel(){return z(a()),_$1(()=>a().tabBarViewModel)},$$events:{command(F){ot.call(this,t,F)}}});var I=R(x,2);{var P=F=>{Au(F,{get viewModel(){return z(a()),_$1(()=>a().checkSummaryViewModel)},$$events:{command(L){ot.call(this,t,L)}}})},q=F=>{var L=we(),Y=W(L);{var j=X=>{Ms(X,{get viewModel(){return z(a()),_$1(()=>a().comparisonViewsSummaryViewModel)},$$events:{command(Q){ot.call(this,t,Q)}}})},Z=X=>{var Q=we(),J=W(Q);{var ee=de=>{Ms(de,{get viewModel(){return z(a()),_$1(()=>a().comparisonsByScenarioSummaryViewModel)},$$events:{command(fe){ot.call(this,t,fe)}}})},ie=de=>{var fe=we(),_e=W(fe);{var Re=Qe=>{Ms(Qe,{get viewModel(){return z(a()),_$1(()=>a().comparisonsByDatasetSummaryViewModel)},$$events:{command(Ar){ot.call(this,t,Ar)}}})};N(_e,Qe=>{r()==="comps-by-dataset"&&Qe(Re)},!0)}M(de,fe)};N(J,de=>{r()==="comps-by-scenario"?de(ee):de(ie,!1)},!0)}M(X,Q)};N(Y,X=>{r()==="comp-views"?X(j):X(Z,!1)},!0)}M(F,L)};N(I,F=>{r()==="checks"?F(P):F(q,!1)})}M(e,d),ce(),i()}var _f=V("<option><!></option>"),xf=V('<select role="combobox"></select>');function Gr(e,t){le(t,!1);const r=()=>ve(d,"$selectedValue",n),[n,i]=Ge();let a=U(t,"viewModel",8),l=U(t,"ariaLabel",8,void 0);const d=a().selectedValue,p=ze(d);function m(){a().onUserChange?.(ze(d))}Ce();var A=xf();O(()=>{r(),Rn(()=>{l(),a()})}),Ie(A,5,()=>(z(a()),_$1(()=>a().options)),Ve,(x,I)=>{var P=_f(),q=g(P);Te(q,()=>(f$1(I),_$1(()=>f$1(I).label)));var F={};O(()=>{P.disabled=(f$1(I),_$1(()=>f$1(I).options.disabled===!0)),yt(P,"hidden",(f$1(I),_$1(()=>f$1(I).options.hidden===!0))),ri(P,(f$1(I),_$1(()=>f$1(I).value===p))),F!==(F=(f$1(I),_$1(()=>f$1(I).value)))&&(P.value=(P.__value=(f$1(I),_$1(()=>f$1(I).value)))??"")}),M(x,P)}),O(()=>yt(A,"aria-label",l())),Kn(A,r,x=>ir(d,x)),be("change",A,m),M(e,A),ce(),i()}var yf=V("<div></div>"),kf=V('<div class="trace-points svelte-zv717u"></div>'),Sf=V('<div><div class="trace-var-name-container svelte-zv717u"><div class="trace-var-name svelte-zv717u"> </div></div> <!></div>');const Mf={hash:"svelte-zv717u",code:".trace-row.svelte-zv717u {display:flex;flex-direction:row;}.trace-var-name-container.svelte-zv717u {display:flex;flex-wrap:nowrap;font-size:10px;color:#fff;width:250px;max-width:250px;margin-right:10px;}.trace-var-name.svelte-zv717u {display:flex;flex-wrap:nowrap;font-size:10px;color:#fff;white-space:nowrap;overflow:hidden;z-index:1000;}.trace-var-name.svelte-zv717u:hover {overflow:unset;background-color:#222;}.trace-points.svelte-zv717u {display:flex;flex-direction:row;align-items:center;gap:2px;}.trace-point.svelte-zv717u {width:6px;height:6px;}.trace-point.empty.svelte-zv717u {width:4px;height:4px;background-color:unset !important;border:solid 1px #aaa;}.trace-point.selected.svelte-zv717u {border:solid 2px #4a9eff;box-sizing:border-box;}"};function Rf(e,t){le(t,!1),pe(e,Mf);let r=U(t,"viewModel",8),n=U(t,"selectedPointIndex",8,void 0);const i=pt();function a(q,F){q.diffPoint&&i("show-tooltip",{eventX:F.clientX,eventY:F.clientY,datasetKey:r().datasetKey,varName:r().varName,diffPoint:q.diffPoint})}function l(){i("hide-tooltip")}function d(q){i("select",{pointIndex:q})}Ce();var p=Sf();let m;var A=g(p),x=g(A),I=g(x),P=R(A,2);Fr(P,{children:(q,F)=>{var L=kf();Ie(L,5,()=>(z(r()),_$1(()=>r().points)),Ve,(Y,j,Z)=>{var X=yf();let Q;O(J=>{Q=Ee(X,1,"trace-point svelte-zv717u",null,Q,J),Be(X,`background-color: ${f$1(j),_$1(()=>f$1(j).color)??""}`)},[()=>({empty:f$1(j).hasDiff===void 0,selected:n()===Z})]),be("mouseover",X,J=>a(f$1(j),J)),be("mouseleave",X,l),be("click",X,()=>d(Z)),M(Y,X)}),M(q,L)},$$slots:{default:!0}}),O(q=>{m=Ee(p,1,"trace-row svelte-zv717u",null,m,q),yt(p,"data-var-name",(z(r()),_$1(()=>r().varName))),B(I,(z(r()),_$1(()=>r().varName)))},[()=>({selected:n()!==void 0})]),M(e,p),ce()}var Cf=V('<div class="loading svelte-17ybi2h"></div>'),$f=V('<div class="error svelte-17ybi2h"> </div>'),If=V('<div class="trace-tooltip svelte-17ybi2h"><div class="tooltip-header svelte-17ybi2h"><div class="tooltip-title svelte-17ybi2h"> </div></div> <div class="tooltip-data svelte-17ybi2h"><div class="data-point svelte-17ybi2h"><span class="data-label svelte-17ybi2h">Time:</span> <span class="data-value svelte-17ybi2h"> </span></div> <div class="data-point svelte-17ybi2h"><span class="data-label svelte-17ybi2h">Value 1:</span> <span class="data-value svelte-17ybi2h"> </span></div> <div class="data-point svelte-17ybi2h"><span class="data-label svelte-17ybi2h">Value 2:</span> <span class="data-value svelte-17ybi2h"> </span></div></div> <div class="tooltip-graph svelte-17ybi2h"><!></div></div>');const Df={hash:"svelte-17ybi2h",code:`.trace-tooltip.svelte-17ybi2h {position:absolute;display:flex;flex-direction:column;width:400px;height:300px;padding:12px;background-color:#2a2a2a;border:1px solid #555;border-radius:8px;box-shadow:0 4px 12px rgba(0, 0, 0, 0.3);font-family:inherit;z-index:1000;}.tooltip-header.svelte-17ybi2h {margin-bottom:8px;}.tooltip-title.svelte-17ybi2h {margin-bottom:4px;font-size:14px;font-weight:bold;color:#fff;}.tooltip-data.svelte-17ybi2h {display:flex;flex-direction:column;gap:4px;margin-bottom:12px;}.data-point.svelte-17ybi2h {display:flex;justify-content:flex-start;font-size:12px;}.data-label.svelte-17ybi2h {width:50px;margin-right:6px;color:#ccc;text-align:right;}.data-value.svelte-17ybi2h {color:#fff;font-family:monospace;}.tooltip-graph.svelte-17ybi2h {flex:1;position:relative;min-height:200px;display:flex;align-items:center;justify-content:center;}.loading.svelte-17ybi2h,
.error.svelte-17ybi2h {color:#ccc;font-size:12px;text-align:center;}.error.svelte-17ybi2h {color:#ff6b6b;}`};function Tf(e,t){le(t,!1),pe(e,Df);const r=()=>ve(f$1(p),"$content",n),[n,i]=Ge();let a=U(t,"viewModel",8,void 0),l=U(t,"x",8,0),d=U(t,"y",8,0),p=H(a().content),m=H();je(()=>(z(a()),f$1(m)),()=>{a()?.requestKey!==f$1(m)?.requestKey&&(f$1(m)?.clearData(),E(m,a()),kt(E(p,a().content),"$content",n),a().requestData())}),st(),Ce();var A=If(),x=g(A),I=g(x),P=g(I),q=R(x,2),F=g(q),L=R(g(F),2),Y=g(L),j=R(F,2),Z=R(g(j),2),X=g(Z),Q=R(j,2),J=R(g(Q),2),ee=g(J),ie=R(q,2),de=g(ie);{var fe=Re=>{var Qe=Cf();M(Re,Qe)},_e=Re=>{var Qe=we(),Ar=W(Qe);{var Os=Ui=>{var hi=$f(),ca=g(hi);O(()=>B(ca,`Error: ${r(),_$1(()=>r().error)??""}`)),M(Ui,hi)},ji=Ui=>{var hi=we(),ca=W(hi);{var Ue=ke=>{ms$1(ke,{get viewModel(){return r(),_$1(()=>r().comparisonGraphViewModel)}})};N(ca,ke=>{r(),_$1(()=>r()?.comparisonGraphViewModel)&&ke(Ue)},!0)}M(Ui,hi)};N(Ar,Ui=>{r(),_$1(()=>r()?.error)?Ui(Os):Ui(ji,!1)},!0)}M(Re,Qe)};N(de,Re=>{r(),_$1(()=>r()?.loading)?Re(fe):Re(_e,!1)})}O((Re,Qe)=>{Be(A,`left: ${l()??""}px; top: ${d()??""}px;`),B(P,(z(a()),_$1(()=>a().varName))),B(Y,(z(a()),_$1(()=>a().diffPoint.time))),B(X,Re),B(ee,Qe)},[()=>(z(a()),_$1(()=>a().diffPoint.valueL.toFixed(6))),()=>(z(a()),_$1(()=>a().diffPoint.valueR.toFixed(6)))]),M(e,A),ce(),i()}var zf=V('<div class="trace-scenario-selector-label svelte-135ht03">File:</div> <input type="file" class="trace-dat-file-chooser svelte-135ht03" id="trace-dat-file" name="trace-dat-file" accept=".dat"/>',1),Vf=V('<div class="trace-scenario-selector-label svelte-135ht03">Scenario:</div> <!>',1),Ef=V("<div> </div>"),Pf=V("<div>No differences detected</div>"),Lf=V('<div class="trace-group svelte-135ht03"><div class="trace-group-title svelte-135ht03"> </div> <!></div>'),Nf=V('<div class="trace-container svelte-135ht03" tabindex="0"><div class="trace-header-container svelte-135ht03"><div class="trace-header-content svelte-135ht03"><div class="trace-source-selector-label svelte-135ht03">Source 1:</div> <!> <!> <div class="trace-source-selector-label svelte-135ht03">Source 2:</div> <!> <div class="trace-scenario-selector-label svelte-135ht03">Scenario:</div> <!></div> <div class="trace-options svelte-135ht03"><label class="trace-checkbox-label svelte-135ht03"><input type="checkbox" class="svelte-135ht03"/> Hide rows with no diffs</label></div></div> <div class="trace-scroll-container svelte-135ht03"><!> <!></div></div>');const qf={hash:"svelte-135ht03",code:`.trace-container.svelte-135ht03 {display:flex;flex-direction:column;flex:1;}.trace-container.svelte-135ht03:focus-within {outline:none;}.trace-header-container.svelte-135ht03 {display:flex;margin:0 -1rem;padding:0 2rem 1rem 2rem;box-shadow:0 1rem 0.5rem -0.5rem rgba(0, 0, 0, 0.5);z-index:1;}.trace-header-content.svelte-135ht03 {display:grid;grid-template-columns:auto auto auto auto;grid-template-rows:24px 24px;align-items:center;gap:0.5rem 0.5rem;}.trace-header-content.svelte-135ht03 select {max-width:300px;}.trace-source-selector-label.svelte-135ht03,
.trace-scenario-selector-label.svelte-135ht03 {text-align:right;}.trace-scenario-selector-label.svelte-135ht03 {margin-left:0.7rem;}.trace-dat-file-chooser.svelte-135ht03 {width:auto;font-family:inherit;font-size:inherit;margin:0;}.trace-options.svelte-135ht03 {margin-top:6px;margin-left:32px;}.trace-checkbox-label.svelte-135ht03 {display:flex;align-items:center;gap:0.5rem;color:#fff;font-size:inherit;cursor:pointer;}.trace-checkbox-label.svelte-135ht03 input[type=checkbox]:where(.svelte-135ht03) {margin:0;}.trace-scroll-container.svelte-135ht03 {display:flex;flex:1 1 1px;flex-direction:column;overflow:auto;padding:2rem 1rem;align-items:flex-start;outline:none;background-color:#3c3c3c;}.trace-group.svelte-135ht03 {display:flex;flex-direction:column;}.trace-group.svelte-135ht03:not(:first-child) {margin-top:20px;}.trace-group-title.svelte-135ht03 {font-size:14px;font-weight:700;color:#fff;margin-bottom:4px;}`};function Ff(e,t){le(t,!1),pe(e,qf);const r=()=>ve(j,"$selectedSource0",P),n=()=>ve(J,"$selectedScenarioSpec0",P),i=()=>ve(ie,"$selectedDatText",P),a=()=>ve(Z,"$selectedSource1",P),l=()=>ve(ee,"$selectedScenarioSpec1",P),d=()=>ve(Re,"$selectedSquareData",P),p=()=>ve(X,"$scenarioSelector0",P),m=()=>ve(Q,"$scenarioSelector1",P),A=()=>ve(fe,"$hideRowsWithNoDiffs",P),x=()=>ve(de,"$statusMessage",P),I=()=>ve(_e,"$filteredGroups",P),[P,q]=Ge();let F=U(t,"viewModel",8);const L=F().sourceSelector0,Y=F().sourceSelector1,j=F().sourceSelector0.selectedValue,Z=F().sourceSelector1.selectedValue,X=F().scenarioSelector0,Q=F().scenarioSelector1,J=F().selectedScenarioSpec0,ee=F().selectedScenarioSpec1,ie=F().datText,de=F().statusMessage,fe=F().hideRowsWithNoDiffs,_e=F().filteredGroups,Re=F().selectedSquareData;let Qe=H(),Ar=H(),Os=H(void 0),ji=H(0),Ui=H(0);const hi=426,ca=326;function Ue(gi,ha,pa){let Ia=gi+2;Ia+hi>window.innerWidth&&(pa!==void 0?Ia=pa-hi-2:Ia=gi-hi-2);const se=6;let Da=ha+se;Da+ca>window.innerHeight&&(Da=ha-ca-se),E(ji,Ia),E(Ui,Da)}function ke(gi){if(gi){const ha=gi.getBoundingClientRect();Ue(ha.right,ha.top,ha.left)}else E(ji,window.innerWidth/2-hi/2),E(Ui,window.innerHeight/2-ca/2)}function qe(gi){const ha=gi.detail.datasetKey,pa=gi.detail.varName,Ia=gi.detail.diffPoint,se=gi.detail.eventX,Da=gi.detail.eventY;Ue(se,Da),E(Os,F().createTooltipViewModel(ha,pa,Ia))}function Le(){f$1(Os)?.clearData(),E(Os,void 0)}function ne(gi){F().handleKeyDown(gi)}function ae(gi,ha,pa){F().selectSquareByIndices(gi,ha,pa)}function $e(gi){const ha=document.querySelector(".trace-scroll-container");if(!ha)return;const pa=ha.getBoundingClientRect(),Ia=gi.getBoundingClientRect();if(!(Ia.top>=pa.top&&Ia.bottom<=pa.bottom)){const se=gi.getBoundingClientRect().top-pa.top+ha.scrollTop,Da=pa.height,Sa=Ia.height,Ma=se-Da/2+Sa/2;ha.scrollTo({top:Ma,behavior:"instant"})}}let Je=H(void 0);je(()=>(f$1(Ar),f$1(Qe),z(F())),()=>{if(f$1(Ar)&&f$1(Ar)[0]){const gi=f$1(Ar)[0],ha=new FileReader;ha.onload=()=>{E(Qe,ha.result),F().datText.set(f$1(Qe))},ha.readAsText(gi)}}),je(()=>(r(),n(),i(),a(),l(),z(F())),()=>{r()&&(n()||i())&&a()&&l()&&F().run()}),je(()=>(d(),z(F()),f$1(Je)),()=>{if(d()){const gi=F().getSelectedSquareInfo();gi&&(E(Os,F().createTooltipViewModel(gi.datasetKey,gi.varName,gi.diffPoint)),clearTimeout(f$1(Je)),E(Je,void 0),setTimeout(()=>{const ha=document.querySelector(".trace-row.selected");ha&&$e(ha);let pa=document.querySelector(".trace-point.selected");pa?ke(pa):E(Je,setTimeout(()=>{pa=document.querySelector(".trace-point.selected"),ke(pa)},300))},0))}}),st(),Ce();var Ke=Nf(),bt=g(Ke),bs=g(bt),ge=R(g(bs),2);Gr(ge,{get viewModel(){return L},ariaLabel:"Source 1"});var ue=R(ge,2);{var De=gi=>{var ha=zf(),pa=R(W(ha),2);dl(pa,()=>f$1(Ar),Ia=>E(Ar,Ia)),M(gi,ha)},Ye=gi=>{var ha=Vf(),pa=R(W(ha),2);Gr(pa,{get viewModel(){return p()},ariaLabel:"Scenario 1"}),M(gi,ha)};N(ue,gi=>{r()==="dat"?gi(De):gi(Ye,!1)})}var mi=R(ue,4);Gr(mi,{get viewModel(){return Y},ariaLabel:"Source 2"});var ws=R(mi,4);Gr(ws,{get viewModel(){return m()},ariaLabel:"Scenario 2"});var pi=R(bs,2),vr=g(pi),Gi=g(vr),ga=R(bt,2),fa=g(ga);{var ya=gi=>{var ha=Ef(),pa=g(ha);O(()=>B(pa,x())),M(gi,ha)},ua=gi=>{var ha=we(),pa=W(ha);{var Ia=Da=>{var Sa=Pf();M(Da,Sa)},se=Da=>{var Sa=we(),Ma=W(Sa);Ie(Ma,1,I,Ve,(Th,th,Ph)=>{var uh=Lf(),oh=g(uh),zh=g(oh),Vh=R(oh,2);Ie(Vh,1,()=>(f$1(th),_$1(()=>f$1(th).rows)),Ve,(jh,yh,Wh)=>{const mp=Pr(()=>(d(),_$1(()=>d()?.groupIndex===Ph&&d()?.rowIndex===Wh?d().pointIndex:void 0)));Rf(jh,{get viewModel(){return f$1(yh)},get selectedPointIndex(){return f$1(mp)},$$events:{"show-tooltip":qe,"hide-tooltip":Le,select:tp=>ae(Ph,Wh,tp.detail.pointIndex)}})}),O(()=>B(zh,(f$1(th),_$1(()=>f$1(th).title)))),M(Th,uh)}),M(Da,Sa)};N(pa,Da=>{I(),_$1(()=>I().length===0)?Da(Ia):Da(se,!1)},!0)}M(gi,ha)};N(fa,gi=>{x()?gi(ya):gi(ua,!1)})}var va=R(fa,2);{var _a=gi=>{Tf(gi,{get viewModel(){return f$1(Os)},get x(){return f$1(ji)},get y(){return f$1(Ui)}})};N(va,gi=>{f$1(Os)&&gi(_a)})}jn(Gi,A,gi=>ir(fe,gi)),be("keydown",Ke,ne),M(e,Ke),ce(),q()}var Kf=V('<div class="loading-container svelte-1nkjba2"></div>'),Af=V('<div class="progress-container svelte-1nkjba2"><div class="progress"> </div></div>'),Bf=V('<div class="popover-overlay svelte-1nkjba2"><div class="popover-container bundle-selector-popover-container svelte-1nkjba2"><!></div></div>'),Of=V('<div class="popover-overlay svelte-1nkjba2"><div class="popover-container filter-popover-container svelte-1nkjba2"><!></div></div>'),jf=V('<div class="app-container svelte-1nkjba2"><!> <!> <!> <!></div>');const Gf={hash:"svelte-1nkjba2",code:".app-container.svelte-1nkjba2 {position:relative;display:flex;flex-direction:column;flex:1;}.loading-container.svelte-1nkjba2 {display:flex;flex-direction:column;flex:1 1 auto;align-items:center;justify-content:center;}.progress-container.svelte-1nkjba2 {display:flex;height:100vh;align-items:center;justify-content:center;font-size:2em;}.popover-overlay.svelte-1nkjba2 {position:absolute;top:0;left:0;width:100%;max-width:min(100%, 100vw);bottom:0;background-color:rgba(0, 0, 0, 0.4);z-index:1000;pointer-events:none;}.popover-container.svelte-1nkjba2 {position:absolute;top:26px;width:500px;height:min(100% - 60px, 600px);background-color:var(--panel-bg);border:1px solid var(--panel-border);border-radius:12px;box-shadow:0 4px 8px rgba(0, 0, 0, 0.5);pointer-events:auto;overflow:hidden;}.bundle-selector-popover-container.svelte-1nkjba2 {left:calc(50% - 250px);width:500px;height:min(100% - 60px, 500px);}.filter-popover-container.svelte-1nkjba2 {right:24px;width:500px;height:min(100% - 60px, 600px);}"};function Uf(e,t){le(t,!1),pe(e,Gf);const r=()=>ve(x,"$zoom",a),n=()=>ve(m,"$checksInProgress",a),i=()=>ve(A,"$progress",a),[a,l]=Ge(),d=H();let p=U(t,"viewModel",8);const m=p().checksInProgress,A=p().progress,x=p().headerViewModel.zoom;let I=H(),P=H(),q=H(),F,L=H("summary"),Y=H(void 0),j=H(!1);const Z=new $a("Roboto Condensed",{weight:400});let X=H(!1);Z.load().then(()=>{E(X,!0)});let Q=H(!1);function J(){E(I,void 0),E(L,"summary")}function ee(hi){hi===f$1(Y)?E(Y,void 0):E(Y,hi)}function ie(){E(Y,void 0)}function de(hi){const ca=f$1(Y),Ue=new CustomEvent("sde-check-bundle",{detail:{side:ca,name:hi.local?.name||hi.remote?.name,url:hi.local?.url||hi.remote?.url}});document.dispatchEvent(Ue)}function fe(){E(j,!f$1(j))}function _e(){E(j,!1)}function Re(hi){const ca=hi.detail,Ue=ca.cmd;switch(Ue){case"show-summary":J();break;case"toggle-bundle-selector":ee(ca.side);break;case"toggle-filters":fe();break;case"enter-tab":if(ca.itemId!=="checks"){let ke;switch(ca.itemId){case"comp-views":ke="views";break;case"comps-by-scenario":ke="by-scenario";break;case"comps-by-dataset":ke="by-dataset";break;default:return}const qe=p().createCompareDetailViewModelForFirstSummaryRow(ke);qe&&(E(I,qe),E(L,"comparison-detail"))}break;case"show-comparison-detail":E(I,p().createCompareDetailViewModelForSummaryRow(ca.summaryRow)),E(L,"comparison-detail");break;case"show-comparison-detail-for-previous":case"show-comparison-detail-for-next":{const ke=Ue==="show-comparison-detail-for-previous"?-1:1,qe=p().createCompareDetailViewModelForSummaryRowWithDelta(ca.kind,ca.summaryRowKey,ke);qe&&(E(I,qe),E(L,"comparison-detail"));break}case"show-perf":f$1(P)||E(P,p().createPerfViewModel()),E(L,"perf");break;case"show-trace-view-with-scenario":E(q,p().createTraceViewModel(ca.scenarioSpec,ca.scenarioKind)),E(L,"trace");break;default:console.error(`ERROR: Unhandled command ${Ue}`);break}}function Qe(hi){if(!oi(hi)&&!(hi.altKey||hi.ctrlKey||hi.metaKey||hi.shiftKey||hi.isComposing))switch(hi.key){case"c":p().headerViewModel.controlsVisible.update(ca=>!ca),hi.preventDefault();break;case"h":J(),hi.preventDefault();break;case"t":f$1(L)!=="trace"&&(E(q,p().createTraceViewModel()),E(L,"trace"),hi.preventDefault());break}}je(()=>r(),()=>{E(d,`--graph-zoom: ${r()}`)}),je(()=>(f$1(X),z(p())),()=>{f$1(X)&&(E(Q,!0),p().runTestSuite())}),st(),Ce();var Ar=we();be("keydown",Ir,Qe);var Os=W(Ar);{var ji=hi=>{var ca=Kf();M(hi,ca)},Ui=hi=>{var ca=jf(),Ue=g(ca);cu(Ue,{get viewModel(){return z(p()),_$1(()=>p().headerViewModel)},$$events:{command:Re}});var ke=R(Ue,2);{var qe=Ke=>{var bt=Af(),bs=g(bt),ge=g(bs);O(()=>B(ge,i())),M(Ke,bt)},Le=Ke=>{var bt=we(),bs=W(bt);{var ge=De=>{Cd(De,{get viewModel(){return f$1(I)},$$events:{command:Re}})},ue=De=>{var Ye=we(),mi=W(Ye);{var ws=vr=>{Zd(vr,{get viewModel(){return F},$$events:{command:Re}})},pi=vr=>{var Gi=we(),ga=W(Gi);{var fa=ua=>{Ff(ua,{get viewModel(){return f$1(q)},$$events:{command:Re}})},ya=ua=>{var va=we(),_a=W(va);{var gi=pa=>{wu(pa,{get viewModel(){return f$1(P)},$$events:{command:Re}})},ha=pa=>{wf(pa,{get viewModel(){return z(p()),_$1(()=>p().summaryViewModel)},$$events:{command:Re}})};N(_a,pa=>{f$1(L)==="perf"?pa(gi):pa(ha,!1)},!0)}M(ua,va)};N(ga,ua=>{f$1(L)==="trace"?ua(fa):ua(ya,!1)},!0)}M(vr,Gi)};N(mi,vr=>{f$1(L)==="freeform"?vr(ws):vr(pi,!1)},!0)}M(De,Ye)};N(bs,De=>{f$1(L)==="comparison-detail"?De(ge):De(ue,!1)},!0)}M(Ke,bt)};N(ke,Ke=>{n()?Ke(qe):Ke(Le,!1)})}var ne=R(ke,2);{var ae=Ke=>{var bt=Bf(),bs=g(bt),ge=g(bs);cc(ge,{get bundleManager(){return z(p()),_$1(()=>p().bundleManager)},get side(){return f$1(Y)},onClose:ie,onSelect:ue=>{de(ue),ie()}}),Ps(bt,ue=>qs?.(ue)),Ct(()=>be("clickout",bt,ie)),M(Ke,bt)};N(ne,Ke=>{f$1(Y)!==void 0&&Ke(ae)})}var $e=R(ne,2);{var Je=Ke=>{var bt=Of(),bs=g(bt),ge=g(bs);Bd(ge,{get viewModel(){return z(p()),_$1(()=>p().filterPopoverViewModel)},onClose:_e,onApplyAndRun:()=>{p().applyFilters(),_e()}}),Ps(bt,ue=>qs?.(ue)),Ct(()=>be("clickout",bt,_e)),M(Ke,bt)};N($e,Ke=>{f$1(j)&&Ke(Je)})}O(()=>Be(ca,f$1(d))),M(hi,ca)};N(Os,hi=>{f$1(Q)?hi(Ui,!1):hi(ji)})}M(e,Ar),ce(),l()}function Wf(e,t){let r=U(t,"appViewModel",8);var n=we(),i=W(n);{var a=l=>{Uf(l,{get viewModel(){return r()}})};N(i,l=>{r()&&l(a)})}M(e,n)}function qi(e,t){const r=localStorage.getItem(e);let n;if(r!==null){const p=parseFloat(r);n=isNaN(p)?t:p}else n=t;let i=n;const{subscribe:a,set:l}=Se(n),d=p=>{i=p,localStorage.setItem(e,p.toString()),l(p)};return{subscribe:a,set:d,update:p=>{d(p(i))}}}function Yf(e,t){const r=localStorage.getItem(e);let n;r!==null?n=r==="1":n=t;let i=n;const{subscribe:a,set:l}=Se(n),d=p=>{i=p,localStorage.setItem(e,p?"1":"0"),l(p)};return{subscribe:a,set:d,update:p=>{d(p(i))}}}function Hf(e,t){const r=localStorage.getItem(e);let n;r!==null?n=r:n=t;let i=n;const{subscribe:a,set:l}=Se(n),d=p=>{i=p,localStorage.setItem(e,p),l(p)};return{subscribe:a,set:d,update:p=>{d(p(i))}}}class Cs{constructor(){this.itemStates=new Map,this.writableOrderedKeys=Se([]),this.orderedKeys=this.writableOrderedKeys}getPinned(t){return xr(t),this.getWritableItemState(t)}getWritableItemState(t){xr(t);let r=this.itemStates.get(t);return r===void 0&&(r=Se(!1),this.itemStates.set(t,r)),r}toggleItemPinned(t){xr(t);const r=this.getWritableItemState(t);ze(r)?(r.set(!1),this.removePinnedItem(t)):(r.set(!0),this.addPinnedItem(t))}addPinnedItem(t){this.writableOrderedKeys.update(r=>(r.push(t),r))}removePinnedItem(t){this.writableOrderedKeys.update(r=>{const n=r.findIndex(i=>i===t);return n>=0&&r.splice(n,1),r})}moveItemToTop(t){xr(t),this.writableOrderedKeys.update(r=>{const n=r.findIndex(i=>i===t);return n>=0&&(r.splice(n,1),r.unshift(t)),r})}setItemOrder(t){t.forEach(xr),this.writableOrderedKeys.set(t)}}function xr(e){if(e.startsWith("pinned_"))throw new Error(`PinnedItemState expects regular keys but got ${e}`)}function Xf(){return{pinnedDatasets:new Cs,pinnedScenarios:new Cs,pinnedFreeformRows:new Cs}}function Zn(e,t,r){const n=[];return e.outputVarL&&e.outputVarR?e.outputVarR.varName!==e.outputVarL.varName&&n.push(qt("warn",`variable renamed, previously '${e.outputVarL.varName}'`)):e.outputVarL!==void 0?n.push(qt("warn",`variable only defined in ${Ut(t,"left")}`)):e.outputVarR!==void 0&&n.push(qt("warn",`variable only defined in ${Ut(r,"right")}`)),n}function Jn(e,t,r){const n=[];if(e.settings.kind==="all-inputs-settings")return[];const i=[],a=[],l=[];for(const m of e.settings.inputs){const A=m.stateL.error?.kind,x=m.stateR.error?.kind,I=A==="unknown-input-setting-group",P=x==="unknown-input-setting-group",q=A==="unknown-input",F=x==="unknown-input",L=A==="invalid-value",Y=x==="invalid-value";if(I||P){const j={requestedName:m.requestedName,kind:"unknown-input-setting-group"};I&&P?i.push(j):I?a.push(j):P&&l.push(j)}if(q||F){const j={requestedName:m.requestedName,kind:"unknown-input"};q&&F?i.push(j):q?a.push(j):F&&l.push(j)}if(L||Y){const j={requestedName:m.requestedName,kind:"invalid-value"};L&&Y?i.push(j):L?a.push(j):Y&&l.push(j)}}function d(m,A){const x=m.filter(I=>I.kind===A).map(I=>`'${I.requestedName}'`);if(x.length!==0)return A==="unknown-input"?`unknown ${x.length===1?"input":"inputs"} ${x.join(", ")}`:A==="unknown-input-setting-group"?`unknown input setting group ${x[0]}`:`value out of range for ${x.join(", ")}`}function p(m){return[d(m,"unknown-input-setting-group"),d(m,"unknown-input"),d(m,"invalid-value")].filter(A=>A!==void 0).join("; ")}if(i.length>0&&n.push(qt("err",`invalid scenario: ${p(i)}`)),a.length>0){const m=`scenario not valid in ${Ut(t,"left")}`;n.push(qt("warn",`${m}: ${p(a)}`))}if(l.length>0){const m=`scenario not valid in ${Ut(r,"right")}`;n.push(qt("warn",`${m}: ${p(l)}`))}return e.settings.settingsDiffer===!0&&n.push(qt("warn","input settings differ between the two models")),n}function qt(e,t){return`<span class="annotation"><span class="${`status-color-${e==="err"?"failed":"warning"}`}">${e==="err"?"":""}</span>&ensp;${t}</span>`}function Zf(e,t,r,n){const i=new Map;for(const a of t){const l=e.scenarios.getScenario(a.s);if(l===void 0)continue;let d,p;switch(r){case"dataset":{const I=e.datasets.getDataset(a.d);if(I===void 0)continue;const P=I.outputVarR||I.outputVarL;d=P.varName,p=P.sourceName;break}case"scenario":{d=l.title,p=l.subtitle;break}default:assertNeverExports$1.assertNever(r)}let m=i.get(d);m===void 0&&(m={title:d,score:0,items:[]},i.set(d,m));const A={title:d,subtitle:p,scenario:l,testSummary:a};m.items.push(A);const x=Qn(A.testSummary,n);m.score+=x||0}return[...i.values()].sort((a,l)=>a.score>l.score?-1:a.score<l.score?1:0)}function Qn(e,t){switch(t){case"max-diff":return e.md;case"avg-diff":return e.ad;case"max-diff-relative":return e.mdb;case"avg-diff-relative":return e.adb;default:assertNeverExports$1.assertNever(t)}}function ea(e,t,r,n,i){const a="max-diff",l=(q,F)=>new Un(e,t,F,r,q),d=e.bundleL.modelSpec.graphSpecs?.find(q=>q.id===n),p=e.bundleR.modelSpec.graphSpecs?.find(q=>q.id===n),m=l(d,"left"),A=l(p,"right"),x=new Set;if(d)for(const q of d.datasets)x.add(q.datasetKey);if(p)for(const q of p.datasets)x.add(q.datasetKey);const I=[];let P=0;if(i.inclusion==="both")for(const q of x){const F=d?.datasets?.find(_e=>_e.datasetKey===q),L=p?.datasets?.find(_e=>_e.datasetKey===q),Y=F?.varName,j=L?.varName,Z=F?.color||"#777",X=L?.color||"#777",Q=F?.label,J=L?.label,ee=i.datasetReports.find(_e=>_e.datasetKey===q);let ie=0;if(ee){if(ee.maxDiff===void 0||ee.maxDiff===0)continue;ie=ee.maxDiff,ie>P&&(P=ie)}const de=`bucket-color-${ci(ie,e.thresholds)}`,fe=new Yn(e,t,void 0,a,"freeform","","",r,q,void 0);I.push({datasetKey:q,nameL:Y,nameR:j,legendColorL:Z,legendColorR:X,legendLabelL:Q,legendLabelR:J,bucketClass:de,maxDiff:ie,detailBoxViewModel:fe,detailBoxVisible:Se(!1)})}return{graphId:n,graphL:m,graphR:A,metadataRows:i.metadataReports,datasetRows:I,maxDiffPct:P}}function Jf(e,t,r){return{kind:"freeform-view",summaryRowKey:e,pretitle:t?.title,title:"Unresolved view",annotations:void 0,relatedListHeader:"",relatedItems:[],graphSections:[],regularDetailRows:Se([]),pinnedDetailRows:Se([]),pinnedItemState:void 0}}function Qf(e,t,r,n,i,a,l,d){const p=ze(i.sortMode),m=[];for(const I of l.rows||[]){const P=[];for(const F of I.boxes){const L={title:F.title,subtitle:F.subtitle,scenario:F.scenario,testSummary:{d:F.dataset.key,s:F.scenario.key,md:0}};P.push(L)}const q=Tr(t,r,n,i,p,"freeform",I.title,I.subtitle,P);m.push(q)}const A=ye(d.orderedKeys,I=>{const P=[];for(const q of I)if(q.startsWith("row")){const F=m.find(L=>L.pinnedItemKey===q);F&&P.push(di(t,r,n,i,p,F))}return P}),x=Se(m);return{kind:"freeform-view",summaryRowKey:e,pretitle:a?.title,title:l.title,subtitle:l.subtitle,annotations:void 0,relatedListHeader:"",relatedItems:[],graphSections:[],regularDetailRows:x,pinnedDetailRows:A,pinnedItemState:d}}function ev(e,t,r,n,i,a,l){const d=t.bundleL.name,p=t.bundleR.name,m=a.root,A=m.outputVarR||m.outputVarL,x=A.varName,I=A.sourceName,P=Zn(m,d,p).join(" "),q=[];function F(X){const Q=X.join('&nbsp;<span class="related-sep">&gt;</span>&nbsp;');q.push(Q)}if(A.relatedItems)for(const X of A.relatedItems)F(X.locationPath);function L(X,Q){for(const J of Q)for(const ee of J.items)if(ee.scenario.key===X)return[J.title,ee]}const Y=ye(i.sortMode,X=>{let Q=Zf(t,a.group.testSummaries,"scenario",X);if(t.reportOptions?.detailRowsForDataset)Q=t.reportOptions.detailRowsForDataset(Q);else{let J;const ee=Q.findIndex(ie=>ie.title==="All inputs");if(ee>=0){const ie=Q.splice(ee,1)[0];J=ie.items.find(de=>{const fe=de.scenario.settings;return fe.kind==="all-inputs-settings"&&fe.position==="at-default"}),Q.unshift(ie)}J&&(J.title="at default",J.subtitle=void 0);for(const ie of Q.slice(1)){for(const de of ie.items)de.title=`${de.subtitle}`,de.subtitle=void 0;ie.items[0]!==J&&ie.items.unshift(J)}}return Q}),j=ye(Y,X=>{const Q=ze(i.sortMode),J=[];for(const ee of X){const ie=Tr(t,r,n,i,Q,"scenarios",ee.title,ee.subtitle,ee.items);J.push(ie)}return J}),Z=ye([Y,j,l.orderedKeys],([X,Q,J])=>{const ee=ze(i.sortMode),ie=[];for(const de of J)if(de.startsWith("row")){const fe=Q.find(_e=>_e.pinnedItemKey===de);fe&&ie.push(di(t,r,n,i,ee,fe))}else{const fe=L(de,X);if(fe){const _e=fe[0],Re=fe[1];ie.push(Tr(t,r,n,i,ee,"scenarios",_e,void 0,[Re]))}}return ie});return{kind:"dataset",summaryRowKey:e,title:x,subtitle:I,annotations:P,relatedListHeader:"Appears in:",relatedItems:q,graphSections:[],regularDetailRows:j,pinnedDetailRows:Z,pinnedItemState:l}}function tv(e,t,r,n,i,a,l,d,p){const m=t.bundleL.name,A=t.bundleR.name,x=a.root,I=Jn(x,m,A).join(" ");let P,q,F,L;d?(P="scenario-view",q=l?.title,F=d.title,L=d.subtitle):(P="scenario",F=x.title,L=x.subtitle);const Y=[];function j(J){const ee=J.join('&nbsp;<span class="related-sep">&gt;</span>&nbsp;');Y.push(ee)}if(x.settings.kind==="input-settings")for(const J of x.settings.inputs){const ee=J.stateR.inputVar;ee?.relatedItem&&j(ee.relatedItem.locationPath)}const Z=ye(i.sortMode,J=>{const ee=a.group.testSummaries;let ie=[];for(const _e of ee){const Re=t.scenarios.getScenario(_e.s);if(Re===void 0)continue;const Qe=t.datasets.getDataset(_e.d);if(Qe===void 0)continue;const Ar=Qe.outputVarR||Qe.outputVarL,Os={title:Ar.varName,subtitle:Ar.sourceName,scenario:Re,testSummary:_e};ie.push({title:"",score:Qn(_e,J)||0,items:[Os]})}ie=ie.sort((_e,Re)=>{const Qe=_e.items[0],Ar=Re.items[0],Os=_e.score,ji=Re.score;if(Os!==ji)return Os>ji?-1:1;{const Ui=Qe.title.toLowerCase(),hi=Ar.title.toLowerCase();return Ui.localeCompare(hi)}}),t.reportOptions?.detailRowsForScenario&&(ie=t.reportOptions.detailRowsForScenario(ie));const de=ze(i.sortMode),fe=[];for(const _e of ie){const Re=Tr(t,r,n,i,de,"datasets",_e.title,_e.subtitle,_e.items);fe.push(Re)}return fe}),X=ye([Z,p.orderedKeys],([J,ee])=>{const ie=ze(i.sortMode),de=_e=>J.find(Re=>Re.items[0].testSummary.d===_e),fe=[];for(const _e of ee){const Re=de(_e);Re&&fe.push(di(t,r,n,i,ie,Re))}return fe});let Q;if(d){const J=a.group.testSummaries;Q=rv(t,r,d,J)}else Q=[];return{kind:P,summaryRowKey:e,pretitle:q,title:F,subtitle:L,annotations:I,relatedListHeader:"Related items:",relatedItems:Y,graphSections:Q,regularDetailRows:Z,pinnedDetailRows:X,pinnedItemState:p}}function rv(e,t,r,n){if(r.rows!==void 0)throw new Error("Graphs section is not yet supported in a freeform view");if(r.graphIds.length===0)return[];if(r.graphOrder==="grouped-by-diffs")return ta(e,t,r.scenario,n,r.graphIds).sections;{const i=e.bundleL.modelSpec.graphSpecs,a=e.bundleR.modelSpec.graphSpecs,l=r.scenario,d=[];for(const p of r.graphIds){const m=i?.find(I=>I.id===p),A=a?.find(I=>I.id===p),x=diffGraphs(m,A,l.key,n);d.push(ea(e,t,l,p,x))}return[{title:"Featured graphs",rows:d}]}}function ta(e,t,r,n,i){const a=[],l=[],d=[],p=[],m=[],A=[],x=e.bundleL.modelSpec.graphSpecs,I=e.bundleR.modelSpec.graphSpecs,P=Array(e.thresholds.length+3).fill(0);for(const Z of i){const X=x?.find(fe=>fe.id===Z),Q=I?.find(fe=>fe.id===Z),J=diffGraphs(X,Q,r.key,n),ee=sv(J),ie=ea(e,t,r,Z,J);let de;switch(J.inclusion){case"right-only":de=1,a.push(ie);break;case"left-only":de=1,l.push(ie);break;case"both":ee>0?(de=ci(ee,e.thresholds),J.metadataReports.length>0?d.push(ie):m.push(ie)):J.metadataReports.length>0?(de=1,p.push(ie)):(de=0,A.push(ie));break;case"neither":de=0,A.push(ie);break;default:zr(J.inclusion)}P[de]++}const q=i.length,F=q-P[0],L=P.map(Z=>Z/q*100),Y=[];function j(Z,X,Q){if(Z.length>0){const J=Q?Z.sort((ee,ie)=>ee.maxDiffPct>ie.maxDiffPct?-1:1):Z;Y.push({title:X,rows:J})}}return j(a,"Added graphs",!1),j(l,"Removed graphs",!1),j(d,"Graphs with metadata and dataset changes",!0),j(p,"Graphs with metadata changes only",!1),j(m,"Graphs with dataset changes only",!0),j(A,"Unchanged graphs",!1),{sections:Y,nonZeroDiffCount:F,diffPercentByBucket:L}}function sv(e){let t=0;for(const r of e.datasetReports)r.maxDiff!==void 0&&r.maxDiff>t&&(t=r.maxDiff);return t}function di(e,t,r,n,i,a){return Tr(e,t,r,n,i,a.kind,a.title,a.subtitle,a.items)}class iv{constructor(t,r,n){this.items=t,this.onTreeChanged=n,this.itemStates={},this.expandStates={};const i=a=>{for(const l of a)if(l.children)i(l.children),this.expandStates[l.key]=!0;else{const d=r[l.key];this.itemStates[l.key]=d!==void 0?d:!0}};i(this.items)}getItemTree(){return{items:this.items,states:this.itemStates}}getCheckboxState(t,r){if(!t.children)return this.itemStates[t.key]===!0?"checked":"unchecked";const n=t.children.map(l=>this.getCheckboxState(l,r)),i=n.filter(l=>l==="checked").length,a=n.filter(l=>l==="unchecked").length;return i===n.length?"checked":a===n.length?"unchecked":"indeterminate"}toggleChecked(t){const r=this.getCheckboxState(t,0)!=="checked";if(t.children){const n=i=>{for(const a of i)a.children?n(a.children):this.itemStates[a.key]=r};n(t.children)}else this.itemStates[t.key]=r;this.onTreeChanged?.({items:this.items,states:this.itemStates})}isExpanded(t,r){return this.expandStates[t.key]??!1}toggleExpanded(t,r=!1){r?this.toggleExpandedIncludingSiblings(t):t.children&&(this.expandStates[t.key]=!this.expandStates[t.key])}toggleExpandedIncludingSiblings(t){const r=this.findParent(t);let n;if(!r)n=this.items;else if(r.children)n=r.children;else return;const i=!this.isExpanded(t,0);for(const a of n)a.children&&(this.expandStates[a.key]=i)}findParent(t){const r=(n,i=null)=>{for(const a of n){if(a===t)return i;if(a.children){const l=r(a.children,a);if(l!==null)return l}}return null};return r(this.items)}}function ss(e,t,r){return new iv(e,t,r)}function is(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):{items:[],states:{}}}catch(t){return console.warn(`Failed to load filter item tree from LocalStorage (${e}):`,t),{items:[],states:{}}}}function fr(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.warn(`Failed to save filter item tree to LocalStorage (${e}):`,r)}}const Cr="sde-check-test-filters",$r="sde-check-comparison-scenario-filters";function nv(e){if(!e)return{filterPopoverViewModel:void 0,skipChecks:[],skipComparisonScenarios:[]};const t=is(Cr),r=t.states||{},n=[],i=x=>{for(const I of x)I.children?i(I.children):r[I.key]===!1&&I.titleParts&&n.push({groupName:I.titleParts.groupName||"",testName:I.titleParts.testName||""})};i(t.items||[]);const a=is($r),l=a.states||{},d=[],p=x=>{for(const I of x)I.children?p(I.children):l[I.key]===!1&&I.titleParts&&d.push({title:I.titleParts.title||"",subtitle:I.titleParts.subtitle})};p(a.items||[]);let m;Object.keys(r).length>0&&(m=ss(t.items||[],r,x=>fr(Cr,x)));let A;return Object.keys(l).length>0&&(A=ss(a.items||[],l,x=>fr($r,x))),{filterPopoverViewModel:{checksPanel:m,comparisonScenariosPanel:A},skipChecks:n,skipComparisonScenarios:d}}function av(e,t,r){const n=ov(t);let i;return r&&(i=lv(e,r)),{checksPanel:n,comparisonScenariosPanel:i}}function ov(e){const t=is(Cr).states||{},r=[],n={};for(const a of e.groups){const l=[];for(const d of a.tests){const p=`${a.name}__${d.name}`;l.push({key:p,titleParts:{groupName:a.name,testName:d.name},label:d.name}),t[p]!==void 0?n[p]=t[p]:n[p]=d.status!=="skipped"}l.length>0&&r.push({key:a.name,label:a.name,children:l})}if(r.length===0)return;const i=ss([{key:"__all_checks",label:"All checks",children:r}],n,a=>fr(Cr,a));return fr(Cr,i.getItemTree()),i}function lv(e,t){const r=is($r).states||{};function n(A,x){return x?`${A}__${x}`:A}function i(A){return{key:n(A.title,A.subtitle),titleParts:{title:A.title,subtitle:A.subtitle},label:A.subtitle?`${A.title} ${A.subtitle}`:A.title}}const a=new Map,l=e.comparison?.scenarios;for(const A of t.testReports){const x=l?.getScenario(A.scenarioKey);if(x){const I=n(x.title,x.subtitle);a.has(I)||a.set(I,{title:x.title,subtitle:x.subtitle,skipped:A.diffReport===void 0})}}const d={};let p=[];if(e.comparison?.reportOptions?.summarySectionsForComparisonsByScenario){const A=comparisonSummaryFromReport(t),x=categorizeComparisonTestSummaries(e.comparison,A.testSummaries,"max-diff").byScenario,I=e.comparison.reportOptions.summarySectionsForComparisonsByScenario(x),P=new Set,q=[],F=[];for(const L of I)if(L.stable===!0){const Y=[];for(const j of L.rows)if(j.groupSummary?.root.kind==="scenario"){const Z=j.groupSummary.root,X=n(Z.title,Z.subtitle);if(!P.has(X)){Y.push(i(Z));const Q=a.get(X);r[X]!==void 0?d[X]=r[X]:d[X]=Q?!Q.skipped:!0,P.add(X)}}Y.length>0&&q.push({key:L.headerText,label:L.headerText,children:Y})}for(const[L,Y]of a)P.has(L)||(F.push(i(Y)),r[L]!==void 0?d[L]=r[L]:d[L]=!Y.skipped,P.add(L));p=[{key:"__all_scenarios",label:"All scenarios",children:[...q,...F.length>0?[{key:"Other scenarios",label:"Other scenarios",children:F}]:[]]}]}else{const A=Array.from(l.getAllScenarios()),x=[];for(const I of A){x.push(i(I));const P=n(I.title,I.subtitle);if(r[P]!==void 0)d[P]=r[P];else{const q=a.get(P),F=q?q.skipped:!0;d[P]=!F}}p=[{key:"__all_scenarios",label:"All scenarios",children:x}]}const m=ss(p,d,A=>fr($r,A));return fr($r,m.getItemTree()),m}function cv(e,t,r,n,i,a,l,d){const p=Se(!1);if(t){const m=ye(l,A=>{const x=[];if(A==="max-diff-relative"||A==="avg-diff-relative"){const I=t.ratioThresholds;x.push("no diff");for(let P=0;P<3;P++)x.push(`ratio &lt; ${I[P]}`);x.push(`ratio &gt;= ${I[2]}`)}else{const I=t.thresholds;x.push("no diff");for(let P=0;P<3;P++)x.push(`diff &lt; ${I[P]}%`);x.push(`diff &gt;= ${I[2]}%`)}return x});return{devMode:e,bundleManager:r,nameL:t.bundleL.name,nameR:t.bundleR.name,thresholds:m,generatedDateString:n,controlsVisible:p,zoom:i,consistentYRange:a,sortMode:l,concurrency:d}}else return{devMode:e,bundleManager:void 0,generatedDateString:n,controlsVisible:p,zoom:i,consistentYRange:a,sortMode:l,concurrency:d}}function Ks(e,t,r,n){const i=r-t;function a(l){return i!==0?(l-t)/(r-t)*100:0}return{values:e,avg:n,points:e.map(l=>a(l)),avgPoint:a(n)}}class dv{constructor(){this.minTime=Number.MAX_VALUE,this.maxTime=0,this.writableRows=Se([]),this.rows=this.writableRows}addRow(t,r){const n=Math.min(t.minTime,r.minTime),i=Math.max(t.maxTime,r.maxTime),a=Math.min(this.minTime,n),l=Math.max(this.maxTime,i);this.minTime=a,this.maxTime=l;function d(A){return Ks(A.values,a,l,A.avg)}const p=ze(this.writableRows);for(const A of p)A.dotPlotL=d(A.dotPlotL),A.dotPlotR=d(A.dotPlotR);function m(A){return Ks(A.allTimes,a,l,A.avgTime)}p.push({num:p.length+1,minTimeL:t.minTime.toFixed(1),avgTimeL:t.avgTime.toFixed(1),maxTimeL:t.maxTime.toFixed(1),minTimeR:r.minTime.toFixed(1),avgTimeR:r.avgTime.toFixed(1),maxTimeR:r.maxTime.toFixed(1),dotPlotL:m(t),dotPlotR:m(r)}),this.writableRows.set(p)}}function uv(){return new dv}let fv=1;class vv{constructor(t,r,n,i){this.dataCoordinator=t,this.scenario=r,this.datasetKey=n,this.predicateReport=i,this.requestKeys=[],this.expectedDataKeys=[],this.resolvedDataKeys=[],this.opConstantRefs=new Map,this.resolvedData=new Map,this.dataRequested=!1,this.dataLoaded=!1,this.baseRequestKey=`check-graph-box::${fv++}`,this.writableContent=Se(void 0),this.content=this.writableContent}requestData(){if(this.dataRequested)return;this.dataRequested=!0,this.expectedDataKeys=[],this.resolvedDataKeys=[],this.requestKeys=[],this.resolvedData.clear(),this.expectedDataKeys.push("primary"),this.requestDataset("primary",this.scenario.spec,this.datasetKey);const t=r=>{const n=this.predicateReport.opRefs.get(r);if(n!==void 0)switch(this.expectedDataKeys.push(r),n.kind){case"constant":this.resolvedDataKeys.push(r),this.opConstantRefs.set(r,n.value);break;case"data":{const i=n.dataRef.scenario.spec,a=n.dataRef.dataset.datasetKey;this.requestDataset(r,i,a);break}default:assertNeverExports$1.assertNever(n)}};t("gt"),t("gte"),t("lt"),t("lte"),t("eq"),t("approx")}clearData(){if(this.dataRequested){if(this.writableContent.set(void 0),!this.dataLoaded){for(const t of this.requestKeys)this.dataCoordinator.cancelRequest(t);this.requestKeys=[],this.resolvedData.clear()}this.dataRequested=!1,this.dataLoaded=!1}}requestDataset(t,r,n){const i=`${this.baseRequestKey}::${t}`;this.requestKeys.push(i),this.dataCoordinator.requestDataset(i,r,n,a=>{this.dataRequested&&(this.resolvedDataKeys.push(t),this.resolvedData.set(t,lr(a)),this.processResponses())})}processResponses(){if(this.resolvedDataKeys.length!==this.expectedDataKeys.length)return;const t=this.resolvedData.get("primary"),r=t.reduce((F,L)=>L.x<F?L.x:F,t[0].x),n=t.reduce((F,L)=>L.x>F?L.x:F,t[0].x),i=this.predicateReport.time;let a,l,d;if(i===void 0)a=r,l=n,d=F=>F>=r&&F<=n;else if(typeof i=="number")a=i,l=i,d=F=>F===r;else if(Array.isArray(i))a=i[0],l=i[1],d=F=>F>=r&&F<=n;else{const F=i,L=[];F.after_excl!==void 0&&(L.push(Y=>Y>F.after_excl),a=F.after_excl),F.after_incl!==void 0&&(L.push(Y=>Y>=F.after_incl),a=F.after_incl),F.before_excl!==void 0&&(L.push(Y=>Y<i.before_excl),l=F.before_excl),F.before_incl!==void 0&&(L.push(Y=>Y<=i.before_incl),l=F.before_incl),a===void 0&&(a=r),l===void 0&&(l=n),d=Y=>{for(const j of L)if(!j(Y))return!1;return!0}}const p=[];p.push({points:t,color:"deepskyblue",style:"normal"});const m=(F,L,Y=0,j)=>{const Z="green";j===void 0&&(j=1);const X=this.opConstantRefs.get(F);if(X!==void 0){a===l?p.push({points:[{x:a,y:X+Y}],color:Z,style:L,lineWidth:j}):p.push({points:[{x:a,y:X+Y},{x:l,y:X+Y}],color:Z,style:L,lineWidth:j});return}const Q=this.resolvedData.get(F);if(Q!==void 0){let J=Q.filter(ee=>d(ee.x));Y!==0&&(J=J.map(ee=>({x:ee.x,y:ee.y+Y}))),p.push({points:J,color:Z,style:L,lineWidth:j})}},A=F=>this.opConstantRefs.has(F)||this.resolvedData.has(F),x=A("gt")||A("gte"),I=A("lt")||A("lte");m("gt",I?"fill-to-next":"fill-above"),m("gte",I?"fill-to-next":"fill-above"),m("lt",x?"normal":"fill-below"),m("lte",x?"normal":"fill-below"),m("eq","normal",0,5);const P=this.predicateReport.tolerance||.1;m("approx","fill-to-next",-P),m("approx","normal",P),m("approx","dashed",0);const q={key:this.baseRequestKey,plots:p,xMin:void 0,xMax:void 0};this.writableContent.set({comparisonGraphViewModel:q}),this.dataLoaded=!0}}function pv(e){switch(e){case"passed":return"";case"failed":return"";case"error":return"";case"skipped":return"";default:return""}}function Kr(e,t,r,n,i,a,l){const d="&ensp;".repeat(2+e*4),p=pv(r),m=`<span class="status-color-${r}">${p}</span>`,A=`${d}${m}&ensp;${n}`;return{rowClasses:`${t} ${r}`,status:r,span:A,childRows:Se([]),expanded:Se(i),graphBoxViewModel:l,onClicked:a}}function ui(e){return`<span class="bold">${e}</span>`}function ra(e,t,r,n,i){const a=r===1?`${r} ${n}`:`${r} ${n}s`;return Kr(e,"placeholder",t,a,!1,i)}function hv(e,t,r,n){const i=[];for(const a of t.predicates){let l;r.spec&&t.checkDataset.datasetKey&&(l=new vv(n,r,t.checkDataset.datasetKey,a));const d=Kr(3,"predicate",a.result.status,predicateMessage(a,ui),!1,()=>{d.expanded.update(p=>!p)},l);i.push(d)}e.childRows.update(()=>i)}function sa(e,t,r){const n=Kr(2,"dataset",e.status,datasetMessage(e,ui),!0,()=>{n.expanded.update(i=>!i)});return hv(n,e,t,r),n}function mv(e,t,r,n){const i=t.datasets.filter(l=>l.status===r),a=[];for(const l of i)a.push(sa(l,t.checkScenario,n));e.childRows.update(l=>{const d=l.findIndex(p=>p.rowClasses.includes("placeholder")&&p.status===r);if(d!==-1){const p=[...l];return p.splice(d,1,...a),p}else return l})}function gv(e,t,r){if(t.datasets.length<=10){const n=[];for(const a of t.datasets)n.push(sa(a,t.checkScenario,r));const i={error:0,failed:1,passed:2,skipped:3};n.sort((a,l)=>i[a.status]-i[l.status]),e.childRows.update(()=>n)}else{let n=function(l,d,p){a.push(ra(2,l,d,p,()=>{mv(e,t,l,r)}))};const i={passed:0,failed:0,error:0,skipped:0};for(const l of t.datasets)i[l.status]++;const a=[];i.error>0&&n("error",i.error,"errored dataset"),i.failed>0&&n("failed",i.failed,"failed dataset"),i.passed>0&&n("passed",i.passed,"passed dataset"),i.skipped>0&&n("skipped",i.skipped,"skipped dataset"),e.childRows.update(()=>a)}}function ia(e,t){let r=!1;const n=Kr(1,"scenario",e.status,scenarioMessage(e,ui),!1,()=>{r||(gv(n,e,t),r=!0),n.expanded.update(i=>!i)});return n.scenarioReport=e,n}function bv(e,t,r,n){const i=t.scenarios.filter(l=>l.status===r),a=[];for(const l of i)a.push(ia(l,n));e.childRows.update(l=>{const d=l.findIndex(p=>p.rowClasses.includes("placeholder")&&p.status===r);if(d!==-1){const p=[...l];return p.splice(d,1,...a),p}else return l})}function wv(e,t,r){if(t.scenarios.length<=10){const n=[];for(const a of t.scenarios)n.push(ia(a,r));const i={error:0,failed:1,passed:2,skipped:3};n.sort((a,l)=>i[a.status]-i[l.status]),e.childRows.update(()=>n)}else{let n=function(l,d,p){a.push(ra(1,l,d,p,()=>{bv(e,t,l,r)}))};const i={passed:0,failed:0,error:0,skipped:0};for(const l of t.scenarios)i[l.status]++;const a=[];i.error>0&&n("error",i.error,"errored scenario"),i.failed>0&&n("failed",i.failed,"failed scenario"),i.passed>0&&n("passed",i.passed,"passed scenario"),i.skipped>0&&n("skipped",i.passed,"skipped scenario"),e.childRows.update(()=>a)}}function _v(e,t){let r=!1;const n=Kr(0,"test",t.status,t.name,!1,()=>{r||(wv(n,t,e),r=!0),n.expanded.update(i=>!i)});return n}function xv(e,t){return{name:t.name,tests:t.tests.map(r=>_v(e,r))}}function yv(e,t){let r=0,n=0,i=0,a=0;for(const p of t.groups)for(const m of p.tests){if(m.scenarios.length===0){a++;continue}for(const A of m.scenarios){if(A.datasets.length===0){i++;continue}for(const x of A.datasets){if(x.predicates.length===0){i++;continue}for(const I of x.predicates)switch(I.result.status){case"passed":r++;break;case"failed":n++;break;case"error":i++;break;case"skipped":a++;break}}}}const l=r+n+i+a;let d;return l>0&&(d=[r/l*100,n/l*100,i/l*100,a/l*100]),{total:l,passed:r,failed:n,errors:i,skipped:a,percents:d,groups:t.groups.map(p=>xv(e,p))}}class kv{constructor(t,r){this.sections=t,this.rowsWithDiffs=r,this.kind="views",this.allRows=ye(t,n=>{const i=[];for(const a of n)i.push(...a.rows);return i}),this.allRows.subscribe(n=>{this.allRowsSnapshot=n})}getAllRowsSnapshot(){return this.allRowsSnapshot}}class na{constructor(t,r,n,i){this.itemKind=t,this.sections=r,this.rowsWithDiffs=n,this.pinnedItemState=i,this.readonlykind="by-item";const a=ye(r,l=>{const d=[];for(const p of l)d.push(...p.rows);return d});this.pinnedRows=ye([a,i.orderedKeys],([l,d])=>{const p=[];for(const m of d){if(m.startsWith("row"))continue;const A=l.find(x=>x.itemKey===m);if(A===void 0)throw new Error(`No regular row found for key=${m}`);p.push({...A,rowKey:`pinned_${A.itemKey}`})}return p}),ye([this.pinnedRows,a],([l,d])=>[...l,...d]).subscribe(l=>{this.allRowsSnapshot=l})}getAllRowsSnapshot(){return this.allRowsSnapshot}toggleItemPinned(t){this.pinnedItemState.toggleItemPinned(t.itemKey)}setReorderedPinnedItems(t){this.pinnedItemState.setItemOrder(t.map(r=>r.itemKey))}}function Sv(e,t,r,n,i=[]){function a(q,F){return i.some(L=>L.title===q&&L.subtitle===F)}function l(q){let F=0;for(const L of q.allGroupSummaries.values())L.root.kind==="scenario"&&a(L.root.title,L.root.subtitle)&&F++;return F}const d=ye(n,q=>categorizeComparisonTestSummaries(e,r,q));let p;e.viewGroups.length>0&&(p=$v(e,d));const m=ye(d,q=>q.byScenario),A=Iv(e,m,t),x=ye(d,q=>q.byDataset),I=Dv(e,x,t),P=ye(m,q=>l(q));return{views:p,byScenario:A,byDataset:I,skippedScenarioCount:P}}function Mv(e,t,r,n){const i=t.scenario;let a,l;if(t.graphOrder==="grouped-by-diffs"){const p=n.group.testSummaries,m=ta(e,void 0,i,p,t.graphIds);a=m.diffPercentByBucket,l=m.nonZeroDiffCount}else a=n.scores?.diffPercentByBucket;const d=fi();return{kind:"views",rowKey:gs(d),itemKey:d,title:t.title,subtitle:t.subtitle,diffPercentByBucket:a,groupSummary:n,viewMetadata:{viewGroup:r,view:t,changedGraphCount:l}}}function Rv(e,t,r,n){const i=[];for(const d of t.rows)for(const p of d.boxes){const m=n.find(A=>A.d===p.dataset.key&&A.s===p.scenario.key);m&&i.push(m)}const a=getScoresForTestSummaries(i,e.thresholds,"max-diff").diffPercentByBucket,l=fi();return{kind:"views",rowKey:gs(l),itemKey:l,title:t.title,subtitle:t.subtitle,diffPercentByBucket:a,viewMetadata:{viewGroup:r,view:t}}}function Cv(e,t,r){let n,i,a,l;const d=e.groupSummary,p=d.root;switch(p.kind){case"dataset":{n="by-dataset";const x=p.outputVarR||p.outputVarL;i=e.title||x.varName,a=e.subtitle||x.sourceName,l=Zn(p,t,r).join(" ");break}case"scenario":n="by-scenario",i=e.title||p.title,a=e.subtitle||p.subtitle,l=Jn(p,t,r).join(" ");break;default:assertNeverExports$1.assertNever(p)}const m=d.group.key,A=gs(m);return{kind:n,rowKey:A,itemKey:m,title:i,subtitle:a,annotations:l,diffPercentByBucket:d.scores?.diffPercentByBucket,groupSummary:d}}function aa(e,t,r,n,i,a){if(t.length===0)return;const l=t.map(m=>Cv(m,r,n)),d=l.filter(m=>Wn(m.diffPercentByBucket)).length;let p;switch(a){case"collapsed":p=!1;break;case"expanded":p=!0;break;default:p=d>0;break}return{header:{kind:e,rowKey:la(),title:i,header:!0},rows:l,rowsWithDiffs:d,expanded:Se(p)}}function oa(e){return ye(e,t=>{const r=t.withoutDiffs?.length||0;return t.allGroupSummaries.size-r})}function $v(e,t){const r=ye(t,a=>{const l=a.byScenario,d=a.allTestSummaries;let p=0;const m=[];for(const A of e.viewGroups){const x={kind:"views",rowKey:la(),title:A.title,header:!0},I=A.views.map(P=>{switch(P.kind){case"view":{let q;if(P.scenario){const F=l.allGroupSummaries.get(P.scenario.key);q=Mv(e,P,A,F)}else q=Rv(e,P,A,d);return Wn(q.diffPercentByBucket)&&p++,q}case"unresolved-view":{p++;const q=fi();return{kind:"views",rowKey:gs(q),itemKey:q,title:"Unresolved view",viewMetadata:{viewGroup:A,view:P}}}default:assertNeverExports$1.assertNever(P)}});m.push({header:x,rows:I,rowsWithDiffs:0,expanded:Se(!0)})}return{viewRowsWithDiffs:p,viewGroupSections:m}}),n=ye(r,a=>a.viewGroupSections),i=ye(r,a=>a.viewRowsWithDiffs);return new kv(n,i)}function Iv(e,t,r){const n=e.bundleL.name,i=e.bundleR.name,a=Ut(n,"left"),l=Ut(i,"right");function d(A,x,I,P){const q=aa("by-scenario",x,n,i,I,P);q&&A.push(q)}function p(A,x,I){const P=x.map(q=>({groupSummary:q}));d(A,P,I,"expanded-if-diffs")}const m=ye(t,A=>{const x=[];if(e.reportOptions?.summarySectionsForComparisonsByScenario){const I=e.reportOptions.summarySectionsForComparisonsByScenario(A);for(const P of I)d(x,P.rows,P.headerText,P.initialState)}else p(x,A.withErrors,"Scenarios with errors"),p(x,A.onlyInLeft,`Scenarios only valid in ${a}`),p(x,A.onlyInRight,`Scenarios only valid in ${l}`),p(x,A.withDiffs,"Scenarios producing differences"),p(x,A.withoutDiffs,"No differences produced by the following scenarios");return x});return new na("scenario",m,oa(t),r.pinnedScenarios)}function Dv(e,t,r){const n=e.bundleL.name,i=e.bundleR.name;function a(p,m,A,x){const I=aa("by-dataset",m,n,i,A,x);I&&p.push(I)}function l(p,m,A){const x=m.map(I=>({groupSummary:I}));a(p,x,A,"expanded-if-diffs")}const d=ye(t,p=>{const m=[];if(e.reportOptions?.summarySectionsForComparisonsByDataset){const A=e.reportOptions.summarySectionsForComparisonsByDataset(p);for(const x of A)a(m,x.rows,x.headerText,x.initialState)}else l(m,p.withErrors,"Datasets with errors"),l(m,p.onlyInLeft,"Removed datasets"),l(m,p.onlyInRight,"Added datasets"),l(m,p.withDiffs,"Datasets with differences"),l(m,p.withoutDiffs,"No differences detected for the following datasets");return m});return new na("dataset",d,oa(t),r.pinnedDatasets)}let Tv=1;function fi(){return`view_${Tv++}`}let zv=1;function la(){return`header_${zv++}`}let Vv=1;function gs(e){return`row_${Vv++}_${e}`}function Ev(e,t,r){function n(Ue,ke=0){return Ue===0?"-":`${Ue<=0?"":"+"}${Ue.toFixed(ke)}`}function i(Ue){return Ue===0?"":`${n(Ue,1)}%`}function a(Ue,ke){return Ue!==0?(ke-Ue)/Ue*100:0}const l=e.bundleL.modelSpec,d=e.bundleR.modelSpec,p=l.inputVars.size,m=d.inputVars.size,A=m-p,x=l.outputVars.size,I=d.outputVars.size,P=I-x,q=l.modelSizeInBytes,F=d.modelSizeInBytes,L=F-q,Y=a(q,F),j=l.dataSizeInBytes,Z=d.dataSizeInBytes,X=Z-j,Q=a(j,Z),J=t.avgTime||0,ee=r.avgTime||0,ie=ee-J,de=a(J,ee),fe=t.minTime,_e=r.minTime,Re=t.maxTime,Qe=r.maxTime,Ar=Math.min(fe,_e),Os=Math.max(Re,Qe);function ji(Ue){return Ks(Ue.allTimes,Ar,Os,Ue.avgTime)}const Ui={modelName:e.bundleL.name,datasetClassIndex:0,inputs:p.toString(),outputs:x.toString(),modelSize:q.toString(),modelSizePctChange:"",dataSize:j.toString(),dataSizePctChange:"",avgTime:J.toFixed(1),avgTimePctChange:"",minTime:fe.toFixed(1),maxTime:Re.toFixed(1),dotPlot:ji(t)},hi={modelName:e.bundleR.name,datasetClassIndex:1,inputs:m.toString(),outputs:I.toString(),modelSize:F.toString(),modelSizePctChange:"",dataSize:Z.toString(),dataSizePctChange:"",avgTime:ee.toFixed(1),avgTimePctChange:"",minTime:_e.toFixed(1),maxTime:Qe.toFixed(1),dotPlot:ji(r)},ca={modelName:"Change",inputs:n(A),outputs:n(P),modelSize:n(L),modelSizePctChange:i(Y),dataSize:n(X),dataSizePctChange:i(Q),avgTime:n(ie,1),avgTimePctChange:i(de),minTime:"",maxTime:""};return{row1:Ui,row2:hi,row3:ca}}class Pv{constructor(t,r){this.items=t,this.selectedIndex=Se(r),this.selectedItem=ye(this.selectedIndex,n=>t[n]),this.selectedItemId=ye(this.selectedItem,n=>n.id)}}function Fi(e,t,r,n,i,a,l=[]){function d(X,Q){return ye([X,Q],([J,ee])=>{if(J.count===0)return ee===0?{subtitle:"all clear",status:"passed"}:{subtitle:`no diffs, but ${ee} skipped ${ee===1?"scenario":"scenarios"}`,status:"warning"};{const ie=J.count===1?J.kind:`${J.kind}s`;return{subtitle:`${J.count} ${ie} with diffs`,status:"warning"}}})}const p=[];function m(X,Q,J){p.push({id:X,title:Q,subtitle:ye(J,ee=>ee.subtitle),subtitleClass:ye(J,ee=>`status-color-${ee.status}`)})}const A=yv(e,t);let x;if(A.total===0)x={subtitle:"no checks",status:"none"};else if(A.failed>0||A.errors>0){const X=[];A.failed>0&&X.push(`${A.failed} failed`),A.errors>0&&(A.errors===1?X.push(`${A.errors} error`):X.push(`${A.errors} errors`)),x={subtitle:X.join(", "),status:"failed"}}else{const X=[];let Q="passed";A.passed>0&&X.push(`${A.passed} passed`),A.skipped>0&&(X.push(`${A.skipped} skipped`),Q="warning"),x={subtitle:X.join(", "),status:Q}}m("checks","Checks",Se(x));let I,P,q,F;if(r&&n){I=Ev(r,n.perfReportL,n.perfReportR);const X=Sv(r,i,n.testSummaries,a,l),Q=X.skippedScenarioCount;if(X.views){P=X.views;const fe=X.views.allRows,_e=P.rowsWithDiffs,Re=ye([fe,_e],([Ar,Os])=>{let ji=0;for(const Ui of Ar){const hi=Ui.viewMetadata?.view;hi?.kind==="view"&&hi.graphOrder==="grouped-by-diffs"&&(ji+=Ui?.viewMetadata?.changedGraphCount||0)}return ji>0?{count:ji,kind:"graph"}:{count:Os,kind:"view"}}),Qe=d(Re,Q);m("comp-views","Comparison views",Qe)}const J=ye(X.byScenario.rowsWithDiffs,fe=>({count:fe,kind:"scenario"}));q=X.byScenario;const ee=d(J,Q);m("comps-by-scenario","Comparisons by scenario",ee),F=X.byDataset;const ie=ye(X.byDataset.rowsWithDiffs,fe=>({count:fe,kind:"dataset"})),de=d(ie,Q);m("comps-by-dataset","Comparisons by dataset",de)}const L=p.findIndex(X=>ze(X.subtitleClass)!=="status-color-passed"),Y=new Pv(p,L>=0?L:0),j=new Map,Z=[...r?.scenarios.getAllScenarios()??[]].find(X=>X.settings.kind==="all-inputs-settings"&&X.settings.position==="at-default")?.key;if(Z)for(const X of n?.testSummaries??[]){const Q=X.s,J=X.d;Q===Z&&j.set(J,X)}return{statsTableViewModel:I,tabBarViewModel:Y,checkSummaryViewModel:A,comparisonSummary:n,comparisonViewsSummaryViewModel:P,comparisonsByScenarioSummaryViewModel:q,comparisonsByDatasetSummaryViewModel:F,baselineTestSummaries:j}}class Ft{constructor(t,r,n={}){this.label=t,this.value=r,this.options=n}}class As{constructor(t,r,n){this.options=t,this.selectedValue=r,this.label=n}}function Lv(e,t){const r="DAT file",n=e.split(`
`),i=new Map;let a="",l=new Map,d=1,p=-1;const m=I=>{const P=I.split("	").map(q=>q.trim());return P.length<2||P[1]!==""?P:[P[0]]},A=()=>{if(a==="")return;const I=Nv(a);i.set(`${t}${I}`,l)},x=I=>parseFloat(I);for(const I of n){const P=m(I);if(P.length===1)A(),a=P[0],l=new Map,p=-1;else if(P.length>1){const q=Math.floor(parseFloat(P[0])),F=x(P[1]);if(Number.isNaN(q))throw new Error(`Time value is NaN at line ${d} in ${r}`);if(Number.isNaN(F))throw new Error(`Value is NaN at line ${d} in ${r} for variable '${a}' at time ${q}`);!Number.isFinite(F)||F<-1e32||q!==p&&(l.set(q,F),p=q)}d++}return A(),i}function Ki(e){return"_"+e.trim().replace(/"/g,"_").replace(/\s+!$/g,"!").replace(/\s/g,"_").replace(/,/g,"_").replace(/-/g,"_").replace(/\./g,"_").replace(/\$/g,"_").replace(/'/g,"_").replace(/&/g,"_").replace(/%/g,"_").replace(/\//g,"_").replace(/\|/g,"_").toLowerCase()}function Nv(e){const t=e.match(/([^[]+)(?:\[([^\]]+)\])?/);if(!t)throw new Error(`Invalid Vensim name: ${e}`);let r=Ki(t[1]);if(t[2]){const n=t[2].split(",").map(i=>Ki(i));r+=`[${n.join(",")}]`}return r}function ns(e){for(let t=0;t<e.length;t++){const r=e[t];for(let n=0;n<r.rows.length;n++){const i=r.rows[n];for(let a=0;a<i.points.length;a++)if(i.points[a].hasDiff===!0)return{groupIndex:t,rowIndex:n,pointIndex:a}}}}function Bs(e){for(let t=e.length-1;t>=0;t--){const r=e[t];for(let n=r.rows.length-1;n>=0;n--){const i=r.rows[n];for(let a=i.points.length-1;a>=0;a--)if(i.points[a].hasDiff===!0)return{groupIndex:t,rowIndex:n,pointIndex:a}}}}function Ai(e,t,r){if(!t)return ns(e);const n=t.groupIndex,i=t.rowIndex,a=t.pointIndex;function l(p,m){return r?.matchOutputVarsOnly===!0?m.isOutputVar&&p.hasDiff===!0:p.hasDiff===!0}for(let p=n;p<e.length;p++){const m=e[p],A=p===n?i+1:0;for(let x=A;x<m.rows.length;x++){const I=m.rows[x],P=I.points[a];if(P&&l(P,I))return{groupIndex:p,rowIndex:x,pointIndex:a}}}const d=Math.max(...e.flatMap(p=>p.rows.map(m=>m.points.length)));for(let p=a+1;p<d;p++)for(let m=0;m<e.length;m++){const A=e[m];for(let x=0;x<A.rows.length;x++){const I=A.rows[x];if(p<I.points.length){const P=I.points[p];if(P&&l(P,I))return{groupIndex:m,rowIndex:x,pointIndex:p}}}}return ns(e)}function qv(e,t){if(!t)return Bs(e);const r=t.groupIndex,n=t.rowIndex,i=t.pointIndex;for(let a=r;a>=0;a--){const l=e[a],d=a===r?n-1:l.rows.length-1;for(let p=d;p>=0;p--){const m=l.rows[p].points[i];if(m&&m.hasDiff===!0)return{groupIndex:a,rowIndex:p,pointIndex:i}}}for(let a=i-1;a>=0;a--)for(let l=e.length-1;l>=0;l--){const d=e[l];for(let p=d.rows.length-1;p>=0;p--){const m=d.rows[p];if(a<m.points.length){const A=m.points[a];if(A&&A.hasDiff===!0)return{groupIndex:l,rowIndex:p,pointIndex:a}}}}return Bs(e)}function Fv(e,t,r){let n;switch(e.key){case"ArrowLeft":e.preventDefault(),n=qv(t,r);break;case"ArrowRight":e.preventDefault(),n=Ai(t,r);break;case"n":e.preventDefault(),n=Ai(t,r,{matchOutputVarsOnly:!0});break;case"Home":e.preventDefault(),n=ns(t);break;case"End":e.preventDefault(),n=Bs(t);break;default:return}return n}let Kv=1;class Av{constructor(t,r,n,i,a,l,d,p,m,A){this.comparisonConfig=t,this.dataCoordinator=r,this.datasetKey=n,this.varName=i,this.datDatasets=a,this.sourceL=l,this.scenarioSpecL=d,this.sourceR=p,this.scenarioSpecR=m,this.diffPoint=A,this.dataRequested=!1,this.dataLoaded=!1,this.requestKey=`trace-tooltip::${Kv++}::${n}`,this.writableContent=Se(void 0),this.content=this.writableContent}requestData(){if(this.dataRequested)return;this.dataRequested=!0,this.writableContent.set({comparisonGraphViewModel:void 0,loading:!0,error:void 0});const t=this.sourceL==="dat"?void 0:this.sourceL,r=this.sourceR,n=[this.datasetKey];this.dataCoordinator.requestDatasetMaps(this.requestKey,t,this.scenarioSpecL,r,this.scenarioSpecR,n,(i,a)=>{if(!this.dataRequested)return;this.sourceL==="dat"&&(i=this.datDatasets);const l=lr(i?.get(this.datasetKey)),d=lr(a?.get(this.datasetKey)),p=[];function m(q,F){p.push({points:q,color:F,style:"normal"})}m(d,"deepskyblue"),m(l,"crimson");let A=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY;function I(q){for(const F of q)F.y<A&&(A=F.y),F.y>x&&(x=F.y)}for(const q of p)I(q.points);const P={key:this.requestKey,plots:p,yMin:A,yMax:x};this.writableContent.set({comparisonGraphViewModel:P,loading:!1,error:void 0}),this.dataLoaded=!0})}clearData(){this.dataRequested&&(this.writableContent.set({comparisonGraphViewModel:void 0,loading:!1,error:void 0}),this.dataLoaded||this.dataCoordinator.cancelRequest(this.requestKey),this.dataRequested=!1,this.dataLoaded=!1)}}class Bv{constructor(t,r,n,i,a){this.comparisonConfig=t,this.dataCoordinator=r,this.running=!1,this.bundleNameL=t.bundleL.name,this.bundleNameR=t.bundleR.name;const l=Se("left");this.sourceSelector0=new As([new Ft(this.bundleNameL,"left"),new Ft(this.bundleNameR,"right"),new Ft("DAT file","dat")],l);const d=Se("right");this.sourceSelector1=new As([new Ft(this.bundleNameR,"right")],d),this.selectedSource0=l,this.selectedSource1=d;const p=categorizeComparisonTestSummaries(t,n,"max-diff").byScenario,[m,A]=Bi("left",this.bundleNameL,p,i,a),[x,I]=Bi("right",this.bundleNameR,p,i,a);this.selectedScenarioSpecUid0=Se(void 0),this.selectedScenarioSpecUid1=Se(void 0),this.scenarioSelector0=ye(this.selectedSource0,P=>{switch(P){case"left":return $s(0,m,this.selectedScenarioSpecUid0);case"right":return $s(0,x,this.selectedScenarioSpecUid0);case"dat":return;default:throw new Error(`Unhandled source ${P}`)}}),this.scenarioSelector1=ye(this.selectedSource1,()=>$s(1,x,this.selectedScenarioSpecUid1)),this.selectedScenarioSpec0=ye([this.selectedSource0,this.selectedScenarioSpecUid0],([P,q])=>{switch(P){case"left":return A.find(F=>F.uid===q);case"right":return I.find(F=>F.uid===q);case"dat":return;default:throw new Error(`Unhandled source ${P}`)}}),this.selectedScenarioSpec1=ye(this.selectedScenarioSpecUid1,P=>I.find(q=>q.uid===P)),this.datText=Se(void 0),this.writableStatusMessage=Se("Loading"),this.statusMessage=this.writableStatusMessage,this.writableGroups=Se([]),this.groups=this.writableGroups,this.hideRowsWithNoDiffs=Se(!0),this.selectedSquare=Se(void 0),this.selectedSquareData=this.selectedSquare,this.filteredGroups=ye([this.groups,this.hideRowsWithNoDiffs],([P,q])=>q?P.map(F=>({...F,rows:F.rows.filter(L=>this.hasRowWithDiffs(L))})).filter(F=>F.rows.length>0):P)}run(){if(this.running)return;this.writableGroups.set([]),this.writableStatusMessage.set("Running comparisons, please wait"),this.running=!0;const t=ze(this.selectedSource0),r=ze(this.selectedSource1);let n;if(t==="dat"){const l=ze(this.datText);if(l===void 0){this.writableStatusMessage.set("Select a DAT file for comparison"),this.running=!1;return}const d=Lv(l,"ModelImpl_");this.datDatasets=d;const p=ze(this.selectedScenarioSpec1);n={kind:"compare-to-ext-data",extData:d,bundleSide:r,scenarioSpec:p}}else{this.datDatasets=void 0;const l=ze(this.selectedScenarioSpec0),d=ze(this.selectedScenarioSpec1);n={kind:"compare-to-bundle",bundleSide0:t,scenarioSpec0:l,bundleSide1:r,scenarioSpec1:d}}const i=0,a=this.comparisonConfig.bundleR.modelSpec;runTrace(a,{onComplete:l=>{const d=jv(a,l,i);if(this.writableGroups.set(d),d.length===0){let p="No comparisons were performed.";t==="dat"?p+=" Check that the DAT file is valid.":p+=" Check that the bundle is configured correctly.",this.writableStatusMessage.set(p)}else this.writableStatusMessage.set(void 0),setTimeout(()=>{const p=ze(this.filteredGroups),m=ns(p);this.selectedSquare.set(m)},0);this.running=!1},onError:l=>{console.error(l),this.writableStatusMessage.set(l.message),this.running=!1}},n)}createTooltipViewModel(t,r,n){const i=ze(this.selectedSource0),a=ze(this.selectedSource1),l=ze(this.selectedScenarioSpec0),d=ze(this.selectedScenarioSpec1);return new Av(this.comparisonConfig,this.dataCoordinator,t,r,this.datDatasets,i,l,a,d,n)}hasRowWithDiffs(t){return t.points.some(r=>r.hasDiff===!0)}handleKeyDown(t){const r=ze(this.filteredGroups),n=ze(this.selectedSquare),i=Fv(t,r,n);i&&this.selectedSquare.set(i)}selectSquareByIndices(t,r,n){this.selectedSquare.set({groupIndex:t,rowIndex:r,pointIndex:n})}getSelectedSquareInfo(){const t=ze(this.selectedSquare);if(!t)return;const r=ze(this.filteredGroups),{groupIndex:n,rowIndex:i,pointIndex:a}=t,l=r[n]?.rows[i],d=l?.points[a];if(d?.diffPoint)return{datasetKey:l.datasetKey,varName:l.varName,diffPoint:d.diffPoint}}}function Ov(e,t,r,n,i){return new Bv(e,t,r,n,i)}function jv(e,t,r){const n=e.implVars||new Map,i=e.implVarGroups||[];if(n.size===0||i.length===0)return console.error("ERROR: No impl vars or groups defined in model spec; trace report will be empty"),[];let a,l;for(const A of t.datasetReports.values())if(A.points.size>1){let x=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY;for(const P of A.points.keys())x=Math.min(P,x),I=Math.max(P,I);a=x,l=I;break}if(a===void 0||l===void 0)return console.error("ERROR: Failed to determine min/max times; trace report will be empty"),[];function d(A,x){const I=A.points.get(x);let P,q;if(I){const F=Math.abs(I.valueR-I.valueL);F===0?(P=!1,q="green"):(P=!0,(I.valueL!==0?Math.abs(F/I.valueL):1)*100<r?q="orange":q="crimson")}else P=void 0,q="gray";return{hasDiff:P,color:q,diffPoint:I}}function p(A,x,I){const P=[];switch(A){case"initConstants":case"initLevels":P.push(d(I,a));break;case"evalLevels":P.push({color:"gray"});for(let L=a+1;L<=l;L++)P.push(d(I,L));break;default:for(let L=a;L<=l;L++)P.push(d(I,L));break}const q=I.datasetKey.replace("ModelImpl","Model"),F=e.outputVars.has(q);return{datasetKey:I.datasetKey,varName:x.varName,isOutputVar:F,points:P}}const m=[];for(const A of i){const x=[];for(const I of A.datasetKeys){const P=n.get(I);if(P===void 0){console.warn(`WARNING: No impl var found for key=${I}, skipping trace row`);continue}const q=t.datasetReports.get(I);if(q===void 0){console.warn(`WARNING: No dataset report found for key=${I}, skipping trace row`);continue}x.push(p(A.fn,P,q))}m.push({title:A.title,rows:x})}return m}function Bi(e,t,r,n,i){const a=[],l=[];function d(A){const x=A.root,I=e==="right"?x.specR:x.specL;if(!I)return;l.push(I);let P=x.title;x.subtitle&&(P+=` ${x.subtitle}`),a.push(new Ft(P,I.uid))}function p(A,x,I){A.length!==0&&(a.push(new Ft(x,I,{disabled:!0})),A.forEach(d))}if(n&&i){l.push(n);const A=i==="check"?"check test":"comparison";a.push(new Ft(`Selected scenario from ${A}`,n.uid))}const m=e==="left"?r.onlyInLeft:r.onlyInRight;return p(m,`--- Scenarios only valid in ${t}`,"___only_in_side"),p(r.withDiffs,"--- Scenarios producing differences","___with_diffs"),p(r.withoutDiffs,"--- Scenarios NOT producing differences","___without_diffs"),[a,l]}function $s(e,t,r){let n;if(e===1&&t[0]?.label.startsWith("Selected scenario from"))n=t[0].value;else for(const a of t)if(a.label==="All inputs at default"){n=a.value;break}r.set(n);const i=e===0?"Scenario 1":"Scenario 2";return new As(t,r,i)}class Gv{constructor(t,r,n){this.appModel=t,this.bundleManager=r,this.suiteSummary=n,this.writableChecksInProgress=Se(!0),this.checksInProgress=this.writableChecksInProgress,this.writableProgress=Se("0%"),this.progress=this.writableProgress;const i=qi("sde-check-graph-zoom",1),a=Yf("sde-check-consistent-y-range",!1),l=Hf("sde-check-sort-mode","max-diff"),d=qi("sde-check-concurrency",1);this.userPrefs={zoom:i,consistentYRange:a,sortMode:l};const p=this.suiteSummary===void 0;this.writableGeneratedDateString=Se(void 0),this.headerViewModel=cv(p,t.config.comparison,r,this.writableGeneratedDateString,i,a,l,d),this.pinnedItemStates=Xf();const m=nv(p);this.skipChecks=m.skipChecks,this.skipComparisonScenarios=m.skipComparisonScenarios,this.filterPopoverViewModel=m.filterPopoverViewModel}runTestSuite(){this.cancelRunSuite&&(this.cancelRunSuite(),this.cancelRunSuite=void 0),this.writableChecksInProgress.set(!0),this.writableProgress.set("0%");const t=this.appModel.config.comparison;if(this.suiteSummary){const r=this.appModel.config.check,n=checkReportFromSummary(r,this.suiteSummary.checkSummary),i=this.suiteSummary?.comparisonSummary;this.summaryViewModel=Fi(this.appModel.checkDataCoordinator,n,t,i,this.pinnedItemStates,this.userPrefs.sortMode,[]);const a=Oi(this.suiteSummary.date,this.suiteSummary.elapsed);this.writableGeneratedDateString.set(a),this.writableChecksInProgress.set(!1)}else{this.writableGeneratedDateString.set(void 0);const r=performance.now();this.cancelRunSuite=runSuite(this.appModel.config,{onProgress:n=>{this.writableProgress.set(`${Math.round(n*100)}%`)},onComplete:n=>{const i=n.checkReport;let a;n.comparisonReport&&(a=comparisonSummaryFromReport(n.comparisonReport)),this.summaryViewModel=Fi(this.appModel.checkDataCoordinator,i,t,a,this.pinnedItemStates,this.userPrefs.sortMode,this.skipComparisonScenarios),this.filterPopoverViewModel=this.createFilterPopoverViewModelFromReports(i,n.comparisonReport);const l=performance.now()-r,d=Oi(void 0,l);this.writableGeneratedDateString.set(d),this.writableChecksInProgress.set(!1)},onError:n=>{console.error(n)}},{skipChecks:this.skipChecks,skipComparisonScenarios:this.skipComparisonScenarios})}}createCompareDetailViewModelForSummaryRow(t){const r=t.groupSummary,n=t.viewMetadata?.viewGroup,i=t.viewMetadata?.view;return i?.kind==="unresolved-view"?Jf(t.rowKey,n):r!==void 0?r.group.kind==="by-dataset"?ev(t.rowKey,this.appModel.config.comparison,this.appModel.comparisonDataCoordinator,this.summaryViewModel.baselineTestSummaries,this.userPrefs,r,this.pinnedItemStates.pinnedScenarios):tv(t.rowKey,this.appModel.config.comparison,this.appModel.comparisonDataCoordinator,this.summaryViewModel.baselineTestSummaries,this.userPrefs,r,n,i,this.pinnedItemStates.pinnedDatasets):Qf(t.rowKey,this.appModel.config.comparison,this.appModel.comparisonDataCoordinator,this.summaryViewModel.baselineTestSummaries,this.userPrefs,n,i,this.pinnedItemStates.pinnedFreeformRows)}createCompareDetailViewModelForFirstSummaryRow(t){const r=this.getComparisonSummaryViewModel(t).getAllRowsSnapshot();if(r.length>0){const n=r[0];return this.createCompareDetailViewModelForSummaryRow(n)}else return}createCompareDetailViewModelForSummaryRowWithDelta(t,r,n){const i=this.getComparisonSummaryViewModel(t).getAllRowsSnapshot(),a=i.findIndex(l=>l.rowKey===r)+n;if(a>=0&&a<i.length){const l=i[a];return this.createCompareDetailViewModelForSummaryRow(l)}else return}getComparisonSummaryViewModel(t){switch(t){case"views":return this.summaryViewModel.comparisonViewsSummaryViewModel;case"by-scenario":return this.summaryViewModel.comparisonsByScenarioSummaryViewModel;case"by-dataset":return this.summaryViewModel.comparisonsByDatasetSummaryViewModel;default:zr(t)}}createPerfViewModel(){return uv()}createTraceViewModel(t,r){const n=this.appModel.config.comparison,i=this.appModel.comparisonDataCoordinator,a=this.summaryViewModel.comparisonSummary?.testSummaries??[];return Ov(n,i,a,t,r)}createFilterPopoverViewModelFromReports(t,r){return av(this.appModel.config,t,r)}applyFilters(){document.dispatchEvent(new CustomEvent("sde-check-config-changed"))}}function Oi(e,t){e===void 0&&(e=new Date().toISOString());const r=(t/1e3).toFixed(1),n=new Date(e),i=n.toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric"}),a=n.toLocaleTimeString(void 0,{hour12:!1,hour:"2-digit",minute:"2-digit"});return`${i} ${a} (${r}s)`}class Uv{#t;get bundles(){return f$1(this.#t)}set bundles(t){E(this.#t,t,!0)}#e;get loading(){return f$1(this.#e)}set loading(t){E(this.#e,t,!0)}#i;get error(){return f$1(this.#i)}set error(t){E(this.#i,t,!0)}constructor(t){this.config=t,this.#t=Ae(Mt([])),this.#e=Ae(!1),this.#i=Ae(void 0),this.activeBundleUrlL=t.bundleUrlL||"",this.activeBundleUrlR=t.bundleUrlR||"",this.config.onBundlesChanged&&this.config.onBundlesChanged(()=>{this.load()})}async load(){this.loading=!0,this.error=void 0;const t=this.loadRemoteBundles(),r=this.loadLocalBundles(),[n,i]=await Promise.all([t,r]);if(!n&&!i){!this.config.remoteBundlesUrl&&!this.config.getLocalBundles?this.error="No bundles available":this.error||(this.error="Failed to load bundles"),this.bundles=[],this.loading=!1;return}this.bundles=this.mergeBundles(n||[],i||[]),this.loading=!1}downloadBundle(t){this.config.downloadBundle&&this.config.downloadBundle(t)}copyBundle(t,r){if(this.config.copyBundle){const n=r.replace(/\s/g,"-");this.config.copyBundle(t,n)}}async loadRemoteBundles(){if(this.config.remoteBundlesUrl)try{let t;const r={};let n=this.config.remoteBundlesUrl;if(n.startsWith("https://")&&n.includes("@")){const[a,l]=n.replace("https://","").split("@");r.Authorization="Basic "+btoa(a),n=`https://${l}`,t="include"}n+=`?cb=${Date.now()}`;const i=await fetch(n,{headers:r,credentials:t});if(!i.ok)throw new Error(`Failed to fetch remote bundles: ${i.statusText}`);return await i.json()}catch(t){const r=`Failed to load remote bundles: ${t instanceof Error?t.message:String(t)}`,n=this.error;n?this.error=`${n}; ${r}`:this.error=r;return}}async loadLocalBundles(){if(this.config.getLocalBundles)try{return await this.config.getLocalBundles()}catch(t){const r=`Failed to load local bundles: ${t instanceof Error?t.message:String(t)}`,n=this.error;n?this.error=`${n}; ${r}`:this.error=r;return}}mergeBundles(t,r){const n=[];for(const i of t)n.push({remote:i});for(const i of r)n.push({local:i});return n}}function rp(e,t){const r=t?.containerId||"app-shell-container",n=document.getElementById(r);wl(e).then(i=>{let a;t?.bundleSelectorConfig&&(a=new Uv(t.bundleSelectorConfig));const l=new Gv(i,a,t?.suiteSummary);Jo(Wf,{target:n,props:{appViewModel:l}})}).catch(i=>{console.error(`ERROR: Failed to initialize app model: ${i.message}`)})}const messagesHtml="",messages=messagesHtml;function initOverlay(){updateOverlay(messages)}function updateOverlay(e){const t=document.getElementById("overlay-content");t.style.display="none";const r=document.getElementById("overlay-text");r.innerHTML=e}function createBundle$1(){return{version:-1,modelSpec:void 0,initModel:()=>{}}}class EventEmitter{}function cpus(){return 1}function dirname(){return""}function isAbsolute(){return!1}function join(){return""}function fileURLToPath(){return""}const worker_threads=Object.freeze(Object.defineProperty({__proto__:null,EventEmitter,cpus,dirname,fileURLToPath,isAbsolute,join},Symbol.toStringTag,{value:"Module"}));var define_process_env_default={};let __non_webpack_require__=()=>worker_threads;const DefaultErrorSerializer={deserialize(e){return Object.assign(Error(e.message),{name:e.name,stack:e.stack})},serialize(e){return{__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack}}},isSerializedError=e=>e&&typeof e=="object"&&"__error_marker"in e&&e.__error_marker==="$$error",DefaultSerializer={deserialize(e){return isSerializedError(e)?DefaultErrorSerializer.deserialize(e):e},serialize(e){return e instanceof Error?DefaultErrorSerializer.serialize(e):e}};let registeredSerializer=DefaultSerializer;function deserialize(e){return registeredSerializer.deserialize(e)}function serialize(e){return registeredSerializer.serialize(e)}let bundleURL;function getBundleURLCached(){return bundleURL||(bundleURL=getBundleURL()),bundleURL}function getBundleURL(){try{throw new Error}catch(e){const t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(t)return getBaseURL(t[0])}return"/"}function getBaseURL(e){return(""+e).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}const isAbsoluteURL=e=>/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e);function createSourceBlobURL(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function selectWorkerImplementation$1(){if(typeof Worker>"u")return class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}};class e extends Worker{constructor(n,i){var a,l;typeof n=="string"&&i&&i._baseURL?n=new URL(n,i._baseURL):typeof n=="string"&&!isAbsoluteURL(n)&&getBundleURLCached().match(/^file:\/\//i)&&(n=new URL(n,getBundleURLCached().replace(/\/[^\/]+$/,"/")),(!((a=i?.CORSWorkaround)!==null&&a!==void 0)||a)&&(n=createSourceBlobURL(`importScripts(${JSON.stringify(n)});`))),typeof n=="string"&&isAbsoluteURL(n)&&(!((l=i?.CORSWorkaround)!==null&&l!==void 0)||l)&&(n=createSourceBlobURL(`importScripts(${JSON.stringify(n)});`)),super(n,i)}}class t extends e{constructor(n,i){const a=window.URL.createObjectURL(n);super(a,i)}static fromText(n,i){const a=new window.Blob([n],{type:"text/javascript"});return new t(a,i)}}return{blob:t,default:e}}let implementation$3;function getWorkerImplementation$2(){return implementation$3||(implementation$3=selectWorkerImplementation$1()),implementation$3}const BrowserImplementation=Object.freeze(Object.defineProperty({__proto__:null,getWorkerImplementation:getWorkerImplementation$2},Symbol.toStringTag,{value:"Module"})),getCallsites={};let tsNodeAvailable;function detectTsNode(){if(typeof __non_webpack_require__=="function")return!1;if(tsNodeAvailable)return tsNodeAvailable;try{eval("require").resolve("ts-node"),tsNodeAvailable=!0}catch(e){if(e&&e.code==="MODULE_NOT_FOUND")tsNodeAvailable=!1;else throw e}return tsNodeAvailable}function createTsNodeModule(e){return`
    require("ts-node/register/transpile-only");
    require(${JSON.stringify(e)});
  `}function rebaseScriptPath(e,t){const r=getCallsites().find(a=>{const l=a.getFileName();return!!(l&&!l.match(t)&&!l.match(/[\/\\]master[\/\\]implementation/)&&!l.match(/^internal\/process/))});let i=(r?r.getFileName():null)||null;return i&&i.startsWith("file:")&&(i=fileURLToPath()),i?join():e}function resolveScriptPath(scriptPath,baseURL){const makeRelative=filePath=>join(baseURL||eval("__dirname")),workerFilePath=typeof __non_webpack_require__=="function"?__non_webpack_require__.resolve(makeRelative()):eval("require").resolve(makeRelative(rebaseScriptPath(scriptPath,/[\/\\]worker_threads[\/\\]/)));return workerFilePath}function initWorkerThreadsWorker(){const NativeWorker=typeof __non_webpack_require__=="function"?__non_webpack_require__().Worker:eval("require")("worker_threads").Worker;let allWorkers=[];class Worker extends NativeWorker{constructor(t,r){const n=r&&r.fromSource?null:resolveScriptPath(t,(r||{})._baseURL);if(n)n.match(/\.tsx?$/i)&&detectTsNode()?super(createTsNodeModule(n),Object.assign(Object.assign({},r),{eval:!0})):n.match(/\.asar[\/\\]/)?super(n.replace(/\.asar([\/\\])/,".asar.unpacked$1"),r):super(n,r);else{const i=t;super(i,Object.assign(Object.assign({},r),{eval:!0}))}this.mappedEventListeners=new WeakMap,allWorkers.push(this)}addEventListener(t,r){const n=i=>{r({data:i})};this.mappedEventListeners.set(r,n),this.on(t,n)}removeEventListener(t,r){const n=this.mappedEventListeners.get(r)||r;this.off(t,n)}}const terminateWorkersAndMaster=()=>{Promise.all(allWorkers.map(e=>e.terminate())).then(()=>process.exit(0),()=>process.exit(1)),allWorkers=[]};process.on("SIGINT",()=>terminateWorkersAndMaster()),process.on("SIGTERM",()=>terminateWorkersAndMaster());class BlobWorker extends Worker{constructor(t,r){super(Buffer.from(t).toString("utf-8"),Object.assign(Object.assign({},r),{fromSource:!0}))}static fromText(t,r){return new Worker(t,Object.assign(Object.assign({},r),{fromSource:!0}))}}return{blob:BlobWorker,default:Worker}}function initTinyWorker(){const e=require("tiny-worker");let t=[];class r extends e{constructor(l,d){const p=d&&d.fromSource?null:process.platform==="win32"?`file:///${resolveScriptPath(l).replace(/\\/g,"/")}`:resolveScriptPath(l);if(p)p.match(/\.tsx?$/i)&&detectTsNode()?super(new Function(createTsNodeModule(resolveScriptPath(l))),[],{esm:!0}):p.match(/\.asar[\/\\]/)?super(p.replace(/\.asar([\/\\])/,".asar.unpacked$1"),[],{esm:!0}):super(p,[],{esm:!0});else{const m=l;super(new Function(m),[],{esm:!0})}t.push(this),this.emitter=new EventEmitter,this.onerror=m=>this.emitter.emit("error",m),this.onmessage=m=>this.emitter.emit("message",m)}addEventListener(l,d){this.emitter.addListener(l,d)}removeEventListener(l,d){this.emitter.removeListener(l,d)}terminate(){return t=t.filter(l=>l!==this),super.terminate()}}const n=()=>{Promise.all(t.map(a=>a.terminate())).then(()=>process.exit(0),()=>process.exit(1)),t=[]};process.on("SIGINT",()=>n()),process.on("SIGTERM",()=>n());class i extends r{constructor(l,d){super(Buffer.from(l).toString("utf-8"),Object.assign(Object.assign({},d),{fromSource:!0}))}static fromText(l,d){return new r(l,Object.assign(Object.assign({},d),{fromSource:!0}))}}return{blob:i,default:r}}let implementation$2,isTinyWorker;function selectWorkerImplementation(){try{return isTinyWorker=!1,initWorkerThreadsWorker()}catch{return console.debug("Node worker_threads not available. Trying to fall back to tiny-worker polyfill..."),isTinyWorker=!0,initTinyWorker()}}function getWorkerImplementation$1(){return implementation$2||(implementation$2=selectWorkerImplementation()),implementation$2}const NodeImplementation=Object.freeze(Object.defineProperty({__proto__:null,getWorkerImplementation:getWorkerImplementation$1},Symbol.toStringTag,{value:"Module"})),runningInNode$1=typeof process<"u"&&process.arch!=="browser"&&"pid"in process,implementation$1=runningInNode$1?NodeImplementation:BrowserImplementation,getWorkerImplementation=implementation$1.getWorkerImplementation;function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var e=1e3,t=e*60,r=t*60,n=r*24,i=n*7,a=n*365.25;ms=function(A,x){x=x||{};var I=typeof A;if(I==="string"&&A.length>0)return l(A);if(I==="number"&&isFinite(A))return x.long?p(A):d(A);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(A))};function l(A){if(A=String(A),!(A.length>100)){var x=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(A);if(x){var I=parseFloat(x[1]),P=(x[2]||"ms").toLowerCase();switch(P){case"years":case"year":case"yrs":case"yr":case"y":return I*a;case"weeks":case"week":case"w":return I*i;case"days":case"day":case"d":return I*n;case"hours":case"hour":case"hrs":case"hr":case"h":return I*r;case"minutes":case"minute":case"mins":case"min":case"m":return I*t;case"seconds":case"second":case"secs":case"sec":case"s":return I*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return I;default:return}}}}function d(A){var x=Math.abs(A);return x>=n?Math.round(A/n)+"d":x>=r?Math.round(A/r)+"h":x>=t?Math.round(A/t)+"m":x>=e?Math.round(A/e)+"s":A+"ms"}function p(A){var x=Math.abs(A);return x>=n?m(A,x,n,"day"):x>=r?m(A,x,r,"hour"):x>=t?m(A,x,t,"minute"):x>=e?m(A,x,e,"second"):A+" ms"}function m(A,x,I,P){var q=x>=I*1.5;return Math.round(A/I)+" "+P+(q?"s":"")}return ms}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function e(t){n.debug=n,n.default=n,n.coerce=m,n.disable=d,n.enable=a,n.enabled=p,n.humanize=requireMs(),n.destroy=A,Object.keys(t).forEach(x=>{n[x]=t[x]}),n.names=[],n.skips=[],n.formatters={};function r(x){let I=0;for(let P=0;P<x.length;P++)I=(I<<5)-I+x.charCodeAt(P),I|=0;return n.colors[Math.abs(I)%n.colors.length]}n.selectColor=r;function n(x){let I,P=null,q,F;function L(...Y){if(!L.enabled)return;const j=L,Z=Number(new Date),X=Z-(I||Z);j.diff=X,j.prev=I,j.curr=Z,I=Z,Y[0]=n.coerce(Y[0]),typeof Y[0]!="string"&&Y.unshift("%O");let Q=0;Y[0]=Y[0].replace(/%([a-zA-Z%])/g,(J,ee)=>{if(J==="%%")return"%";Q++;const ie=n.formatters[ee];if(typeof ie=="function"){const de=Y[Q];J=ie.call(j,de),Y.splice(Q,1),Q--}return J}),n.formatArgs.call(j,Y),(j.log||n.log).apply(j,Y)}return L.namespace=x,L.useColors=n.useColors(),L.color=n.selectColor(x),L.extend=i,L.destroy=n.destroy,Object.defineProperty(L,"enabled",{enumerable:!0,configurable:!1,get:()=>P!==null?P:(q!==n.namespaces&&(q=n.namespaces,F=n.enabled(x)),F),set:Y=>{P=Y}}),typeof n.init=="function"&&n.init(L),L}function i(x,I){const P=n(this.namespace+(typeof I>"u"?":":I)+x);return P.log=this.log,P}function a(x){n.save(x),n.namespaces=x,n.names=[],n.skips=[];const I=(typeof x=="string"?x:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const P of I)P[0]==="-"?n.skips.push(P.slice(1)):n.names.push(P)}function l(x,I){let P=0,q=0,F=-1,L=0;for(;P<x.length;)if(q<I.length&&(I[q]===x[P]||I[q]==="*"))I[q]==="*"?(F=q,L=P,q++):(P++,q++);else if(F!==-1)q=F+1,L++,P=L;else return!1;for(;q<I.length&&I[q]==="*";)q++;return q===I.length}function d(){const x=[...n.names,...n.skips.map(I=>"-"+I)].join(",");return n.enable(""),x}function p(x){for(const I of n.skips)if(l(x,I))return!1;for(const I of n.names)if(l(x,I))return!0;return!1}function m(x){return x instanceof Error?x.stack||x.message:x}function A(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return common=e,common}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,(function(e,t){t.formatArgs=n,t.save=i,t.load=a,t.useColors=r,t.storage=l(),t.destroy=(()=>{let p=!1;return()=>{p||(p=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let p;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(p=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(p[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(p){if(p[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+p[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const m="color: "+this.color;p.splice(1,0,m,"color: inherit");let A=0,x=0;p[0].replace(/%[a-zA-Z%]/g,I=>{I!=="%%"&&(A++,I==="%c"&&(x=A))}),p.splice(x,0,m)}t.log=console.debug||console.log||(()=>{});function i(p){try{p?t.storage.setItem("debug",p):t.storage.removeItem("debug")}catch{}}function a(){let p;try{p=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!p&&typeof process<"u"&&"env"in process&&(p=define_process_env_default.DEBUG),p}function l(){try{return localStorage}catch{}}e.exports=requireCommon()(t);const{formatters:d}=e.exports;d.j=function(p){try{return JSON.stringify(p)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}})(browser,browser.exports)),browser.exports}var browserExports=requireBrowser();const DebugLogger=getDefaultExportFromCjs(browserExports),hasSymbols=()=>typeof Symbol=="function",hasSymbol=e=>hasSymbols()&&!!Symbol[e],getSymbol=e=>hasSymbol(e)?Symbol[e]:"@@"+e;hasSymbol("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const SymbolIterator=getSymbol("iterator"),SymbolObservable=getSymbol("observable"),SymbolSpecies=getSymbol("species");function getMethod(e,t){const r=e[t];if(r!=null){if(typeof r!="function")throw new TypeError(r+" is not a function");return r}}function getSpecies(e){let t=e.constructor;return t!==void 0&&(t=t[SymbolSpecies],t===null&&(t=void 0)),t!==void 0?t:Observable}function isObservable(e){return e instanceof Observable}function hostReportError(e){hostReportError.log?hostReportError.log(e):setTimeout(()=>{throw e},0)}function enqueue(e){Promise.resolve().then(()=>{try{e()}catch(t){hostReportError(t)}})}function cleanupSubscription(e){const t=e._cleanup;if(t!==void 0&&(e._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{const r=getMethod(t,"unsubscribe");r&&r.call(t)}}catch(r){hostReportError(r)}}function closeSubscription(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function flushSubscription(e){const t=e._queue;if(t){e._queue=void 0,e._state="ready";for(const r of t)if(notifySubscription(e,r.type,r.value),e._state==="closed")break}}function notifySubscription(e,t,r){e._state="running";const n=e._observer;try{const i=n?getMethod(n,t):void 0;switch(t){case"next":i&&i.call(n,r);break;case"error":if(closeSubscription(e),i)i.call(n,r);else throw r;break;case"complete":closeSubscription(e),i&&i.call(n);break}}catch(i){hostReportError(i)}e._state==="closed"?cleanupSubscription(e):e._state==="running"&&(e._state="ready")}function onNotify(e,t,r){if(e._state!=="closed"){if(e._state==="buffering"){e._queue=e._queue||[],e._queue.push({type:t,value:r});return}if(e._state!=="ready"){e._state="buffering",e._queue=[{type:t,value:r}],enqueue(()=>flushSubscription(e));return}notifySubscription(e,t,r)}}class Subscription{constructor(t,r){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";const n=new SubscriptionObserver(this);try{this._cleanup=r.call(void 0,n)}catch(i){n.error(i)}this._state==="initializing"&&(this._state="ready")}get closed(){return this._state==="closed"}unsubscribe(){this._state!=="closed"&&(closeSubscription(this),cleanupSubscription(this))}}class SubscriptionObserver{constructor(t){this._subscription=t}get closed(){return this._subscription._state==="closed"}next(t){onNotify(this._subscription,"next",t)}error(t){onNotify(this._subscription,"error",t)}complete(){onNotify(this._subscription,"complete")}}class Observable{constructor(t){if(!(this instanceof Observable))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}subscribe(t,r,n){return(typeof t!="object"||t===null)&&(t={next:t,error:r,complete:n}),new Subscription(t,this._subscriber)}pipe(t,...r){let n=this;for(const i of[t,...r])n=i(n);return n}tap(t,r,n){const i=typeof t!="object"||t===null?{next:t,error:r,complete:n}:t;return new Observable(a=>this.subscribe({next(l){i.next&&i.next(l),a.next(l)},error(l){i.error&&i.error(l),a.error(l)},complete(){i.complete&&i.complete(),a.complete()},start(l){i.start&&i.start(l)}}))}forEach(t){return new Promise((r,n)=>{if(typeof t!="function"){n(new TypeError(t+" is not a function"));return}function i(){a.unsubscribe(),r(void 0)}const a=this.subscribe({next(l){try{t(l,i)}catch(d){n(d),a.unsubscribe()}},error(l){n(l)},complete(){r(void 0)}})})}map(t){if(typeof t!="function")throw new TypeError(t+" is not a function");const r=getSpecies(this);return new r(n=>this.subscribe({next(i){let a=i;try{a=t(i)}catch(l){return n.error(l)}n.next(a)},error(i){n.error(i)},complete(){n.complete()}}))}filter(t){if(typeof t!="function")throw new TypeError(t+" is not a function");const r=getSpecies(this);return new r(n=>this.subscribe({next(i){try{if(!t(i))return}catch(a){return n.error(a)}n.next(i)},error(i){n.error(i)},complete(){n.complete()}}))}reduce(t,r){if(typeof t!="function")throw new TypeError(t+" is not a function");const n=getSpecies(this),i=arguments.length>1;let a=!1,l=r;return new n(d=>this.subscribe({next(p){const m=!a;if(a=!0,!m||i)try{l=t(l,p)}catch(A){return d.error(A)}else l=p},error(p){d.error(p)},complete(){if(!a&&!i)return d.error(new TypeError("Cannot reduce an empty sequence"));d.next(l),d.complete()}}))}concat(...t){const r=getSpecies(this);return new r(n=>{let i,a=0;function l(d){i=d.subscribe({next(p){n.next(p)},error(p){n.error(p)},complete(){a===t.length?(i=void 0,n.complete()):l(r.from(t[a++]))}})}return l(this),()=>{i&&(i.unsubscribe(),i=void 0)}})}flatMap(t){if(typeof t!="function")throw new TypeError(t+" is not a function");const r=getSpecies(this);return new r(n=>{const i=[],a=this.subscribe({next(d){let p;if(t)try{p=t(d)}catch(A){return n.error(A)}else p=d;const m=r.from(p).subscribe({next(A){n.next(A)},error(A){n.error(A)},complete(){const A=i.indexOf(m);A>=0&&i.splice(A,1),l()}});i.push(m)},error(d){n.error(d)},complete(){l()}});function l(){a.closed&&i.length===0&&n.complete()}return()=>{i.forEach(d=>d.unsubscribe()),a.unsubscribe()}})}[SymbolObservable](){return this}static from(t){const r=typeof this=="function"?this:Observable;if(t==null)throw new TypeError(t+" is not an object");const n=getMethod(t,SymbolObservable);if(n){const i=n.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return isObservable(i)&&i.constructor===r?i:new r(a=>i.subscribe(a))}if(hasSymbol("iterator")){const i=getMethod(t,SymbolIterator);if(i)return new r(a=>{enqueue(()=>{if(!a.closed){for(const l of i.call(t))if(a.next(l),a.closed)return;a.complete()}})})}if(Array.isArray(t))return new r(i=>{enqueue(()=>{if(!i.closed){for(const a of t)if(i.next(a),i.closed)return;i.complete()}})});throw new TypeError(t+" is not observable")}static of(...t){const r=typeof this=="function"?this:Observable;return new r(n=>{enqueue(()=>{if(!n.closed){for(const i of t)if(n.next(i),n.closed)return;n.complete()}})})}static get[SymbolSpecies](){return this}}hasSymbols()&&Object.defineProperty(Observable,Symbol("extensions"),{value:{symbol:SymbolObservable,hostReportError},configurable:!0});function unsubscribe(e){typeof e=="function"?e():e&&typeof e.unsubscribe=="function"&&e.unsubscribe()}class MulticastSubject extends Observable{constructor(){super(t=>(this._observers.add(t),()=>this._observers.delete(t))),this._observers=new Set}next(t){for(const r of this._observers)r.next(t)}error(t){for(const r of this._observers)r.error(t)}complete(){for(const t of this._observers)t.complete()}}function multicast(e){const t=new MulticastSubject;let r,n=0;return new Observable(i=>{r||(r=e.subscribe(t));const a=t.subscribe(i);return n++,()=>{n--,a.unsubscribe(),n===0&&(unsubscribe(r),r=void 0)}})}const $errors=Symbol("thread.errors"),$events=Symbol("thread.events"),$terminate=Symbol("thread.terminate"),$transferable=Symbol("thread.transferable"),$worker=Symbol("thread.worker");function fail$1(e){throw Error(e)}const Thread={errors(e){return e[$errors]||fail$1("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},events(e){return e[$events]||fail$1("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},terminate(e){return e[$terminate]()}},doNothing$1=()=>{};function createPromiseWithResolver(){let e=!1,t,r=doNothing$1;return[new Promise(n=>{e?n(t):r=n}),n=>{e=!0,t=n,r(t)}]}var WorkerEventType;(function(e){e.internalError="internalError",e.message="message",e.termination="termination"})(WorkerEventType||(WorkerEventType={}));const doNothing=()=>{},returnInput=e=>e,runDeferred=e=>Promise.resolve().then(e);function fail(e){throw e}function isThenable(e){return e&&typeof e.then=="function"}class ObservablePromise extends Observable{constructor(t){super(r=>{const n=this,i=Object.assign(Object.assign({},r),{complete(){r.complete(),n.onCompletion()},error(a){r.error(a),n.onError(a)},next(a){r.next(a),n.onNext(a)}});try{return this.initHasRun=!0,t(i)}catch(a){i.error(a)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(t){this.firstValueSet||(this.firstValue=t,this.firstValueSet=!0)}onError(t){this.state="rejected",this.rejection=t;for(const r of this.rejectionCallbacks)runDeferred(()=>r(t))}onCompletion(){this.state="fulfilled";for(const t of this.fulfillmentCallbacks)runDeferred(()=>t(this.firstValue))}then(t,r){const n=t||returnInput,i=r||fail;let a=!1;return new Promise((l,d)=>{const p=A=>{if(!a){a=!0;try{l(i(A))}catch(x){d(x)}}},m=A=>{try{l(n(A))}catch(x){p(x)}};if(this.initHasRun||this.subscribe({error:p}),this.state==="fulfilled")return l(n(this.firstValue));if(this.state==="rejected")return a=!0,l(i(this.rejection));this.fulfillmentCallbacks.push(m),this.rejectionCallbacks.push(p)})}catch(t){return this.then(void 0,t)}finally(t){const r=t||doNothing;return this.then(n=>(r(),n),()=>r())}static from(t){return isThenable(t)?new ObservablePromise(r=>{const n=a=>{r.next(a),r.complete()},i=a=>{r.error(a)};t.then(n,i)}):super.from(t)}}function isTransferable(e){return!(!e||typeof e!="object")}function isTransferDescriptor(e){return e&&typeof e=="object"&&e[$transferable]}function Transfer(e,t){if(!t){if(!isTransferable(e))throw Error();t=[e]}return{[$transferable]:!0,send:e,transferables:t}}var MasterMessageType;(function(e){e.cancel="cancel",e.run="run"})(MasterMessageType||(MasterMessageType={}));var WorkerMessageType;(function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"})(WorkerMessageType||(WorkerMessageType={}));const debugMessages$1=DebugLogger("threads:master:messages");let nextJobUID=1;const dedupe=e=>Array.from(new Set(e)),isJobErrorMessage=e=>e&&e.type===WorkerMessageType.error,isJobResultMessage=e=>e&&e.type===WorkerMessageType.result,isJobStartMessage=e=>e&&e.type===WorkerMessageType.running;function createObservableForJob(e,t){return new Observable(r=>{let n;const i=(a=>{if(debugMessages$1("Message from worker:",a.data),!(!a.data||a.data.uid!==t)){if(isJobStartMessage(a.data))n=a.data.resultType;else if(isJobResultMessage(a.data))n==="promise"?(typeof a.data.payload<"u"&&r.next(deserialize(a.data.payload)),r.complete(),e.removeEventListener("message",i)):(a.data.payload&&r.next(deserialize(a.data.payload)),a.data.complete&&(r.complete(),e.removeEventListener("message",i)));else if(isJobErrorMessage(a.data)){const l=deserialize(a.data.error);r.error(l),e.removeEventListener("message",i)}}});return e.addEventListener("message",i),()=>{if(n==="observable"||!n){const a={type:MasterMessageType.cancel,uid:t};e.postMessage(a)}e.removeEventListener("message",i)}})}function prepareArguments(e){if(e.length===0)return{args:[],transferables:[]};const t=[],r=[];for(const n of e)isTransferDescriptor(n)?(t.push(serialize(n.send)),r.push(...n.transferables)):t.push(serialize(n));return{args:t,transferables:r.length===0?r:dedupe(r)}}function createProxyFunction(e,t){return((...r)=>{const n=nextJobUID++,{args:i,transferables:a}=prepareArguments(r),l={type:MasterMessageType.run,uid:n,method:t,args:i};debugMessages$1("Sending command to run function to worker:",l);try{e.postMessage(l,a)}catch(d){return ObservablePromise.from(Promise.reject(d))}return ObservablePromise.from(multicast(createObservableForJob(e,n)))})}function createProxyModule(e,t){const r={};for(const n of t)r[n]=createProxyFunction(e,n);return r}var __awaiter$2=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function d(A){try{m(n.next(A))}catch(x){l(x)}}function p(A){try{m(n.throw(A))}catch(x){l(x)}}function m(A){A.done?a(A.value):i(A.value).then(d,p)}m((n=n.apply(e,[])).next())})};const debugMessages=DebugLogger("threads:master:messages"),debugSpawn=DebugLogger("threads:master:spawn"),debugThreadUtils=DebugLogger("threads:master:thread-utils"),isInitMessage=e=>e&&e.type==="init",isUncaughtErrorMessage=e=>e&&e.type==="uncaughtError",initMessageTimeout=typeof process<"u"&&define_process_env_default.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(define_process_env_default.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function withTimeout(e,t,r){return __awaiter$2(this,void 0,void 0,function*(){let n;const i=new Promise((l,d)=>{n=setTimeout(()=>d(Error(r)),t)}),a=yield Promise.race([e,i]);return clearTimeout(n),a})}function receiveInitMessage(e){return new Promise((t,r)=>{const n=(i=>{debugMessages("Message from worker before finishing initialization:",i.data),isInitMessage(i.data)?(e.removeEventListener("message",n),t(i.data)):isUncaughtErrorMessage(i.data)&&(e.removeEventListener("message",n),r(deserialize(i.data.error)))});e.addEventListener("message",n)})}function createEventObservable(e,t){return new Observable(r=>{const n=(a=>{const l={type:WorkerEventType.message,data:a.data};r.next(l)}),i=(a=>{debugThreadUtils("Unhandled promise rejection event in thread:",a);const l={type:WorkerEventType.internalError,error:Error(a.reason)};r.next(l)});e.addEventListener("message",n),e.addEventListener("unhandledrejection",i),t.then(()=>{const a={type:WorkerEventType.termination};e.removeEventListener("message",n),e.removeEventListener("unhandledrejection",i),r.next(a),r.complete()})})}function createTerminator(e){const[t,r]=createPromiseWithResolver();return{terminate:()=>__awaiter$2(this,void 0,void 0,function*(){debugThreadUtils("Terminating worker"),yield e.terminate(),r()}),termination:t}}function setPrivateThreadProps(e,t,r,n){const i=r.filter(a=>a.type===WorkerEventType.internalError).map(a=>a.error);return Object.assign(e,{[$errors]:i,[$events]:r,[$terminate]:n,[$worker]:t})}function spawn(e,t){return __awaiter$2(this,void 0,void 0,function*(){debugSpawn("Initializing new thread");const r=initMessageTimeout,n=(yield withTimeout(receiveInitMessage(e),r,`Timeout: Did not receive an init message from worker after ${r}ms. Make sure the worker calls expose().`)).exposed,{termination:i,terminate:a}=createTerminator(e),l=createEventObservable(e,i);if(n.type==="function"){const d=createProxyFunction(e);return setPrivateThreadProps(d,e,l,a)}else if(n.type==="module"){const d=createProxyModule(e,n.methods);return setPrivateThreadProps(d,e,l,a)}else{const d=n.type;throw Error(`Worker init message states unexpected type of expose(): ${d}`)}})}const BlobWorker=getWorkerImplementation().blob,Worker$1=getWorkerImplementation().default,isWorkerRuntime$2=function e(){const t=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!t)},postMessageToMaster$2=function e(t,r){self.postMessage(t,r)},subscribeToMasterMessages$2=function e(t){const r=i=>{t(i.data)},n=()=>{self.removeEventListener("message",r)};return self.addEventListener("message",r),n},WebWorkerImplementation={isWorkerRuntime:isWorkerRuntime$2,postMessageToMaster:postMessageToMaster$2,subscribeToMasterMessages:subscribeToMasterMessages$2};typeof self>"u"&&(global.self=global);const isWorkerRuntime$1=function e(){return!!(typeof self<"u"&&self.postMessage)},postMessageToMaster$1=function e(t){self.postMessage(t)};let muxingHandlerSetUp=!1;const messageHandlers=new Set,subscribeToMasterMessages$1=function e(t){return muxingHandlerSetUp||(self.addEventListener("message",(r=>{messageHandlers.forEach(n=>n(r.data))})),muxingHandlerSetUp=!0),messageHandlers.add(t),()=>messageHandlers.delete(t)},TinyWorkerImplementation={isWorkerRuntime:isWorkerRuntime$1,postMessageToMaster:postMessageToMaster$1,subscribeToMasterMessages:subscribeToMasterMessages$1};let implementation;function selectImplementation(){return typeof __non_webpack_require__=="function"?__non_webpack_require__():eval("require")("worker_threads")}function getImplementation(){return implementation||(implementation=selectImplementation()),implementation}function assertMessagePort(e){if(!e)throw Error("Invariant violation: MessagePort to parent is not available.");return e}const isWorkerRuntime=function e(){return!getImplementation().isMainThread},postMessageToMaster=function e(t,r){assertMessagePort(getImplementation().parentPort).postMessage(t,r)},subscribeToMasterMessages=function e(t){const r=getImplementation().parentPort;if(!r)throw Error("Invariant violation: MessagePort to parent is not available.");const n=a=>{t(a)},i=()=>{assertMessagePort(r).off("message",n)};return assertMessagePort(r).on("message",n),i};function testImplementation(){getImplementation()}const WorkerThreadsImplementation={isWorkerRuntime,postMessageToMaster,subscribeToMasterMessages,testImplementation},runningInNode=typeof process<"u"&&process.arch!=="browser"&&"pid"in process;function selectNodeImplementation(){try{return WorkerThreadsImplementation.testImplementation(),WorkerThreadsImplementation}catch{return TinyWorkerImplementation}}const Implementation=runningInNode?selectNodeImplementation():WebWorkerImplementation;Implementation.isWorkerRuntime;function postUncaughtErrorMessage(e){try{const t={type:WorkerMessageType.uncaughtError,error:serialize(e)};Implementation.postMessageToMaster(t)}catch(t){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.
Latest error:`,t,`
Original error:`,e)}}typeof self<"u"&&typeof self.addEventListener=="function"&&Implementation.isWorkerRuntime()&&(self.addEventListener("error",e=>{setTimeout(()=>postUncaughtErrorMessage(e.error||e),250)}),self.addEventListener("unhandledrejection",e=>{const t=e.reason;t&&typeof t.message=="string"&&setTimeout(()=>postUncaughtErrorMessage(t),250)}));typeof process<"u"&&typeof process.on=="function"&&Implementation.isWorkerRuntime()&&(process.on("uncaughtException",e=>{setTimeout(()=>postUncaughtErrorMessage(e),250)}),process.on("unhandledRejection",e=>{e&&typeof e.message=="string"&&setTimeout(()=>postUncaughtErrorMessage(e),250)}));var ok$1=function(e){return new Ok$1(e)},err$1=function(e){return new Err$1(e)},Ok$1=(function(){function e(t){var r=this;this.value=t,this.match=function(n,i){return n(r.value)}}return e.prototype.isOk=function(){return!0},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return ok$1(t(this.value))},e.prototype.mapErr=function(t){return ok$1(this.value)},e.prototype.andThen=function(t){return t(this.value)},e.prototype.asyncAndThen=function(t){return t(this.value)},e.prototype.asyncMap=function(t){return ResultAsync$1.fromPromise(t(this.value))},e.prototype.unwrapOr=function(t){return this.value},e.prototype._unsafeUnwrap=function(){return this.value},e.prototype._unsafeUnwrapErr=function(){throw new Error("Called `_unsafeUnwrapErr` on an Ok")},e})(),Err$1=(function(){function e(t){var r=this;this.error=t,this.match=function(n,i){return i(r.error)}}return e.prototype.isOk=function(){return!1},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return err$1(this.error)},e.prototype.mapErr=function(t){return err$1(t(this.error))},e.prototype.andThen=function(t){return err$1(this.error)},e.prototype.asyncAndThen=function(t){return errAsync$1(this.error)},e.prototype.asyncMap=function(t){return errAsync$1(this.error)},e.prototype.unwrapOr=function(t){return t},e.prototype._unsafeUnwrap=function(){throw new Error("Called `_unsafeUnwrap` on an Err")},e.prototype._unsafeUnwrapErr=function(){return this.error},e})();function __awaiter$1(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function d(A){try{m(n.next(A))}catch(x){l(x)}}function p(A){try{m(n.throw(A))}catch(x){l(x)}}function m(A){A.done?a(A.value):i(A.value).then(d,p)}m((n=n.apply(e,[])).next())})}function __generator$1(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(m){return function(A){return p([m,A])}}function p(m){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=m[0]&2?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,i=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){r.label=m[1];break}if(m[0]===6&&r.label<a[1]){r.label=a[1],a=m;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(m);break}a[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(A){m=[6,A],i=0}finally{n=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var logWarning=function(e){if(typeof process!="object"){var t="\x1B[33m%s\x1B[0m",r=["[neverthrow]",e].join(" - ");console.warn(t,r)}},ResultAsync$1=(function(){function e(t){this._promise=t}return e.fromPromise=function(t,r){var n=t.then(function(a){return new Ok$1(a)});if(r)n=n.catch(function(a){return new Err$1(r(a))});else{var i=["`fromPromise` called without a promise rejection handler","Ensure that you are catching promise rejections yourself, or pass a second argument to `fromPromise` to convert a caught exception into an `Err` instance"].join(" - ");logWarning(i)}return new e(n)},e.prototype.map=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$1(r,void 0,void 0,function(){var i;return __generator$1(this,function(a){switch(a.label){case 0:return n.isErr()?[2,new Err$1(n.error)]:(i=Ok$1.bind,[4,t(n.value)]);case 1:return[2,new(i.apply(Ok$1,[void 0,a.sent()]))]}})})}))},e.prototype.mapErr=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$1(r,void 0,void 0,function(){var i;return __generator$1(this,function(a){switch(a.label){case 0:return n.isOk()?[2,new Ok$1(n.value)]:(i=Err$1.bind,[4,t(n.error)]);case 1:return[2,new(i.apply(Err$1,[void 0,a.sent()]))]}})})}))},e.prototype.andThen=function(t){return new e(this._promise.then(function(r){if(r.isErr())return new Err$1(r.error);var n=t(r.value);return n instanceof e?n._promise:n}))},e.prototype.match=function(t,r){return this._promise.then(function(n){return n.match(t,r)})},e.prototype.unwrapOr=function(t){return this._promise.then(function(r){return r.unwrapOr(t)})},e.prototype.then=function(t){return this._promise.then(t)},e})(),errAsync$1=function(e){return new ResultAsync$1(Promise.resolve(new Err$1(e)))},__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e};function createInputValue(e,t,r){let n=t;const i={},a=()=>n,l=d=>{var p;d!==n&&(n=d,(p=i.onSet)==null||p.call(i))};return{varId:e,get:a,set:l,reset:()=>{l(t)},callbacks:i}}var Series=class Vm{constructor(t,r){this.varId=t,this.points=r}getValueAtTime(t){var r;return(r=this.points.find(n=>n.x===t))==null?void 0:r.y}copy(){const t=this.points.map(r=>__spreadValues({},r));return new Vm(this.varId,t)}},Outputs=class{constructor(e,t,r,n=1){this.varIds=e,this.startTime=t,this.endTime=r,this.saveFreq=n,this.seriesLength=Math.round((r-t)/n)+1,this.varSeries=new Array(e.length);for(let i=0;i<e.length;i++){const a=new Array(this.seriesLength);for(let d=0;d<this.seriesLength;d++)a[d]={x:t+d*n,y:0};const l=e[i];this.varSeries[i]=new Series(l,a)}}setVarSpecs(e){if(e.length!==this.varIds.length)throw new Error("Length of output varSpecs must match that of varIds");this.varSpecs=e}updateFromBuffer(e,t){const r=parseOutputsBuffer(e,t,this);return r.isOk()?ok$1(void 0):err$1(r.error)}getSeriesForVar(e){const t=this.varIds.indexOf(e);if(t>=0)return this.varSeries[t]}};function parseOutputsBuffer(e,t,r){const n=r.varIds.length,i=r.seriesLength;if(t<i||e.length<n*i)return err$1("invalid-point-count");for(let a=0;a<n;a++){const l=r.varSeries[a];let d=t*a;for(let p=0;p<i;p++)l.points[p].y=validateNumber(e[d]),d++}return ok$1(r)}function validateNumber(e){if(!isNaN(e)&&e>-1e32)return e}function getEncodedVarIndicesLength(e){var t;let r=1;for(const n of e){r+=2;const i=((t=n.subscriptIndices)==null?void 0:t.length)||0;r+=i}return r}function encodeVarIndices(e,t){let r=0;t[r++]=e.length;for(const n of e){t[r++]=n.varIndex;const i=n.subscriptIndices,a=i?.length||0;t[r++]=a;for(let l=0;l<a;l++)t[r++]=i[l]}}function getEncodedConstantBufferLengths(e){var t;let r=1,n=0;for(const i of e){const a=i.varRef.varSpec;if(a===void 0)throw new Error("Cannot compute constant buffer lengths until all constant var specs are defined");r+=2;const l=((t=a.subscriptIndices)==null?void 0:t.length)||0;r+=l,n+=1}return{constantIndicesLength:r,constantsLength:n}}function encodeConstants(e,t,r){let n=0;t[n++]=e.length;let i=0;for(const a of e){const l=a.varRef.varSpec;t[n++]=l.varIndex;const d=l.subscriptIndices,p=d?.length||0;t[n++]=p;for(let m=0;m<p;m++)t[n++]=d[m];r[i++]=a.value}}function decodeConstants(e,t){const r=[];let n=0;const i=e[n++];for(let a=0;a<i;a++){const l=e[n++],d=e[n++],p=d>0?Array(d):void 0;for(let x=0;x<d;x++)p[x]=e[n++];const m={varIndex:l,subscriptIndices:p},A=t[a];r.push({varRef:{varSpec:m},value:A})}return r}function getEncodedLookupBufferLengths(e){var t,r;let n=1,i=0;for(const a of e){const l=a.varRef.varSpec;if(l===void 0)throw new Error("Cannot compute lookup buffer lengths until all lookup var specs are defined");n+=2;const d=((t=l.subscriptIndices)==null?void 0:t.length)||0;n+=d,n+=2,i+=((r=a.points)==null?void 0:r.length)||0}return{lookupIndicesLength:n,lookupsLength:i}}function encodeLookups(e,t,r){let n=0;t[n++]=e.length;let i=0;for(const a of e){const l=a.varRef.varSpec;t[n++]=l.varIndex;const d=l.subscriptIndices,p=d?.length||0;t[n++]=p;for(let m=0;m<p;m++)t[n++]=d[m];a.points!==void 0?(t[n++]=i,t[n++]=a.points.length,r?.set(a.points,i),i+=a.points.length):(t[n++]=-1,t[n++]=0)}}function decodeLookups(e,t){const r=[];let n=0;const i=e[n++];for(let a=0;a<i;a++){const l=e[n++],d=e[n++],p=d>0?Array(d):void 0;for(let P=0;P<d;P++)p[P]=e[n++];const m=e[n++],A=e[n++],x={varIndex:l,subscriptIndices:p};let I;m>=0?t?I=t.slice(m,m+A):I=new Float64Array(0):I=void 0,r.push({varRef:{varSpec:x},points:I})}return r}var ModelListing=class{constructor(e){this.varSpecs=new Map;const t=new Map;for(const i of e.dimensions){const a=i.id,l=[];for(let d=0;d<i.subIds.length;d++)l.push({id:i.subIds[d],index:d});t.set(a,{id:a,subscripts:l})}function r(i){const a=t.get(i);if(a===void 0)throw new Error(`No dimension info found for id=${i}`);return a}const n=new Set;for(const i of e.variables){const a=varIdWithoutSubscripts(i.id);if(!n.has(a)){const l=(i.dimIds||[]).map(r);if(l.length>0){const d=[];for(const m of l)d.push(m.subscripts);const p=cartesianProductOf(d);for(const m of p){const A=m.map(P=>P.id).join(","),x=m.map(P=>P.index),I=`${a}[${A}]`;this.varSpecs.set(I,{varIndex:i.index,subscriptIndices:x})}}else this.varSpecs.set(a,{varIndex:i.index});n.add(a)}}}getSpecForVarId(e){return this.varSpecs.get(e)}getSpecForVarName(e){const t=sdeVarIdForVensimVarName(e);return this.varSpecs.get(t)}deriveOutputs(e,t){const r=[];for(const i of t){const a=this.varSpecs.get(i);a!==void 0?r.push(a):console.warn(`WARNING: No output var spec found for id=${i}`)}const n=new Outputs(t,e.startTime,e.endTime,e.saveFreq);return n.varSpecs=r,n}};function varIdWithoutSubscripts(e){const t=e.indexOf("[");return t>=0?e.substring(0,t):e}function cartesianProductOf(e){return e.reduce((t,r)=>t.map(n=>r.map(i=>n.concat([i]))).reduce((n,i)=>n.concat(i),[]),[[]])}function sdeVarIdForVensimName(e){return"_"+e.trim().replace(/"/g,"_").replace(/\s+!$/g,"!").replace(/\s/g,"_").replace(/,/g,"_").replace(/-/g,"_").replace(/\./g,"_").replace(/\$/g,"_").replace(/'/g,"_").replace(/&/g,"_").replace(/%/g,"_").replace(/\//g,"_").replace(/\|/g,"_").toLowerCase()}function sdeVarIdForVensimVarName(e){const t=e.match(/([^[]+)(?:\[([^\]]+)\])?/);if(!t)throw new Error(`Invalid Vensim name: ${e}`);let r=sdeVarIdForVensimName(t[1]);if(t[2]){const n=t[2].split(",").map(i=>sdeVarIdForVensimName(i));r+=`[${n.join(",")}]`}return r}function resolveVarRef(e,t,r){if(!t.varSpec){if(e===void 0)throw new Error(`Unable to resolve ${r} variable references by name or identifier when model listing is unavailable`);if(t.varId){const n=e?.getSpecForVarId(t.varId);if(n)t.varSpec=n;else throw new Error(`Failed to resolve ${r} variable reference for varId=${t.varId}`)}else{const n=e?.getSpecForVarName(t.varName);if(n)t.varSpec=n;else throw new Error(`Failed to resolve ${r} variable reference for varName='${t.varId}'`)}}}var headerLengthInElements=20,extrasLengthInElements=1,Int32Section=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(e,t,r){this.view=r>0?new Int32Array(e,t,r):void 0,this.offsetInBytes=t,this.lengthInElements=r}},Float64Section=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(e,t,r){this.view=r>0?new Float64Array(e,t,r):void 0,this.offsetInBytes=t,this.lengthInElements=r}},BufferedRunModelParams=class{constructor(e){this.listing=e,this.header=new Int32Section,this.extras=new Float64Section,this.inputs=new Float64Section,this.outputs=new Float64Section,this.outputIndices=new Int32Section,this.constants=new Float64Section,this.constantIndices=new Int32Section,this.lookups=new Float64Section,this.lookupIndices=new Int32Section}getEncodedBuffer(){return this.encoded}getInputs(){return this.inputs.view}copyInputs(e,t){this.inputs.lengthInElements!==0&&((e===void 0||e.length<this.inputs.lengthInElements)&&(e=t(this.inputs.lengthInElements)),e.set(this.inputs.view))}getOutputIndicesLength(){return this.outputIndices.lengthInElements}getOutputIndices(){return this.outputIndices.view}copyOutputIndices(e,t){this.outputIndices.lengthInElements!==0&&((e===void 0||e.length<this.outputIndices.lengthInElements)&&(e=t(this.outputIndices.lengthInElements)),e.set(this.outputIndices.view))}getOutputsLength(){return this.outputs.lengthInElements}getOutputs(){return this.outputs.view}getOutputsObject(){}storeOutputs(e){this.outputs.view!==void 0&&(e.length>this.outputs.view.length?this.outputs.view.set(e.subarray(0,this.outputs.view.length)):this.outputs.view.set(e))}getConstants(){if(this.constantIndices.lengthInElements!==0)return decodeConstants(this.constantIndices.view,this.constants.view)}getLookups(){if(this.lookupIndices.lengthInElements!==0)return decodeLookups(this.lookupIndices.view,this.lookups.view)}getElapsedTime(){return this.extras.view[0]}storeElapsedTime(e){this.extras.view[0]=e}finalizeOutputs(e){this.outputs.view&&e.updateFromBuffer(this.outputs.view,e.seriesLength),e.runTimeInMillis=this.getElapsedTime()}updateFromParams(e,t,r){const n=e.length,i=t.varIds.length*t.seriesLength;let a;const l=t.varSpecs;l!==void 0&&l.length>0?a=getEncodedVarIndicesLength(l):a=0;let d,p;if(r?.constants!==void 0&&r.constants.length>0){for(const _e of r.constants)resolveVarRef(this.listing,_e.varRef,"constant");const fe=getEncodedConstantBufferLengths(r.constants);d=fe.constantsLength,p=fe.constantIndicesLength}else d=0,p=0;let m,A;if(r?.lookups!==void 0&&r.lookups.length>0){for(const _e of r.lookups)resolveVarRef(this.listing,_e.varRef,"lookup");const fe=getEncodedLookupBufferLengths(r.lookups);m=fe.lookupsLength,A=fe.lookupIndicesLength}else m=0,A=0;let x=0;function I(fe,_e){const Re=x,Qe=fe==="float64"?Float64Array.BYTES_PER_ELEMENT:Int32Array.BYTES_PER_ELEMENT,Ar=Math.round(_e*Qe),Os=Math.ceil(Ar/8)*8;return x+=Os,Re}const P=I("int32",headerLengthInElements),q=I("float64",extrasLengthInElements),F=I("float64",n),L=I("float64",i),Y=I("int32",a),j=I("float64",d),Z=I("int32",p),X=I("float64",m),Q=I("int32",A),J=x;if(this.encoded===void 0||this.encoded.byteLength<J){const fe=Math.ceil(J*1.2);this.encoded=new ArrayBuffer(fe),this.header.update(this.encoded,P,headerLengthInElements)}const ee=this.header.view;let ie=0;ee[ie++]=q,ee[ie++]=extrasLengthInElements,ee[ie++]=F,ee[ie++]=n,ee[ie++]=L,ee[ie++]=i,ee[ie++]=Y,ee[ie++]=a,ee[ie++]=j,ee[ie++]=d,ee[ie++]=Z,ee[ie++]=p,ee[ie++]=X,ee[ie++]=m,ee[ie++]=Q,ee[ie++]=A,this.inputs.update(this.encoded,F,n),this.extras.update(this.encoded,q,extrasLengthInElements),this.outputs.update(this.encoded,L,i),this.outputIndices.update(this.encoded,Y,a),this.constants.update(this.encoded,j,d),this.constantIndices.update(this.encoded,Z,p),this.lookups.update(this.encoded,X,m),this.lookupIndices.update(this.encoded,Q,A);const de=this.inputs.view;for(let fe=0;fe<e.length;fe++){const _e=e[fe];typeof _e=="number"?de[fe]=_e:de[fe]=_e.get()}this.outputIndices.view&&encodeVarIndices(l,this.outputIndices.view),p>0&&encodeConstants(r.constants,this.constantIndices.view,this.constants.view),A>0&&encodeLookups(r.lookups,this.lookupIndices.view,this.lookups.view)}updateFromEncodedBuffer(e){const t=headerLengthInElements*Int32Array.BYTES_PER_ELEMENT;if(e.byteLength<t)throw new Error("Buffer must be long enough to contain header section");this.encoded=e,this.header.update(this.encoded,0,headerLengthInElements);const r=this.header.view;let n=0;const i=r[n++],a=r[n++],l=r[n++],d=r[n++],p=r[n++],m=r[n++],A=r[n++],x=r[n++],I=r[n++],P=r[n++],q=r[n++],F=r[n++],L=r[n++],Y=r[n++],j=r[n++],Z=r[n++],X=a*Float64Array.BYTES_PER_ELEMENT,Q=d*Float64Array.BYTES_PER_ELEMENT,J=m*Float64Array.BYTES_PER_ELEMENT,ee=x*Int32Array.BYTES_PER_ELEMENT,ie=P*Float64Array.BYTES_PER_ELEMENT,de=F*Int32Array.BYTES_PER_ELEMENT,fe=Y*Float64Array.BYTES_PER_ELEMENT,_e=Z*Int32Array.BYTES_PER_ELEMENT,Re=t+X+Q+J+ee+ie+de+fe+_e;if(e.byteLength<Re)throw new Error("Buffer must be long enough to contain sections declared in header");this.extras.update(this.encoded,i,a),this.inputs.update(this.encoded,l,d),this.outputs.update(this.encoded,p,m),this.outputIndices.update(this.encoded,A,x),this.constants.update(this.encoded,I,P),this.constantIndices.update(this.encoded,q,F),this.lookups.update(this.encoded,L,Y),this.lookupIndices.update(this.encoded,j,Z)}};async function spawnAsyncModelRunner(e){return e.path?spawnAsyncModelRunnerWithWorker(new Worker$1(e.path)):spawnAsyncModelRunnerWithWorker(BlobWorker.fromText(e.source))}async function spawnAsyncModelRunnerWithWorker(e){const t=await spawn(e),r=await t.initModel(),n=r.modelListing?new ModelListing(r.modelListing):void 0,i=new BufferedRunModelParams(n);let a=!1,l=!1;return{createOutputs:()=>new Outputs(r.outputVarIds,r.startTime,r.endTime,r.saveFreq),runModel:async(d,p,m)=>{if(l)throw new Error("Async model runner has already been terminated");if(a)throw new Error("Async model runner only supports one `runModel` call at a time");a=!0,i.updateFromParams(d,p,m);let A;try{A=await t.runModel(Transfer(i.getEncodedBuffer()))}finally{a=!1}return i.updateFromEncodedBuffer(A),i.finalizeOutputs(p),p},terminate:()=>l?Promise.resolve():(l=!0,Thread.terminate(t))}}var assertNever={},hasRequiredAssertNever;function requireAssertNever(){if(hasRequiredAssertNever)return assertNever;hasRequiredAssertNever=1,Object.defineProperty(assertNever,"__esModule",{value:!0}),assertNever.assertNever=e;function e(t,r){if(typeof r=="string")throw new Error(r);if(typeof r=="function")throw new Error(r(t));if(r)return t;throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(t)))}return assertNever.default=e,assertNever}var assertNeverExports=requireAssertNever();function __awaiter(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function d(A){try{m(n.next(A))}catch(x){l(x)}}function p(A){try{m(n.throw(A))}catch(x){l(x)}}function m(A){A.done?a(A.value):i(A.value).then(d,p)}m((n=n.apply(e,[])).next())})}function __generator(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(m){return function(A){return p([m,A])}}function p(m){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=m[0]&2?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,i=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){r.label=m[1];break}if(m[0]===6&&r.label<a[1]){r.label=a[1],a=m;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(m);break}a[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(A){m=[6,A],i=0}finally{n=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function __read(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],l;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(d){l={error:d}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a}function __spreadArray(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var defaultErrorConfig={withStackTrace:!1},createNeverThrowError=function(e,t,r){r===void 0&&(r=defaultErrorConfig);var n=t.isOk()?{type:"Ok",value:t.value}:{type:"Err",value:t.error},i=r.withStackTrace?new Error().stack:void 0;return{data:n,message:e,stack:i}},Result;(function(e){function t(r,n){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];try{var l=r.apply(void 0,__spreadArray([],__read(i),!1));return ok(l)}catch(d){return err(n?n(d):d)}}}e.fromThrowable=t})(Result||(Result={}));var ok=function(e){return new Ok(e)},err=function(e){return new Err(e)},Ok=(function(){function e(t){this.value=t}return e.prototype.isOk=function(){return!0},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return ok(t(this.value))},e.prototype.mapErr=function(t){return ok(this.value)},e.prototype.andThen=function(t){return t(this.value)},e.prototype.orElse=function(t){return ok(this.value)},e.prototype.asyncAndThen=function(t){return t(this.value)},e.prototype.asyncMap=function(t){return ResultAsync.fromSafePromise(t(this.value))},e.prototype.unwrapOr=function(t){return this.value},e.prototype.match=function(t,r){return t(this.value)},e.prototype._unsafeUnwrap=function(t){return this.value},e.prototype._unsafeUnwrapErr=function(t){throw createNeverThrowError("Called `_unsafeUnwrapErr` on an Ok",this,t)},e})(),Err=(function(){function e(t){this.error=t}return e.prototype.isOk=function(){return!1},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return err(this.error)},e.prototype.mapErr=function(t){return err(t(this.error))},e.prototype.andThen=function(t){return err(this.error)},e.prototype.orElse=function(t){return t(this.error)},e.prototype.asyncAndThen=function(t){return errAsync(this.error)},e.prototype.asyncMap=function(t){return errAsync(this.error)},e.prototype.unwrapOr=function(t){return t},e.prototype.match=function(t,r){return r(this.error)},e.prototype._unsafeUnwrap=function(t){throw createNeverThrowError("Called `_unsafeUnwrap` on an Err",this,t)},e.prototype._unsafeUnwrapErr=function(t){return this.error},e})();Result.fromThrowable;var ResultAsync=(function(){function e(t){this._promise=t}return e.fromSafePromise=function(t){var r=t.then(function(n){return new Ok(n)});return new e(r)},e.fromPromise=function(t,r){var n=t.then(function(i){return new Ok(i)}).catch(function(i){return new Err(r(i))});return new e(n)},e.prototype.map=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter(r,void 0,void 0,function(){var i;return __generator(this,function(a){switch(a.label){case 0:return n.isErr()?[2,new Err(n.error)]:(i=Ok.bind,[4,t(n.value)]);case 1:return[2,new(i.apply(Ok,[void 0,a.sent()]))]}})})}))},e.prototype.mapErr=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter(r,void 0,void 0,function(){var i;return __generator(this,function(a){switch(a.label){case 0:return n.isOk()?[2,new Ok(n.value)]:(i=Err.bind,[4,t(n.error)]);case 1:return[2,new(i.apply(Err,[void 0,a.sent()]))]}})})}))},e.prototype.andThen=function(t){return new e(this._promise.then(function(r){if(r.isErr())return new Err(r.error);var n=t(r.value);return n instanceof e?n._promise:n}))},e.prototype.orElse=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(i){return n.isErr()?[2,t(n.error)]:[2,new Ok(n.value)]})})}))},e.prototype.match=function(t,r){return this._promise.then(function(n){return n.match(t,r)})},e.prototype.unwrapOr=function(t){return this._promise.then(function(r){return r.unwrapOr(t)})},e.prototype.then=function(t,r){return this._promise.then(t,r)},e})(),errAsync=function(e){return new ResultAsync(Promise.resolve(new Err(e)))};ResultAsync.fromPromise;ResultAsync.fromSafePromise;let blockEndNewlines;try{blockEndNewlines=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{blockEndNewlines=/\n+(?!\n|$)/g}new Set("0123456789ABCDEFabcdef");new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()");new Set(",[]{}");new Set(` ,[]{}
\r	`);function decodeImplVars(e){const t={};for(const[r,n]of Object.entries(e.varInstances)){const i=[];for(const a of n){const l=e.varTypes[a[0]],d=e.variables[a[1]];let p=d.i,m=d.n;if(a.length>2){const x=[],I=[],P=(a.length-2)/2,q=a.slice(2,2+P);for(const F of q){const L=e.subscripts[F];x.push(L.i),I.push(L.n)}p+=`[${x.join(",")}]`,m+=`[${I.join(",")}]`}const A={varId:p,varName:m,varType:l,varIndex:d.x,subscriptIndices:a.length>2?a.slice(2+(a.length-2)/2):void 0};i.push(A)}t[r]=i}return t}function getImplVars(e){const t=decodeImplVars(e),r=new Map,n=[];function i(a,l){const d=[];for(const p of l){if(p.varType==="lookup"||p.varType==="data")continue;const m=`ModelImpl_${p.varId}`;r.set(m,p),d.push(m)}n.push({title:a,fn:a,datasetKeys:d})}return i("initConstants",t.constants||[]),i("initLevels",t.initVars||[]),i("evalLevels",t.levelVars||[]),i("evalAux",t.auxVars||[]),{implVars:r,implVarGroups:n}}function getInputVars(e){const t=new Map;for(const r of e){const n=r.varId,i={inputId:r.inputId,varId:n,varName:r.varName,defaultValue:r.defaultValue,minValue:r.minValue,maxValue:r.maxValue,value:createInputValue(n,r.defaultValue)};t.set(n,i)}return t}function setInputsForScenario(e,t){function r(m,A){A<m.minValue?(console.warn(`WARNING: Scenario input value ${A} is < min value (${m.minValue}) for input '${m.varName}'`),A=m.minValue):A>m.maxValue&&(console.warn(`WARNING: Scenario input value ${A} is > max value (${m.maxValue}) for input '${m.varName}'`),A=m.maxValue),m.value.set(A)}function n(m){m.value.reset()}function i(m){m.value.set(m.minValue)}function a(m){m.value.set(m.maxValue)}function l(){e.forEach(n)}function d(){e.forEach(i)}function p(){e.forEach(a)}switch(t.kind){case"all-inputs":{switch(t.position){case"at-default":l();break;case"at-minimum":d();break;case"at-maximum":p();break}break}case"input-settings":{l();for(const m of t.settings){const A=e.get(m.inputVarId);if(A)switch(m.kind){case"position":switch(m.position){case"at-default":n(A);break;case"at-minimum":i(A);break;case"at-maximum":a(A);break;default:assertNeverExports.assertNever(m.position)}break;case"value":r(A,m.value);break;default:assertNeverExports.assertNever(m)}else console.log(`No model input for scenario input ${m.inputVarId}`)}break}default:assertNeverExports.assertNever(t)}}function getOutputVars(e){const t=new Map;for(const r of e){const n=r.varId,i=datasetKeyForOutputVar(void 0,n);t.set(i,{datasetKey:i,sourceName:void 0,varId:n,varName:r.varName})}return t}function datasetKeyForOutputVar(e,t){return`Model_${t}`}const inputSpecs=[{inputId:"1",varId:"_urban_green_resilience",varName:"urban green resilience",defaultValue:2,minValue:0,maxValue:2}],outputSpecs=[{varId:"_urban_green_status",varName:"urban green status"},{varId:"_urban_population",varName:"urban population"}],encodedImplVars={subscripts:[],variables:[{n:"FINAL TIME",i:"_final_time",x:1},{n:"INITIAL TIME",i:"_initial_time",x:2},{n:"TIME STEP",i:"_time_step",x:3},{n:"initial population",i:"_initial_population",x:4},{n:"initial urban green status",i:"_initial_urban_green_status",x:5},{n:"minimal development rate",i:"_minimal_development_rate",x:6},{n:"minimal urban green deline rate",i:"_minimal_urban_green_deline_rate",x:7},{n:"population sensitivity",i:"_population_sensitivity",x:8},{n:"tourism decline rate",i:"_tourism_decline_rate",x:9},{n:"urban green resilience",i:"_urban_green_resilience",x:10},{n:"urban green sensitivity",i:"_urban_green_sensitivity",x:11},{n:"urban green status",i:"_urban_green_status",x:12},{n:"urban population",i:"_urban_population",x:13},{n:"SAVEPER",i:"_saveper",x:14},{n:"population decline decline",i:"_population_decline_decline",x:15},{n:"urban green increase",i:"_urban_green_increase",x:16},{n:"environmental impact",i:"_environmental_impact",x:17},{n:"urban green decrease",i:"_urban_green_decrease",x:18},{n:"impact on population development",i:"_impact_on_population_development",x:19},{n:"population development",i:"_population_development",x:20}],varTypes:["const","level","aux"],varInstances:{constants:[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10]],lookupVars:[],dataVars:[],initVars:[[1,11],[1,12]],levelVars:[[1,11],[1,12]],auxVars:[[2,13],[2,14],[2,15],[2,16],[2,17],[2,18],[2,19]]}},modelSizeInBytes=20262,dataSizeInBytes=0,modelWorkerJs='(function(){"use strict";var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var worker={},isObservable,hasRequiredIsObservable;function requireIsObservable(){return hasRequiredIsObservable||(hasRequiredIsObservable=1,isObservable=e=>e?typeof Symbol.observable=="symbol"&&typeof e[Symbol.observable]=="function"?e===e[Symbol.observable]():typeof e["@@observable"]=="function"?e===e["@@observable"]():!1:!1),isObservable}var common={},serializers={},hasRequiredSerializers;function requireSerializers(){if(hasRequiredSerializers)return serializers;hasRequiredSerializers=1,Object.defineProperty(serializers,"__esModule",{value:!0}),serializers.DefaultSerializer=serializers.extendSerializer=void 0;function e(t,n){const A=t.deserialize.bind(t),i=t.serialize.bind(t);return{deserialize(a){return n.deserialize(a,A)},serialize(a){return n.serialize(a,i)}}}serializers.extendSerializer=e;const r={deserialize(t){return Object.assign(Error(t.message),{name:t.name,stack:t.stack})},serialize(t){return{__error_marker:"$$error",message:t.message,name:t.name,stack:t.stack}}},s=t=>t&&typeof t=="object"&&"__error_marker"in t&&t.__error_marker==="$$error";return serializers.DefaultSerializer={deserialize(t){return s(t)?r.deserialize(t):t},serialize(t){return t instanceof Error?r.serialize(t):t}},serializers}var hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1,Object.defineProperty(common,"__esModule",{value:!0}),common.serialize=common.deserialize=common.registerSerializer=void 0;const e=requireSerializers();let r=e.DefaultSerializer;function s(A){r=e.extendSerializer(r,A)}common.registerSerializer=s;function t(A){return r.deserialize(A)}common.deserialize=t;function n(A){return r.serialize(A)}return common.serialize=n,common}var transferable={},symbols={},hasRequiredSymbols;function requireSymbols(){return hasRequiredSymbols||(hasRequiredSymbols=1,Object.defineProperty(symbols,"__esModule",{value:!0}),symbols.$worker=symbols.$transferable=symbols.$terminate=symbols.$events=symbols.$errors=void 0,symbols.$errors=Symbol("thread.errors"),symbols.$events=Symbol("thread.events"),symbols.$terminate=Symbol("thread.terminate"),symbols.$transferable=Symbol("thread.transferable"),symbols.$worker=Symbol("thread.worker")),symbols}var hasRequiredTransferable;function requireTransferable(){if(hasRequiredTransferable)return transferable;hasRequiredTransferable=1,Object.defineProperty(transferable,"__esModule",{value:!0}),transferable.Transfer=transferable.isTransferDescriptor=void 0;const e=requireSymbols();function r(n){return!(!n||typeof n!="object")}function s(n){return n&&typeof n=="object"&&n[e.$transferable]}transferable.isTransferDescriptor=s;function t(n,A){if(!A){if(!r(n))throw Error();A=[n]}return{[e.$transferable]:!0,send:n,transferables:A}}return transferable.Transfer=t,transferable}var messages={},hasRequiredMessages;function requireMessages(){return hasRequiredMessages||(hasRequiredMessages=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerMessageType=e.MasterMessageType=void 0,(function(r){r.cancel="cancel",r.run="run"})(e.MasterMessageType||(e.MasterMessageType={})),(function(r){r.error="error",r.init="init",r.result="result",r.running="running",r.uncaughtError="uncaughtError"})(e.WorkerMessageType||(e.WorkerMessageType={}))})(messages)),messages}var implementation={},implementation_browser={},hasRequiredImplementation_browser;function requireImplementation_browser(){if(hasRequiredImplementation_browser)return implementation_browser;hasRequiredImplementation_browser=1,Object.defineProperty(implementation_browser,"__esModule",{value:!0});const e=function(){const n=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!n)},r=function(n,A){self.postMessage(n,A)},s=function(n){const A=a=>{n(a.data)},i=()=>{self.removeEventListener("message",A)};return self.addEventListener("message",A),i};return implementation_browser.default={isWorkerRuntime:e,postMessageToMaster:r,subscribeToMasterMessages:s},implementation_browser}var implementation_tinyWorker={},hasRequiredImplementation_tinyWorker;function requireImplementation_tinyWorker(){if(hasRequiredImplementation_tinyWorker)return implementation_tinyWorker;hasRequiredImplementation_tinyWorker=1,Object.defineProperty(implementation_tinyWorker,"__esModule",{value:!0}),typeof self>"u"&&(commonjsGlobal.self=commonjsGlobal);const e=function(){return!!(typeof self<"u"&&self.postMessage)},r=function(i){self.postMessage(i)};let s=!1;const t=new Set,n=function(i){return s||(self.addEventListener("message",(f=>{t.forEach(c=>c(f.data))})),s=!0),t.add(i),()=>t.delete(i)};return implementation_tinyWorker.default={isWorkerRuntime:e,postMessageToMaster:r,subscribeToMasterMessages:n},implementation_tinyWorker}var implementation_worker_threads={},worker_threads={},hasRequiredWorker_threads;function requireWorker_threads(){if(hasRequiredWorker_threads)return worker_threads;hasRequiredWorker_threads=1,Object.defineProperty(worker_threads,"__esModule",{value:!0});let implementation;function selectImplementation(){return typeof __non_webpack_require__=="function"?__non_webpack_require__("worker_threads"):eval("require")("worker_threads")}function getImplementation(){return implementation||(implementation=selectImplementation()),implementation}return worker_threads.default=getImplementation,worker_threads}var hasRequiredImplementation_worker_threads;function requireImplementation_worker_threads(){if(hasRequiredImplementation_worker_threads)return implementation_worker_threads;hasRequiredImplementation_worker_threads=1;var e=implementation_worker_threads&&implementation_worker_threads.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(implementation_worker_threads,"__esModule",{value:!0});const r=e(requireWorker_threads());function s(a){if(!a)throw Error("Invariant violation: MessagePort to parent is not available.");return a}const t=function(){return!r.default().isMainThread},n=function(f,c){s(r.default().parentPort).postMessage(f,c)},A=function(f){const c=r.default().parentPort;if(!c)throw Error("Invariant violation: MessagePort to parent is not available.");const m=h=>{f(h)},C=()=>{s(c).off("message",m)};return s(c).on("message",m),C};function i(){r.default()}return implementation_worker_threads.default={isWorkerRuntime:t,postMessageToMaster:n,subscribeToMasterMessages:A,testImplementation:i},implementation_worker_threads}var hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var e=implementation&&implementation.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(implementation,"__esModule",{value:!0});const r=e(requireImplementation_browser()),s=e(requireImplementation_tinyWorker()),t=e(requireImplementation_worker_threads()),n=typeof process<"u"&&process.arch!=="browser"&&"pid"in process;function A(){try{return t.default.testImplementation(),t.default}catch{return s.default}}return implementation.default=n?A():r.default,implementation}var hasRequiredWorker;function requireWorker(){return hasRequiredWorker||(hasRequiredWorker=1,(function(e){var r=worker&&worker.__awaiter||function(l,g,I,w){function R(k){return k instanceof I?k:new I(function(q){q(k)})}return new(I||(I=Promise))(function(k,q){function j(P){try{V(w.next(P))}catch(Z){q(Z)}}function K(P){try{V(w.throw(P))}catch(Z){q(Z)}}function V(P){P.done?k(P.value):R(P.value).then(j,K)}V((w=w.apply(l,g||[])).next())})},s=worker&&worker.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.expose=e.isWorkerRuntime=e.Transfer=e.registerSerializer=void 0;const t=s(requireIsObservable()),n=requireCommon(),A=requireTransferable(),i=requireMessages(),a=s(requireImplementation());var f=requireCommon();Object.defineProperty(e,"registerSerializer",{enumerable:!0,get:function(){return f.registerSerializer}});var c=requireTransferable();Object.defineProperty(e,"Transfer",{enumerable:!0,get:function(){return c.Transfer}}),e.isWorkerRuntime=a.default.isWorkerRuntime;let m=!1;const C=new Map,h=l=>l&&l.type===i.MasterMessageType.cancel,S=l=>l&&l.type===i.MasterMessageType.run,F=l=>t.default(l)||N(l);function N(l){return l&&typeof l=="object"&&typeof l.subscribe=="function"}function D(l){return A.isTransferDescriptor(l)?{payload:l.send,transferables:l.transferables}:{payload:l,transferables:void 0}}function G(){const l={type:i.WorkerMessageType.init,exposed:{type:"function"}};a.default.postMessageToMaster(l)}function z(l){const g={type:i.WorkerMessageType.init,exposed:{type:"module",methods:l}};a.default.postMessageToMaster(g)}function v(l,g){const{payload:I,transferables:w}=D(g),R={type:i.WorkerMessageType.error,uid:l,error:n.serialize(I)};a.default.postMessageToMaster(R,w)}function E(l,g,I){const{payload:w,transferables:R}=D(I),k={type:i.WorkerMessageType.result,uid:l,complete:g?!0:void 0,payload:w};a.default.postMessageToMaster(k,R)}function b(l,g){const I={type:i.WorkerMessageType.running,uid:l,resultType:g};a.default.postMessageToMaster(I)}function _(l){try{const g={type:i.WorkerMessageType.uncaughtError,error:n.serialize(l)};a.default.postMessageToMaster(g)}catch(g){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\nLatest error:`,g,`\nOriginal error:`,l)}}function Q(l,g,I){return r(this,void 0,void 0,function*(){let w;try{w=g(...I)}catch(k){return v(l,k)}const R=F(w)?"observable":"promise";if(b(l,R),F(w)){const k=w.subscribe(q=>E(l,!1,n.serialize(q)),q=>{v(l,n.serialize(q)),C.delete(l)},()=>{E(l,!0),C.delete(l)});C.set(l,k)}else try{const k=yield w;E(l,!0,n.serialize(k))}catch(k){v(l,n.serialize(k))}})}function p(l){if(!a.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(m)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(m=!0,typeof l=="function")a.default.subscribeToMasterMessages(g=>{S(g)&&!g.method&&Q(g.uid,l,g.args.map(n.deserialize))}),G();else if(typeof l=="object"&&l){a.default.subscribeToMasterMessages(I=>{S(I)&&I.method&&Q(I.uid,l[I.method],I.args.map(n.deserialize))});const g=Object.keys(l).filter(I=>typeof l[I]=="function");z(g)}else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${l}`);a.default.subscribeToMasterMessages(g=>{if(h(g)){const I=g.uid,w=C.get(I);w&&(w.unsubscribe(),C.delete(I))}})}e.expose=p,typeof self<"u"&&typeof self.addEventListener=="function"&&a.default.isWorkerRuntime()&&(self.addEventListener("error",l=>{setTimeout(()=>_(l.error||l),250)}),self.addEventListener("unhandledrejection",l=>{const g=l.reason;g&&typeof g.message=="string"&&setTimeout(()=>_(g),250)})),typeof process<"u"&&typeof process.on=="function"&&a.default.isWorkerRuntime()&&(process.on("uncaughtException",l=>{setTimeout(()=>_(l),250)}),process.on("unhandledRejection",l=>{l&&typeof l.message=="string"&&setTimeout(()=>_(l),250)}))})(worker)),worker}var workerExports=requireWorker();const WorkerContext=getDefaultExportFromCjs(workerExports),expose=WorkerContext.expose;WorkerContext.registerSerializer;const Transfer=WorkerContext.Transfer;function getEncodedVarIndicesLength(e){var r;let s=1;for(const t of e){s+=2;const n=((r=t.subscriptIndices)==null?void 0:r.length)||0;s+=n}return s}function encodeVarIndices(e,r){let s=0;r[s++]=e.length;for(const t of e){r[s++]=t.varIndex;const n=t.subscriptIndices,A=n?.length||0;r[s++]=A;for(let i=0;i<A;i++)r[s++]=n[i]}}function getEncodedConstantBufferLengths(e){var r;let s=1,t=0;for(const n of e){const A=n.varRef.varSpec;if(A===void 0)throw new Error("Cannot compute constant buffer lengths until all constant var specs are defined");s+=2;const i=((r=A.subscriptIndices)==null?void 0:r.length)||0;s+=i,t+=1}return{constantIndicesLength:s,constantsLength:t}}function encodeConstants(e,r,s){let t=0;r[t++]=e.length;let n=0;for(const A of e){const i=A.varRef.varSpec;r[t++]=i.varIndex;const a=i.subscriptIndices,f=a?.length||0;r[t++]=f;for(let c=0;c<f;c++)r[t++]=a[c];s[n++]=A.value}}function decodeConstants(e,r){const s=[];let t=0;const n=e[t++];for(let A=0;A<n;A++){const i=e[t++],a=e[t++],f=a>0?Array(a):void 0;for(let C=0;C<a;C++)f[C]=e[t++];const c={varIndex:i,subscriptIndices:f},m=r[A];s.push({varRef:{varSpec:c},value:m})}return s}function getEncodedLookupBufferLengths(e){var r,s;let t=1,n=0;for(const A of e){const i=A.varRef.varSpec;if(i===void 0)throw new Error("Cannot compute lookup buffer lengths until all lookup var specs are defined");t+=2;const a=((r=i.subscriptIndices)==null?void 0:r.length)||0;t+=a,t+=2,n+=((s=A.points)==null?void 0:s.length)||0}return{lookupIndicesLength:t,lookupsLength:n}}function encodeLookups(e,r,s){let t=0;r[t++]=e.length;let n=0;for(const A of e){const i=A.varRef.varSpec;r[t++]=i.varIndex;const a=i.subscriptIndices,f=a?.length||0;r[t++]=f;for(let c=0;c<f;c++)r[t++]=a[c];A.points!==void 0?(r[t++]=n,r[t++]=A.points.length,s?.set(A.points,n),n+=A.points.length):(r[t++]=-1,r[t++]=0)}}function decodeLookups(e,r){const s=[];let t=0;const n=e[t++];for(let A=0;A<n;A++){const i=e[t++],a=e[t++],f=a>0?Array(a):void 0;for(let S=0;S<a;S++)f[S]=e[t++];const c=e[t++],m=e[t++],C={varIndex:i,subscriptIndices:f};let h;c>=0?r?h=r.slice(c,c+m):h=new Float64Array(0):h=void 0,s.push({varRef:{varSpec:C},points:h})}return s}function resolveVarRef(e,r,s){if(!r.varSpec){if(e===void 0)throw new Error(`Unable to resolve ${s} variable references by name or identifier when model listing is unavailable`);if(r.varId){const t=e?.getSpecForVarId(r.varId);if(t)r.varSpec=t;else throw new Error(`Failed to resolve ${s} variable reference for varId=${r.varId}`)}else{const t=e?.getSpecForVarName(r.varName);if(t)r.varSpec=t;else throw new Error(`Failed to resolve ${s} variable reference for varName=\'${r.varId}\'`)}}}var headerLengthInElements=20,extrasLengthInElements=1,Int32Section=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(e,r,s){this.view=s>0?new Int32Array(e,r,s):void 0,this.offsetInBytes=r,this.lengthInElements=s}},Float64Section=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(e,r,s){this.view=s>0?new Float64Array(e,r,s):void 0,this.offsetInBytes=r,this.lengthInElements=s}},BufferedRunModelParams=class{constructor(e){this.listing=e,this.header=new Int32Section,this.extras=new Float64Section,this.inputs=new Float64Section,this.outputs=new Float64Section,this.outputIndices=new Int32Section,this.constants=new Float64Section,this.constantIndices=new Int32Section,this.lookups=new Float64Section,this.lookupIndices=new Int32Section}getEncodedBuffer(){return this.encoded}getInputs(){return this.inputs.view}copyInputs(e,r){this.inputs.lengthInElements!==0&&((e===void 0||e.length<this.inputs.lengthInElements)&&(e=r(this.inputs.lengthInElements)),e.set(this.inputs.view))}getOutputIndicesLength(){return this.outputIndices.lengthInElements}getOutputIndices(){return this.outputIndices.view}copyOutputIndices(e,r){this.outputIndices.lengthInElements!==0&&((e===void 0||e.length<this.outputIndices.lengthInElements)&&(e=r(this.outputIndices.lengthInElements)),e.set(this.outputIndices.view))}getOutputsLength(){return this.outputs.lengthInElements}getOutputs(){return this.outputs.view}getOutputsObject(){}storeOutputs(e){this.outputs.view!==void 0&&(e.length>this.outputs.view.length?this.outputs.view.set(e.subarray(0,this.outputs.view.length)):this.outputs.view.set(e))}getConstants(){if(this.constantIndices.lengthInElements!==0)return decodeConstants(this.constantIndices.view,this.constants.view)}getLookups(){if(this.lookupIndices.lengthInElements!==0)return decodeLookups(this.lookupIndices.view,this.lookups.view)}getElapsedTime(){return this.extras.view[0]}storeElapsedTime(e){this.extras.view[0]=e}finalizeOutputs(e){this.outputs.view&&e.updateFromBuffer(this.outputs.view,e.seriesLength),e.runTimeInMillis=this.getElapsedTime()}updateFromParams(e,r,s){const t=e.length,n=r.varIds.length*r.seriesLength;let A;const i=r.varSpecs;i!==void 0&&i.length>0?A=getEncodedVarIndicesLength(i):A=0;let a,f;if(s?.constants!==void 0&&s.constants.length>0){for(const I of s.constants)resolveVarRef(this.listing,I.varRef,"constant");const g=getEncodedConstantBufferLengths(s.constants);a=g.constantsLength,f=g.constantIndicesLength}else a=0,f=0;let c,m;if(s?.lookups!==void 0&&s.lookups.length>0){for(const I of s.lookups)resolveVarRef(this.listing,I.varRef,"lookup");const g=getEncodedLookupBufferLengths(s.lookups);c=g.lookupsLength,m=g.lookupIndicesLength}else c=0,m=0;let C=0;function h(g,I){const w=C,R=g==="float64"?Float64Array.BYTES_PER_ELEMENT:Int32Array.BYTES_PER_ELEMENT,k=Math.round(I*R),q=Math.ceil(k/8)*8;return C+=q,w}const S=h("int32",headerLengthInElements),F=h("float64",extrasLengthInElements),N=h("float64",t),D=h("float64",n),G=h("int32",A),z=h("float64",a),v=h("int32",f),E=h("float64",c),b=h("int32",m),_=C;if(this.encoded===void 0||this.encoded.byteLength<_){const g=Math.ceil(_*1.2);this.encoded=new ArrayBuffer(g),this.header.update(this.encoded,S,headerLengthInElements)}const Q=this.header.view;let p=0;Q[p++]=F,Q[p++]=extrasLengthInElements,Q[p++]=N,Q[p++]=t,Q[p++]=D,Q[p++]=n,Q[p++]=G,Q[p++]=A,Q[p++]=z,Q[p++]=a,Q[p++]=v,Q[p++]=f,Q[p++]=E,Q[p++]=c,Q[p++]=b,Q[p++]=m,this.inputs.update(this.encoded,N,t),this.extras.update(this.encoded,F,extrasLengthInElements),this.outputs.update(this.encoded,D,n),this.outputIndices.update(this.encoded,G,A),this.constants.update(this.encoded,z,a),this.constantIndices.update(this.encoded,v,f),this.lookups.update(this.encoded,E,c),this.lookupIndices.update(this.encoded,b,m);const l=this.inputs.view;for(let g=0;g<e.length;g++){const I=e[g];typeof I=="number"?l[g]=I:l[g]=I.get()}this.outputIndices.view&&encodeVarIndices(i,this.outputIndices.view),f>0&&encodeConstants(s.constants,this.constantIndices.view,this.constants.view),m>0&&encodeLookups(s.lookups,this.lookupIndices.view,this.lookups.view)}updateFromEncodedBuffer(e){const r=headerLengthInElements*Int32Array.BYTES_PER_ELEMENT;if(e.byteLength<r)throw new Error("Buffer must be long enough to contain header section");this.encoded=e,this.header.update(this.encoded,0,headerLengthInElements);const t=this.header.view;let n=0;const A=t[n++],i=t[n++],a=t[n++],f=t[n++],c=t[n++],m=t[n++],C=t[n++],h=t[n++],S=t[n++],F=t[n++],N=t[n++],D=t[n++],G=t[n++],z=t[n++],v=t[n++],E=t[n++],b=i*Float64Array.BYTES_PER_ELEMENT,_=f*Float64Array.BYTES_PER_ELEMENT,Q=m*Float64Array.BYTES_PER_ELEMENT,p=h*Int32Array.BYTES_PER_ELEMENT,l=F*Float64Array.BYTES_PER_ELEMENT,g=D*Int32Array.BYTES_PER_ELEMENT,I=z*Float64Array.BYTES_PER_ELEMENT,w=E*Int32Array.BYTES_PER_ELEMENT,R=r+b+_+Q+p+l+g+I+w;if(e.byteLength<R)throw new Error("Buffer must be long enough to contain sections declared in header");this.extras.update(this.encoded,A,i),this.inputs.update(this.encoded,a,f),this.outputs.update(this.encoded,c,m),this.outputIndices.update(this.encoded,C,h),this.constants.update(this.encoded,S,F),this.constantIndices.update(this.encoded,N,D),this.lookups.update(this.encoded,G,z),this.lookupIndices.update(this.encoded,v,E)}},_NA_=-Number.MAX_VALUE,JsModelLookup=class{constructor(e,r){if(r&&r.length<e*2)throw new Error(`Lookup data array length must be >= 2*size (length=${r.length} size=${e}`);this.originalData=r,this.originalSize=e,this.dynamicData=void 0,this.dynamicSize=0,this.activeData=this.originalData,this.activeSize=this.originalSize,this.lastInput=Number.MAX_VALUE,this.lastHitIndex=0}setData(e,r){if(r){if(r.length<e*2)throw new Error(`Lookup data array length must be >= 2*size (length=${r.length} size=${e}`);const s=e*2;if((this.dynamicData===void 0||s>this.dynamicData.length)&&(this.dynamicData=new Float64Array(s)),this.dynamicSize=e,e>0){const t=r.subarray(0,s);this.dynamicData.set(t)}this.activeData=this.dynamicData,this.activeSize=this.dynamicSize}else this.activeData=this.originalData,this.activeSize=this.originalSize;this.invertedData=void 0,this.lastInput=Number.MAX_VALUE,this.lastHitIndex=0}getValueForX(e,r){return this.getValue(e,!1,r)}getValueForY(e){if(this.invertedData===void 0){const r=this.activeSize*2,s=this.activeData,t=Array(r);for(let n=0;n<r;n+=2)t[n]=s[n+1],t[n+1]=s[n];this.invertedData=t}return this.getValue(e,!0,"interpolate")}getValue(e,r,s){if(this.activeSize===0)return _NA_;const t=r?this.invertedData:this.activeData,n=this.activeSize*2,A=!r;let i;A&&e>=this.lastInput?i=this.lastHitIndex:i=0;for(let a=i;a<n;a+=2){const f=t[a];if(f>=e){if(A&&(this.lastInput=e,this.lastHitIndex=a),a===0||f===e)return t[a+1];switch(s){default:case"interpolate":{const c=t[a-2],m=t[a-1],C=t[a+1],h=f-c,S=C-m;return m+S/h*(e-c)}case"forward":return t[a+1];case"backward":return t[a-1]}}}return A&&(this.lastInput=e,this.lastHitIndex=n),t[n-1]}getValueForGameTime(e,r){if(this.activeSize<=0)return r;const s=this.activeData[0];return e<s?r:this.getValue(e,!1,"backward")}getValueBetweenTimes(e,r){if(this.activeSize===0)return _NA_;const s=this.activeData,t=this.activeSize*2;switch(r){case"forward":{e=Math.floor(e);for(let n=0;n<t;n+=2)if(s[n]>=e)return s[n+1];return s[t-1]}case"backward":{e=Math.floor(e);for(let n=2;n<t;n+=2)if(s[n]>=e)return s[n-1];return t>=4?s[t-3]:s[1]}default:{if(e-Math.floor(e)>0){let n=`GET DATA BETWEEN TIMES was called with an input value (${e}) that has a fractional part. `;throw n+="When mode is 0 (interpolate) and the input value is not a whole number, Vensim produces unexpected ",n+="results that may differ from those produced by SDEverywhere.",new Error(n)}for(let n=2;n<t;n+=2){const A=s[n];if(A>=e){const i=s[n-2],a=s[n-1],f=s[n+1],c=A-i,m=f-a;return a+m/c*(e-i)}}return s[t-1]}}}},EPSILON=1e-6;function getJsModelFunctions(){let e;const r=new Map,s=new Map;return{setContext(t){e=t},ABS(t){return Math.abs(t)},ARCCOS(t){return Math.acos(t)},ARCSIN(t){return Math.asin(t)},ARCTAN(t){return Math.atan(t)},COS(t){return Math.cos(t)},EXP(t){return Math.exp(t)},GAME(t,n){return t?t.getValueForGameTime(e.currentTime,n):n},INTEG(t,n){return t+n*e.timeStep},INTEGER(t){return Math.trunc(t)},LN(t){return Math.log(t)},MAX(t,n){return Math.max(t,n)},MIN(t,n){return Math.min(t,n)},MODULO(t,n){return t%n},POW(t,n){return Math.pow(t,n)},POWER(t,n){return Math.pow(t,n)},PULSE(t,n){return pulse(e,t,n)},PULSE_TRAIN(t,n,A,i){const a=Math.floor((i-t)/A);for(let f=0;f<=a;f++)if(e.currentTime<=i&&pulse(e,t+f*A,n))return 1;return 0},QUANTUM(t,n){return n<=0?t:n*Math.trunc(t/n)},RAMP(t,n,A){return e.currentTime>n?e.currentTime<A||n>A?t*(e.currentTime-n):t*(A-n):0},SIN(t){return Math.sin(t)},SQRT(t){return Math.sqrt(t)},STEP(t,n){return e.currentTime+e.timeStep/2>n?t:0},TAN(t){return Math.tan(t)},VECTOR_SORT_ORDER(t,n,A){if(n>t.length)throw new Error(`VECTOR SORT ORDER input vector length (${t.length}) must be >= size (${n})`);let i=s.get(n);if(i===void 0){i=Array(n);for(let c=0;c<n;c++)i[c]={x:0,ind:0};s.set(n,i)}let a=r.get(n);a===void 0&&(a=Array(n),r.set(n,a));for(let c=0;c<n;c++)i[c].x=t[c],i[c].ind=c;const f=A>0?1:-1;i.sort((c,m)=>{let C;return c.x<m.x?C=-1:c.x>m.x?C=1:C=0,C*f});for(let c=0;c<n;c++)a[c]=i[c].ind;return a},XIDZ(t,n,A){return Math.abs(n)<EPSILON?A:t/n},ZIDZ(t,n){return Math.abs(n)<EPSILON?0:t/n},createLookup(t,n){return new JsModelLookup(t,n)},LOOKUP(t,n){return t?t.getValueForX(n,"interpolate"):_NA_},LOOKUP_FORWARD(t,n){return t?t.getValueForX(n,"forward"):_NA_},LOOKUP_BACKWARD(t,n){return t?t.getValueForX(n,"backward"):_NA_},LOOKUP_INVERT(t,n){return t?t.getValueForY(n):_NA_},WITH_LOOKUP(t,n){return n?n.getValueForX(t,"interpolate"):_NA_},GET_DATA_BETWEEN_TIMES(t,n,A){let i;return A>=1?i="forward":A<=-1?i="backward":i="interpolate",t?t.getValueBetweenTimes(n,i):_NA_}}}function pulse(e,r,s){const t=e.currentTime+e.timeStep/2;return s===0&&(s=e.timeStep),t>r&&t<r+s?1:0}var isWeb;function perfNow(){return isWeb===void 0&&(isWeb=typeof self<"u"&&self?.performance!==void 0),isWeb?self.performance.now():process==null?void 0:process.hrtime()}function perfElapsed(e){if(isWeb)return self.performance.now()-e;{const r=process.hrtime(e);return(r[0]*1e9+r[1])/1e6}}var BaseRunnableModel=class{constructor(e){this.startTime=e.startTime,this.endTime=e.endTime,this.saveFreq=e.saveFreq,this.numSavePoints=e.numSavePoints,this.outputVarIds=e.outputVarIds,this.modelListing=e.modelListing,this.onRunModel=e.onRunModel}runModel(e){var r;let s=e.getInputs();s===void 0&&(e.copyInputs(this.inputs,f=>(this.inputs=new Float64Array(f),this.inputs)),s=this.inputs);let t=e.getOutputIndices();t===void 0&&e.getOutputIndicesLength()>0&&(e.copyOutputIndices(this.outputIndices,f=>(this.outputIndices=new Int32Array(f),this.outputIndices)),t=this.outputIndices);const n=e.getOutputsLength();(this.outputs===void 0||this.outputs.length<n)&&(this.outputs=new Float64Array(n));const A=this.outputs,i=perfNow();(r=this.onRunModel)==null||r.call(this,s,A,{outputIndices:t,constants:e.getConstants(),lookups:e.getLookups()});const a=perfElapsed(i);e.storeOutputs(A),e.storeElapsedTime(a)}terminate(){}};function initJsModel(e){let r=e.getModelFunctions();r===void 0&&(r=getJsModelFunctions(),e.setModelFunctions(r));const s=e.getInitialTime(),t=e.getFinalTime(),n=e.getTimeStep(),A=e.getSaveFreq(),i=Math.round((t-s)/A)+1;return new BaseRunnableModel({startTime:s,endTime:t,saveFreq:A,numSavePoints:i,outputVarIds:e.outputVarIds,modelListing:e.modelListing,onRunModel:(a,f,c)=>{runJsModel(e,s,t,n,A,i,a,f,c?.outputIndices,c?.constants,c?.lookups)}})}function runJsModel(e,r,s,t,n,A,i,a,f,c,m,C){let h=r;e.setTime(h);const S={timeStep:t,currentTime:h};if(e.getModelFunctions().setContext(S),e.initConstants(),c!==void 0)for(const v of c)e.setConstant(v.varRef.varSpec,v.value);if(m!==void 0)for(const v of m)e.setLookup(v.varRef.varSpec,v.points);i?.length>0&&e.setInputs(v=>i[v]),e.initLevels();const F=Math.round((s-r)/t),N=s;let D=0,G=0,z=0;for(;D<=F;){if(e.evalAux(),h%n<1e-6){z=0;const v=E=>{const b=z*A+G;a[b]=h<=N?E:void 0,z++};if(f!==void 0){let E=0;const b=f[E++];for(let _=0;_<b;_++){const Q=f[E++],p=f[E++];let l;p>0&&(l=f.subarray(E,E+p),E+=p);const g={varIndex:Q,subscriptIndices:l};e.storeOutput(g,v)}}else e.storeOutputs(v);G++}if(D===F)break;e.evalLevels(),h+=t,e.setTime(h),S.currentTime=h,D++}}var WasmBuffer=class{constructor(e,r,s,t){this.wasmModule=e,this.numElements=r,this.byteOffset=s,this.heapArray=t}getArrayView(){return this.heapArray}getAddress(){return this.byteOffset}dispose(){var e,r;this.heapArray&&((r=(e=this.wasmModule)._free)==null||r.call(e,this.byteOffset),this.numElements=void 0,this.heapArray=void 0,this.byteOffset=void 0)}};function createInt32WasmBuffer(e,r){const t=r*4,n=e._malloc(t),A=n/4,i=e.HEAP32.subarray(A,A+r);return new WasmBuffer(e,r,n,i)}function createFloat64WasmBuffer(e,r){const t=r*8,n=e._malloc(t),A=n/8,i=e.HEAPF64.subarray(A,A+r);return new WasmBuffer(e,r,n,i)}var WasmModel=class{constructor(e){this.wasmModule=e;function r(s){return e.cwrap(s,"number",[])()}this.startTime=r("getInitialTime"),this.endTime=r("getFinalTime"),this.saveFreq=r("getSaveper"),this.numSavePoints=Math.round((this.endTime-this.startTime)/this.saveFreq)+1,this.outputVarIds=e.outputVarIds,this.modelListing=e.modelListing,this.wasmSetLookup=e.cwrap("setLookup",null,["number","number","number","number"]),this.wasmRunModel=e.cwrap("runModelWithBuffers",null,["number","number","number","number","number","number"])}runModel(e){var r,s,t,n,A,i,a,f,c,m,C;const h=e.getLookups();if(h!==void 0)for(const E of h){const b=E.varRef.varSpec,_=((r=b.subscriptIndices)==null?void 0:r.length)||0;let Q;_>0?((this.lookupSubIndicesBuffer===void 0||this.lookupSubIndicesBuffer.numElements<_)&&((s=this.lookupSubIndicesBuffer)==null||s.dispose(),this.lookupSubIndicesBuffer=createInt32WasmBuffer(this.wasmModule,_)),this.lookupSubIndicesBuffer.getArrayView().set(b.subscriptIndices),Q=this.lookupSubIndicesBuffer.getAddress()):Q=0;let p,l;if(E.points){const I=E.points.length;(this.lookupDataBuffer===void 0||this.lookupDataBuffer.numElements<I)&&((t=this.lookupDataBuffer)==null||t.dispose(),this.lookupDataBuffer=createFloat64WasmBuffer(this.wasmModule,I)),this.lookupDataBuffer.getArrayView().set(E.points),p=this.lookupDataBuffer.getAddress(),l=I/2}else p=0,l=0;const g=b.varIndex;this.wasmSetLookup(g,Q,p,l)}let S,F;const N=e.getConstants();if(N!==void 0&&N.length>0){let E=1;for(const g of N){const I=((n=g.varRef.varSpec.subscriptIndices)==null?void 0:n.length)||0;E+=2+I}(this.constantIndicesBuffer===void 0||this.constantIndicesBuffer.numElements<E)&&((A=this.constantIndicesBuffer)==null||A.dispose(),this.constantIndicesBuffer=createInt32WasmBuffer(this.wasmModule,E));const b=N.length;(this.constantValuesBuffer===void 0||this.constantValuesBuffer.numElements<b)&&((i=this.constantValuesBuffer)==null||i.dispose(),this.constantValuesBuffer=createFloat64WasmBuffer(this.wasmModule,b));const _=this.constantIndicesBuffer.getArrayView(),Q=this.constantValuesBuffer.getArrayView();let p=0,l=0;_[p++]=b;for(const g of N){const I=g.varRef.varSpec,w=((a=I.subscriptIndices)==null?void 0:a.length)||0;if(_[p++]=I.varIndex,_[p++]=w,w>0)for(let R=0;R<w;R++)_[p++]=I.subscriptIndices[R];Q[l++]=g.value}S=this.constantIndicesBuffer,F=this.constantValuesBuffer}else S=void 0,F=void 0;e.copyInputs((f=this.inputsBuffer)==null?void 0:f.getArrayView(),E=>{var b;return(b=this.inputsBuffer)==null||b.dispose(),this.inputsBuffer=createFloat64WasmBuffer(this.wasmModule,E),this.inputsBuffer.getArrayView()});let D;e.getOutputIndicesLength()>0?(e.copyOutputIndices((c=this.outputIndicesBuffer)==null?void 0:c.getArrayView(),E=>{var b;return(b=this.outputIndicesBuffer)==null||b.dispose(),this.outputIndicesBuffer=createInt32WasmBuffer(this.wasmModule,E),this.outputIndicesBuffer.getArrayView()}),D=this.outputIndicesBuffer):D=void 0;const G=e.getOutputsLength();(this.outputsBuffer===void 0||this.outputsBuffer.numElements<G)&&((m=this.outputsBuffer)==null||m.dispose(),this.outputsBuffer=createFloat64WasmBuffer(this.wasmModule,G));const z=perfNow();this.wasmRunModel(((C=this.inputsBuffer)==null?void 0:C.getAddress())||0,0,this.outputsBuffer.getAddress(),D?.getAddress()||0,F?.getAddress()||0,S?.getAddress()||0);const v=perfElapsed(z);e.storeOutputs(this.outputsBuffer.getArrayView()),e.storeElapsedTime(v)}terminate(){var e,r,s,t,n;(e=this.inputsBuffer)==null||e.dispose(),this.inputsBuffer=void 0,(r=this.outputsBuffer)==null||r.dispose(),this.outputsBuffer=void 0,(s=this.outputIndicesBuffer)==null||s.dispose(),this.outputIndicesBuffer=void 0,(t=this.constantValuesBuffer)==null||t.dispose(),this.constantValuesBuffer=void 0,(n=this.constantIndicesBuffer)==null||n.dispose(),this.constantIndicesBuffer=void 0}};function initWasmModel(e){return new WasmModel(e)}function createRunnableModel(e){switch(e.kind){case"js":return initJsModel(e);case"wasm":return initWasmModel(e);default:throw new Error("Unable to identify generated model kind")}}var initGeneratedModel,runnableModel,params=new BufferedRunModelParams,modelWorker={async initModel(){if(runnableModel)throw new Error("RunnableModel was already initialized");const e=await initGeneratedModel();return runnableModel=createRunnableModel(e),{outputVarIds:runnableModel.outputVarIds,modelListing:runnableModel.modelListing,startTime:runnableModel.startTime,endTime:runnableModel.endTime,saveFreq:runnableModel.saveFreq,outputRowLength:runnableModel.numSavePoints}},runModel(e){if(!runnableModel)throw new Error("RunnableModel must be initialized before running the model in worker");return params.updateFromEncodedBuffer(e),runnableModel.runModel(params),Transfer(e)}};function exposeModelWorker(e){initGeneratedModel=e,expose(modelWorker)}var Module=(()=>{var e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return(function(r={}){var s=r,t,n;s.ready=new Promise((o,u)=>{t=o,n=u}),s.kind="wasm",s.outputVarIds=["_urban_green_status","_urban_population"],s.modelListing=void 0;var A=Object.assign({},s),i=typeof window=="object",a=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var f="";function c(o){return f+o}var m;(i||a)&&(a?f=self.location.href:typeof document<"u"&&document.currentScript&&(f=document.currentScript.src),e&&(f=e),f.startsWith("blob:")?f="":f=f.substr(0,f.replace(/[?#].*/,"").lastIndexOf("/")+1),a&&(m=o=>{var u=new XMLHttpRequest;return u.open("GET",o,!1),u.responseType="arraybuffer",u.send(null),new Uint8Array(u.response)}));var C=console.log.bind(console),h=console.error.bind(console);Object.assign(s,A),A=null;var S;function F(o){for(var u=atob(o),d=new Uint8Array(u.length),B=0;B<u.length;++B)d[B]=u.charCodeAt(B);return d}function N(o){if(P(o))return F(o.slice(V.length))}var D,G=!1,z,v,E;function b(){var o=D.buffer;z=new Int8Array(o),v=new Uint8Array(o),E=new Uint32Array(o)}var _=[],Q=[],p=[];function l(){X(_)}function g(){X(Q)}function I(){X(p)}function w(o){Q.unshift(o)}var R=0,k=null;function q(o){R++}function j(o){if(R--,R==0&&k){var u=k;k=null,u()}}function K(o){o="Aborted("+o+")",h(o),G=!0,o+=". Build with -sASSERTIONS for more info.";var u=new WebAssembly.RuntimeError(o);throw n(u),u}var V="data:application/octet-stream;base64,",P=o=>o.startsWith(V),Z;Z="data:application/octet-stream;base64,AGFzbQEAAAABWQ9gAX8Bf2AAAGADf39/AX9gAAF8YAN/f38AYAF/AGAEf39/fwF/YAV/f39/fwF/YAF8AXxgAn98AXxgAXwAYAZ/f39/f38AYAR/f39/AGAAAX9gA39+fwF+Ah8FAWEBYQAGAWEBYgAHAWEBYwAAAWEBZAAAAWEBZQAEAx0cAQIABAEBAAABCAIJAAoBCwMDAwwABQ0FAA4CAAQFAXABBAQFBgEBggKCAgYIAX8BQfCcBAsHNQ0BZgIAAWcACQFoABgBaQAXAWoAFgFrABUBbAAUAW0AHQFuABwBbwEAAXAAGwFxABoBcgAZCQkBAEEBCwMgHx4KlCocJgBBuBQtAABFBEAQExANQcAUQYgTKwMAOQMAEApBuBRBAToAAAsLlwMBBH8gASAAQQRqIgRqQQFrQQAgAWtxIgUgAmogACAAKAIAIgFqQQRrTQR/IAAoAgQiAyAAKAIIIgY2AgggBiADNgIEIAQgBUcEQCAAIABBBGsoAgBBfnFrIgMgBSAEayIEIAMoAgBqIgU2AgAgAyAFQXxxakEEayAFNgIAIAAgBGoiACABIARrIgE2AgALAn8gASACQRhqTwRAIAAgAmpBCGoiAyABIAJrQQhrIgE2AgAgAyABQXxxakEEayABQQFyNgIAIAMCfyADKAIAQQhrIgFB/wBNBEAgAUEDdkEBawwBCyABZyEEIAFBHSAEa3ZBBHMgBEECdGtB7gBqIAFB/x9NDQAaQT8gAUEeIARrdkECcyAEQQF0a0HHAGoiASABQT9PGwsiAUEEdCIEQeAUajYCBCADIARB6BRqIgQoAgA2AgggBCADNgIAIAMoAgggAzYCBEHoHEHoHCkDAEIBIAGthoQ3AwAgACACQQhqIgE2AgAgACABQXxxagwBCyAAIAFqC0EEayABNgIAIABBBGoFIAMLCxUAIABFBEBBAA8LQdAUIAA2AgBBfwsxACABAn8gAigCTEEASARAIAAgASACEA8MAQsgACABIAIQDwsiAEYEQA8LIAAgAW4aCzoBA38DQCAAQQR0IgFB5BRqIAFB4BRqIgI2AgAgAUHoFGogAjYCACAAQQFqIgBBwABHDQALQTAQDBoLtgEBAnxB6BNBkBMrAwA5AwBB8BNBwBMrAwBB4BMrAwAiAKI5AwBB+BNByBMrAwBB2BMrAwAiAaJEAAAAAAAA8D8gAaGiOQMAQYAUQfQSKAIAIAAQECIAOQMAQYgUIABB0BMrAwCiQbATKwMAokHYEysDACIAojkDAEGQFEH4EigCACAAEBAiADkDAEGYFCAAQbgTKwMAokGoEysDAKJB4BMrAwAiAKJEAAAAAAAA8D8gAKGiOQMAC44EAgh/An5BCCEDAkACQANAIAMgA0EBa3EgAEFHS3INASADQQggA0EISyIIGyEDQegcKQMAIgkCf0EIIABBA2pBfHEgAEEITRsiAEH/AE0EQCAAQQN2QQFrDAELIABBHSAAZyIBa3ZBBHMgAUECdGtB7gBqIABB/x9NDQAaQT8gAEEeIAFrdkECcyABQQF0a0HHAGoiASABQT9PGwsiBK2IIgpQRQRAA0AgCiAKeiIKiCEJAn4gBCAKp2oiBEEEdCIBQegUaigCACIFIAFB4BRqIgZHBEAgBSADIAAQBiIHDQYgBSgCBCICIAUoAggiATYCCCABIAI2AgQgBSAGNgIIIAUgBigCBDYCBCAGIAU2AgQgBSgCBCAFNgIIIARBAWohBCAJQgGIDAELQegcQegcKQMAQn4gBK2JgzcDACAJQgGFCyIKQgBSDQALQegcKQMAIQkLQT8gCXmnayEGAkAgCVAEQEEAIQIMAQsgBkEEdCIBQegUaigCACECIAlCgICAgARUDQBB4wAhBCACIAFB4BRqIgFGDQADQCAERQ0BIAIgAyAAEAYiBw0EIARBAWshBCACKAIIIgIgAUcNAAsgASECCyAAIANBMGpBMCAIG2oQDA0ACyACRQ0AIAIgBkEEdEHgFGoiAUYNAANAIAIgAyAAEAYiBw0CIAIoAggiAiABRw0ACwtBACEHCyAHC/QDAQV/An9B4BIoAgAiAiAAQQdqQXhxIgFBB2pBeHEiA2ohAAJAIANBACAAIAJNG0UEQCAAPwBBEHRNDQEgABACDQELQdAUQTA2AgBBfwwBC0HgEiAANgIAIAILIgJBf0cEQCABIAJqIgBBBGtBEDYCACAAQRBrIgNBEDYCAAJAAn9B4BwoAgAiAQR/IAEoAggFQQALIAJGBEAgAiACQQRrKAIAQX5xayIEQQRrKAIAIQUgASAANgIIIAQgBUF+cWsiACAAKAIAakEEay0AAEEBcQRAIAAoAgQiASAAKAIIIgQ2AgggBCABNgIEIAAgAyAAayIBNgIADAMLIAJBEGsMAQsgAkEQNgIAIAIgADYCCCACIAE2AgQgAkEQNgIMQeAcIAI2AgAgAkEQagsiACADIABrIgE2AgALIAAgAUF8cWpBBGsgAUEBcjYCACAAAn8gACgCAEEIayIBQf8ATQRAIAFBA3ZBAWsMAQsgAUEdIAFnIgNrdkEEcyADQQJ0a0HuAGogAUH/H00NABpBPyABQR4gA2t2QQJzIANBAXRrQccAaiIBIAFBP08bCyIBQQR0IgNB4BRqNgIEIAAgA0HoFGoiAygCADYCCCADIAA2AgAgACgCCCAANgIEQegcQegcKQMAQgEgAa2GhDcDAAsgAkF/RwsmAEHAFEGIEysDADkDAEHYE0GgEysDADkDAEHgE0GYEysDADkDAAukAQMBfAF+AX8gAL0iAkI0iKdB/w9xIgNBsghNBHwgA0H9B00EQCAARAAAAAAAAAAAog8LAnwgAJkiAEQAAAAAAAAwQ6BEAAAAAAAAMMOgIAChIgFEAAAAAAAA4D9kBEAgACABoEQAAAAAAADwv6AMAQsgACABoCIAIAFEAAAAAAAA4L9lRQ0AGiAARAAAAAAAAPA/oAsiAJogACACQgBTGwUgAAsL6AUBBX8CQCABIAIoAhAiAwR/IAMFAn8gAiACKAJIIgNBAWsgA3I2AkggAigCACIDQQhxBEAgAiADQSByNgIAQX8MAQsgAkIANwIEIAIgAigCLCIDNgIcIAIgAzYCFCACIAMgAigCMGo2AhBBAAsNASACKAIQCyACKAIUIgRrSwRAIAIgACABIAIoAiQRAgAPCwJAAkAgAUUgAigCUEEASHINACABIQUDQCAAIAVqIgNBAWstAABBCkcEQCAFQQFrIgUNAQwCCwsgAiAAIAUgAigCJBECACIEIAVJDQIgASAFayEBIAIoAhQhBAwBCyAAIQNBACEFCyAEIQACQCABQYAETwRAIAAgAyABEAQMAQsgACABaiEEAkAgACADc0EDcUUEQAJAIABBA3FFIAFFcg0AA0AgACADLQAAOgAAIANBAWohAyAAQQFqIgBBA3FFDQEgACAESQ0ACwsCQCAEQXxxIgZBwABJDQAgACAGQUBqIgdLDQADQCAAIAMoAgA2AgAgACADKAIENgIEIAAgAygCCDYCCCAAIAMoAgw2AgwgACADKAIQNgIQIAAgAygCFDYCFCAAIAMoAhg2AhggACADKAIcNgIcIAAgAygCIDYCICAAIAMoAiQ2AiQgACADKAIoNgIoIAAgAygCLDYCLCAAIAMoAjA2AjAgACADKAI0NgI0IAAgAygCODYCOCAAIAMoAjw2AjwgA0FAayEDIABBQGsiACAHTQ0ACwsgACAGTw0BA0AgACADKAIANgIAIANBBGohAyAAQQRqIgAgBkkNAAsMAQsgBEEESQ0AIAAgBEEEayIGSw0AA0AgACADLQAAOgAAIAAgAy0AAToAASAAIAMtAAI6AAIgACADLQADOgADIANBBGohAyAAQQRqIgAgBk0NAAsLIAAgBEkEQANAIAAgAy0AADoAACADQQFqIQMgAEEBaiIAIARHDQALCwsgAiACKAIUIAFqNgIUIAEgBWohBAsgBAvZAQICfAR/RP///////+//IQICQCAARQ0AIAAoAgQiBEUNACAEQQF0IQQgACgCACEHIAEgACsDKGYEQCAAKAIwIQULIAQgBUsEQANAIAEgByAFQQN0aiIGKwMAIgJlBEAgACAFNgIwIAAgATkDKCAFQQAgASACYhtFBEAgBisDCA8LIAYrAwggBkEIaysDACIDoSACIAZBEGsrAwAiAqGjIAEgAqGiIAOgDwsgBUECaiIFIARJDQALCyAAIAQ2AjAgACABOQMoIAcgBEEDdGpBCGsrAwAhAgsgAgtSAQF/QTgQCyIBQQA6ABAgAUEWNgIMIAFCADcCFCABQRY2AgQgASAANgIAIAEgADYCCCABQQA2AjAgAUL/////////9/8ANwMoIAFCADcCHCABCzcBAX9BoBQoAgBBqBQoAgAiAUGsFCgCAGxBA3RqQbAUKAIAQQN0aiAAOQMAQagUIAFBAWo2AgAL9gEBAX9BiBNCgICAgICA5M/AADcDAEGAE0KAgICAgICB0MAANwMAQZATQoCAgICAgIDYPzcDAEGYE0Kas+bMmbPm5D83AwBBoBNCgICAgICAgPA/NwMAQagTQoCAgICAgICAwAA3AwBBsBNCmrPmzJmz5tw/NwMAQbgTQoCAgICAgID4PzcDAEHAE0KAgICAgICA4D83AwBByBNCgICAgICAgIDAADcDAEHQE0KAgICAgICA+D83AwBB8BItAABFBEBB9BJBkAwQETYCAEHwDhARIQBB8BJBAToAAEH4EiAANgIAC0HxEi0AAEUEQEHxEkEBOgAACwuvCQMCfAR+Bn9BpBQgAzYCAEGgFCACNgIAEBMgBEUgBUVyIgNFBEBBACECAkAgAw0AIAUoAgAiDUUNAEEBIQMDQCAFIANBAnRqIgwoAgAaIAwoAgQhDiAEIAJBA3RqKwMAGkGACEGpAUGADCgCABAIIA4gA0ECamohAyACQQFqIgIgDUcNAAsLCyAABEACQCABRQRAQcgTIAArAwA5AwAMAQsgASgCACICBEBBACEBA0BByBMgACABQQN0aisDADkDACABQQFqIgEgAkcNAAsLCwsQDUHAFEGIEysDACIGOQMAQbAUQQA2AgBBtBRBADYCAAJAAn9BgBMrAwAgBqFBkBMrAwCjEA4iBplEAAAAAAAA4EFjBEAgBqoMAQtBgICAgHgLIgNBAEgNAANAEAoCfEHAFCsDACEGAkACQEHoEysDACIHvSIKQgGGIghQDQAgBr0iC0I0iKdB/w9xIgBB/w9GDQAgB71C////////////AINCgYCAgICAgPj/AFQNAQsgBiAHoiIGIAajDAELIAggC0IBhiIJWgRAIAZEAAAAAAAAAACiIAYgCCAJURsMAQsgCkI0iKdB/w9xIQECfiAARQRAQQAhACALQgyGIghCAFkEQANAIABBAWshACAIQgGGIghCAFkNAAsLIAtBASAAa62GDAELIAtC/////////weDQoCAgICAgIAIhAshCAJ+IAFFBEBBACEBIApCDIYiCUIAWQRAA0AgAUEBayEBIAlCAYYiCUIAWQ0ACwsgCkEBIAFrrYYMAQsgCkL/////////B4NCgICAgICAgAiECyEKIAAgAUoEQANAAkAgCCAKfSIJQgBTDQAgCSIIQgBSDQAgBkQAAAAAAAAAAKIMAwsgCEIBhiEIIABBAWsiACABSg0ACyABIQALAkAgCCAKfSIJQgBTDQAgCSIIQgBSDQAgBkQAAAAAAAAAAKIMAQsCQCAIQv////////8HVgRAIAghCQwBCwNAIABBAWshACAIQoCAgICAgIAEVCEPIAhCAYYiCSEIIA8NAAsLIAtCgICAgICAgICAf4MgCUKAgICAgICACH0gAK1CNIaEIAlBASAAa62IIABBAEobhL8LRI3ttaD3xrA+YwRAQawUKAIARQRAQawUAn9BgBMrAwBBiBMrAwChIAejEA4iBkQAAAAAAADwQWMgBkQAAAAAAAAAAGZxBEAgBqsMAQtBAAtBAWo2AgALQagUQQA2AgACQEGkFCgCACIABEAgACgCACIBRQ0BQQAhAkEBIQADQEGkFCgCACAAQQJ0aiIFKAIAGiAAQQJqIREgBSgCBCEQQc4KQbABQYAMKAIAEAggESAQaiEAIAJBAWoiAiABRw0ACwwBC0HYEysDABASQeATKwMAEBILQbAUQbAUKAIAQQFqNgIAC0G0FCgCACADRg0BQdgTQfgTKwMAQYgUKwMAoUGQEysDACIGokHYEysDAKA5AwBB4BMgBkGYFCsDAEHwEysDAKGiQeATKwMAoDkDAEHAFEGQEysDAEHAFCsDAKA5AwBBtBRBtBQoAgAiAEEBajYCACAAIANIDQALC0GkFEEANgIAQaAUQQA2AgALCgAQBUHoEysDAAsKABAFQYATKwMACwoAEAVBiBMrAwALEABBqglBowFBgAwoAgAQCAsQACMAIABrQXBxIgAkACAACwYAIAAkAAsEACMAC8wCAQV/IAAEQCAAQQRrIgMoAgAiBCEBIAMhAiAAQQhrKAIAIgAgAEF+cSIARwRAIAIgAGsiAigCBCIBIAIoAggiBTYCCCAFIAE2AgQgACAEaiEBCyADIARqIgAoAgAiAyAAIANqQQRrKAIARwRAIAAoAgQiBCAAKAIIIgA2AgggACAENgIEIAEgA2ohAQsgAiABNgIAIAIgAUF8cWpBBGsgAUEBcjYCACACAn8gAigCAEEIayIAQf8ATQRAIABBA3ZBAWsMAQsgAGchAyAAQR0gA2t2QQRzIANBAnRrQe4AaiAAQf8fTQ0AGkE/IABBHiADa3ZBAnMgA0EBdGtBxwBqIgAgAEE/TxsLIgFBBHQiAEHgFGo2AgQgAiAAQegUaiIAKAIANgIIIAAgAjYCACACKAIIIAI2AgRB6BxB6BwpAwBCASABrYaENwMACwsGACAAEAsLRQECfyAAKAI8IQQjAEEQayIAJAAgBCABpyABQiCIpyACQf8BcSAAQQhqEAEQByECIAApAwghASAAQRBqJABCfyABIAIbC9YCAQh/IwBBIGsiAyQAIAMgACgCHCIENgIQIAAoAhQhBSADIAI2AhwgAyABNgIYIAMgBSAEayIBNgIUIAEgAmohBSADQRBqIQFBAiEHAn8CQAJAAkAgACgCPCABQQIgA0EMahAAEAcEQCABIQQMAQsDQCAFIAMoAgwiBkYNAiAGQQBIBEAgASEEDAQLIAEgBiABKAIEIghLIglBA3RqIgQgBiAIQQAgCRtrIgggBCgCAGo2AgAgAUEMQQQgCRtqIgEgASgCACAIazYCACAFIAZrIQUgACgCPCAEIgEgByAJayIHIANBDGoQABAHRQ0ACwsgBUF/Rw0BCyAAIAAoAiwiATYCHCAAIAE2AhQgACABIAAoAjBqNgIQIAIMAQsgAEEANgIcIABCADcDECAAIAAoAgBBIHI2AgBBACAHQQJGDQAaIAIgBCgCBGsLIQogA0EgaiQAIAoLCQAgACgCPBADCwv/CQcAQYAIC4IEVGhlIHNldENvbnN0YW50IGZ1bmN0aW9uIHdhcyBub3QgZW5hYmxlZCBmb3IgdGhlIGdlbmVyYXRlZCBtb2RlbC4gU2V0IHRoZSBjdXN0b21Db25zdGFudHMgcHJvcGVydHkgaW4gdGhlIHNwZWMvY29uZmlnIGZpbGUgdG8gYWxsb3cgZm9yIG92ZXJyaWRpbmcgY29uc3RhbnRzIGF0IHJ1bnRpbWUuCgBUaGUgc2V0TG9va3VwIGZ1bmN0aW9uIHdhcyBub3QgZW5hYmxlZCBmb3IgdGhlIGdlbmVyYXRlZCBtb2RlbC4gU2V0IHRoZSBjdXN0b21Mb29rdXBzIHByb3BlcnR5IGluIHRoZSBzcGVjL2NvbmZpZyBmaWxlIHRvIGFsbG93IGZvciBvdmVycmlkaW5nIGxvb2t1cHMgYXQgcnVudGltZS4KAFRoZSBzdG9yZU91dHB1dCBmdW5jdGlvbiB3YXMgbm90IGVuYWJsZWQgZm9yIHRoZSBnZW5lcmF0ZWQgbW9kZWwuIFNldCB0aGUgY3VzdG9tT3V0cHV0cyBwcm9wZXJ0eSBpbiB0aGUgc3BlYy9jb25maWcgZmlsZSB0byBhbGxvdyBmb3IgY2FwdHVyaW5nIGFyYml0cmFyeSB2YXJpYWJsZXMgYXQgcnVudGltZS4KAADQCABBmAwLuQV56SYxCKx8P5qZmZmZmak/ukkMAiuHhj+amZmZmZm5PzvfT42XbpI/MzMzMzMzwz8ZBFYOLbKdP5qZmZmZmck/qvHSTWIQqD8AAAAAAADQP9v5fmq8dLM/MzMzMzMz0z8QWDm0yHa+P2ZmZmZmZtY/sp3vp8ZLxz+amZmZmZnZP57vp8ZLN9E/zczMzMzM3D/+1HjpJjHYPwAAAAAAAOA/AAAAAAAA4D8AAAAAAADgPwAAAAAAAOA/mpmZmZmZ4T+BlUOLbOfjPzMzMzMzM+M/MQisHFpk5z/NzMzMzMzkP5MYBFYOLeo/ZmZmZmZm5j/+1HjpJjHsPwAAAAAAAOg/xSCwcmiR7T+amZmZmZnpP+XQItv5fu4/MzMzMzMz6z/fT42XbhLvP83MzMzMzOw/BoGVQ4ts7z9mZmZmZmbuP9nO91Pjpe8/AAAAAAAA8D8tsp3vp8bvPwAAAAAAAAAAeekmMQisfD+amZmZmZmpP7pJDAIrh4Y/mpmZmZmZuT8730+Nl26SPzMzMzMzM8M/GQRWDi2ynT+amZmZmZnJP6rx0k1iEKg/AAAAAAAA0D/b+X5qvHSzPzMzMzMzM9M/EFg5tMh2vj9mZmZmZmbWP7Kd76fGS8c/mpmZmZmZ2T+e76fGSzfRP83MzMzMzNw//tR46SYx2D8AAAAAAADgPwAAAAAAAOA/AAAAAAAA4D8AAAAAAADgP5qZmZmZmeE/gZVDi2zn4z8zMzMzMzPjPzEIrBxaZOc/zczMzMzM5D+TGARWDi3qP2ZmZmZmZuY//tR46SYx7D8AAAAAAADoP8UgsHJoke0/mpmZmZmZ6T/l0CLb+X7uPzMzMzMzM+s/30+Nl24S7z/NzMzMzMzsPwaBlUOLbO8/ZmZmZmZm7j/ZzvdT46XvPwAAAAAAAPA/LbKd76fG7z8FAEHcEQsBAQBB9BELCgIAAAADAAAAUAoAQYwSCwECAEGcEgsI//////////8AQeASCwNwDgE=",P(Z)||(Z=c(Z));function ae(o){var u=N(o);if(u)return u;if(m)return m(o);throw"both async and sync fetching of the wasm failed"}function ue(o){return Promise.resolve().then(()=>ae(o))}function le(o,u,d){return ue(o).then(B=>WebAssembly.instantiate(B,u)).then(d,B=>{h(`failed to asynchronously prepare wasm: ${B}`),K(B)})}function ce(o,u,d,B){return le(u,d,B)}function fe(){var o={a:ke};function u(B,L){return O=B.exports,D=O.f,b(),w(O.g),j(),O}q();function d(B){u(B.instance)}return ce(S,Z,o,d).catch(n),{}}var X=o=>{for(;o.length>0;)o.shift()(s)},ge=(o,u,d)=>v.copyWithin(o,u,u+d),de=o=>{K("OOM")},Ie=o=>{v.length,de()},Be=o=>52;function he(o,u,d,B,L){return 70}var me=[null,[],[]],te=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ne=(o,u,d)=>{for(var B=u+d,L=u;o[L]&&!(L>=B);)++L;if(L-u>16&&o.buffer&&te)return te.decode(o.subarray(u,L));for(var T="";u<L;){var M=o[u++];if(!(M&128)){T+=String.fromCharCode(M);continue}var y=o[u++]&63;if((M&224)==192){T+=String.fromCharCode((M&31)<<6|y);continue}var U=o[u++]&63;if((M&240)==224?M=(M&15)<<12|y<<6|U:M=(M&7)<<18|y<<12|U<<6|o[u++]&63,M<65536)T+=String.fromCharCode(M);else{var H=M-65536;T+=String.fromCharCode(55296|H>>10,56320|H&1023)}}return T},Ee=(o,u)=>{var d=me[o];u===0||u===10?((o===1?C:h)(ne(d,0)),d.length=0):d.push(u)},pe=(o,u)=>o?ne(v,o,u):"",Ce=(o,u,d,B)=>{for(var L=0,T=0;T<d;T++){var M=E[u>>2],y=E[u+4>>2];u+=8;for(var U=0;U<y;U++)Ee(o,v[M+U]);L+=y}return E[B>>2]=L,0},re=o=>{var u=s["_"+o];return u},Qe=(o,u)=>{z.set(o,u)},ve=o=>{for(var u=0,d=0;d<o.length;++d){var B=o.charCodeAt(d);B<=127?u++:B<=2047?u+=2:B>=55296&&B<=57343?(u+=4,++d):u+=3}return u},we=(o,u,d,B)=>{if(!(B>0))return 0;for(var L=d,T=d+B-1,M=0;M<o.length;++M){var y=o.charCodeAt(M);if(y>=55296&&y<=57343){var U=o.charCodeAt(++M);y=65536+((y&1023)<<10)|U&1023}if(y<=127){if(d>=T)break;u[d++]=y}else if(y<=2047){if(d+1>=T)break;u[d++]=192|y>>6,u[d++]=128|y&63}else if(y<=65535){if(d+2>=T)break;u[d++]=224|y>>12,u[d++]=128|y>>6&63,u[d++]=128|y&63}else{if(d+3>=T)break;u[d++]=240|y>>18,u[d++]=128|y>>12&63,u[d++]=128|y>>6&63,u[d++]=128|y&63}}return u[d]=0,d-L},be=(o,u,d)=>we(o,v,u,d),Me=o=>{var u=ve(o)+1,d=$(u);return be(o,d,u),d},ye=(o,u,d,B,L)=>{var T={string:W=>{var x=0;return W!=null&&W!==0&&(x=Me(W)),x},array:W=>{var x=$(W.length);return Qe(W,x),x}};function M(W){return u==="string"?pe(W):u==="boolean"?!!W:W}var y=re(o),U=[],H=0;if(B)for(var Y=0;Y<B.length;Y++){var ie=T[d[Y]];ie?(H===0&&(H=se()),U[Y]=ie(B[Y])):U[Y]=B[Y]}var ee=y(...U);function Se(W){return H!==0&&Ae(H),M(W)}return ee=Se(ee),ee},_e=(o,u,d,B)=>{var L=!d||d.every(M=>M==="number"||M==="boolean"),T=u!=="string";return T&&L&&!B?re(o):(...M)=>ye(o,u,d,M)},ke={e:ge,c:Ie,d:Be,b:he,a:Ce},O=fe();s._setLookup=(o,u,d,B)=>(s._setLookup=O.h)(o,u,d,B),s._getInitialTime=()=>(s._getInitialTime=O.i)(),s._getFinalTime=()=>(s._getFinalTime=O.j)(),s._getSaveper=()=>(s._getSaveper=O.k)(),s._runModelWithBuffers=(o,u,d,B,L,T)=>(s._runModelWithBuffers=O.l)(o,u,d,B,L,T),s._malloc=o=>(s._malloc=O.m)(o),s._free=o=>(s._free=O.n)(o);var se=()=>(se=O.p)(),Ae=o=>(Ae=O.q)(o),$=o=>($=O.r)(o);s.cwrap=_e;var J;k=function o(){J||oe(),J||(k=o)};function oe(){if(R>0||(l(),R>0))return;function o(){J||(J=!0,s.calledRun=!0,!G&&(g(),t(s),I()))}o()}return oe(),r.ready})})();exposeModelWorker(Module)})();\n';class BundleModelRunner{constructor(t,r,n){this.modelSpec=t,this.inputMap=r,this.modelRunner=n,this.inputs=[...r.values()].map(i=>i.value),this.outputs=n.createOutputs()}async runModelForScenario(t,r){return setInputsForScenario(this.inputMap,t),r[0]?.startsWith("ModelImpl")?this.runModelWithImplOutputs(r):this.runModelWithNormalOutputs(r)}async runModelWithNormalOutputs(t){this.outputs=await this.modelRunner.runModel(this.inputs,this.outputs);const r=this.outputs.runTimeInMillis,n=new Map;for(const i of t){const a=this.modelSpec.outputVars.get(i);if(a)if(a.sourceName===void 0){const l=this.outputs.getSeriesForVar(a.varId);l&&n.set(i,datasetFromPoints(l.points))}else console.error("Static data sources not yet handled in default model check bundle")}return{datasetMap:n,modelRunTime:r}}async runModelWithImplOutputs(t){const r=[];for(const m of t){const A=this.modelSpec.implVars.get(m);A&&r.push(A)}const n=this.outputs.startTime,i=this.outputs.endTime,a=this.outputs.saveFreq;let l=createImplOutputs(r,n,i,a);l=await this.modelRunner.runModel(this.inputs,l);const d=l.runTimeInMillis,p=new Map;for(const m of t){const A=this.modelSpec.implVars.get(m),x=l.getSeriesForVar(A.varId);x&&p.set(m,datasetFromPoints(x.points))}return{datasetMap:p,modelRunTime:d}}}function datasetFromPoints(e){const t=new Map;for(const r of e)r.y!==void 0&&t.set(r.x,r.y);return t}function createImplOutputs(e,t,r,n){const i=[],a=[];for(const d of e)i.push(d.varId),a.push({varIndex:d.varIndex,subscriptIndices:d.subscriptIndices});const l=new Outputs(i,t,r,n);return l.varSpecs=a,l}const VERSION=1;class BundleModel{constructor(t,r){this.modelSpec=t,this.bundleModelRunner=r}async getDatasetsForScenario(t,r){return this.bundleModelRunner.runModelForScenario(t,r)}}async function initBundleModel(e,t){const r=await spawnAsyncModelRunner({source:modelWorkerJs}),n=new BundleModelRunner(e,t,r);return new BundleModel(e,n)}function createBundle(){const e=getInputVars(inputSpecs),t=getOutputVars(outputSpecs),{implVars:r,implVarGroups:n}=getImplVars(encodedImplVars),i={modelSizeInBytes,dataSizeInBytes,inputVars:e,outputVars:t,implVars:r,implVarGroups:n};return{version:VERSION,modelSpec:i,initModel:()=>initBundleModel(i,e)}}const w=`# yaml-language-server: $schema=..\\..\\node_modules/@sdeverywhere/check-core/schema/check.schema.json

#
# This file contains "check" tests that exercise your model under different input
# scenarios.  For more guidance, consult this wiki page:
#   https://github.com/climateinteractive/SDEverywhere/wiki/Testing-and-Comparing-Your-Model
#

# NOTE: The following is an example of a simple check just to get you started.
# Replace "Some output" with the name of some variable you'd like to test.
- describe: Some output
  tests:
    - it: should be > 0 for all input scenarios
      scenarios:
        - preset: matrix
      datasets:
        - name: Some output
      predicates:
        - gt: 0
`,v=`# yaml-language-server: $schema=..\\..\\node_modules/@sdeverywhere/check-core/schema/comparison.schema.json

#
# This file contains definitions of custom comparison scenarios, which allow you to see
# how the behavior of the model compares to that of previous versions.  For more guidance,
# consult the following wiki page:
#   https://github.com/climateinteractive/SDEverywhere/wiki/Testing-and-Comparing-Your-Model
#

# NOTE: The following is an example of a custom scenario just to get you started.
# Replace "Some input" and "Another input" with the names of some variables you'd
# like to test.
- scenario:
    title: Custom scenario
    subtitle: gradual ramp-up
    with:
      - input: Some input
        at: 10
      - input: Another input
        at: 20
`,h=Object.assign({"../../../../../model/checks/checks.yaml":w}),f=[];for(const e of Object.keys(h)){const t=h[e];f.push(t)}const b=Object.assign({"../../../../../model/comparisons/comparisons.yaml":v}),k=Object.entries(b).map(e=>({kind:"yaml",filename:e[0],content:e[1]})),_=new Map([]);async function C(e,t,r){let n;if(e&&e.version===t.version){const i=[S(e,t),...k];n={baseline:{name:"baseline",bundle:e},thresholds:[1,5,10],specs:i,datasets:{renamedDatasetKeys:_}}}return{current:{name:r?.bundleNameR||"current",bundle:t},check:{tests:f},comparison:n}}function S(e,t){const r=new Set,n=(m,A)=>{for(const x of m.modelSpec.inputVars.values())r.add(x.inputId),A.set(x.inputId,x)},i=new Map,a=new Map;n(e,i),n(t,a);const l=[];l.push({kind:"scenario-with-all-inputs",id:"all_inputs_at_default",title:"All inputs",subtitle:"at default",position:"default"});const d=(m,A)=>{const x=i.get(m),I=a.get(m);if(x===void 0||I===void 0)return;if(A==="min"){if(x.minValue===x.defaultValue&&I.minValue===I.defaultValue)return}else if(x.maxValue===x.defaultValue&&I.maxValue===I.defaultValue)return;const P=I||x,q=P.relatedItem?.locationPath,F=q?q[q.length-1]:P.varName;l.push({kind:"scenario-with-inputs",id:`id_${m}_at_${A}`,title:F,subtitle:`at ${A}`,inputs:[{kind:"input-at-position",inputName:`id ${m}`,position:A}]})},p=[...r];for(const m of p)d(m,"min"),d(m,"max");return{scenarios:l,scenarioGroups:[],viewGroups:[]}}async function initForProduction(){const e='{"date":"2026-02-18T16:29:13.675Z","elapsed":80.37702400000035,"checkSummary":{"predicateSummaries":[]}}';let t;t=JSON.parse(e);const r=createBundle();let n;const i=createBundle$1();i.version===r.version&&(n=i);const l=await C(n,r,{bundleNameR:"main"});rp(l,{suiteSummary:t})}async function initBundlesAndUI(){const e=document.getElementById("app-shell-container");for(;e.firstChild;)e.removeChild(e.firstChild);await initForProduction()}initOverlay();initBundlesAndUI()});export default Zy();
